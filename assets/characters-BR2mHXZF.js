var Fh=n=>{throw TypeError(n)};var wu=(n,e,t)=>e.has(n)||Fh("Cannot "+t);var j=(n,e,t)=>(wu(n,e,"read from private field"),t?t.call(n):e.get(n)),qe=(n,e,t)=>e.has(n)?Fh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),De=(n,e,t,r)=>(wu(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ue=(n,e,t)=>(wu(n,e,"access private method"),t);import{c as fp,S as pp,p as Uh,r as Xt,s as Yo,a as Do,n as Jo,i as Gu,b as jh,t as wy,f as Ay,d as Sy,e as Bh,g as Na,h as $h,j as Cy,k as F,l as mp,u as Uc,_ as jc,m as K,B as Ry,o as Ot,R as zh,q as Py,v as ky,P as xy,w as Vy,x as Ne,y as Oy,T as Dy,C as Ny,z as My,X as Ly,A as Fy,D as Uy,E as jy,O as By,F as $y,G as zy,H as Hy,I as qy,J as Wy}from"./index-B5kgDl2q.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=[["path",{d:"M22 12a1 1 0 0 1-10 0 1 1 0 0 0-10 0",key:"1lzz15"}],["path",{d:"M7 20.7a1 1 0 1 1 5-8.7 1 1 0 1 0 5-8.6",key:"1gnrpi"}],["path",{d:"M7 3.3a1 1 0 1 1 5 8.6 1 1 0 1 0 5 8.6",key:"u9yy5q"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gp=fp("loader-pinwheel",Gy);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Qy=fp("square-pen",Ky);var Pt,Ee,qi,wt,Cr,ms,Zn,Yn,Wi,gs,vs,Rr,Pr,Jn,ys,Ve,ii,Ku,Qu,Zu,Yu,Ju,Xu,ec,vp,hp,Zy=(hp=class extends pp{constructor(e,t){super();qe(this,Ve);qe(this,Pt);qe(this,Ee);qe(this,qi);qe(this,wt);qe(this,Cr);qe(this,ms);qe(this,Zn);qe(this,Yn);qe(this,Wi);qe(this,gs);qe(this,vs);qe(this,Rr);qe(this,Pr);qe(this,Jn);qe(this,ys,new Set);this.options=t,De(this,Pt,e),De(this,Yn,null),De(this,Zn,Uh()),this.options.experimental_prefetchInRender||j(this,Zn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(j(this,Ee).addObserver(this),Hh(j(this,Ee),this.options)?Ue(this,Ve,ii).call(this):this.updateResult(),Ue(this,Ve,Yu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return tc(j(this,Ee),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return tc(j(this,Ee),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ue(this,Ve,Ju).call(this),Ue(this,Ve,Xu).call(this),j(this,Ee).removeObserver(this)}setOptions(e){const t=this.options,r=j(this,Ee);if(this.options=j(this,Pt).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xt(this.options.enabled,j(this,Ee))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ue(this,Ve,ec).call(this),j(this,Ee).setOptions(this.options),t._defaulted&&!Yo(this.options,t)&&j(this,Pt).getQueryCache().notify({type:"observerOptionsUpdated",query:j(this,Ee),observer:this});const s=this.hasListeners();s&&qh(j(this,Ee),r,this.options,t)&&Ue(this,Ve,ii).call(this),this.updateResult(),s&&(j(this,Ee)!==r||Xt(this.options.enabled,j(this,Ee))!==Xt(t.enabled,j(this,Ee))||Do(this.options.staleTime,j(this,Ee))!==Do(t.staleTime,j(this,Ee)))&&Ue(this,Ve,Ku).call(this);const i=Ue(this,Ve,Qu).call(this);s&&(j(this,Ee)!==r||Xt(this.options.enabled,j(this,Ee))!==Xt(t.enabled,j(this,Ee))||i!==j(this,Jn))&&Ue(this,Ve,Zu).call(this,i)}getOptimisticResult(e){const t=j(this,Pt).getQueryCache().build(j(this,Pt),e),r=this.createResult(t,e);return Jy(this,r)&&(De(this,wt,r),De(this,ms,this.options),De(this,Cr,j(this,Ee).state)),r}getCurrentResult(){return j(this,wt)}trackResult(e,t){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),t==null||t(s),Reflect.get(r,s))})}trackProp(e){j(this,ys).add(e)}getCurrentQuery(){return j(this,Ee)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=j(this,Pt).defaultQueryOptions(e),r=j(this,Pt).getQueryCache().build(j(this,Pt),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Ue(this,Ve,ii).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),j(this,wt)))}createResult(e,t){var _;const r=j(this,Ee),s=this.options,i=j(this,wt),o=j(this,Cr),u=j(this,ms),l=e!==r?e.state:j(this,qi),{state:d}=e;let p={...d},g=!1,T;if(t._optimisticResults){const E=this.hasListeners(),S=!E&&Hh(e,t),I=E&&qh(e,r,t,s);(S||I)&&(p={...p,...Sy(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:C,errorUpdatedAt:R,status:A}=p;T=p.data;let O=!1;if(t.placeholderData!==void 0&&T===void 0&&A==="pending"){let E;i!=null&&i.isPlaceholderData&&t.placeholderData===(u==null?void 0:u.placeholderData)?(E=i.data,O=!0):E=typeof t.placeholderData=="function"?t.placeholderData((_=j(this,vs))==null?void 0:_.state.data,j(this,vs)):t.placeholderData,E!==void 0&&(A="success",T=Bh(i==null?void 0:i.data,E,t),g=!0)}if(t.select&&T!==void 0&&!O)if(i&&T===(o==null?void 0:o.data)&&t.select===j(this,Wi))T=j(this,gs);else try{De(this,Wi,t.select),T=t.select(T),T=Bh(i==null?void 0:i.data,T,t),De(this,gs,T),De(this,Yn,null)}catch(E){De(this,Yn,E)}j(this,Yn)&&(C=j(this,Yn),T=j(this,gs),R=Date.now(),A="error");const V=p.fetchStatus==="fetching",M=A==="pending",$=A==="error",x=M&&V,H=T!==void 0,v={status:A,fetchStatus:p.fetchStatus,isPending:M,isSuccess:A==="success",isError:$,isInitialLoading:x,isLoading:x,data:T,dataUpdatedAt:p.dataUpdatedAt,error:C,errorUpdatedAt:R,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>l.dataUpdateCount||p.errorUpdateCount>l.errorUpdateCount,isFetching:V,isRefetching:V&&!M,isLoadingError:$&&!H,isPaused:p.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:$&&H,isStale:Bc(e,t),refetch:this.refetch,promise:j(this,Zn)};if(this.options.experimental_prefetchInRender){const E=y=>{v.status==="error"?y.reject(v.error):v.data!==void 0&&y.resolve(v.data)},S=()=>{const y=De(this,Zn,v.promise=Uh());E(y)},I=j(this,Zn);switch(I.status){case"pending":e.queryHash===r.queryHash&&E(I);break;case"fulfilled":(v.status==="error"||v.data!==I.value)&&S();break;case"rejected":(v.status!=="error"||v.error!==I.reason)&&S();break}}return v}updateResult(){const e=j(this,wt),t=this.createResult(j(this,Ee),this.options);if(De(this,Cr,j(this,Ee).state),De(this,ms,this.options),j(this,Cr).data!==void 0&&De(this,vs,j(this,Ee)),Yo(t,e))return;De(this,wt,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!j(this,ys).size)return!0;const o=new Set(i??j(this,ys));return this.options.throwOnError&&o.add("error"),Object.keys(j(this,wt)).some(u=>{const c=u;return j(this,wt)[c]!==e[c]&&o.has(c)})};Ue(this,Ve,vp).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ue(this,Ve,Yu).call(this)}},Pt=new WeakMap,Ee=new WeakMap,qi=new WeakMap,wt=new WeakMap,Cr=new WeakMap,ms=new WeakMap,Zn=new WeakMap,Yn=new WeakMap,Wi=new WeakMap,gs=new WeakMap,vs=new WeakMap,Rr=new WeakMap,Pr=new WeakMap,Jn=new WeakMap,ys=new WeakMap,Ve=new WeakSet,ii=function(e){Ue(this,Ve,ec).call(this);let t=j(this,Ee).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Jo)),t},Ku=function(){Ue(this,Ve,Ju).call(this);const e=Do(this.options.staleTime,j(this,Ee));if(Gu||j(this,wt).isStale||!jh(e))return;const r=wy(j(this,wt).dataUpdatedAt,e)+1;De(this,Rr,setTimeout(()=>{j(this,wt).isStale||this.updateResult()},r))},Qu=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(j(this,Ee)):this.options.refetchInterval)??!1},Zu=function(e){Ue(this,Ve,Xu).call(this),De(this,Jn,e),!(Gu||Xt(this.options.enabled,j(this,Ee))===!1||!jh(j(this,Jn))||j(this,Jn)===0)&&De(this,Pr,setInterval(()=>{(this.options.refetchIntervalInBackground||Ay.isFocused())&&Ue(this,Ve,ii).call(this)},j(this,Jn)))},Yu=function(){Ue(this,Ve,Ku).call(this),Ue(this,Ve,Zu).call(this,Ue(this,Ve,Qu).call(this))},Ju=function(){j(this,Rr)&&(clearTimeout(j(this,Rr)),De(this,Rr,void 0))},Xu=function(){j(this,Pr)&&(clearInterval(j(this,Pr)),De(this,Pr,void 0))},ec=function(){const e=j(this,Pt).getQueryCache().build(j(this,Pt),this.options);if(e===j(this,Ee))return;const t=j(this,Ee);De(this,Ee,e),De(this,qi,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},vp=function(e){Na.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(j(this,wt))}),j(this,Pt).getQueryCache().notify({query:j(this,Ee),type:"observerResultsUpdated"})})},hp);function Yy(n,e){return Xt(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Hh(n,e){return Yy(n,e)||n.state.data!==void 0&&tc(n,e,e.refetchOnMount)}function tc(n,e,t){if(Xt(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&Bc(n,e)}return!1}function qh(n,e,t,r){return(n!==e||Xt(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&Bc(n,t)}function Bc(n,e){return Xt(e.enabled,n)!==!1&&n.isStaleByTime(Do(e.staleTime,n))}function Jy(n,e){return!Yo(n.getCurrentResult(),e)}var Xn,er,kt,An,xn,No,nc,dp,Xy=(dp=class extends pp{constructor(e,t){super();qe(this,xn);qe(this,Xn);qe(this,er);qe(this,kt);qe(this,An);De(this,Xn,e),this.setOptions(t),this.bindMethods(),Ue(this,xn,No).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var r;const t=this.options;this.options=j(this,Xn).defaultMutationOptions(e),Yo(this.options,t)||j(this,Xn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:j(this,kt),observer:this}),t!=null&&t.mutationKey&&this.options.mutationKey&&$h(t.mutationKey)!==$h(this.options.mutationKey)?this.reset():((r=j(this,kt))==null?void 0:r.state.status)==="pending"&&j(this,kt).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=j(this,kt))==null||e.removeObserver(this)}onMutationUpdate(e){Ue(this,xn,No).call(this),Ue(this,xn,nc).call(this,e)}getCurrentResult(){return j(this,er)}reset(){var e;(e=j(this,kt))==null||e.removeObserver(this),De(this,kt,void 0),Ue(this,xn,No).call(this),Ue(this,xn,nc).call(this)}mutate(e,t){var r;return De(this,An,t),(r=j(this,kt))==null||r.removeObserver(this),De(this,kt,j(this,Xn).getMutationCache().build(j(this,Xn),this.options)),j(this,kt).addObserver(this),j(this,kt).execute(e)}},Xn=new WeakMap,er=new WeakMap,kt=new WeakMap,An=new WeakMap,xn=new WeakSet,No=function(){var t;const e=((t=j(this,kt))==null?void 0:t.state)??Cy();De(this,er,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},nc=function(e){Na.batch(()=>{var t,r,s,i,o,u,c,l;if(j(this,An)&&this.hasListeners()){const d=j(this,er).variables,p=j(this,er).context;(e==null?void 0:e.type)==="success"?((r=(t=j(this,An)).onSuccess)==null||r.call(t,e.data,d,p),(i=(s=j(this,An)).onSettled)==null||i.call(s,e.data,null,d,p)):(e==null?void 0:e.type)==="error"&&((u=(o=j(this,An)).onError)==null||u.call(o,e.error,d,p),(l=(c=j(this,An)).onSettled)==null||l.call(c,void 0,e.error,d,p))}this.listeners.forEach(d=>{d(j(this,er))})})},dp),yp=F.createContext(!1),e_=()=>F.useContext(yp);yp.Provider;function t_(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var n_=F.createContext(t_()),r_=()=>F.useContext(n_),s_=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},i_=n=>{F.useEffect(()=>{n.clearReset()},[n])},o_=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:s})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(s&&n.data===void 0||mp(t,[n.error,r])),a_=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},u_=(n,e)=>n.isLoading&&n.isFetching&&!e,c_=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,Wh=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function l_(n,e,t){var p,g,T,C,R;const r=Uc(),s=e_(),i=r_(),o=r.defaultQueryOptions(n);(g=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||g.call(p,o),o._optimisticResults=s?"isRestoring":"optimistic",a_(o),s_(o,i),i_(i);const u=!r.getQueryCache().get(o.queryHash),[c]=F.useState(()=>new e(r,o)),l=c.getOptimisticResult(o),d=!s&&n.subscribed!==!1;if(F.useSyncExternalStore(F.useCallback(A=>{const O=d?c.subscribe(Na.batchCalls(A)):Jo;return c.updateResult(),O},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),F.useEffect(()=>{c.setOptions(o)},[o,c]),c_(o,l))throw Wh(o,c,i);if(o_({result:l,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((C=(T=r.getDefaultOptions().queries)==null?void 0:T._experimental_afterQuery)==null||C.call(T,o,l),o.experimental_prefetchInRender&&!Gu&&u_(l,s)){const A=u?Wh(o,c,i):(R=r.getQueryCache().get(o.queryHash))==null?void 0:R.promise;A==null||A.catch(Jo).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function $c(n,e){return l_(n,Zy)}function h_(n,e){const t=Uc(),[r]=F.useState(()=>new Xy(t,n));F.useEffect(()=>{r.setOptions(n)},[r,n]);const s=F.useSyncExternalStore(F.useCallback(o=>r.subscribe(Na.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=F.useCallback((o,u)=>{r.mutate(o,u).catch(Jo)},[r]);if(s.error&&mp(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const d_=()=>{};var Gh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},f_=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],u=n[t++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},bp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,u=o?n[s+1]:0,c=s+2<n.length,l=c?n[s+2]:0,d=i>>2,p=(i&3)<<4|u>>4;let g=(u&15)<<2|l>>6,T=l&63;c||(T=64,o||(g=64)),r.push(t[d],t[p],t[g],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_p(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):f_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const l=s<n.length?t[n.charAt(s)]:64;++s;const p=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||u==null||l==null||p==null)throw new p_;const g=i<<2|u>>4;if(r.push(g),l!==64){const T=u<<4&240|l>>2;if(r.push(T),p!==64){const C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class p_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m_=function(n){const e=_p(n);return bp.encodeByteArray(e,!0)},Xo=function(n){return m_(n).replace(/\./g,"")},Ep=function(n){try{return bp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=()=>g_().__FIREBASE_DEFAULTS__,y_=()=>{if(typeof process>"u"||typeof Gh>"u")return;const n=Gh.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},__=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ep(n[1]);return e&&JSON.parse(e)},Ma=()=>{try{return d_()||v_()||y_()||__()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Tp=n=>{var e,t;return(t=(e=Ma())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},b_=n=>{const e=Tp(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ip=()=>{var n;return(n=Ma())===null||n===void 0?void 0:n.config},wp=n=>{var e;return(e=Ma())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(n){return n.endsWith(".cloudworkstations.dev")}async function Ap(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Xo(JSON.stringify(t)),Xo(JSON.stringify(o)),""].join(".")}const fi={};function I_(){const n={prod:[],emulator:[]};for(const e of Object.keys(fi))fi[e]?n.emulator.push(e):n.prod.push(e);return n}function w_(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Kh=!1;function La(n,e){if(typeof window>"u"||typeof document>"u"||!Gi(window.location.host)||fi[n]===e||fi[n]||Kh)return;fi[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=I_().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,T){g.setAttribute("width","24"),g.setAttribute("id",T),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Kh=!0,o()},g}function d(g,T){g.setAttribute("id",T),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=w_(r),T=t("text"),C=document.getElementById(T)||document.createElement("span"),R=t("learnmore"),A=document.getElementById(R)||document.createElement("a"),O=t("preprendIcon"),V=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const M=g.element;u(M),d(A,R);const $=l();c(V,O),M.append(V,C,A,$),document.body.appendChild(M)}i?(C.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function S_(){var n;const e=(n=Ma())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R_(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function P_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k_(){const n=_t();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function x_(){return!S_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V_(){try{return typeof indexedDB=="object"}catch{return!1}}function O_(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="FirebaseError";class Fn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=D_,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ki.prototype.create)}}class Ki{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?N_(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new Fn(s,u,r)}}function N_(n,e){return n.replace(M_,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const M_=/\{\$([^}]+)}/g;function L_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Vr(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(Qh(i)&&Qh(o)){if(!Vr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Qh(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function F_(n,e){const t=new U_(n,e);return t.subscribe.bind(t)}class U_{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");j_(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Au),s.error===void 0&&(s.error=Au),s.complete===void 0&&(s.complete=Au);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j_(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Au(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(n){return n&&n._delegate?n._delegate:n}class Or{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new E_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z_(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$_(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $_(n){return n===wr?void 0:n}function z_(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new B_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(_e||(_e={}));const q_={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},W_=_e.INFO,G_={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},K_=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=G_[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zc{constructor(e){this.name=e,this._logLevel=W_,this._logHandler=K_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const Q_=(n,e)=>e.some(t=>n instanceof t);let Zh,Yh;function Z_(){return Zh||(Zh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y_(){return Yh||(Yh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sp=new WeakMap,rc=new WeakMap,Cp=new WeakMap,Su=new WeakMap,Hc=new WeakMap;function J_(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(nr(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Sp.set(t,n)}).catch(()=>{}),Hc.set(e,n),e}function X_(n){if(rc.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});rc.set(n,e)}let sc={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return rc.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Cp.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return nr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function eb(n){sc=n(sc)}function tb(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Cu(this),e,...t);return Cp.set(r,e.sort?e.sort():[e]),nr(r)}:Y_().includes(n)?function(...e){return n.apply(Cu(this),e),nr(Sp.get(this))}:function(...e){return nr(n.apply(Cu(this),e))}}function nb(n){return typeof n=="function"?tb(n):(n instanceof IDBTransaction&&X_(n),Q_(n,Z_())?new Proxy(n,sc):n)}function nr(n){if(n instanceof IDBRequest)return J_(n);if(Su.has(n))return Su.get(n);const e=nb(n);return e!==n&&(Su.set(n,e),Hc.set(e,n)),e}const Cu=n=>Hc.get(n);function rb(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),u=nr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(nr(o.result),c.oldVersion,c.newVersion,nr(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),u}const sb=["get","getKey","getAll","getAllKeys","count"],ib=["put","add","delete","clear"],Ru=new Map;function Jh(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ru.get(e))return Ru.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=ib.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||sb.includes(t)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(await Promise.all([l[t](...u),s&&c.done]))[0]};return Ru.set(e,i),i}eb(n=>({...n,get:(e,t,r)=>Jh(e,t)||n.get(e,t,r),has:(e,t)=>!!Jh(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ab(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function ab(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ic="@firebase/app",Xh="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn=new zc("@firebase/app"),ub="@firebase/app-compat",cb="@firebase/analytics-compat",lb="@firebase/analytics",hb="@firebase/app-check-compat",db="@firebase/app-check",fb="@firebase/auth",pb="@firebase/auth-compat",mb="@firebase/database",gb="@firebase/data-connect",vb="@firebase/database-compat",yb="@firebase/functions",_b="@firebase/functions-compat",bb="@firebase/installations",Eb="@firebase/installations-compat",Tb="@firebase/messaging",Ib="@firebase/messaging-compat",wb="@firebase/performance",Ab="@firebase/performance-compat",Sb="@firebase/remote-config",Cb="@firebase/remote-config-compat",Rb="@firebase/storage",Pb="@firebase/storage-compat",kb="@firebase/firestore",xb="@firebase/vertexai",Vb="@firebase/firestore-compat",Ob="firebase",Db="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc="[DEFAULT]",Nb={[ic]:"fire-core",[ub]:"fire-core-compat",[lb]:"fire-analytics",[cb]:"fire-analytics-compat",[db]:"fire-app-check",[hb]:"fire-app-check-compat",[fb]:"fire-auth",[pb]:"fire-auth-compat",[mb]:"fire-rtdb",[gb]:"fire-data-connect",[vb]:"fire-rtdb-compat",[yb]:"fire-fn",[_b]:"fire-fn-compat",[bb]:"fire-iid",[Eb]:"fire-iid-compat",[Tb]:"fire-fcm",[Ib]:"fire-fcm-compat",[wb]:"fire-perf",[Ab]:"fire-perf-compat",[Sb]:"fire-rc",[Cb]:"fire-rc-compat",[Rb]:"fire-gcs",[Pb]:"fire-gcs-compat",[kb]:"fire-fst",[Vb]:"fire-fst-compat",[xb]:"fire-vertex","fire-js":"fire-js",[Ob]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Map,Mb=new Map,ac=new Map;function ed(n,e){try{n.container.addComponent(e)}catch(t){Vn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _s(n){const e=n.name;if(ac.has(e))return Vn.debug(`There were multiple attempts to register component ${e}.`),!1;ac.set(e,n);for(const t of ea.values())ed(t,n);for(const t of Mb.values())ed(t,n);return!0}function qc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new Ki("app","Firebase",Lb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=Db;function Rp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:oc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw rr.create("bad-app-name",{appName:String(s)});if(t||(t=Ip()),!t)throw rr.create("no-options");const i=ea.get(s);if(i){if(Vr(t,i.options)&&Vr(r,i.config))return i;throw rr.create("duplicate-app",{appName:s})}const o=new H_(s);for(const c of ac.values())o.addComponent(c);const u=new Fb(t,r,o);return ea.set(s,u),u}function Pp(n=oc){const e=ea.get(n);if(!e&&n===oc&&Ip())return Rp();if(!e)throw rr.create("no-app",{appName:n});return e}function sr(n,e,t){var r;let s=(r=Nb[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vn.warn(u.join(" "));return}_s(new Or(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="firebase-heartbeat-database",jb=1,Ei="firebase-heartbeat-store";let Pu=null;function kp(){return Pu||(Pu=rb(Ub,jb,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ei)}catch(t){console.warn(t)}}}}).catch(n=>{throw rr.create("idb-open",{originalErrorMessage:n.message})})),Pu}async function Bb(n){try{const t=(await kp()).transaction(Ei),r=await t.objectStore(Ei).get(xp(n));return await t.done,r}catch(e){if(e instanceof Fn)Vn.warn(e.message);else{const t=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vn.warn(t.message)}}}async function td(n,e){try{const r=(await kp()).transaction(Ei,"readwrite");await r.objectStore(Ei).put(e,xp(n)),await r.done}catch(t){if(t instanceof Fn)Vn.warn(t.message);else{const r=rr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Vn.warn(r.message)}}}function xp(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=1024,zb=30;class Hb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=nd();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>zb){const o=Gb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Vn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nd(),{heartbeatsToSend:r,unsentEntries:s}=qb(this._heartbeatsCache.heartbeats),i=Xo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Vn.warn(t),""}}}function nd(){return new Date().toISOString().substring(0,10)}function qb(n,e=$b){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),rd(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),rd(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Wb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V_()?O_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Bb(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return td(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return td(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rd(n){return Xo(JSON.stringify({version:2,heartbeats:n})).length}function Gb(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(n){_s(new Or("platform-logger",e=>new ob(e),"PRIVATE")),_s(new Or("heartbeat",e=>new Hb(e),"PRIVATE")),sr(ic,Xh,n),sr(ic,Xh,"esm2017"),sr("fire-js","")}Kb("");var Qb="firebase",Zb="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(Qb,Zb,"app");function Vp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yb=Vp,Op=new Ki("auth","Firebase",Vp());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new zc("@firebase/auth");function Jb(n,...e){ta.logLevel<=_e.WARN&&ta.warn(`Auth (${Vs}): ${n}`,...e)}function Mo(n,...e){ta.logLevel<=_e.ERROR&&ta.error(`Auth (${Vs}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(n,...e){throw Wc(n,...e)}function sn(n,...e){return Wc(n,...e)}function Dp(n,e,t){const r=Object.assign(Object.assign({},Yb()),{[e]:t});return new Ki("auth","Firebase",r).create(e,{appName:n.name})}function kr(n){return Dp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wc(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Op.create(n,...e)}function ce(n,e,...t){if(!n)throw Wc(e,...t)}function Sn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Mo(e),new Error(e)}function Dn(n,e){n||Sn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Xb(){return sd()==="http:"||sd()==="https:"}function sd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xb()||R_()||"connection"in navigator)?navigator.onLine:!0}function tE(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dn(t>e,"Short delay should be less than long delay!"),this.isMobile=A_()||P_()}get(){return eE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n,e){Dn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sE=new Zi(3e4,6e4);function Kc(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Os(n,e,t,r,s={}){return Mp(n,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=Qi(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const l=Object.assign({method:e,headers:c},i);return C_()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Gi(n.emulatorConfig.host)&&(l.credentials="include"),Np.fetch()(await Lp(n,n.config.apiHost,t,u),l)})}async function Mp(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},nE),e);try{const s=new oE(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw wo(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,l]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw wo(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw wo(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw wo(n,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Dp(n,d,l);On(n,d)}}catch(s){if(s instanceof Fn)throw s;On(n,"network-request-failed",{message:String(s)})}}async function iE(n,e,t,r,s={}){const i=await Os(n,e,t,r,s);return"mfaPendingCredential"in i&&On(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function Lp(n,e,t,r){const s=`${e}${t}?${r}`,i=n,o=i.config.emulator?Gc(n.config,s):`${n.config.apiScheme}://${s}`;return rE.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class oE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(sn(this.auth,"network-request-failed")),sE.get())})}}function wo(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=sn(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(n,e){return Os(n,"POST","/v1/accounts:delete",e)}async function na(n,e){return Os(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uE(n,e=!1){const t=Kt(n),r=await t.getIdToken(e),s=Qc(r);ce(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:pi(ku(s.auth_time)),issuedAtTime:pi(ku(s.iat)),expirationTime:pi(ku(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ku(n){return Number(n)*1e3}function Qc(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Mo("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ep(t);return s?JSON.parse(s):(Mo("Failed to decode base64 JWT payload"),null)}catch(s){return Mo("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function id(n){const e=Qc(n);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ti(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Fn&&cE(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function cE({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pi(this.lastLoginAt),this.creationTime=pi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Ti(n,na(t,{idToken:r}));ce(s==null?void 0:s.users.length,t,"internal-error");const i=s.users[0];n._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Fp(i.providerUserInfo):[],u=dE(n.providerData,o),c=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!(u!=null&&u.length),d=c?l:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new cc(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function hE(n){const e=Kt(n);await ra(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dE(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Fp(n){return n.map(e=>{var{providerId:t}=e,r=jc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fE(n,e){const t=await Mp(n,{},async()=>{const r=Qi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,o=await Lp(n,s,"/v1/token",`key=${i}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Np.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pE(n,e){return Os(n,"POST","/v2/accounts:revokeToken",Kc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):id(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const t=id(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await fE(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,o=new cs;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cs,this.toJSON())}_performRefresh(){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(n,e){ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ht{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,i=jc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new cc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ti(this,this.stsTokenManager.getToken(this.auth,e));return ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uE(this,e)}reload(){return hE(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ht(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ra(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(kr(this.auth));const e=await this.getIdToken();return await Ti(this,aE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,i,o,u,c,l,d;const p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(s=t.email)!==null&&s!==void 0?s:void 0,T=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,C=(o=t.photoURL)!==null&&o!==void 0?o:void 0,R=(u=t.tenantId)!==null&&u!==void 0?u:void 0,A=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,V=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:M,emailVerified:$,isAnonymous:x,providerData:H,stsTokenManager:b}=t;ce(M&&b,e,"internal-error");const v=cs.fromJSON(this.name,b);ce(typeof M=="string",e,"internal-error"),Hn(p,e.name),Hn(g,e.name),ce(typeof $=="boolean",e,"internal-error"),ce(typeof x=="boolean",e,"internal-error"),Hn(T,e.name),Hn(C,e.name),Hn(R,e.name),Hn(A,e.name),Hn(O,e.name),Hn(V,e.name);const _=new Ht({uid:M,auth:e,email:g,emailVerified:$,displayName:p,isAnonymous:x,photoURL:C,phoneNumber:T,tenantId:R,stsTokenManager:v,createdAt:O,lastLoginAt:V});return H&&Array.isArray(H)&&(_.providerData=H.map(E=>Object.assign({},E))),A&&(_._redirectEventId=A),_}static async _fromIdTokenResponse(e,t,r=!1){const s=new cs;s.updateFromServerResponse(t);const i=new Ht({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ra(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];ce(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Fp(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new cs;u.updateFromIdToken(r);const c=new Ht({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),l={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new cc(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,l),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=new Map;function Cn(n){Dn(n instanceof Function,"Expected a class definition");let e=od.get(n);return e?(Dn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,od.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Up.type="NONE";const ad=Up;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(n,e,t){return`firebase:${n}:${e}:${t}`}class ls{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Lo(this.userKey,s.apiKey,i),this.fullPersistenceKey=Lo("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await na(this.auth,{idToken:e}).catch(()=>{});return t?Ht._fromGetAccountInfoResponse(this.auth,t,e):null}return Ht._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ls(Cn(ad),e,r);const s=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let i=s[0]||Cn(ad);const o=Lo(r,e.config.apiKey,e.name);let u=null;for(const l of t)try{const d=await l._get(o);if(d){let p;if(typeof d=="string"){const g=await na(e,{idToken:d}).catch(()=>{});if(!g)break;p=await Ht._fromGetAccountInfoResponse(e,g,d)}else p=Ht._fromJSON(e,d);l!==i&&(u=p),i=l;break}}catch{}const c=s.filter(l=>l._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ls(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(t.map(async l=>{if(l!==i)try{await l._remove(o)}catch{}})),new ls(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jp(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qp(e))return"Blackberry";if(Wp(e))return"Webos";if(Bp(e))return"Safari";if((e.includes("chrome/")||$p(e))&&!e.includes("edge/"))return"Chrome";if(Hp(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jp(n=_t()){return/firefox\//i.test(n)}function Bp(n=_t()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $p(n=_t()){return/crios\//i.test(n)}function zp(n=_t()){return/iemobile/i.test(n)}function Hp(n=_t()){return/android/i.test(n)}function qp(n=_t()){return/blackberry/i.test(n)}function Wp(n=_t()){return/webos/i.test(n)}function Zc(n=_t()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mE(n=_t()){var e;return Zc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gE(){return k_()&&document.documentMode===10}function Gp(n=_t()){return Zc(n)||Hp(n)||Wp(n)||qp(n)||/windows phone/i.test(n)||zp(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(n,e=[]){let t;switch(n){case"Browser":t=ud(_t());break;case"Worker":t=`${ud(_t())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yE(n,e={}){return Os(n,"GET","/v2/passwordPolicy",Kc(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=6;class bE{constructor(e){var t,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:_E,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cd(this),this.idTokenSubscription=new cd(this),this.beforeStateQueue=new vE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Op,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cn(t)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ls.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await na(this,{idToken:e}),r=await Ht._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ra(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(kr(this));const t=e?Kt(e):null;return t&&ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yE(this),t=new bE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ki("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await pE(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cn(e)||this._popupRedirectResolver;ce(t,this,"argument-error"),this.redirectPersistenceManager=await ls.create(this,[Cn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Jb(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Yc(n){return Kt(n)}class cd{constructor(e){this.auth=e,this.observer=null,this.addObserver=F_(t=>this.observer=t)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TE(n){Jc=n}function IE(n){return Jc.loadJS(n)}function wE(){return Jc.gapiScript}function AE(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(n,e){const t=qc(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Vr(i,e??{}))return s;On(s,"already-initialized")}return t.initialize({options:e})}function CE(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Cn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RE(n,e,t){const r=Yc(n);ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Qp(e),{host:o,port:u}=PE(e),c=u===null?"":`:${u}`,l={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ce(Vr(l,r.config.emulator)&&Vr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Gi(o)?(La("Auth",!0),Ap(`${i}//${o}${c}`)):kE()}function Qp(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function PE(n){const e=Qp(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ld(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ld(o)}}}function ld(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function kE(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,t){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hs(n,e){return iE(n,"POST","/v1/accounts:signInWithIdp",Kc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="http://localhost";class Dr extends Zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):On("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,i=jc(t,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Dr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return hs(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,hs(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hs(e,t)}buildRequest(){const e={requestUri:xE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qi(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Yp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends Yi{constructor(){super("facebook.com")}static credential(e){return Dr._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qn.credential(e.oauthAccessToken)}catch{return null}}}qn.FACEBOOK_SIGN_IN_METHOD="facebook.com";qn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Yi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Dr._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Wn.credential(t,r)}catch{return null}}}Wn.GOOGLE_SIGN_IN_METHOD="google.com";Wn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends Yi{constructor(){super("github.com")}static credential(e){return Dr._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gn.credential(e.oauthAccessToken)}catch{return null}}}Gn.GITHUB_SIGN_IN_METHOD="github.com";Gn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends Yi{constructor(){super("twitter.com")}static credential(e,t){return Dr._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Kn.credential(t,r)}catch{return null}}}Kn.TWITTER_SIGN_IN_METHOD="twitter.com";Kn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await Ht._fromIdTokenResponse(e,r,s),o=hd(r);return new bs({user:i,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=hd(r);return new bs({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function hd(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Fn{constructor(e,t,r,s){var i;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,sa.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new sa(e,t,r,s)}}function Jp(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?sa._fromErrorAndOperation(n,i,e,r):i})}async function VE(n,e,t=!1){const r=await Ti(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return bs._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE(n,e,t=!1){const{auth:r}=n;if(nn(r.app))return Promise.reject(kr(r));const s="reauthenticate";try{const i=await Ti(n,Jp(r,s,e,n),t);ce(i.idToken,r,"internal-error");const o=Qc(i.idToken);ce(o,r,"internal-error");const{sub:u}=o;return ce(n.uid===u,r,"user-mismatch"),bs._forOperation(n,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&On(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DE(n,e,t=!1){if(nn(n.app))return Promise.reject(kr(n));const r="signIn",s=await Jp(n,r,e),i=await bs._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}function NE(n,e,t,r){return Kt(n).onIdTokenChanged(e,t,r)}function ME(n,e,t){return Kt(n).beforeAuthStateChanged(e,t)}const ia="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ia,"1"),this.storage.removeItem(ia),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=1e3,FE=10;class em extends Xp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);gE()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FE):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},LE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}em.type="LOCAL";const UE=em;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm extends Xp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tm.type="SESSION";const nm=tm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Fa(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async l=>l(t.origin,i)),c=await jE(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fa.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const l=Xc("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(g.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return window}function $E(n){on().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(){return typeof on().WorkerGlobalScope<"u"&&typeof on().importScripts=="function"}async function zE(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HE(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function qE(){return rm()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="firebaseLocalStorageDb",WE=1,oa="firebaseLocalStorage",im="fbase_key";class Ji{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ua(n,e){return n.transaction([oa],e?"readwrite":"readonly").objectStore(oa)}function GE(){const n=indexedDB.deleteDatabase(sm);return new Ji(n).toPromise()}function lc(){const n=indexedDB.open(sm,WE);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(oa,{keyPath:im})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(oa)?e(r):(r.close(),await GE(),e(await lc()))})})}async function dd(n,e,t){const r=Ua(n,!0).put({[im]:e,value:t});return new Ji(r).toPromise()}async function KE(n,e){const t=Ua(n,!1).get(e),r=await new Ji(t).toPromise();return r===void 0?null:r.value}function fd(n,e){const t=Ua(n,!0).delete(e);return new Ji(t).toPromise()}const QE=800,ZE=3;class om{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lc(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ZE)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fa._getInstance(qE()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await zE(),!this.activeServiceWorker)return;this.sender=new BE(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lc();return await dd(e,ia,"1"),await fd(e,ia),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>dd(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>KE(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fd(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ua(s,!1).getAll();return new Ji(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}om.type="LOCAL";const YE=om;new Zi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(n,e){return e?Cn(e):(ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends Zp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XE(n){return DE(n.auth,new el(n),n.bypassAuthState)}function eT(n){const{auth:e,user:t}=n;return ce(t,e,"internal-error"),OE(t,new el(n),n.bypassAuthState)}async function tT(n){const{auth:e,user:t}=n;return ce(t,e,"internal-error"),VE(t,new el(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XE;case"linkViaPopup":case"linkViaRedirect":return tT;case"reauthViaPopup":case"reauthViaRedirect":return eT;default:On(this.auth,"internal-error")}}resolve(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=new Zi(2e3,1e4);class as extends am{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,as.currentPopupAction&&as.currentPopupAction.cancel(),as.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Dn(this.filter.length===1,"Popup operations only handle one event");const e=Xc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,as.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nT.get())};e()}}as.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="pendingRedirect",Fo=new Map;class sT extends am{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Fo.get(this.auth._key());if(!e){try{const r=await iT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Fo.set(this.auth._key(),e)}return this.bypassAuthState||Fo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iT(n,e){const t=uT(e),r=aT(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function oT(n,e){Fo.set(n._key(),e)}function aT(n){return Cn(n._redirectPersistence)}function uT(n){return Lo(rT,n.config.apiKey,n.name)}async function cT(n,e,t=!1){if(nn(n.app))return Promise.reject(kr(n));const r=Yc(n),s=JE(r,e),o=await new sT(r,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=10*60*1e3;class hT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!um(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(sn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lT&&this.cachedEventUids.clear(),this.cachedEventUids.has(pd(e))}saveEventToCache(e){this.cachedEventUids.add(pd(e)),this.lastProcessedEventTime=Date.now()}}function pd(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function um({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dT(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return um(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fT(n,e={}){return Os(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mT=/^https?/;async function gT(n){if(n.config.emulator)return;const{authorizedDomains:e}=await fT(n);for(const t of e)try{if(vT(t))return}catch{}On(n,"unauthorized-domain")}function vT(n){const e=uc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!mT.test(t))return!1;if(pT.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=new Zi(3e4,6e4);function md(){const n=on().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _T(n){return new Promise((e,t)=>{var r,s,i;function o(){md(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{md(),t(sn(n,"network-request-failed"))},timeout:yT.get()})}if(!((s=(r=on().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=on().gapi)===null||i===void 0)&&i.load)o();else{const u=AE("iframefcb");return on()[u]=()=>{gapi.load?o():t(sn(n,"network-request-failed"))},IE(`${wE()}?onload=${u}`).catch(c=>t(c))}}).catch(e=>{throw Uo=null,e})}let Uo=null;function bT(n){return Uo=Uo||_T(n),Uo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=new Zi(5e3,15e3),TT="__/auth/iframe",IT="emulator/auth/iframe",wT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ST(n){const e=n.config;ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Gc(e,IT):`https://${n.config.authDomain}/${TT}`,r={apiKey:e.apiKey,appName:n.name,v:Vs},s=AT.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${Qi(r).slice(1)}`}async function CT(n){const e=await bT(n),t=on().gapi;return ce(t,n,"internal-error"),e.open({where:document.body,url:ST(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wT,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=sn(n,"network-request-failed"),u=on().setTimeout(()=>{i(o)},ET.get());function c(){on().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PT=500,kT=600,xT="_blank",VT="http://localhost";class gd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OT(n,e,t,r=PT,s=kT){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},RT),{width:r.toString(),height:s.toString(),top:i,left:o}),l=_t().toLowerCase();t&&(u=$p(l)?xT:t),jp(l)&&(e=e||VT,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[T,C])=>`${g}${T}=${C},`,"");if(mE(l)&&u!=="_self")return DT(e||"",u),new gd(null);const p=window.open(e||"",u,d);ce(p,n,"popup-blocked");try{p.focus()}catch{}return new gd(p)}function DT(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="__/auth/handler",MT="emulator/auth/handler",LT=encodeURIComponent("fac");async function vd(n,e,t,r,s,i){ce(n.config.authDomain,n,"auth-domain-config-required"),ce(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Vs,eventId:s};if(e instanceof Yp){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",L_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof Yi){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const u=o;for(const d of Object.keys(u))u[d]===void 0&&delete u[d];const c=await n._getAppCheckToken(),l=c?`#${LT}=${encodeURIComponent(c)}`:"";return`${FT(n)}?${Qi(u).slice(1)}${l}`}function FT({config:n}){return n.emulator?Gc(n,MT):`https://${n.authDomain}/${NT}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu="webStorageSupport";class UT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nm,this._completeRedirectFn=cT,this._overrideRedirectResult=oT}async _openPopup(e,t,r,s){var i;Dn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await vd(e,t,r,uc(),s);return OT(e,o,Xc())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await vd(e,t,r,uc(),s);return $E(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(Dn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await CT(e),r=new hT(e);return t.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xu,{type:xu},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[xu];o!==void 0&&t(!!o),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Gp()||Bp()||Zc()}}const jT=UT;var yd="@firebase/auth",_d="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zT(n){_s(new Or("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kp(n)},l=new EE(r,s,i,c);return CE(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_s(new Or("auth-internal",e=>{const t=Yc(e.getProvider("auth").getImmediate());return(r=>new BT(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(yd,_d,$T(n)),sr(yd,_d,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=5*60,qT=wp("authIdTokenMaxAge")||HT;let bd=null;const WT=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>qT)return;const s=t==null?void 0:t.token;bd!==s&&(bd=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GT(n=Pp()){const e=qc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=SE(n,{popupRedirectResolver:jT,persistence:[YE,UE,nm]}),r=wp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=WT(i.toString());ME(t,o,()=>o(t.currentUser)),NE(t,u=>o(u))}}const s=Tp("auth");return s?RE(t,`http://${s}`):La("Auth",!1),t}function KT(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}TE({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=sn("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",KT().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zT("Browser");var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ir,cm;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,v){function _(){}_.prototype=v.prototype,b.D=v.prototype,b.prototype=new _,b.prototype.constructor=b,b.C=function(E,S,I){for(var y=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)y[pe-2]=arguments[pe];return v.prototype[S].apply(E,y)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,v,_){_||(_=0);var E=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)E[S]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(S=0;16>S;++S)E[S]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=b.g[0],_=b.g[1],S=b.g[2];var I=b.g[3],y=v+(I^_&(S^I))+E[0]+3614090360&4294967295;v=_+(y<<7&4294967295|y>>>25),y=I+(S^v&(_^S))+E[1]+3905402710&4294967295,I=v+(y<<12&4294967295|y>>>20),y=S+(_^I&(v^_))+E[2]+606105819&4294967295,S=I+(y<<17&4294967295|y>>>15),y=_+(v^S&(I^v))+E[3]+3250441966&4294967295,_=S+(y<<22&4294967295|y>>>10),y=v+(I^_&(S^I))+E[4]+4118548399&4294967295,v=_+(y<<7&4294967295|y>>>25),y=I+(S^v&(_^S))+E[5]+1200080426&4294967295,I=v+(y<<12&4294967295|y>>>20),y=S+(_^I&(v^_))+E[6]+2821735955&4294967295,S=I+(y<<17&4294967295|y>>>15),y=_+(v^S&(I^v))+E[7]+4249261313&4294967295,_=S+(y<<22&4294967295|y>>>10),y=v+(I^_&(S^I))+E[8]+1770035416&4294967295,v=_+(y<<7&4294967295|y>>>25),y=I+(S^v&(_^S))+E[9]+2336552879&4294967295,I=v+(y<<12&4294967295|y>>>20),y=S+(_^I&(v^_))+E[10]+4294925233&4294967295,S=I+(y<<17&4294967295|y>>>15),y=_+(v^S&(I^v))+E[11]+2304563134&4294967295,_=S+(y<<22&4294967295|y>>>10),y=v+(I^_&(S^I))+E[12]+1804603682&4294967295,v=_+(y<<7&4294967295|y>>>25),y=I+(S^v&(_^S))+E[13]+4254626195&4294967295,I=v+(y<<12&4294967295|y>>>20),y=S+(_^I&(v^_))+E[14]+2792965006&4294967295,S=I+(y<<17&4294967295|y>>>15),y=_+(v^S&(I^v))+E[15]+1236535329&4294967295,_=S+(y<<22&4294967295|y>>>10),y=v+(S^I&(_^S))+E[1]+4129170786&4294967295,v=_+(y<<5&4294967295|y>>>27),y=I+(_^S&(v^_))+E[6]+3225465664&4294967295,I=v+(y<<9&4294967295|y>>>23),y=S+(v^_&(I^v))+E[11]+643717713&4294967295,S=I+(y<<14&4294967295|y>>>18),y=_+(I^v&(S^I))+E[0]+3921069994&4294967295,_=S+(y<<20&4294967295|y>>>12),y=v+(S^I&(_^S))+E[5]+3593408605&4294967295,v=_+(y<<5&4294967295|y>>>27),y=I+(_^S&(v^_))+E[10]+38016083&4294967295,I=v+(y<<9&4294967295|y>>>23),y=S+(v^_&(I^v))+E[15]+3634488961&4294967295,S=I+(y<<14&4294967295|y>>>18),y=_+(I^v&(S^I))+E[4]+3889429448&4294967295,_=S+(y<<20&4294967295|y>>>12),y=v+(S^I&(_^S))+E[9]+568446438&4294967295,v=_+(y<<5&4294967295|y>>>27),y=I+(_^S&(v^_))+E[14]+3275163606&4294967295,I=v+(y<<9&4294967295|y>>>23),y=S+(v^_&(I^v))+E[3]+4107603335&4294967295,S=I+(y<<14&4294967295|y>>>18),y=_+(I^v&(S^I))+E[8]+1163531501&4294967295,_=S+(y<<20&4294967295|y>>>12),y=v+(S^I&(_^S))+E[13]+2850285829&4294967295,v=_+(y<<5&4294967295|y>>>27),y=I+(_^S&(v^_))+E[2]+4243563512&4294967295,I=v+(y<<9&4294967295|y>>>23),y=S+(v^_&(I^v))+E[7]+1735328473&4294967295,S=I+(y<<14&4294967295|y>>>18),y=_+(I^v&(S^I))+E[12]+2368359562&4294967295,_=S+(y<<20&4294967295|y>>>12),y=v+(_^S^I)+E[5]+4294588738&4294967295,v=_+(y<<4&4294967295|y>>>28),y=I+(v^_^S)+E[8]+2272392833&4294967295,I=v+(y<<11&4294967295|y>>>21),y=S+(I^v^_)+E[11]+1839030562&4294967295,S=I+(y<<16&4294967295|y>>>16),y=_+(S^I^v)+E[14]+4259657740&4294967295,_=S+(y<<23&4294967295|y>>>9),y=v+(_^S^I)+E[1]+2763975236&4294967295,v=_+(y<<4&4294967295|y>>>28),y=I+(v^_^S)+E[4]+1272893353&4294967295,I=v+(y<<11&4294967295|y>>>21),y=S+(I^v^_)+E[7]+4139469664&4294967295,S=I+(y<<16&4294967295|y>>>16),y=_+(S^I^v)+E[10]+3200236656&4294967295,_=S+(y<<23&4294967295|y>>>9),y=v+(_^S^I)+E[13]+681279174&4294967295,v=_+(y<<4&4294967295|y>>>28),y=I+(v^_^S)+E[0]+3936430074&4294967295,I=v+(y<<11&4294967295|y>>>21),y=S+(I^v^_)+E[3]+3572445317&4294967295,S=I+(y<<16&4294967295|y>>>16),y=_+(S^I^v)+E[6]+76029189&4294967295,_=S+(y<<23&4294967295|y>>>9),y=v+(_^S^I)+E[9]+3654602809&4294967295,v=_+(y<<4&4294967295|y>>>28),y=I+(v^_^S)+E[12]+3873151461&4294967295,I=v+(y<<11&4294967295|y>>>21),y=S+(I^v^_)+E[15]+530742520&4294967295,S=I+(y<<16&4294967295|y>>>16),y=_+(S^I^v)+E[2]+3299628645&4294967295,_=S+(y<<23&4294967295|y>>>9),y=v+(S^(_|~I))+E[0]+4096336452&4294967295,v=_+(y<<6&4294967295|y>>>26),y=I+(_^(v|~S))+E[7]+1126891415&4294967295,I=v+(y<<10&4294967295|y>>>22),y=S+(v^(I|~_))+E[14]+2878612391&4294967295,S=I+(y<<15&4294967295|y>>>17),y=_+(I^(S|~v))+E[5]+4237533241&4294967295,_=S+(y<<21&4294967295|y>>>11),y=v+(S^(_|~I))+E[12]+1700485571&4294967295,v=_+(y<<6&4294967295|y>>>26),y=I+(_^(v|~S))+E[3]+2399980690&4294967295,I=v+(y<<10&4294967295|y>>>22),y=S+(v^(I|~_))+E[10]+4293915773&4294967295,S=I+(y<<15&4294967295|y>>>17),y=_+(I^(S|~v))+E[1]+2240044497&4294967295,_=S+(y<<21&4294967295|y>>>11),y=v+(S^(_|~I))+E[8]+1873313359&4294967295,v=_+(y<<6&4294967295|y>>>26),y=I+(_^(v|~S))+E[15]+4264355552&4294967295,I=v+(y<<10&4294967295|y>>>22),y=S+(v^(I|~_))+E[6]+2734768916&4294967295,S=I+(y<<15&4294967295|y>>>17),y=_+(I^(S|~v))+E[13]+1309151649&4294967295,_=S+(y<<21&4294967295|y>>>11),y=v+(S^(_|~I))+E[4]+4149444226&4294967295,v=_+(y<<6&4294967295|y>>>26),y=I+(_^(v|~S))+E[11]+3174756917&4294967295,I=v+(y<<10&4294967295|y>>>22),y=S+(v^(I|~_))+E[2]+718787259&4294967295,S=I+(y<<15&4294967295|y>>>17),y=_+(I^(S|~v))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(S+(y<<21&4294967295|y>>>11))&4294967295,b.g[2]=b.g[2]+S&4294967295,b.g[3]=b.g[3]+I&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var _=v-this.blockSize,E=this.B,S=this.h,I=0;I<v;){if(S==0)for(;I<=_;)s(this,b,I),I+=this.blockSize;if(typeof b=="string"){for(;I<v;)if(E[S++]=b.charCodeAt(I++),S==this.blockSize){s(this,E),S=0;break}}else for(;I<v;)if(E[S++]=b[I++],S==this.blockSize){s(this,E),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var _=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=_&255,_/=256;for(this.u(b),b=Array(16),v=_=0;4>v;++v)for(var E=0;32>E;E+=8)b[_++]=this.g[v]>>>E&255;return b};function i(b,v){var _=u;return Object.prototype.hasOwnProperty.call(_,b)?_[b]:_[b]=v(b)}function o(b,v){this.h=v;for(var _=[],E=!0,S=b.length-1;0<=S;S--){var I=b[S]|0;E&&I==v||(_[S]=I,E=!1)}this.g=_}var u={};function c(b){return-128<=b&&128>b?i(b,function(v){return new o([v|0],0>v?-1:0)}):new o([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return A(l(-b));for(var v=[],_=1,E=0;b>=_;E++)v[E]=b/_|0,_*=4294967296;return new o(v,0)}function d(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return A(d(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),E=p,S=0;S<b.length;S+=8){var I=Math.min(8,b.length-S),y=parseInt(b.substring(S,S+I),v);8>I?(I=l(Math.pow(v,I)),E=E.j(I).add(l(y))):(E=E.j(_),E=E.add(l(y)))}return E}var p=c(0),g=c(1),T=c(16777216);n=o.prototype,n.m=function(){if(R(this))return-A(this).m();for(var b=0,v=1,_=0;_<this.g.length;_++){var E=this.i(_);b+=(0<=E?E:4294967296+E)*v,v*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C(this))return"0";if(R(this))return"-"+A(this).toString(b);for(var v=l(Math.pow(b,6)),_=this,E="";;){var S=$(_,v).g;_=O(_,S.j(v));var I=((0<_.g.length?_.g[0]:_.h)>>>0).toString(b);if(_=S,C(_))return I+E;for(;6>I.length;)I="0"+I;E=I+E}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function C(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function R(b){return b.h==-1}n.l=function(b){return b=O(this,b),R(b)?-1:C(b)?0:1};function A(b){for(var v=b.g.length,_=[],E=0;E<v;E++)_[E]=~b.g[E];return new o(_,~b.h).add(g)}n.abs=function(){return R(this)?A(this):this},n.add=function(b){for(var v=Math.max(this.g.length,b.g.length),_=[],E=0,S=0;S<=v;S++){var I=E+(this.i(S)&65535)+(b.i(S)&65535),y=(I>>>16)+(this.i(S)>>>16)+(b.i(S)>>>16);E=y>>>16,I&=65535,y&=65535,_[S]=y<<16|I}return new o(_,_[_.length-1]&-2147483648?-1:0)};function O(b,v){return b.add(A(v))}n.j=function(b){if(C(this)||C(b))return p;if(R(this))return R(b)?A(this).j(A(b)):A(A(this).j(b));if(R(b))return A(this.j(A(b)));if(0>this.l(T)&&0>b.l(T))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,_=[],E=0;E<2*v;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var S=0;S<b.g.length;S++){var I=this.i(E)>>>16,y=this.i(E)&65535,pe=b.i(S)>>>16,me=b.i(S)&65535;_[2*E+2*S]+=y*me,V(_,2*E+2*S),_[2*E+2*S+1]+=I*me,V(_,2*E+2*S+1),_[2*E+2*S+1]+=y*pe,V(_,2*E+2*S+1),_[2*E+2*S+2]+=I*pe,V(_,2*E+2*S+2)}for(E=0;E<v;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=v;E<2*v;E++)_[E]=0;return new o(_,0)};function V(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function M(b,v){this.g=b,this.h=v}function $(b,v){if(C(v))throw Error("division by zero");if(C(b))return new M(p,p);if(R(b))return v=$(A(b),v),new M(A(v.g),A(v.h));if(R(v))return v=$(b,A(v)),new M(A(v.g),v.h);if(30<b.g.length){if(R(b)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,E=v;0>=E.l(b);)_=x(_),E=x(E);var S=H(_,1),I=H(E,1);for(E=H(E,2),_=H(_,2);!C(E);){var y=I.add(E);0>=y.l(b)&&(S=S.add(_),I=y),E=H(E,1),_=H(_,1)}return v=O(b,S.j(v)),new M(S,v)}for(S=p;0<=b.l(v);){for(_=Math.max(1,Math.floor(b.m()/v.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),I=l(_),y=I.j(v);R(y)||0<y.l(b);)_-=E,I=l(_),y=I.j(v);C(I)&&(I=g),S=S.add(I),b=O(b,y)}return new M(S,b)}n.A=function(b){return $(this,b).h},n.and=function(b){for(var v=Math.max(this.g.length,b.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)&b.i(E);return new o(_,this.h&b.h)},n.or=function(b){for(var v=Math.max(this.g.length,b.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)|b.i(E);return new o(_,this.h|b.h)},n.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)^b.i(E);return new o(_,this.h^b.h)};function x(b){for(var v=b.g.length+1,_=[],E=0;E<v;E++)_[E]=b.i(E)<<1|b.i(E-1)>>>31;return new o(_,b.h)}function H(b,v){var _=v>>5;v%=32;for(var E=b.g.length-_,S=[],I=0;I<E;I++)S[I]=0<v?b.i(I+_)>>>v|b.i(I+_+1)<<32-v:b.i(I+_);return new o(S,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cm=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,ir=o}).apply(typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{});var Ao=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lm,oi,hm,jo,hc,dm,fm,pm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ao=="object"&&Ao];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var P=a[m];if(!(P in f))break e;f=f[P]}a=a[a.length-1],m=f[a],h=h(m),h!=m&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,m=!1,P={next:function(){if(!m&&f<a.length){var D=f++;return{value:h(D,a[D]),done:!1}}return m=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function d(a,h,f){return a.call.apply(a.bind,arguments)}function p(a,h,f){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,m),a.apply(h,P)}}return function(){return a.apply(h,arguments)}}function g(a,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function T(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function C(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(m,P,D){for(var q=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)q[Le-2]=arguments[Le];return h.prototype[P].apply(m,q)}}function R(a){const h=a.length;if(0<h){const f=Array(h);for(let m=0;m<h;m++)f[m]=a[m];return f}return[]}function A(a,h){for(let f=1;f<arguments.length;f++){const m=arguments[f];if(c(m)){const P=a.length||0,D=m.length||0;a.length=P+D;for(let q=0;q<D;q++)a[P+q]=m[q]}else a.push(m)}}class O{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function V(a){return/^[\s\xa0]*$/.test(a)}function M(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function $(a){return $[" "](a),a}$[" "]=function(){};var x=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function H(a,h,f){for(const m in a)h.call(f,a[m],m,a)}function b(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function v(a){const h={};for(const f in a)h[f]=a[f];return h}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,h){let f,m;for(let P=1;P<arguments.length;P++){m=arguments[P];for(f in m)a[f]=m[f];for(let D=0;D<_.length;D++)f=_[D],Object.prototype.hasOwnProperty.call(m,f)&&(a[f]=m[f])}}function S(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function I(a){u.setTimeout(()=>{throw a},0)}function y(){var a=Je;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class pe{constructor(){this.h=this.g=null}add(h,f){const m=me.get();m.set(h,f),this.h?this.h.next=m:this.g=m,this.h=m}}var me=new O(()=>new ye,a=>a.reset());class ye{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,je=!1,Je=new pe,dt=()=>{const a=u.Promise.resolve(void 0);Me=()=>{a.then(mn)}};var mn=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(f){I(f)}var h=me;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}je=!1};function Pe(){this.s=this.s,this.C=this.C}Pe.prototype.s=!1,Pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Dt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,h),u.removeEventListener("test",f,h)}catch{}return a}();function st(a,h){if(we.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(x){e:{try{$(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Et[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&st.aa.h.call(this)}}C(st,we);var Et={2:"touch",3:"pen",4:"mouse"};st.prototype.h=function(){st.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var it="closure_listenable_"+(1e6*Math.random()|0),Rt=0;function Zt(a,h,f,m,P){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!m,this.ha=P,this.key=++Rt,this.da=this.fa=!1}function gn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function vn(a){this.src=a,this.g={},this.h=0}vn.prototype.add=function(a,h,f,m,P){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var q=vr(a,h,m,P);return-1<q?(h=a[q],f||(h.fa=!1)):(h=new Zt(h,this.src,D,!!m,P),h.fa=f,a.push(h)),h};function yn(a,h){var f=h.type;if(f in a.g){var m=a.g[f],P=Array.prototype.indexOf.call(m,h,void 0),D;(D=0<=P)&&Array.prototype.splice.call(m,P,1),D&&(gn(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function vr(a,h,f,m){for(var P=0;P<a.length;++P){var D=a[P];if(!D.da&&D.listener==h&&D.capture==!!f&&D.ha==m)return P}return-1}var _n="closure_lm_"+(1e6*Math.random()|0),jn={};function oo(a,h,f,m,P){if(Array.isArray(h)){for(var D=0;D<h.length;D++)oo(a,h[D],f,m,P);return null}return f=z(f),a&&a[it]?a.K(h,f,l(m)?!!m.capture:!1,P):uu(a,h,f,!1,m,P)}function uu(a,h,f,m,P,D){if(!h)throw Error("Invalid event type");var q=l(P)?!!P.capture:!!P,Le=Z(a);if(Le||(a[_n]=Le=new vn(a)),f=Le.add(h,f,m,q,D),f.proxy)return f;if(m=Wl(),f.proxy=m,m.src=a,m.listener=f,a.addEventListener)Dt||(P=q),P===void 0&&(P=!1),a.addEventListener(h.toString(),m,P);else if(a.attachEvent)a.attachEvent(k(h.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Wl(){function a(f){return h.call(a.src,a.listener,f)}const h=N;return a}function Us(a,h,f,m,P){if(Array.isArray(h))for(var D=0;D<h.length;D++)Us(a,h[D],f,m,P);else m=l(m)?!!m.capture:!!m,f=z(f),a&&a[it]?(a=a.i,h=String(h).toString(),h in a.g&&(D=a.g[h],f=vr(D,f,m,P),-1<f&&(gn(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete a.g[h],a.h--)))):a&&(a=Z(a))&&(h=a.g[h.toString()],a=-1,h&&(a=vr(h,f,m,P)),(f=-1<a?h[a]:null)&&w(f))}function w(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[it])yn(h.i,a);else{var f=a.type,m=a.proxy;h.removeEventListener?h.removeEventListener(f,m,a.capture):h.detachEvent?h.detachEvent(k(f),m):h.addListener&&h.removeListener&&h.removeListener(m),(f=Z(h))?(yn(f,a),f.h==0&&(f.src=null,h[_n]=null)):gn(a)}}}function k(a){return a in jn?jn[a]:jn[a]="on"+a}function N(a,h){if(a.da)a=!0;else{h=new st(h,this);var f=a.listener,m=a.ha||a.src;a.fa&&w(a),a=f.call(m,h)}return a}function Z(a){return a=a[_n],a instanceof vn?a:null}var W="__closure_events_fn_"+(1e9*Math.random()>>>0);function z(a){return typeof a=="function"?a:(a[W]||(a[W]=function(h){return a.handleEvent(h)}),a[W])}function Y(){Pe.call(this),this.i=new vn(this),this.M=this,this.F=null}C(Y,Pe),Y.prototype[it]=!0,Y.prototype.removeEventListener=function(a,h,f,m){Us(this,a,h,f,m)};function le(a,h){var f,m=a.F;if(m)for(f=[];m;m=m.F)f.push(m);if(a=a.M,m=h.type||h,typeof h=="string")h=new we(h,a);else if(h instanceof we)h.target=h.target||a;else{var P=h;h=new we(m,a),E(h,P)}if(P=!0,f)for(var D=f.length-1;0<=D;D--){var q=h.g=f[D];P=Se(q,m,!0,h)&&P}if(q=h.g=a,P=Se(q,m,!0,h)&&P,P=Se(q,m,!1,h)&&P,f)for(D=0;D<f.length;D++)q=h.g=f[D],P=Se(q,m,!1,h)&&P}Y.prototype.N=function(){if(Y.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],m=0;m<f.length;m++)gn(f[m]);delete a.g[h],a.h--}}this.F=null},Y.prototype.K=function(a,h,f,m){return this.i.add(String(a),h,!1,f,m)},Y.prototype.L=function(a,h,f,m){return this.i.add(String(a),h,!0,f,m)};function Se(a,h,f,m){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,D=0;D<h.length;++D){var q=h[D];if(q&&!q.da&&q.capture==f){var Le=q.listener,ot=q.ha||q.src;q.fa&&yn(a.i,q),P=Le.call(ot,m)!==!1&&P}}return P&&!m.defaultPrevented}function Tt(a,h,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(a,h||0)}function yr(a){a.g=Tt(()=>{a.g=null,a.i&&(a.i=!1,yr(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Yt extends Pe{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:yr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _r(a){Pe.call(this),this.h=a,this.g={}}C(_r,Pe);var Wr=[];function Gr(a){H(a.g,function(h,f){this.g.hasOwnProperty(f)&&w(h)},a),a.g={}}_r.prototype.N=function(){_r.aa.N.call(this),Gr(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var js=u.JSON.stringify,ao=u.JSON.parse,cu=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function Kr(){}Kr.prototype.h=null;function Gl(a){return a.h||(a.h=a.i())}function Kl(){}var Bs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lu(){we.call(this,"d")}C(lu,we);function hu(){we.call(this,"c")}C(hu,we);var br={},Ql=null;function uo(){return Ql=Ql||new Y}br.La="serverreachability";function Zl(a){we.call(this,br.La,a)}C(Zl,we);function $s(a){const h=uo();le(h,new Zl(h))}br.STAT_EVENT="statevent";function Yl(a,h){we.call(this,br.STAT_EVENT,a),this.stat=h}C(Yl,we);function It(a){const h=uo();le(h,new Yl(h,a))}br.Ma="timingevent";function Jl(a,h){we.call(this,br.Ma,a),this.size=h}C(Jl,we);function zs(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},h)}function Hs(){this.g=!0}Hs.prototype.xa=function(){this.g=!1};function ty(a,h,f,m,P,D){a.info(function(){if(a.g)if(D)for(var q="",Le=D.split("&"),ot=0;ot<Le.length;ot++){var Ae=Le[ot].split("=");if(1<Ae.length){var ft=Ae[0];Ae=Ae[1];var pt=ft.split("_");q=2<=pt.length&&pt[1]=="type"?q+(ft+"="+Ae+"&"):q+(ft+"=redacted&")}}else q=null;else q=D;return"XMLHTTP REQ ("+m+") [attempt "+P+"]: "+h+`
`+f+`
`+q})}function ny(a,h,f,m,P,D,q){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+P+"]: "+h+`
`+f+`
`+D+" "+q})}function Qr(a,h,f,m){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+sy(a,f)+(m?" "+m:"")})}function ry(a,h){a.info(function(){return"TIMEOUT: "+h})}Hs.prototype.info=function(){};function sy(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var m=f[a];if(!(2>m.length)){var P=m[1];if(Array.isArray(P)&&!(1>P.length)){var D=P[0];if(D!="noop"&&D!="stop"&&D!="close")for(var q=1;q<P.length;q++)P[q]=""}}}}return js(f)}catch{return h}}var co={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},du;function lo(){}C(lo,Kr),lo.prototype.g=function(){return new XMLHttpRequest},lo.prototype.i=function(){return{}},du=new lo;function Bn(a,h,f,m){this.j=a,this.i=h,this.l=f,this.R=m||1,this.U=new _r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eh}function eh(){this.i=null,this.g="",this.h=!1}var th={},fu={};function pu(a,h,f){a.L=1,a.v=mo(bn(h)),a.m=f,a.P=!0,nh(a,null)}function nh(a,h){a.F=Date.now(),ho(a),a.A=bn(a.v);var f=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),gh(f.i,"t",m),a.C=0,f=a.j.J,a.h=new eh,a.g=Dh(a.j,f?h:null,!a.m),0<a.O&&(a.M=new Yt(g(a.Y,a,a.g),a.O)),h=a.U,f=a.g,m=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(Wr[0]=P.toString()),P=Wr);for(var D=0;D<P.length;D++){var q=oo(f,P[D],m||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),$s(),ty(a.i,a.u,a.A,a.l,a.R,a.m)}Bn.prototype.ca=function(a){a=a.target;const h=this.M;h&&En(a)==3?h.j():this.Y(a)},Bn.prototype.Y=function(a){try{if(a==this.g)e:{const pt=En(this.g);var h=this.g.Ba();const Jr=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Ih(this.g)))){this.J||pt!=4||h==7||(h==8||0>=Jr?$s(3):$s(2)),mu(this);var f=this.g.Z();this.X=f;t:if(rh(this)){var m=Ih(this.g);a="";var P=m.length,D=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Er(this),qs(this);var q="";break t}this.h.i=new u.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,a+=this.h.i.decode(m[h],{stream:!(D&&h==P-1)});m.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,ny(this.i,this.u,this.A,this.l,this.R,pt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,ot=this.g;if((Le=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Le)){var Ae=Le;break t}}Ae=null}if(f=Ae)Qr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gu(this,f);else{this.o=!1,this.s=3,It(12),Er(this),qs(this);break e}}if(this.P){f=!0;let Bt;for(;!this.J&&this.C<q.length;)if(Bt=iy(this,q),Bt==fu){pt==4&&(this.s=4,It(14),f=!1),Qr(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==th){this.s=4,It(15),Qr(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else Qr(this.i,this.l,Bt,null),gu(this,Bt);if(rh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||q.length!=0||this.h.h||(this.s=1,It(16),f=!1),this.o=this.o&&f,!f)Qr(this.i,this.l,q,"[Invalid Chunked Response]"),Er(this),qs(this);else if(0<q.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Tu(ft),ft.M=!0,It(11))}}else Qr(this.i,this.l,q,null),gu(this,q);pt==4&&Er(this),this.o&&!this.J&&(pt==4?kh(this.j,this):(this.o=!1,ho(this)))}else Ty(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Er(this),qs(this)}}}catch{}finally{}};function rh(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function iy(a,h){var f=a.C,m=h.indexOf(`
`,f);return m==-1?fu:(f=Number(h.substring(f,m)),isNaN(f)?th:(m+=1,m+f>h.length?fu:(h=h.slice(m,m+f),a.C=m+f,h)))}Bn.prototype.cancel=function(){this.J=!0,Er(this)};function ho(a){a.S=Date.now()+a.I,sh(a,a.I)}function sh(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=zs(g(a.ba,a),h)}function mu(a){a.B&&(u.clearTimeout(a.B),a.B=null)}Bn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ry(this.i,this.A),this.L!=2&&($s(),It(17)),Er(this),this.s=2,qs(this)):sh(this,this.S-a)};function qs(a){a.j.G==0||a.J||kh(a.j,a)}function Er(a){mu(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Gr(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function gu(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||vu(f.h,a))){if(!a.K&&vu(f.h,a)&&f.G==3){try{var m=f.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var P=m;if(P[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Eo(f),_o(f);else break e;Eu(f),It(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=zs(g(f.Za,f),6e3));if(1>=ah(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ir(f,11)}else if((a.K||f.g==a)&&Eo(f),!V(h))for(P=f.Da.g.parse(h),h=0;h<P.length;h++){let Ae=P[h];if(f.T=Ae[0],Ae=Ae[1],f.G==2)if(Ae[0]=="c"){f.K=Ae[1],f.ia=Ae[2];const ft=Ae[3];ft!=null&&(f.la=ft,f.j.info("VER="+f.la));const pt=Ae[4];pt!=null&&(f.Aa=pt,f.j.info("SVER="+f.Aa));const Jr=Ae[5];Jr!=null&&typeof Jr=="number"&&0<Jr&&(m=1.5*Jr,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const Bt=a.g;if(Bt){const Io=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Io){var D=m.h;D.g||Io.indexOf("spdy")==-1&&Io.indexOf("quic")==-1&&Io.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(yu(D,D.h),D.h=null))}if(m.D){const Iu=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;Iu&&(m.ya=Iu,Fe(m.I,m.D,Iu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var q=a;if(m.qa=Oh(m,m.J?m.ia:null,m.W),q.K){uh(m.h,q);var Le=q,ot=m.L;ot&&(Le.I=ot),Le.B&&(mu(Le),ho(Le)),m.g=q}else Rh(m);0<f.i.length&&bo(f)}else Ae[0]!="stop"&&Ae[0]!="close"||Ir(f,7);else f.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Ir(f,7):bu(f):Ae[0]!="noop"&&f.l&&f.l.ta(Ae),f.v=0)}}$s(4)}catch{}}var oy=class{constructor(a,h){this.g=a,this.map=h}};function ih(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function oh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ah(a){return a.h?1:a.g?a.g.size:0}function vu(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function yu(a,h){a.g?a.g.add(h):a.h=h}function uh(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}ih.prototype.cancel=function(){if(this.i=ch(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ch(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return R(a.i)}function ay(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],f=a.length,m=0;m<f;m++)h.push(a[m]);return h}h=[],f=0;for(m in a)h[f++]=a[m];return h}function uy(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const m in a)h[f++]=m;return h}}}function lh(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=uy(a),m=ay(a),P=m.length,D=0;D<P;D++)h.call(void 0,m[D],f&&f[D],a)}var hh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cy(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var m=a[f].indexOf("="),P=null;if(0<=m){var D=a[f].substring(0,m);P=a[f].substring(m+1)}else D=a[f];h(D,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Tr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Tr){this.h=a.h,fo(this,a.j),this.o=a.o,this.g=a.g,po(this,a.s),this.l=a.l;var h=a.i,f=new Ks;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),dh(this,f),this.m=a.m}else a&&(h=String(a).match(hh))?(this.h=!1,fo(this,h[1]||"",!0),this.o=Ws(h[2]||""),this.g=Ws(h[3]||"",!0),po(this,h[4]),this.l=Ws(h[5]||"",!0),dh(this,h[6]||"",!0),this.m=Ws(h[7]||"")):(this.h=!1,this.i=new Ks(null,this.h))}Tr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Gs(h,fh,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Gs(h,fh,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Gs(f,f.charAt(0)=="/"?dy:hy,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Gs(f,py)),a.join("")};function bn(a){return new Tr(a)}function fo(a,h,f){a.j=f?Ws(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function po(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function dh(a,h,f){h instanceof Ks?(a.i=h,my(a.i,a.h)):(f||(h=Gs(h,fy)),a.i=new Ks(h,a.h))}function Fe(a,h,f){a.i.set(h,f)}function mo(a){return Fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ws(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Gs(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,ly),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ly(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var fh=/[#\/\?@]/g,hy=/[#\?:]/g,dy=/[#\?]/g,fy=/[#\?@]/g,py=/#/g;function Ks(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function $n(a){a.g||(a.g=new Map,a.h=0,a.i&&cy(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}n=Ks.prototype,n.add=function(a,h){$n(this),this.i=null,a=Zr(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function ph(a,h){$n(a),h=Zr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function mh(a,h){return $n(a),h=Zr(a,h),a.g.has(h)}n.forEach=function(a,h){$n(this),this.g.forEach(function(f,m){f.forEach(function(P){a.call(h,P,m,this)},this)},this)},n.na=function(){$n(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let m=0;m<h.length;m++){const P=a[m];for(let D=0;D<P.length;D++)f.push(h[m])}return f},n.V=function(a){$n(this);let h=[];if(typeof a=="string")mh(this,a)&&(h=h.concat(this.g.get(Zr(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},n.set=function(a,h){return $n(this),this.i=null,a=Zr(this,a),mh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},n.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function gh(a,h,f){ph(a,h),0<f.length&&(a.i=null,a.g.set(Zr(a,h),R(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var m=h[f];const D=encodeURIComponent(String(m)),q=this.V(m);for(m=0;m<q.length;m++){var P=D;q[m]!==""&&(P+="="+encodeURIComponent(String(q[m]))),a.push(P)}}return this.i=a.join("&")};function Zr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function my(a,h){h&&!a.j&&($n(a),a.i=null,a.g.forEach(function(f,m){var P=m.toLowerCase();m!=P&&(ph(this,m),gh(this,P,f))},a)),a.j=h}function gy(a,h){const f=new Hs;if(u.Image){const m=new Image;m.onload=T(zn,f,"TestLoadImage: loaded",!0,h,m),m.onerror=T(zn,f,"TestLoadImage: error",!1,h,m),m.onabort=T(zn,f,"TestLoadImage: abort",!1,h,m),m.ontimeout=T(zn,f,"TestLoadImage: timeout",!1,h,m),u.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else h(!1)}function vy(a,h){const f=new Hs,m=new AbortController,P=setTimeout(()=>{m.abort(),zn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:m.signal}).then(D=>{clearTimeout(P),D.ok?zn(f,"TestPingServer: ok",!0,h):zn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),zn(f,"TestPingServer: error",!1,h)})}function zn(a,h,f,m,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),m(f)}catch{}}function yy(){this.g=new cu}function _y(a,h,f){const m=f||"";try{lh(a,function(P,D){let q=P;l(P)&&(q=js(P)),h.push(m+D+"="+encodeURIComponent(q))})}catch(P){throw h.push(m+"type="+encodeURIComponent("_badmap")),P}}function go(a){this.l=a.Ub||null,this.j=a.eb||!1}C(go,Kr),go.prototype.g=function(){return new vo(this.l,this.j)},go.prototype.i=function(a){return function(){return a}}({});function vo(a,h){Y.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(vo,Y),n=vo.prototype,n.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Zs(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qs(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Zs(this)),this.g&&(this.readyState=3,Zs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vh(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function vh(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Qs(this):Zs(this),this.readyState==3&&vh(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Qs(this))},n.Qa=function(a){this.g&&(this.response=a,Qs(this))},n.ga=function(){this.g&&Qs(this)};function Qs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Zs(a)}n.setRequestHeader=function(a,h){this.u.append(a,h)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Zs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function yh(a){let h="";return H(a,function(f,m){h+=m,h+=":",h+=f,h+=`\r
`}),h}function _u(a,h,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=yh(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Fe(a,h,f))}function He(a){Y.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(He,Y);var by=/^https?$/i,Ey=["POST","PUT"];n=He.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,h,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():du.g(),this.v=this.o?Gl(this.o):Gl(du),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(D){_h(this,D);return}if(a=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var P in m)f.set(P,m[P]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const D of m.keys())f.set(D,m.get(D));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),P=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ey,h,void 0))||m||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,q]of f)this.g.setRequestHeader(D,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Th(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){_h(this,D)}};function _h(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,bh(a),yo(a)}function bh(a){a.A||(a.A=!0,le(a,"complete"),le(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,le(this,"complete"),le(this,"abort"),yo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yo(this,!0)),He.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Eh(this):this.bb())},n.bb=function(){Eh(this)};function Eh(a){if(a.h&&typeof o<"u"&&(!a.v[1]||En(a)!=4||a.Z()!=2)){if(a.u&&En(a)==4)Tt(a.Ea,0,a);else if(le(a,"readystatechange"),En(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var m;if(m=q===0){var P=String(a.D).match(hh)[1]||null;!P&&u.self&&u.self.location&&(P=u.self.location.protocol.slice(0,-1)),m=!by.test(P?P.toLowerCase():"")}f=m}if(f)le(a,"complete"),le(a,"success");else{a.m=6;try{var D=2<En(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",bh(a)}}finally{yo(a)}}}}function yo(a,h){if(a.g){Th(a);const f=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||le(a,"ready");try{f.onreadystatechange=m}catch{}}}function Th(a){a.I&&(u.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function En(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),ao(h)}};function Ih(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ty(a){const h={};a=(a.g&&2<=En(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(V(a[m]))continue;var f=S(a[m]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=h[P]||[];h[P]=D,D.push(f)}b(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function wh(a){this.Aa=0,this.i=[],this.j=new Hs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ys("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ys("baseRetryDelayMs",5e3,a),this.cb=Ys("retryDelaySeedMs",1e4,a),this.Wa=Ys("forwardChannelMaxRetries",2,a),this.wa=Ys("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ih(a&&a.concurrentRequestLimit),this.Da=new yy,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=wh.prototype,n.la=8,n.G=1,n.connect=function(a,h,f,m){It(0),this.W=a,this.H=h||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Oh(this,null,this.W),bo(this)};function bu(a){if(Ah(a),a.G==3){var h=a.U++,f=bn(a.I);if(Fe(f,"SID",a.K),Fe(f,"RID",h),Fe(f,"TYPE","terminate"),Js(a,f),h=new Bn(a,a.j,h),h.L=2,h.v=mo(bn(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=h.v,f=!0),f||(h.g=Dh(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ho(h)}Vh(a)}function _o(a){a.g&&(Tu(a),a.g.cancel(),a.g=null)}function Ah(a){_o(a),a.u&&(u.clearTimeout(a.u),a.u=null),Eo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function bo(a){if(!oh(a.h)&&!a.s){a.s=!0;var h=a.Ga;Me||dt(),je||(Me(),je=!0),Je.add(h,a),a.B=0}}function Iy(a,h){return ah(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=zs(g(a.Ga,a,h),xh(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new Bn(this,this.j,a);let D=this.o;if(this.S&&(D?(D=v(D),E(D,this.S)):D=this.S),this.m!==null||this.O||(P.H=D,D=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Ch(this,P,h),f=bn(this.I),Fe(f,"RID",a),Fe(f,"CVER",22),this.D&&Fe(f,"X-HTTP-Session-Id",this.D),Js(this,f),D&&(this.O?h="headers="+encodeURIComponent(String(yh(D)))+"&"+h:this.m&&_u(f,this.m,D)),yu(this.h,P),this.Ua&&Fe(f,"TYPE","init"),this.P?(Fe(f,"$req",h),Fe(f,"SID","null"),P.T=!0,pu(P,f,null)):pu(P,f,h),this.G=2}}else this.G==3&&(a?Sh(this,a):this.i.length==0||oh(this.h)||Sh(this))};function Sh(a,h){var f;h?f=h.l:f=a.U++;const m=bn(a.I);Fe(m,"SID",a.K),Fe(m,"RID",f),Fe(m,"AID",a.T),Js(a,m),a.m&&a.o&&_u(m,a.m,a.o),f=new Bn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Ch(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),yu(a.h,f),pu(f,m,h)}function Js(a,h){a.H&&H(a.H,function(f,m){Fe(h,m,f)}),a.l&&lh({},function(f,m){Fe(h,m,f)})}function Ch(a,h,f){f=Math.min(a.i.length,f);var m=a.l?g(a.l.Na,a.l,a):null;e:{var P=a.i;let D=-1;for(;;){const q=["count="+f];D==-1?0<f?(D=P[0].g,q.push("ofs="+D)):D=0:q.push("ofs="+D);let Le=!0;for(let ot=0;ot<f;ot++){let Ae=P[ot].g;const ft=P[ot].map;if(Ae-=D,0>Ae)D=Math.max(0,P[ot].g-100),Le=!1;else try{_y(ft,q,"req"+Ae+"_")}catch{m&&m(ft)}}if(Le){m=q.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,m}function Rh(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Me||dt(),je||(Me(),je=!0),Je.add(h,a),a.v=0}}function Eu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=zs(g(a.Fa,a),xh(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Ph(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=zs(g(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),_o(this),Ph(this))};function Tu(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Ph(a){a.g=new Bn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=bn(a.qa);Fe(h,"RID","rpc"),Fe(h,"SID",a.K),Fe(h,"AID",a.T),Fe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Fe(h,"TO",a.ja),Fe(h,"TYPE","xmlhttp"),Js(a,h),a.m&&a.o&&_u(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=mo(bn(h)),f.m=null,f.P=!0,nh(f,a)}n.Za=function(){this.C!=null&&(this.C=null,_o(this),Eu(this),It(19))};function Eo(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function kh(a,h){var f=null;if(a.g==h){Eo(a),Tu(a),a.g=null;var m=2}else if(vu(a.h,h))f=h.D,uh(a.h,h),m=1;else return;if(a.G!=0){if(h.o)if(m==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var P=a.B;m=uo(),le(m,new Jl(m,f)),bo(a)}else Rh(a);else if(P=h.s,P==3||P==0&&0<h.X||!(m==1&&Iy(a,h)||m==2&&Eu(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),P){case 1:Ir(a,5);break;case 4:Ir(a,10);break;case 3:Ir(a,6);break;default:Ir(a,2)}}}function xh(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Ir(a,h){if(a.j.info("Error code "+h),h==2){var f=g(a.fb,a),m=a.Xa;const P=!m;m=new Tr(m||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||fo(m,"https"),mo(m),P?gy(m.toString(),f):vy(m.toString(),f)}else It(2);a.G=0,a.l&&a.l.sa(h),Vh(a),Ah(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Vh(a){if(a.G=0,a.ka=[],a.l){const h=ch(a.h);(h.length!=0||a.i.length!=0)&&(A(a.ka,h),A(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function Oh(a,h,f){var m=f instanceof Tr?bn(f):new Tr(f);if(m.g!="")h&&(m.g=h+"."+m.g),po(m,m.s);else{var P=u.location;m=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var D=new Tr(null);m&&fo(D,m),h&&(D.g=h),P&&po(D,P),f&&(D.l=f),m=D}return f=a.D,h=a.ya,f&&h&&Fe(m,f,h),Fe(m,"VER",a.la),Js(a,m),m}function Dh(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new He(new go({eb:f})):new He(a.pa),h.Ha(a.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nh(){}n=Nh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function To(){}To.prototype.g=function(a,h){return new Nt(a,h)};function Nt(a,h){Y.call(this),this.g=new wh(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!V(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!V(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Yr(this)}C(Nt,Y),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){bu(this.g)},Nt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=js(a),a=f);h.i.push(new oy(h.Ya++,a)),h.G==3&&bo(h)},Nt.prototype.N=function(){this.g.l=null,delete this.j,bu(this.g),delete this.g,Nt.aa.N.call(this)};function Mh(a){lu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}C(Mh,lu);function Lh(){hu.call(this),this.status=1}C(Lh,hu);function Yr(a){this.g=a}C(Yr,Nh),Yr.prototype.ua=function(){le(this.g,"a")},Yr.prototype.ta=function(a){le(this.g,new Mh(a))},Yr.prototype.sa=function(a){le(this.g,new Lh)},Yr.prototype.ra=function(){le(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,pm=function(){return new To},fm=function(){return uo()},dm=br,hc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},co.NO_ERROR=0,co.TIMEOUT=8,co.HTTP_ERROR=6,jo=co,Xl.COMPLETE="complete",hm=Xl,Kl.EventType=Bs,Bs.OPEN="a",Bs.CLOSE="b",Bs.ERROR="c",Bs.MESSAGE="d",Y.prototype.listen=Y.prototype.K,oi=Kl,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,lm=He}).apply(typeof Ao<"u"?Ao:typeof self<"u"?self:typeof window<"u"?window:{});const Td="@firebase/firestore",Id="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ds="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new zc("@firebase/firestore");function ns(){return Nr.logLevel}function X(n,...e){if(Nr.logLevel<=_e.DEBUG){const t=e.map(tl);Nr.debug(`Firestore (${Ds}): ${n}`,...t)}}function Nn(n,...e){if(Nr.logLevel<=_e.ERROR){const t=e.map(tl);Nr.error(`Firestore (${Ds}): ${n}`,...t)}}function Es(n,...e){if(Nr.logLevel<=_e.WARN){const t=e.map(tl);Nr.warn(`Firestore (${Ds}): ${n}`,...t)}}function tl(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,mm(n,r,t)}function mm(n,e,t){let r=`FIRESTORE (${Ds}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Nn(r),new Error(r)}function Oe(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||mm(e,s,r)}function de(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Fn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vt.UNAUTHENTICATED))}shutdown(){}}class ZT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class YT{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let i=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rn)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string",31837,{l:r}),new gm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new vt(e)}}class JT{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XT{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new JT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Oe(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wd(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=tI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function ve(n,e){return n<e?-1:n>e?1:0}function dc(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return ve(r,s);{const i=vm(),o=nI(i.encode(Ad(n,t)),i.encode(Ad(e,t)));return o!==0?o:ve(r,s)}}t+=r>65535?2:1}return ve(n.length,e.length)}function Ad(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function nI(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ve(n[t],e[t]);return ve(n.length,e.length)}function Ts(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=-62135596800,Cd=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Cd);return new tt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sd)throw new te(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cd}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Sd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new tt(0,0))}static max(){return new he(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="__name__";class Jt{constructor(e,t,r){t===void 0?t=0:t>e.length&&oe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&oe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Jt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jt?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=Jt.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return ve(e.length,t.length)}static compareSegments(e,t){const r=Jt.isNumericId(e),s=Jt.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Jt.extractNumericId(e).compare(Jt.extractNumericId(t)):dc(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ir.fromString(e.substring(4,e.length-2))}}class Be extends Jt{construct(e,t,r){return new Be(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Be(t)}static emptyPath(){return new Be([])}}const rI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Jt{construct(e,t,r){return new lt(e,t,r)}static isValidIdentifier(e){return rI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rd}static keyField(){return new lt([Rd])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new te(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new te(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(t)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Be.fromString(e))}static fromName(e){return new se(Be.fromString(e).popFirst(5))}static empty(){return new se(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Be(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=-1;function sI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=he.fromTimestamp(r===1e9?new tt(t+1,0):new tt(t,r));return new ar(s,se.empty(),e)}function iI(n){return new ar(n.readTime,n.key,Ii)}class ar{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ar(he.min(),se.empty(),Ii)}static max(){return new ar(he.max(),se.empty(),Ii)}}function oI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=se.comparator(n.documentKey,e.documentKey),t!==0?t:ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ns(n){if(n.code!==U.FAILED_PRECONDITION||n.message!==aI)throw n;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):L.reject(t)}static resolve(e){return new L((t,r)=>{t(e)})}static reject(e){return new L((t,r)=>{r(e)})}static waitFor(e){return new L((t,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&t()},c=>r(c))}),o=!0,i===s&&t()})}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next(s=>s?L.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new L((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const l=c;t(e[l]).next(d=>{o[l]=d,++u,u===i&&r(o)},d=>s(d))}})}static doWhile(e,t){return new L((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}function cI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ms(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}ja.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=-1;function Ba(n){return n==null}function aa(n){return n===0&&1/n==-1/0}function lI(n){return typeof n=="number"&&Number.isInteger(n)&&!aa(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="";function hI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Pd(e)),e=dI(n.get(t),e);return Pd(e)}function dI(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case _m:t+="";break;default:t+=i}}return t}function Pd(n){return n+_m+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $r(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,t){this.comparator=e,this.root=t||ut.EMPTY}insert(e,t){return new ze(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new So(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new So(this.root,e,this.comparator,!1)}getReverseIterator(){return new So(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new So(this.root,e,this.comparator,!0)}}class So{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new ut(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xd(this.data.getIterator())}getIteratorFrom(e){return new xd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nt(this.comparator);return t.data=e,t}}class xd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new qt([])}unionWith(e){let t=new nt(lt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ts(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Em("Invalid base64 string: "+i):i}}(e);return new ht(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ht(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const fI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(n){if(Oe(!!n,39018),typeof n=="string"){let e=0;const t=fI.exec(n);if(Oe(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(n.seconds),nanos:Ge(n.nanos)}}function Ge(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cr(n){return typeof n=="string"?ht.fromBase64String(n):ht.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="server_timestamp",Im="__type__",wm="__previous_value__",Am="__local_write_time__";function rl(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Im])===null||t===void 0?void 0:t.stringValue)===Tm}function $a(n){const e=n.mapValue.fields[wm];return rl(e)?$a(e):e}function wi(n){const e=ur(n.mapValue.fields[Am].timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t,r,s,i,o,u,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=d}}const ua="(default)";class Ai{constructor(e,t){this.projectId=e,this.database=t||ua}static empty(){return new Ai("","")}get isDefaultDatabase(){return this.database===ua}isEqual(e){return e instanceof Ai&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="__type__",mI="__max__",Co={mapValue:{}},Cm="__vector__",ca="value";function lr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rl(n)?4:vI(n)?9007199254740991:gI(n)?10:11:oe(28295,{value:n})}function hn(n,e){if(n===e)return!0;const t=lr(n);if(t!==lr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wi(n).isEqual(wi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ur(s.timestampValue),u=ur(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return cr(s.bytesValue).isEqual(cr(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return Ge(s.geoPointValue.latitude)===Ge(i.geoPointValue.latitude)&&Ge(s.geoPointValue.longitude)===Ge(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ge(s.integerValue)===Ge(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ge(s.doubleValue),u=Ge(i.doubleValue);return o===u?aa(o)===aa(u):isNaN(o)&&isNaN(u)}return!1}(n,e);case 9:return Ts(n.arrayValue.values||[],e.arrayValue.values||[],hn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(kd(o)!==kd(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!hn(o[c],u[c])))return!1;return!0}(n,e);default:return oe(52216,{left:n})}}function Si(n,e){return(n.values||[]).find(t=>hn(t,e))!==void 0}function Is(n,e){if(n===e)return 0;const t=lr(n),r=lr(e);if(t!==r)return ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ve(n.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Ge(i.integerValue||i.doubleValue),c=Ge(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(n,e);case 3:return Vd(n.timestampValue,e.timestampValue);case 4:return Vd(wi(n),wi(e));case 5:return dc(n.stringValue,e.stringValue);case 6:return function(i,o){const u=cr(i),c=cr(o);return u.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let l=0;l<u.length&&l<c.length;l++){const d=ve(u[l],c[l]);if(d!==0)return d}return ve(u.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const u=ve(Ge(i.latitude),Ge(o.latitude));return u!==0?u:ve(Ge(i.longitude),Ge(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Od(n.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,l,d;const p=i.fields||{},g=o.fields||{},T=(u=p[ca])===null||u===void 0?void 0:u.arrayValue,C=(c=g[ca])===null||c===void 0?void 0:c.arrayValue,R=ve(((l=T==null?void 0:T.values)===null||l===void 0?void 0:l.length)||0,((d=C==null?void 0:C.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:Od(T,C)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===Co.mapValue&&o===Co.mapValue)return 0;if(i===Co.mapValue)return 1;if(o===Co.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=dc(c[p],d[p]);if(g!==0)return g;const T=Is(u[c[p]],l[d[p]]);if(T!==0)return T}return ve(c.length,d.length)}(n.mapValue,e.mapValue);default:throw oe(23264,{Pe:t})}}function Vd(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ve(n,e);const t=ur(n),r=ur(e),s=ve(t.seconds,r.seconds);return s!==0?s:ve(t.nanos,r.nanos)}function Od(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=Is(t[s],r[s]);if(i)return i}return ve(t.length,r.length)}function ws(n){return fc(n)}function fc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ur(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return cr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return se.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=fc(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${fc(t.fields[o])}`;return s+"}"}(n.mapValue):oe(61005,{value:n})}function Bo(n){switch(lr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$a(n);return e?16+Bo(e):16;case 5:return 2*n.stringValue.length;case 6:return cr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Bo(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return $r(r.fields,(i,o)=>{s+=i.length+Bo(o)}),s}(n.mapValue);default:throw oe(13486,{value:n})}}function pc(n){return!!n&&"integerValue"in n}function sl(n){return!!n&&"arrayValue"in n}function Dd(n){return!!n&&"nullValue"in n}function Nd(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $o(n){return!!n&&"mapValue"in n}function gI(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Sm])===null||t===void 0?void 0:t.stringValue)===Cm}function mi(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $r(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=mi(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mi(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$o(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mi(t)}setAll(e){let t=lt.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,s),r={},s=[],t=u.popLast()}o?r[u.lastSegment()]=mi(o):s.push(u.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());$o(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];$o(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){$r(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new jt(mi(this.value))}}function Rm(n){const e=[];return $r(n.fields,(t,r)=>{const s=new lt([t]);if($o(r)){const i=Rm(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t,r,s,i,o,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new yt(e,0,he.min(),he.min(),he.min(),jt.empty(),0)}static newFoundDocument(e,t,r,s){return new yt(e,1,t,he.min(),r,s,0)}static newNoDocument(e,t){return new yt(e,2,t,he.min(),he.min(),jt.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,he.min(),he.min(),jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t){this.position=e,this.inclusive=t}}function Md(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),t.key):r=Is(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ld(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hn(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t="asc"){this.field=e,this.dir=t}}function yI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{}class et extends Pm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bI(e,t,r):t==="array-contains"?new II(e,r):t==="in"?new wI(e,r):t==="not-in"?new AI(e,r):t==="array-contains-any"?new SI(e,r):new et(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new EI(e,r):new TI(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Is(t,this.value)):t!==null&&lr(this.value)===lr(t)&&this.matchesComparison(Is(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends Pm{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new dn(e,t)}matches(e){return km(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function km(n){return n.op==="and"}function xm(n){return _I(n)&&km(n)}function _I(n){for(const e of n.filters)if(e instanceof dn)return!1;return!0}function mc(n){if(n instanceof et)return n.field.canonicalString()+n.op.toString()+ws(n.value);if(xm(n))return n.filters.map(e=>mc(e)).join(",");{const e=n.filters.map(t=>mc(t)).join(",");return`${n.op}(${e})`}}function Vm(n,e){return n instanceof et?function(r,s){return s instanceof et&&r.op===s.op&&r.field.isEqual(s.field)&&hn(r.value,s.value)}(n,e):n instanceof dn?function(r,s){return s instanceof dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&Vm(o,s.filters[u]),!0):!1}(n,e):void oe(19439)}function Om(n){return n instanceof et?function(t){return`${t.field.canonicalString()} ${t.op} ${ws(t.value)}`}(n):n instanceof dn?function(t){return t.op.toString()+" {"+t.getFilters().map(Om).join(" ,")+"}"}(n):"Filter"}class bI extends et{constructor(e,t,r){super(e,t,r),this.key=se.fromName(r.referenceValue)}matches(e){const t=se.comparator(e.key,this.key);return this.matchesComparison(t)}}class EI extends et{constructor(e,t){super(e,"in",t),this.keys=Dm("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class TI extends et{constructor(e,t){super(e,"not-in",t),this.keys=Dm("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Dm(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>se.fromName(r.referenceValue))}class II extends et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sl(t)&&Si(t.arrayValue,this.value)}}class wI extends et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Si(this.value.arrayValue,t)}}class AI extends et{constructor(e,t){super(e,"not-in",t)}matches(e){if(Si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Si(this.value.arrayValue,t)}}class SI extends et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Si(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,t=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Ie=null}}function Fd(n,e=null,t=[],r=[],s=null,i=null,o=null){return new CI(n,e,t,r,s,i,o)}function il(n){const e=de(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mc(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ba(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ws(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ws(r)).join(",")),e.Ie=t}return e.Ie}function ol(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Vm(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ld(n.startAt,e.startAt)&&Ld(n.endAt,e.endAt)}function gc(n){return se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function RI(n,e,t,r,s,i,o,u){return new za(n,e,t,r,s,i,o,u)}function al(n){return new za(n)}function Ud(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function PI(n){return n.collectionGroup!==null}function gi(n){const e=de(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new nt(lt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(u=u.add(l.field))})}),u})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new ha(i,r))}),t.has(lt.keyField().canonicalString())||e.Ee.push(new ha(lt.keyField(),r))}return e.Ee}function an(n){const e=de(n);return e.de||(e.de=kI(e,gi(n))),e.de}function kI(n,e){if(n.limitType==="F")return Fd(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ha(s.field,i)});const t=n.endAt?new la(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new la(n.startAt.position,n.startAt.inclusive):null;return Fd(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function vc(n,e,t){return new za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ha(n,e){return ol(an(n),an(e))&&n.limitType===e.limitType}function Nm(n){return`${il(an(n))}|lt:${n.limitType}`}function rs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>Om(s)).join(", ")}]`),Ba(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>ws(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>ws(s)).join(",")),`Target(${r})`}(an(n))}; limitType=${n.limitType})`}function qa(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of gi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const l=Md(o,u,c);return o.inclusive?l<=0:l<0}(r.startAt,gi(r),s)||r.endAt&&!function(o,u,c){const l=Md(o,u,c);return o.inclusive?l>=0:l>0}(r.endAt,gi(r),s))}(n,e)}function xI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Mm(n){return(e,t)=>{let r=!1;for(const s of gi(n)){const i=VI(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function VI(n,e,t){const r=n.field.isKeyField()?se.comparator(e.key,t.key):function(i,o,u){const c=o.data.field(i),l=u.data.field(i);return c!==null&&l!==null?Is(c,l):oe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$r(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return bm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=new ze(se.comparator);function Mn(){return OI}const Lm=new ze(se.comparator);function ai(...n){let e=Lm;for(const t of n)e=e.insert(t.key,t);return e}function Fm(n){let e=Lm;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ar(){return vi()}function Um(){return vi()}function vi(){return new zr(n=>n.toString(),(n,e)=>n.isEqual(e))}const DI=new ze(se.comparator),NI=new nt(se.comparator);function be(...n){let e=NI;for(const t of n)e=e.add(t);return e}const MI=new nt(ve);function LI(){return MI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aa(e)?"-0":e}}function jm(n){return{integerValue:""+n}}function FI(n,e){return lI(e)?jm(e):ul(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this._=void 0}}function UI(n,e,t){return n instanceof da?function(s,i){const o={fields:{[Im]:{stringValue:Tm},[Am]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rl(i)&&(i=$a(i)),i&&(o.fields[wm]=i),{mapValue:o}}(t,e):n instanceof Ci?$m(n,e):n instanceof Ri?zm(n,e):function(s,i){const o=Bm(s,i),u=jd(o)+jd(s.Re);return pc(o)&&pc(s.Re)?jm(u):ul(s.serializer,u)}(n,e)}function jI(n,e,t){return n instanceof Ci?$m(n,e):n instanceof Ri?zm(n,e):t}function Bm(n,e){return n instanceof fa?function(r){return pc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class da extends Wa{}class Ci extends Wa{constructor(e){super(),this.elements=e}}function $m(n,e){const t=Hm(e);for(const r of n.elements)t.some(s=>hn(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ri extends Wa{constructor(e){super(),this.elements=e}}function zm(n,e){let t=Hm(e);for(const r of n.elements)t=t.filter(s=>!hn(s,r));return{arrayValue:{values:t}}}class fa extends Wa{constructor(e,t){super(),this.serializer=e,this.Re=t}}function jd(n){return Ge(n.integerValue||n.doubleValue)}function Hm(n){return sl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function BI(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Ci&&s instanceof Ci||r instanceof Ri&&s instanceof Ri?Ts(r.elements,s.elements,hn):r instanceof fa&&s instanceof fa?hn(r.Re,s.Re):r instanceof da&&s instanceof da}(n.transform,e.transform)}class $I{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ga{}function qm(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gm(n.key,Pn.none()):new Xi(n.key,n.data,Pn.none());{const t=n.data,r=jt.empty();let s=new nt(lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Hr(n.key,r,new qt(s.toArray()),Pn.none())}}function zI(n,e,t){n instanceof Xi?function(s,i,o){const u=s.value.clone(),c=$d(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Hr?function(s,i,o){if(!zo(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=$d(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Wm(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function yi(n,e,t,r){return n instanceof Xi?function(i,o,u,c){if(!zo(i.precondition,o))return u;const l=i.value.clone(),d=zd(i.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Hr?function(i,o,u,c){if(!zo(i.precondition,o))return u;const l=zd(i.fieldTransforms,c,o),d=o.data;return d.setAll(Wm(i)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(i,o,u){return zo(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(n,e,t)}function HI(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=Bm(r.transform,s||null);i!=null&&(t===null&&(t=jt.empty()),t.set(r.field,i))}return t||null}function Bd(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ts(r,s,(i,o)=>BI(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Xi extends Ga{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hr extends Ga{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Wm(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $d(n,e,t){const r=new Map;Oe(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,jI(o,u,t[s]))}return r}function zd(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,UI(i,o,e))}return r}class Gm extends Ga{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qI extends Ga{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&zI(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yi(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yi(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Um();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=t.has(s.key)?null:u;const c=qm(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&Ts(this.mutations,e.mutations,(t,r)=>Bd(t,r))&&Ts(this.baseMutations,e.baseMutations,(t,r)=>Bd(t,r))}}class cl{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Oe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return DI}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new cl(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,Te;function QI(n){switch(n){case U.OK:return oe(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return oe(15467,{code:n})}}function Km(n){if(n===void 0)return Nn("GRPC error has no .code"),U.UNKNOWN;switch(n){case Ze.OK:return U.OK;case Ze.CANCELLED:return U.CANCELLED;case Ze.UNKNOWN:return U.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return U.INTERNAL;case Ze.UNAVAILABLE:return U.UNAVAILABLE;case Ze.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ze.NOT_FOUND:return U.NOT_FOUND;case Ze.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ze.ABORTED:return U.ABORTED;case Ze.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ze.DATA_LOSS:return U.DATA_LOSS;default:return oe(39323,{code:n})}}(Te=Ze||(Ze={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new ir([4294967295,4294967295],0);function Hd(n){const e=vm().encode(n),t=new cm;return t.update(e),new Uint8Array(t.digest())}function qd(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ir([t,r],0),new ir([s,i],0)]}class ll{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ui(`Invalid padding: ${t}`);if(r<0)throw new ui(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ui(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ui(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ir.fromNumber(this.pe)}we(e,t,r){let s=e.add(t.multiply(ir.fromNumber(r)));return s.compare(ZI)===1&&(s=new ir([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Hd(e),[r,s]=qd(t);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ll(i,s,t);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.pe===0)return;const t=Hd(e),[r,s]=qd(t);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ui extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,eo.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ka(he.min(),s,new ze(ve),Mn(),be())}}class eo{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new eo(r,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t,r,s){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=s}}class Qm{constructor(e,t){this.targetId=e,this.Ce=t}}class Zm{constructor(e,t,r=ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Wd{constructor(){this.Fe=0,this.Me=Gd(),this.xe=ht.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=be(),t=be(),r=be();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:oe(38017,{changeType:i})}}),new eo(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Gd()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Oe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class YI{constructor(e){this.ze=e,this.je=new Map,this.He=Mn(),this.Je=Ro(),this.Ye=Ro(),this.Ze=new ze(ve)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:oe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,s)=>{this.it(s)&&t(s)})}ot(e){const t=e.targetId,r=e.Ce.count,s=this._t(t);if(s){const i=s.target;if(gc(i))if(r===0){const o=new se(i.path);this.tt(t,o,yt.newNoDocument(o,he.min()))}else Oe(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const u=this.ct(e),c=u?this.lt(u,e,o):1;if(c!==0){this.st(t);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,l)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,u;try{o=cr(r).toUint8Array()}catch(c){if(c instanceof Em)return Es("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new ll(o,s,i)}catch(c){return Es(c instanceof ui?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.pe===0?null:u}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.tt(t,i,null),s++)}),s}It(e){const t=new Map;this.je.forEach((i,o)=>{const u=this._t(o);if(u){if(i.current&&gc(u.target)){const c=new se(u.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,yt.newNoDocument(c,e))}i.Le&&(t.set(o,i.qe()),i.Qe())}});let r=be();this.Ye.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const l=this._t(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Ka(e,t,this.Ze,this.He,r);return this.He=Mn(),this.Je=Ro(),this.Ye=Ro(),this.Ze=new ze(ve),s}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,t)?s.$e(t,1):s.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Wd,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new nt(ve),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new nt(ve),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Wd),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Ro(){return new ze(se.comparator)}function Gd(){return new ze(se.comparator)}const JI={asc:"ASCENDING",desc:"DESCENDING"},XI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ew={and:"AND",or:"OR"};class tw{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yc(n,e){return n.useProto3Json||Ba(e)?e:{value:e}}function pa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ym(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nw(n,e){return pa(n,e.toTimestamp())}function un(n){return Oe(!!n,49232),he.fromTimestamp(function(t){const r=ur(t);return new tt(r.seconds,r.nanos)}(n))}function hl(n,e){return _c(n,e).canonicalString()}function _c(n,e){const t=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Jm(n){const e=Be.fromString(n);return Oe(rg(e),10190,{key:e.toString()}),e}function bc(n,e){return hl(n.databaseId,e.path)}function Vu(n,e){const t=Jm(e);if(t.get(1)!==n.databaseId.projectId)throw new te(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new te(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new se(eg(t))}function Xm(n,e){return hl(n.databaseId,e)}function rw(n){const e=Jm(n);return e.length===4?Be.emptyPath():eg(e)}function Ec(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eg(n){return Oe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Kd(n,e,t){return{name:bc(n,e),fields:t.value.mapValue.fields}}function sw(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:oe(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,d){return l.useProto3Json?(Oe(d===void 0||typeof d=="string",58123),ht.fromBase64String(d||"")):(Oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ht.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(l){const d=l.code===void 0?U.UNKNOWN:Km(l.code);return new te(d,l.message||"")}(o);t=new Zm(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Vu(n,r.document.name),i=un(r.document.updateTime),o=r.document.createTime?un(r.document.createTime):he.min(),u=new jt({mapValue:{fields:r.document.fields}}),c=yt.newFoundDocument(s,i,o,u),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Ho(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Vu(n,r.document),i=r.readTime?un(r.readTime):he.min(),o=yt.newNoDocument(s,i),u=r.removedTargetIds||[];t=new Ho([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Vu(n,r.document),i=r.removedTargetIds||[];t=new Ho([],i,s,null)}else{if(!("filter"in e))return oe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new KI(s,i),u=r.targetId;t=new Qm(u,o)}}return t}function iw(n,e){let t;if(e instanceof Xi)t={update:Kd(n,e.key,e.value)};else if(e instanceof Gm)t={delete:bc(n,e.key)};else if(e instanceof Hr)t={update:Kd(n,e.key,e.data),updateMask:pw(e.fieldMask)};else{if(!(e instanceof qI))return oe(16599,{ft:e.type});t={verify:bc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof da)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ci)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ri)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof fa)return{fieldPath:o.field.canonicalString(),increment:u.Re};throw oe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:nw(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe(27497)}(n,e.precondition)),t}function ow(n,e){return n&&n.length>0?(Oe(e!==void 0,14353),n.map(t=>function(s,i){let o=s.updateTime?un(s.updateTime):un(i);return o.isEqual(he.min())&&(o=un(i)),new $I(o,s.transformResults||[])}(t,e))):[]}function aw(n,e){return{documents:[Xm(n,e.path)]}}function uw(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Xm(n,s);const i=function(l){if(l.length!==0)return ng(dn.create(l,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:ss(g.field),direction:hw(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=yc(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:t,parent:s}}function cw(n){let e=rw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Oe(r===1,65062);const d=t.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];t.where&&(i=function(p){const g=tg(p);return g instanceof dn&&xm(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(C){return new ha(is(C.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(t.orderBy));let u=null;t.limit&&(u=function(p){let g;return g=typeof p=="object"?p.value:p,Ba(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(p){const g=!!p.before,T=p.values||[];return new la(T,g)}(t.startAt));let l=null;return t.endAt&&(l=function(p){const g=!p.before,T=p.values||[];return new la(T,g)}(t.endAt)),RI(e,s,o,i,u,"F",c,l)}function lw(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tg(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=is(t.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=is(t.unaryFilter.field);return et.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=is(t.unaryFilter.field);return et.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=is(t.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}}(n):n.fieldFilter!==void 0?function(t){return et.create(is(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return dn.create(t.compositeFilter.filters.map(r=>tg(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe(1026)}}(t.compositeFilter.op))}(n):oe(30097,{filter:n})}function hw(n){return JI[n]}function dw(n){return XI[n]}function fw(n){return ew[n]}function ss(n){return{fieldPath:n.canonicalString()}}function is(n){return lt.fromServerFormat(n.fieldPath)}function ng(n){return n instanceof et?function(t){if(t.op==="=="){if(Nd(t.value))return{unaryFilter:{field:ss(t.field),op:"IS_NAN"}};if(Dd(t.value))return{unaryFilter:{field:ss(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Nd(t.value))return{unaryFilter:{field:ss(t.field),op:"IS_NOT_NAN"}};if(Dd(t.value))return{unaryFilter:{field:ss(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ss(t.field),op:dw(t.op),value:t.value}}}(n):n instanceof dn?function(t){const r=t.getFilters().map(s=>ng(s));return r.length===1?r[0]:{compositeFilter:{op:fw(t.op),filters:r}}}(n):oe(54877,{filter:n})}function pw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rg(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,t,r,s,i=he.min(),o=he.min(),u=ht.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.wt=e}}function gw(n){const e=cw({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.yn=new yw}addToCollectionParentIndex(e,t){return this.yn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(ar.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class yw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new nt(Be.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new nt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sg=41943040;class xt{static withCacheSize(e){return new xt(e,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xt.DEFAULT_COLLECTION_PERCENTILE=10,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xt.DEFAULT=new xt(sg,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xt.DISABLED=new xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new As(0)}static ir(){return new As(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="LruGarbageCollector",_w=1048576;function Yd([n,e],[t,r]){const s=ve(n,t);return s===0?ve(e,r):s}class bw{constructor(e){this.cr=e,this.buffer=new nt(Yd),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Yd(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ew{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){X(Zd,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ms(t)?X(Zd,"Ignoring IndexedDB error during garbage collection: ",t):await Ns(t)}await this.Ir(3e5)})}}class Tw{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(ja.le);const r=new bw(t);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Qd)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qd):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,s,i,o,u,c,l;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,u=Date.now(),this.removeTargets(e,r,t))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ns()<=_e.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(c-u)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Iw(n,e){return new Tw(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.changes=new zr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&yi(r.mutation,s,qt.empty(),tt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=be()){const s=Ar();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=ai();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ar();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,be()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{t.set(o,u)})})}computeViews(e,t,r,s){let i=Mn();const o=vi(),u=function(){return vi()}();return t.forEach((c,l)=>{const d=r.get(l.key);s.has(l.key)&&(d===void 0||d.mutation instanceof Hr)?i=i.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),yi(d.mutation,l,d.mutation.getFieldMask(),tt.now())):o.set(l.key,qt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var p;return u.set(l,new Aw(d,(p=o.get(l))!==null&&p!==void 0?p:null))}),u))}recalculateAndSaveOverlays(e,t){const r=vi();let s=new ze((o,u)=>o-u),i=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const u of o)u.keys().forEach(c=>{const l=t.get(c);if(l===null)return;let d=r.get(c)||qt.empty();d=u.applyToLocalView(l,d),r.set(c,d);const p=(s.get(u.batchId)||be()).add(c);s=s.insert(u.batchId,p)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),l=c.key,d=c.value,p=Um();d.forEach(g=>{if(!i.has(g)){const T=qm(t.get(g),r.get(g));T!==null&&p.set(g,T),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):PI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):L.resolve(Ar());let u=Ii,c=i;return o.next(l=>L.forEach(l,(d,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,i)).next(()=>this.computeViews(e,c,l,be())).next(d=>({batchId:u,changes:Fm(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new se(t)).next(r=>{let s=ai();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=ai();return this.indexManager.getCollectionParents(e,i).next(u=>L.forEach(u,c=>{const l=function(p,g){return new za(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r,s).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((c,l)=>{const d=l.getKey();o.get(d)===null&&(o=o.insert(d,yt.newInvalidDocument(d)))});let u=ai();return o.forEach((c,l)=>{const d=i.get(c);d!==void 0&&yi(d.mutation,l,qt.empty(),tt.now()),qa(t,l)&&(u=u.insert(c,l))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return L.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:un(s.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(s){return{name:s.name,query:gw(s.bundledQuery),readTime:un(s.readTime)}}(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.overlays=new ze(se.comparator),this.Or=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ar();return L.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.St(e,t,i)}),L.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const s=Ar(),i=t.length+1,o=new se(t.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return L.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new ze((l,d)=>l-d);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=i.get(l.largestBatchId);d===null&&(d=Ar(),i=i.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}const u=Ar(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>u.set(l,d)),!(u.size()>=s)););return L.resolve(u)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new GI(t,r));let i=this.Or.get(t);i===void 0&&(i=be(),this.Or.set(t,i)),this.Or.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.Nr=new nt(rt.Br),this.Lr=new nt(rt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new rt(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new rt(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new se(new Be([])),r=new rt(t,e),s=new rt(t,e+1),i=[];return this.Lr.forEachInRange([r,s],o=>{this.Qr(o),i.push(o.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new se(new Be([])),r=new rt(t,e),s=new rt(t,e+1);let i=be();return this.Lr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new rt(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return se.comparator(e.key,t.key)||ve(e.Gr,t.Gr)}static kr(e,t){return ve(e.Gr,t.Gr)||se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new nt(rt.Br)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new WI(i,t,r,s);this.mutationQueue.push(o);for(const u of s)this.zr=this.zr.add(new rt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,t){return L.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Hr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?nl:this.Jn-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new rt(t,0),s=new rt(t,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],o=>{const u=this.jr(o.Gr);i.push(u)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nt(ve);return t.forEach(s=>{const i=new rt(s,0),o=new rt(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,o],u=>{r=r.add(u.Gr)})}),L.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;se.isDocumentKey(i)||(i=i.child(""));const o=new rt(new se(i),0);let u=new nt(ve);return this.zr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(u=u.add(c.Gr)),!0)},o),L.resolve(this.Jr(u))}Jr(e){const t=[];return e.forEach(r=>{const s=this.jr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Oe(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return L.forEach(t.mutations,s=>{const i=new rt(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new rt(t,0),s=this.zr.firstAfterOrEqual(r);return L.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.Zr=e,this.docs=function(){return new ze(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let r=Mn();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=Mn();const o=t.path,u=new se(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||oI(iI(d),r)<=0||(s.has(d.key)||qa(t,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,t,r,s){oe(9500)}Xr(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Vw(this)}getSize(e){return L.resolve(this.size)}}class Vw extends ww{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.persistence=e,this.ei=new zr(t=>il(t),ol),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.ti=0,this.ni=new dl,this.targetCount=0,this.ri=As.rr()}forEachTarget(e,t){return this.ei.forEach((r,s)=>t(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),L.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new As(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.ar(t),L.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.ei.forEach((o,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ei.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,t){this.ii={},this.overlays={},this.si=new ja(0),this.oi=!1,this.oi=!0,this._i=new Pw,this.referenceDelegate=e(this),this.ai=new Ow(this),this.indexManager=new vw,this.remoteDocumentCache=function(s){return new xw(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new mw(t),this.ci=new Cw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new kw(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){X("MemoryPersistence","Starting transaction:",e);const s=new Dw(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(e,t){return L.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class Dw extends uI{constructor(e){super(),this.currentSequenceNumber=e}}class fl{constructor(e){this.persistence=e,this.Ti=new dl,this.Ii=null}static Ei(e){return new fl(e)}get di(){if(this.Ii)return this.Ii;throw oe(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.di,r=>{const s=se.fromPath(r);return this.Ai(e,s).next(i=>{i||t.removeEntry(s,he.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return L.or([()=>L.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class ma{constructor(e,t){this.persistence=e,this.Ri=new zr(r=>hI(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Iw(this,t)}static Ei(e,t){return new ma(e,t)}li(){}hi(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return L.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(i=>i?L.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(e,o=>this.gr(e,o,t).next(u=>{u||(r++,i.removeEntry(o,he.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),L.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bo(e.data.value)),t}gr(e,t,r){return L.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.Ri.get(t);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=s}static Ps(e,t){let r=be(),s=be();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new pl(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return x_()?8:cI(_t())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.Rs(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Vs(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Nw;return this.fs(e,t,o).next(u=>{if(i.result=u,this.Is)return this.gs(e,t,o,u.size)})}).next(()=>i.result)}gs(e,t,r,s){return r.documentReadCount<this.Es?(ns()<=_e.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",rs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),L.resolve()):(ns()<=_e.DEBUG&&X("QueryEngine","Query:",rs(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(ns()<=_e.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",rs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(t))):L.resolve())}Rs(e,t){if(Ud(t))return L.resolve(null);let r=an(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=vc(t,null,"F"),r=an(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=be(...i);return this.As.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.ps(t,u);return this.ys(t,l,o,c.readTime)?this.Rs(e,vc(t,null,"F")):this.ws(e,l,t,c)}))})))}Vs(e,t,r,s){return Ud(t)||s.isEqual(he.min())?L.resolve(null):this.As.getDocuments(e,r).next(i=>{const o=this.ps(t,i);return this.ys(t,o,r,s)?L.resolve(null):(ns()<=_e.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rs(t)),this.ws(e,o,t,sI(s,Ii)).next(u=>u))})}ps(e,t){let r=new nt(Mm(e));return t.forEach((s,i)=>{qa(e,i)&&(r=r.add(i))}),r}ys(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(e,t,r){return ns()<=_e.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",rs(t)),this.As.getDocumentsMatchingQuery(e,t,ar.min(),r)}ws(e,t,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml="LocalStore",Lw=3e8;class Fw{constructor(e,t,r,s){this.persistence=e,this.bs=t,this.serializer=s,this.Ss=new ze(ve),this.Ds=new zr(i=>il(i),ol),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sw(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function Uw(n,e,t,r){return new Fw(n,e,t,r)}async function og(n,e){const t=de(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=be();for(const l of s){o.push(l.batchId);for(const d of l.mutations)c=c.add(d.key)}for(const l of i){u.push(l.batchId);for(const d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ms:l,removedBatchIds:o,addedBatchIds:u}))})})}function jw(n,e){const t=de(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=t.Cs.newChangeBuffer({trackRemovals:!0});return function(u,c,l,d){const p=l.batch,g=p.keys();let T=L.resolve();return g.forEach(C=>{T=T.next(()=>d.getEntry(c,C)).next(R=>{const A=l.docVersions.get(C);Oe(A!==null,48541),R.version.compareTo(A)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=be();for(let l=0;l<u.mutationResults.length;++l)u.mutationResults[l].transformResults.length>0&&(c=c.add(u.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function ag(n){const e=de(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function Bw(n,e){const t=de(n),r=e.snapshotVersion;let s=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.Cs.newChangeBuffer({trackRemovals:!0});s=t.Ss;const u=[];e.targetChanges.forEach((d,p)=>{const g=s.get(p);if(!g)return;u.push(t.ai.removeMatchingKeys(i,d.removedDocuments,p).next(()=>t.ai.addMatchingKeys(i,d.addedDocuments,p)));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?T=T.withResumeToken(ht.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):d.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(d.resumeToken,r)),s=s.insert(p,T),function(R,A,O){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Lw?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,T,d)&&u.push(t.ai.updateTargetData(i,T))});let c=Mn(),l=be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(i,d))}),u.push($w(i,o,e.documentUpdates).next(d=>{c=d.xs,l=d.Os})),!r.isEqual(he.min())){const d=t.ai.getLastRemoteSnapshotVersion(i).next(p=>t.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(d)}return L.waitFor(u).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,c,l)).next(()=>c)}).then(i=>(t.Ss=s,i))}function $w(n,e,t){let r=be(),s=be();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=Mn();return t.forEach((u,c)=>{const l=i.get(u);c.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):X(ml,"Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version)}),{xs:o,Os:s}})}function zw(n,e){const t=de(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=nl),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hw(n,e){const t=de(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.ai.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):t.ai.allocateTargetId(r).next(o=>(s=new tr(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function Tc(n,e,t){const r=de(n),s=r.Ss.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ms(o))throw o;X(ml,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)}function Jd(n,e,t){const r=de(n);let s=he.min(),i=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){const p=de(c),g=p.Ds.get(d);return g!==void 0?L.resolve(p.Ss.get(g)):p.ai.getTargetData(l,d)}(r,o,an(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,t?s:he.min(),t?i:be())).next(u=>(qw(r,xI(e),u),{documents:u,Ns:i})))}function qw(n,e,t){let r=n.vs.get(e)||he.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.vs.set(e,r)}class Xd{constructor(){this.activeTargetIds=LI()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ww{constructor(){this.So=new Xd,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Xd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="ConnectivityMonitor";class tf{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){X(ef,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){X(ef,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Po=null;function Ic(){return Po===null?Po=function(){return 268435456+Math.round(2147483648*Math.random())}():Po++,"0x"+Po.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou="RestConnection",Kw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qw{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===ua?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,t,r,s,i){const o=Ic(),u=this.$o(e,t.toUriEncodedString());X(Ou,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(c,s,i);const{host:l}=new URL(u),d=Gi(l);return this.Ko(e,u,c,r,d).then(p=>(X(Ou,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Es(Ou,`RPC '${e}' ${o} failed with error: `,p,"url: ",u,"request:",r),p})}Wo(e,t,r,s,i,o){return this.Qo(e,t,r,s,i)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ds}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}$o(e,t){const r=Kw[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class Yw extends Qw{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,s,i){const o=Ic();return new Promise((u,c)=>{const l=new lm;l.setWithCredentials(!0),l.listenOnce(hm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case jo.NO_ERROR:const p=l.getResponseJson();X(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),u(p);break;case jo.TIMEOUT:X(mt,`RPC '${e}' ${o} timed out`),c(new te(U.DEADLINE_EXCEEDED,"Request time out"));break;case jo.HTTP_ERROR:const g=l.getStatus();if(X(mt,`RPC '${e}' ${o} failed with status:`,g,"response text:",l.getResponseText()),g>0){let T=l.getResponseJson();Array.isArray(T)&&(T=T[0]);const C=T==null?void 0:T.error;if(C&&C.status&&C.message){const R=function(O){const V=O.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(V)>=0?V:U.UNKNOWN}(C.status);c(new te(R,C.message))}else c(new te(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new te(U.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{s_:e,streamId:o,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{X(mt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);X(mt,`RPC '${e}' ${o} sending request:`,s),l.send(t,"POST",d,r,15)})}a_(e,t,r){const s=Ic(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pm(),u=fm(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const d=i.join("");X(mt,`Creating RPC '${e}' stream ${s}: ${d}`,c);const p=o.createWebChannel(d,c);let g=!1,T=!1;const C=new Zw({Go:A=>{T?X(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(X(mt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),X(mt,`RPC '${e}' stream ${s} sending:`,A),p.send(A))},zo:()=>p.close()}),R=(A,O,V)=>{A.listen(O,M=>{try{V(M)}catch($){setTimeout(()=>{throw $},0)}})};return R(p,oi.EventType.OPEN,()=>{T||(X(mt,`RPC '${e}' stream ${s} transport opened.`),C.t_())}),R(p,oi.EventType.CLOSE,()=>{T||(T=!0,X(mt,`RPC '${e}' stream ${s} transport closed`),C.r_())}),R(p,oi.EventType.ERROR,A=>{T||(T=!0,Es(mt,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),C.r_(new te(U.UNAVAILABLE,"The operation could not be completed")))}),R(p,oi.EventType.MESSAGE,A=>{var O;if(!T){const V=A.data[0];Oe(!!V,16349);const M=V,$=(M==null?void 0:M.error)||((O=M[0])===null||O===void 0?void 0:O.error);if($){X(mt,`RPC '${e}' stream ${s} received error:`,$);const x=$.status;let H=function(_){const E=Ze[_];if(E!==void 0)return Km(E)}(x),b=$.message;H===void 0&&(H=U.INTERNAL,b="Unknown error status: "+x+" with message "+$.message),T=!0,C.r_(new te(H,b)),p.close()}else X(mt,`RPC '${e}' stream ${s} received:`,V),C.i_(V)}}),R(u,dm.STAT_EVENT,A=>{A.stat===hc.PROXY?X(mt,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===hc.NOPROXY&&X(mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.n_()},0),C}}function Du(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(n){return new tw(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,t,r=1e3,s=1.5,i=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,t-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="PersistentStream";class cg{constructor(e,t,r,s,i,o,u,c){this.bi=e,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new ug(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(Nn(t.toString()),Nn("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===t&&this.B_(r,s)},r=>{e(()=>{const s=new te(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return X(nf,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(X(nf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jw extends cg{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=sw(this.serializer,e),r=function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?un(o.readTime):he.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=Ec(this.serializer),t.addTarget=function(i,o){let u;const c=o.target;if(u=gc(c)?{documents:aw(i,c)}:{query:uw(i,c).gt},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=Ym(i,o.resumeToken);const l=yc(i,o.expectedCount);l!==null&&(u.expectedCount=l)}else if(o.snapshotVersion.compareTo(he.min())>0){u.readTime=pa(i,o.snapshotVersion.toTimestamp());const l=yc(i,o.expectedCount);l!==null&&(u.expectedCount=l)}return u}(this.serializer,e);const r=lw(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=Ec(this.serializer),t.removeTarget=e,this.F_(t)}}class Xw extends cg{constructor(e,t,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=ow(e.writeResults,e.commitTime),r=un(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=Ec(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>iw(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{}class t0 extends e0{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new te(U.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Qo(e,_c(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(U.UNKNOWN,i.toString())})}Wo(e,t,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Wo(e,_c(t,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(U.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class n0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Nn(t),this.ea=!1):X("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="RemoteStore";class r0{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(o=>{r.enqueueAndForget(async()=>{qr(this)&&(X(Mr,"Restarting streams for network reachability change."),await async function(c){const l=de(c);l.aa.add(4),await to(l),l.la.set("Unknown"),l.aa.delete(4),await Za(l)}(this))})}),this.la=new n0(r,s)}}async function Za(n){if(qr(n))for(const e of n.ua)await e(!0)}async function to(n){for(const e of n.ua)await e(!1)}function lg(n,e){const t=de(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),_l(t)?yl(t):Ls(t).b_()&&vl(t,e))}function gl(n,e){const t=de(n),r=Ls(t);t._a.delete(e),r.b_()&&hg(t,e),t._a.size===0&&(r.b_()?r.v_():qr(t)&&t.la.set("Unknown"))}function vl(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ls(n).U_(e)}function hg(n,e){n.ha.Ke(e),Ls(n).K_(e)}function yl(n){n.ha=new YI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Ls(n).start(),n.la.ta()}function _l(n){return qr(n)&&!Ls(n).w_()&&n._a.size>0}function qr(n){return de(n).aa.size===0}function dg(n){n.ha=void 0}async function s0(n){n.la.set("Online")}async function i0(n){n._a.forEach((e,t)=>{vl(n,e)})}async function o0(n,e){dg(n),_l(n)?(n.la.ia(e),yl(n)):n.la.set("Unknown")}async function a0(n,e,t){if(n.la.set("Online"),e instanceof Zm&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s._a.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s._a.delete(u),s.ha.removeTarget(u))}(n,e)}catch(r){X(Mr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ga(n,r)}else if(e instanceof Ho?n.ha.Xe(e):e instanceof Qm?n.ha.ot(e):n.ha.nt(e),!t.isEqual(he.min()))try{const r=await ag(n.localStore);t.compareTo(r)>=0&&await function(i,o){const u=i.ha.It(o);return u.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const d=i._a.get(l);d&&i._a.set(l,d.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,l)=>{const d=i._a.get(c);if(!d)return;i._a.set(c,d.withResumeToken(ht.EMPTY_BYTE_STRING,d.snapshotVersion)),hg(i,c);const p=new tr(d.target,c,l,d.sequenceNumber);vl(i,p)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){X(Mr,"Failed to raise snapshot:",r),await ga(n,r)}}async function ga(n,e,t){if(!Ms(e))throw e;n.aa.add(1),await to(n),n.la.set("Offline"),t||(t=()=>ag(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{X(Mr,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await Za(n)})}function fg(n,e){return e().catch(t=>ga(n,t,e))}async function Ya(n){const e=de(n),t=hr(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:nl;for(;u0(e);)try{const s=await zw(e.localStore,r);if(s===null){e.oa.length===0&&t.v_();break}r=s.batchId,c0(e,s)}catch(s){await ga(e,s)}pg(e)&&mg(e)}function u0(n){return qr(n)&&n.oa.length<10}function c0(n,e){n.oa.push(e);const t=hr(n);t.b_()&&t.W_&&t.G_(e.mutations)}function pg(n){return qr(n)&&!hr(n).w_()&&n.oa.length>0}function mg(n){hr(n).start()}async function l0(n){hr(n).H_()}async function h0(n){const e=hr(n);for(const t of n.oa)e.G_(t.mutations)}async function d0(n,e,t){const r=n.oa.shift(),s=cl.from(r,e,t);await fg(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Ya(n)}async function f0(n,e){e&&hr(n).W_&&await async function(r,s){if(function(o){return QI(o)&&o!==U.ABORTED}(s.code)){const i=r.oa.shift();hr(r).D_(),await fg(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ya(r)}}(n,e),pg(n)&&mg(n)}async function rf(n,e){const t=de(n);t.asyncQueue.verifyOperationInProgress(),X(Mr,"RemoteStore received new credentials");const r=qr(t);t.aa.add(3),await to(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Za(t)}async function p0(n,e){const t=de(n);e?(t.aa.delete(2),await Za(t)):e||(t.aa.add(2),await to(t),t.la.set("Unknown"))}function Ls(n){return n.Pa||(n.Pa=function(t,r,s){const i=de(t);return i.Y_(),new Jw(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{jo:s0.bind(null,n),Jo:i0.bind(null,n),Zo:o0.bind(null,n),Q_:a0.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),_l(n)?yl(n):n.la.set("Unknown")):(await n.Pa.stop(),dg(n))})),n.Pa}function hr(n){return n.Ta||(n.Ta=function(t,r,s){const i=de(t);return i.Y_(),new Xw(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:l0.bind(null,n),Zo:f0.bind(null,n),z_:h0.bind(null,n),j_:d0.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Ya(n)):(await n.Ta.stop(),n.oa.length>0&&(X(Mr,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,u=new bl(e,t,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function El(n,e){if(Nn("AsyncQueue",`${e}: ${n}`),Ms(n))return new te(U.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{static emptySet(e){return new ds(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||se.comparator(t.key,r.key):(t,r)=>se.comparator(t.key,r.key),this.keyedMap=ai(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ds)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ds;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(){this.Ia=new ze(se.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):oe(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ss{constructor(e,t,r,s,i,o,u,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach(u=>{o.push({type:0,doc:u})}),new Ss(e,t,ds.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ha(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class g0{constructor(){this.queries=of(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const s=de(t),i=s.queries;s.queries=of(),i.forEach((o,u)=>{for(const c of u.Ra)c.onError(r)})})(this,new te(U.ABORTED,"Firestore shutting down"))}}function of(){return new zr(n=>Nm(n),Ha)}async function gg(n,e){const t=de(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Va()&&e.ma()&&(r=2):(i=new m0,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await t.onListen(s,!0);break;case 1:i.Aa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const u=El(o,`Initialization of query '${rs(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,i),i.Ra.push(e),e.ga(t.onlineState),i.Aa&&e.pa(i.Aa)&&Tl(t)}async function vg(n,e){const t=de(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.Ra.indexOf(e);o>=0&&(i.Ra.splice(o,1),i.Ra.length===0?s=e.ma()?0:1:!i.Va()&&e.ma()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function v0(n,e){const t=de(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const u of o.Ra)u.pa(s)&&(r=!0);o.Aa=s}}r&&Tl(t)}function y0(n,e,t){const r=de(n),s=r.queries.get(e);if(s)for(const i of s.Ra)i.onError(t);r.queries.delete(e)}function Tl(n){n.fa.forEach(e=>{e.next()})}var wc,af;(af=wc||(wc={})).ya="default",af.Cache="cache";class yg{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ss(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ss.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==wc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.key=e}}class bg{constructor(e){this.key=e}}class _0{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=be(),this.mutatedKeys=be(),this.Ua=Mm(e),this.Ka=new ds(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new sf,s=t?t.Ka:this.Ka;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const g=s.get(d),T=qa(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let A=!1;g&&T?g.data.isEqual(T.data)?C!==R&&(r.track({type:3,doc:T}),A=!0):this.ja(g,T)||(r.track({type:2,doc:T}),A=!0,(c&&this.Ua(T,c)>0||l&&this.Ua(T,l)<0)&&(u=!0)):!g&&T?(r.track({type:0,doc:T}),A=!0):g&&!T&&(r.track({type:1,doc:g}),A=!0,(c||l)&&(u=!0)),A&&(T?(o=o.add(T),i=R?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ka:o,za:r,ys:u,mutatedKeys:i}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((d,p)=>function(T,C){const R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Vt:A})}};return R(T)-R(C)}(d.type,p.type)||this.Ua(d.doc,p.doc)),this.Ha(r),s=s!=null&&s;const u=t&&!s?this.Ja():[],c=this.$a.size===0&&this.current&&!s?1:0,l=c!==this.Qa;return this.Qa=c,o.length!==0||l?{snapshot:new Ss(this.query,e.Ka,i,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:u}:{Ya:u}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new sf,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=be(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new bg(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new _g(r))}),t}Xa(e){this.qa=e.Ns,this.$a=be();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ss.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Il="SyncEngine";class b0{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class E0{constructor(e){this.key=e,this.tu=!1}}class T0{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new zr(u=>Nm(u),Ha),this.iu=new Map,this.su=new Set,this.ou=new ze(se.comparator),this._u=new Map,this.au=new dl,this.uu={},this.cu=new Map,this.lu=As.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function I0(n,e,t=!0){const r=Sg(n);let s;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await Eg(r,e,t,!0),s}async function w0(n,e){const t=Sg(n);await Eg(t,e,!0,!1)}async function Eg(n,e,t,r){const s=await Hw(n.localStore,an(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let u;return r&&(u=await A0(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&lg(n.remoteStore,s),u}async function A0(n,e,t,r,s){n.Pu=(p,g,T)=>async function(R,A,O,V){let M=A.view.Ga(O);M.ys&&(M=await Jd(R.localStore,A.query,!1).then(({documents:b})=>A.view.Ga(b,M)));const $=V&&V.targetChanges.get(A.targetId),x=V&&V.targetMismatches.get(A.targetId)!=null,H=A.view.applyChanges(M,R.isPrimaryClient,$,x);return cf(R,A.targetId,H.Ya),H.snapshot}(n,p,g,T);const i=await Jd(n.localStore,e,!0),o=new _0(e,i.Ns),u=o.Ga(i.documents),c=eo.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),l=o.applyChanges(u,n.isPrimaryClient,c);cf(n,t,l.Ya);const d=new b0(e,t,o);return n.ru.set(e,d),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),l.snapshot}async function S0(n,e,t){const r=de(n),s=r.ru.get(e),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(o=>!Ha(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Tc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&gl(r.remoteStore,s.targetId),Ac(r,s.targetId)}).catch(Ns)):(Ac(r,s.targetId),await Tc(r.localStore,s.targetId,!0))}async function C0(n,e){const t=de(n),r=t.ru.get(e),s=t.iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),gl(t.remoteStore,r.targetId))}async function R0(n,e,t){const r=N0(n);try{const s=await function(o,u){const c=de(o),l=tt.now(),d=u.reduce((T,C)=>T.add(C.key),be());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let C=Mn(),R=be();return c.Cs.getEntries(T,d).next(A=>{C=A,C.forEach((O,V)=>{V.isValidDocument()||(R=R.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,C)).next(A=>{p=A;const O=[];for(const V of u){const M=HI(V,p.get(V.key).overlayedDocument);M!=null&&O.push(new Hr(V.key,M,Rm(M.value.mapValue),Pn.exists(!0)))}return c.mutationQueue.addMutationBatch(T,l,O,u)}).next(A=>{g=A;const O=A.applyToLocalDocumentSet(p,R);return c.documentOverlayCache.saveOverlays(T,A.batchId,O)})}).then(()=>({batchId:g.batchId,changes:Fm(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let l=o.uu[o.currentUser.toKey()];l||(l=new ze(ve)),l=l.insert(u,c),o.uu[o.currentUser.toKey()]=l}(r,s.batchId,t),await no(r,s.changes),await Ya(r.remoteStore)}catch(s){const i=El(s,"Failed to persist write");t.reject(i)}}async function Tg(n,e){const t=de(n);try{const r=await Bw(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t._u.get(i);o&&(Oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.tu=!0:s.modifiedDocuments.size>0?Oe(o.tu,14607):s.removedDocuments.size>0&&(Oe(o.tu,42227),o.tu=!1))}),await no(t,r,e)}catch(r){await Ns(r)}}function uf(n,e,t){const r=de(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ru.forEach((i,o)=>{const u=o.view.ga(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=de(o);c.onlineState=u;let l=!1;c.queries.forEach((d,p)=>{for(const g of p.Ra)g.ga(u)&&(l=!0)}),l&&Tl(c)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function P0(n,e,t){const r=de(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r._u.get(e),i=s&&s.key;if(i){let o=new ze(se.comparator);o=o.insert(i,yt.newNoDocument(i,he.min()));const u=be().add(i),c=new Ka(he.min(),new Map,new ze(ve),o,u);await Tg(r,c),r.ou=r.ou.remove(i),r._u.delete(e),wl(r)}else await Tc(r.localStore,e,!1).then(()=>Ac(r,e,t)).catch(Ns)}async function k0(n,e){const t=de(n),r=e.batch.batchId;try{const s=await jw(t.localStore,e);wg(t,r,null),Ig(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await no(t,s)}catch(s){await Ns(s)}}async function x0(n,e,t){const r=de(n);try{const s=await function(o,u){const c=de(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,u).next(p=>(Oe(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);wg(r,e,t),Ig(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await no(r,s)}catch(s){await Ns(s)}}function Ig(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function wg(n,e,t){const r=de(n);let s=r.uu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.uu[r.currentUser.toKey()]=s}}function Ac(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||Ag(n,r)})}function Ag(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(gl(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),wl(n))}function cf(n,e,t){for(const r of t)r instanceof _g?(n.au.addReference(r.key,e),V0(n,r)):r instanceof bg?(X(Il,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||Ag(n,r.key)):oe(19791,{Iu:r})}function V0(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(X(Il,"New document in limbo: "+t),n.su.add(r),wl(n))}function wl(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new se(Be.fromString(e)),r=n.lu.next();n._u.set(r,new E0(t)),n.ou=n.ou.insert(t,r),lg(n.remoteStore,new tr(an(al(t.path)),r,"TargetPurposeLimboResolution",ja.le))}}async function no(n,e,t){const r=de(n),s=[],i=[],o=[];r.ru.isEmpty()||(r.ru.forEach((u,c)=>{o.push(r.Pu(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){const p=l?!l.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){s.push(l);const p=pl.Ps(c.targetId,l);i.push(p)}}))}),await Promise.all(o),r.nu.Q_(s),await async function(c,l){const d=de(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(l,g=>L.forEach(g.ls,T=>d.persistence.referenceDelegate.addReference(p,g.targetId,T)).next(()=>L.forEach(g.hs,T=>d.persistence.referenceDelegate.removeReference(p,g.targetId,T)))))}catch(p){if(!Ms(p))throw p;X(ml,"Failed to update sequence numbers: "+p)}for(const p of l){const g=p.targetId;if(!p.fromCache){const T=d.Ss.get(g),C=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(C);d.Ss=d.Ss.insert(g,R)}}}(r.localStore,i))}async function O0(n,e){const t=de(n);if(!t.currentUser.isEqual(e)){X(Il,"User change. New user:",e.toKey());const r=await og(t.localStore,e);t.currentUser=e,function(i,o){i.cu.forEach(u=>{u.forEach(c=>{c.reject(new te(U.CANCELLED,o))})}),i.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await no(t,r.Ms)}}function D0(n,e){const t=de(n),r=t._u.get(e);if(r&&r.tu)return be().add(r.key);{let s=be();const i=t.iu.get(e);if(!i)return s;for(const o of i){const u=t.ru.get(o);s=s.unionWith(u.view.Wa)}return s}}function Sg(n){const e=de(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P0.bind(null,e),e.nu.Q_=v0.bind(null,e.eventManager),e.nu.Tu=y0.bind(null,e.eventManager),e}function N0(n){const e=de(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x0.bind(null,e),e}class va{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qa(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return Uw(this.persistence,new Mw,e.initialUser,this.serializer)}Ru(e){return new ig(fl.Ei,this.serializer)}Au(e){return new Ww}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}va.provider={build:()=>new va};class M0 extends va{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Oe(this.persistence.referenceDelegate instanceof ma,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Ew(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new ig(r=>ma.Ei(r,t),this.serializer)}}class Sc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O0.bind(null,this.syncEngine),await p0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g0}()}createDatastore(e){const t=Qa(e.databaseInfo.databaseId),r=function(i){return new Yw(i)}(e.databaseInfo);return function(i,o,u,c){return new t0(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,u){return new r0(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,t=>uf(this.syncEngine,t,0),function(){return tf.C()?new tf:new Gw}())}createSyncEngine(e,t){return function(s,i,o,u,c,l,d){const p=new T0(s,i,o,u,c,l);return d&&(p.hu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=de(s);X(Mr,"RemoteStore shutting down."),i.aa.add(5),await to(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Sc.provider={build:()=>new Sc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Nn("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="FirestoreClient";class L0{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=vt.UNAUTHENTICATED,this.clientId=ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X(dr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(dr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=El(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Nu(n,e){n.asyncQueue.verifyOperationInProgress(),X(dr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await og(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function lf(n,e){n.asyncQueue.verifyOperationInProgress();const t=await F0(n);X(dr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>rf(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>rf(e.remoteStore,s)),n._onlineComponents=e}async function F0(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){X(dr,"Using user provided OfflineComponentProvider");try{await Nu(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Es("Error using user provided cache. Falling back to memory cache: "+t),await Nu(n,new va)}}else X(dr,"Using default OfflineComponentProvider"),await Nu(n,new M0(void 0));return n._offlineComponents}async function Rg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(X(dr,"Using user provided OnlineComponentProvider"),await lf(n,n._uninitializedComponentsProvider._online)):(X(dr,"Using default OnlineComponentProvider"),await lf(n,new Sc))),n._onlineComponents}function U0(n){return Rg(n).then(e=>e.syncEngine)}async function Pg(n){const e=await Rg(n),t=e.eventManager;return t.onListen=I0.bind(null,e.syncEngine),t.onUnlisten=S0.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=w0.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=C0.bind(null,e.syncEngine),t}function j0(n,e,t={}){const r=new Rn;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,l){const d=new Cg({next:g=>{d.yu(),o.enqueueAndForget(()=>vg(i,p));const T=g.docs.has(u);!T&&g.fromCache?l.reject(new te(U.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&c&&c.source==="server"?l.reject(new te(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new yg(al(u.path),d,{includeMetadataChanges:!0,Fa:!0});return gg(i,p)}(await Pg(n),n.asyncQueue,e,t,r)),r.promise}function B0(n,e,t={}){const r=new Rn;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,l){const d=new Cg({next:g=>{d.yu(),o.enqueueAndForget(()=>vg(i,p)),g.fromCache&&c.source==="server"?l.reject(new te(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new yg(u,d,{includeMetadataChanges:!0,Fa:!0});return gg(i,p)}(await Pg(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(n,e,t){if(!t)throw new te(U.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $0(n,e,t,r){if(e===!0&&r===!0)throw new te(U.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function df(n){if(!se.isDocumentKey(n))throw new te(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ff(n){if(se.isDocumentKey(n))throw new te(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Al(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":oe(12329,{type:typeof n})}function Lr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new te(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Al(n);throw new te(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="firestore.googleapis.com",pf=!0;class mf{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vg,this.ssl=pf}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:pf;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sg;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_w)throw new te(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kg((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new te(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ja{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QT;switch(r.type){case"firstParty":return new XT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,La("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=hf.get(t);r&&(X("ComponentProvider","Removing Datastore"),hf.delete(t),r.terminate())}(this),Promise.resolve()}}function z0(n,e,t,r={}){var s;n=Lr(n,Ja);const i=Gi(e),o=n._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o.host!==Vg&&o.host!==c&&Es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Vr(l,u)&&(n._setSettings(l),i&&(Ap(`https://${c}`),La("Firestore",!0)),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=vt.MOCK_USER;else{d=T_(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new te(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new vt(g)}n._authCredentials=new ZT(new gm(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xa(this.firestore,e,this._query)}}class Lt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}}class or extends Xa{constructor(e,t,r){super(e,t,al(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new se(e))}withConverter(e){return new or(this.firestore,e,this._path)}}function Og(n,e,...t){if(n=Kt(n),xg("collection","path",e),n instanceof Ja){const r=Be.fromString(e,...t);return ff(r),new or(n,null,r)}{if(!(n instanceof Lt||n instanceof or))throw new te(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(e,...t));return ff(r),new or(n.firestore,null,r)}}function Dg(n,e,...t){if(n=Kt(n),arguments.length===1&&(e=ym.newId()),xg("doc","path",e),n instanceof Ja){const r=Be.fromString(e,...t);return df(r),new Lt(n,null,new se(r))}{if(!(n instanceof Lt||n instanceof or))throw new te(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(e,...t));return df(r),new Lt(n.firestore,n instanceof or?n.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="AsyncQueue";class vf{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new ug(this,"async_queue_retry"),this.ju=()=>{const r=Du();r&&X(gf,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=Du();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Du();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Rn;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Ms(e))throw e;X(gf,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Nn("INTERNAL UNHANDLED ERROR: ",yf(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const s=bl.createAndSchedule(this,e,t,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&oe(47125,{ec:yf(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function yf(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class eu extends Ja{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new vf,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vf(e),this._firestoreClient=void 0,await e}}}function H0(n,e){const t=typeof n=="object"?n:Pp(),r=typeof n=="string"?n:ua,s=qc(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=b_("firestore");i&&z0(s,...i)}return s}function Sl(n){if(n._terminated)throw new te(U.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||q0(n),n._firestoreClient}function q0(n){var e,t,r;const s=n._freezeSettings(),i=function(u,c,l,d){return new pI(u,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kg(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new L0(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cs(ht.fromBase64String(e))}catch(t){throw new te(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cs(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=/^__.*__$/;class G0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xi(e,this.data,t,this.fieldTransforms)}}function Mg(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{oc:n})}}class kl{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new kl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ac({path:r,cc:!1});return s.lc(e),s}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ac({path:r,cc:!1});return s._c(),s}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return ya(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(Mg(this.oc)&&W0.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class K0{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Qa(e)}dc(e,t,r,s=!1){return new kl({oc:e,methodName:t,Ec:r,path:lt.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Q0(n){const e=n._freezeSettings(),t=Qa(n._databaseId);return new K0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Z0(n,e,t,r,s,i={}){const o=n.dc(i.merge||i.mergeFields?2:0,e,t,s);jg("Data must be an object, but it was:",o,r);const u=Fg(r,o);let c,l;if(i.merge)c=new qt(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=Y0(e,p,t);if(!o.contains(g))throw new te(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);X0(d,g)||d.push(g)}c=new qt(d),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new G0(new jt(u),c,l)}function Lg(n,e){if(Ug(n=Kt(n)))return jg("Unsupported field value:",e,n),Fg(n,e);if(n instanceof Ng)return function(r,s){if(!Mg(s.oc))throw s.Tc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=Lg(u,s.Pc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=Kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=tt.fromDate(r);return{timestampValue:pa(s.serializer,i)}}if(r instanceof tt){const i=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pa(s.serializer,i)}}if(r instanceof Rl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cs)return{bytesValue:Ym(s.serializer,r._byteString)};if(r instanceof Lt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pl)return function(o,u){return{mapValue:{fields:{[Sm]:{stringValue:Cm},[ca]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw u.Tc("VectorValues must only contain numeric values.");return ul(u.serializer,l)})}}}}}}(r,s);throw s.Tc(`Unsupported field value: ${Al(r)}`)}(n,e)}function Fg(n,e){const t={};return bm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$r(n,(r,s)=>{const i=Lg(s,e.uc(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function Ug(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof tt||n instanceof Rl||n instanceof Cs||n instanceof Lt||n instanceof Ng||n instanceof Pl)}function jg(n,e,t){if(!Ug(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Al(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function Y0(n,e,t){if((e=Kt(e))instanceof Cl)return e._internalPath;if(typeof e=="string")return Bg(n,e);throw ya("Field path arguments must be of type string or ",n,!1,void 0,t)}const J0=new RegExp("[~\\*/\\[\\]]");function Bg(n,e,t){if(e.search(J0)>=0)throw ya(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cl(...e.split("."))._internalPath}catch{throw ya(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ya(n,e,t,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new te(U.INVALID_ARGUMENT,u+n+c)}function X0(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eA extends $g{data(){return super.data()}}function zg(n,e){return typeof e=="string"?Bg(n,e):e instanceof Cl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new te(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nA{convertValue(e,t="none"){switch(lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return $r(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,s;const i=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[ca].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ge(o.doubleValue));return new Pl(i)}convertGeoPoint(e){return new Rl(Ge(e.latitude),Ge(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$a(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wi(e));default:return null}}convertTimestamp(e){const t=ur(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Be.fromString(e);Oe(rg(r),9688,{name:e});const s=new Ai(r.get(1),r.get(3)),i=new se(r.popFirst(5));return s.isEqual(t)||Nn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hg extends $g{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class qo extends Hg{data(e={}){return super.data(e)}}class sA{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ci(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qo(this._firestore,this._userDataWriter,r.key,r,new ci(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new qo(s._firestore,s._userDataWriter,u.doc.key,u.doc,new ci(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new qo(s._firestore,s._userDataWriter,u.doc.key,u.doc,new ci(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,d=-1;return u.type!==0&&(l=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),d=o.indexOf(u.doc.key)),{type:iA(u.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function iA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(n){n=Lr(n,Lt);const e=Lr(n.firestore,eu);return j0(Sl(e),n._key).then(t=>cA(e,n,t))}class qg extends nA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,t)}}function Wg(n){n=Lr(n,Xa);const e=Lr(n.firestore,eu),t=Sl(e),r=new qg(e);return tA(n._query),B0(t,n._query).then(s=>new sA(e,r,n,s))}function aA(n,e,t){n=Lr(n,Lt);const r=Lr(n.firestore,eu),s=rA(n.converter,e);return uA(r,[Z0(Q0(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Pn.none())])}function uA(n,e){return function(r,s){const i=new Rn;return r.asyncQueue.enqueueAndForget(async()=>R0(await U0(r),s,i)),i.promise}(Sl(n),e)}function cA(n,e,t){const r=t.docs.get(e._key),s=new qg(n);return new Hg(n,s,e._key,r,new ci(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Ds=s})(Vs),_s(new Or("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new eu(new YT(r.getProvider("auth-internal")),new eI(o,r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new te(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ai(l.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:t},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),sr(Td,Id,e),sr(Td,Id,"esm2017")})();const lA={apiKey:"AIzaSyDvYBoFo8Fo9Ev4TbMxsr6bj5aVMwT0vRA",authDomain:"boosting-tools.firebaseapp.com",projectId:"boosting-tools",storageBucket:"boosting-tools.firebasestorage.app",messagingSenderId:"21372571049",appId:"1:21372571049:web:f74314043db1d269b488b8",measurementId:"G-42QHSTWFLC"},Gg=Rp(lA);GT(Gg);const tu=H0(Gg);async function hA(){try{return(await Wg(Og(tu,"characters"))).docs.map(t=>{const r=t.data();return{id:t.id,...r,role:Array.isArray(r.role)?r.role:[r.role]}})}catch(n){return console.error("Error fetching characters: ",n),[]}}async function dA(n){try{const e=Dg(tu,"characters",n),t=await oA(e);return t.exists()?{id:t.id,...t.data()}:(console.warn(`Character with ID ${n} not found.`),null)}catch(e){return console.error("Error fetching character by ID:",e),null}}async function fA(n){try{const e=Dg(tu,"characters",n.id);await aA(e,n),console.log("Document updated with ID: ",e.id)}catch(e){console.error("Error updating document: ",e)}}function pA(){return $c({queryKey:["characters"],queryFn:hA})}async function mA(){try{return(await Wg(Og(tu,"players"))).docs.map(t=>({id:t.id,...t.data()}))}catch(n){return console.error("Error fetching players: ",n),[]}}function gA(){return $c({queryKey:["players"],queryFn:mA})}function vA(n){return K.jsx(Ry,{...n,disabled:n.loading||n.disabled,className:Ot("cursor-pointer"),children:n.loading?K.jsxs("div",{className:"flex items-center gap-2",children:[K.jsx(gp,{className:"animate-spin"})," Processing..."]}):n.children})}function Fr(n){"@babel/helpers - typeof";return Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(n)}function yA(n,e){if(Fr(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Fr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Kg(n){var e=yA(n,"string");return Fr(e)=="symbol"?e:e+""}function li(n,e,t){return(e=Kg(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _f(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function re(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_f(Object(t),!0).forEach(function(r){li(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_f(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _A(n){if(Array.isArray(n))return n}function bA(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,i,o,u=[],c=!0,l=!1;try{if(i=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=i.call(t)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(d){l=!0,s=d}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw s}}return u}}function Cc(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Qg(n,e){if(n){if(typeof n=="string")return Cc(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Cc(n,e):void 0}}function EA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kn(n,e){return _A(n)||bA(n,e)||Qg(n,e)||EA()}function TA(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Un(n,e){if(n==null)return{};var t,r,s=TA(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}var IA=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function wA(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,s=r===void 0?!1:r,i=n.defaultValue,o=i===void 0?null:i,u=n.inputValue,c=n.menuIsOpen,l=n.onChange,d=n.onInputChange,p=n.onMenuClose,g=n.onMenuOpen,T=n.value,C=Un(n,IA),R=F.useState(u!==void 0?u:t),A=kn(R,2),O=A[0],V=A[1],M=F.useState(c!==void 0?c:s),$=kn(M,2),x=$[0],H=$[1],b=F.useState(T!==void 0?T:o),v=kn(b,2),_=v[0],E=v[1],S=F.useCallback(function(je,Je){typeof l=="function"&&l(je,Je),E(je)},[l]),I=F.useCallback(function(je,Je){var dt;typeof d=="function"&&(dt=d(je,Je)),V(dt!==void 0?dt:je)},[d]),y=F.useCallback(function(){typeof g=="function"&&g(),H(!0)},[g]),pe=F.useCallback(function(){typeof p=="function"&&p(),H(!1)},[p]),me=u!==void 0?u:O,ye=c!==void 0?c:x,Me=T!==void 0?T:_;return re(re({},C),{},{inputValue:me,menuIsOpen:ye,onChange:S,onInputChange:I,onMenuClose:pe,onMenuOpen:y,value:Me})}function ie(){return ie=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ie.apply(null,arguments)}function AA(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function bf(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Kg(r.key),r)}}function SA(n,e,t){return e&&bf(n.prototype,e),t&&bf(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Rc(n,e){return Rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Rc(n,e)}function CA(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Rc(n,e)}function _a(n){return _a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_a(n)}function Zg(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zg=function(){return!!n})()}function RA(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function PA(n,e){if(e&&(Fr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RA(n)}function kA(n){var e=Zg();return function(){var t,r=_a(n);if(e){var s=_a(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return PA(this,t)}}function xA(n){if(Array.isArray(n))return Cc(n)}function VA(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function OA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xl(n){return xA(n)||VA(n)||Qg(n)||OA()}function DA(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function NA(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var MA=function(){function n(t){var r=this;this._insertTag=function(s){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,i),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(NA(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=DA(s);try{i.insertRule(r,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n}(),gt="-ms-",ba="-moz-",Ce="-webkit-",Yg="comm",Vl="rule",Ol="decl",LA="@import",Jg="@keyframes",FA="@layer",UA=Math.abs,nu=String.fromCharCode,jA=Object.assign;function BA(n,e){return ct(n,0)^45?(((e<<2^ct(n,0))<<2^ct(n,1))<<2^ct(n,2))<<2^ct(n,3):0}function Xg(n){return n.trim()}function $A(n,e){return(n=e.exec(n))?n[0]:n}function Re(n,e,t){return n.replace(e,t)}function Pc(n,e){return n.indexOf(e)}function ct(n,e){return n.charCodeAt(e)|0}function Pi(n,e,t){return n.slice(e,t)}function en(n){return n.length}function Dl(n){return n.length}function ko(n,e){return e.push(n),n}function zA(n,e){return n.map(e).join("")}var ru=1,Rs=1,ev=0,Vt=0,Ye=0,Fs="";function su(n,e,t,r,s,i,o){return{value:n,root:e,parent:t,type:r,props:s,children:i,line:ru,column:Rs,length:o,return:""}}function Xs(n,e){return jA(su("",null,null,"",null,null,0),n,{length:-n.length},e)}function HA(){return Ye}function qA(){return Ye=Vt>0?ct(Fs,--Vt):0,Rs--,Ye===10&&(Rs=1,ru--),Ye}function Ft(){return Ye=Vt<ev?ct(Fs,Vt++):0,Rs++,Ye===10&&(Rs=1,ru++),Ye}function cn(){return ct(Fs,Vt)}function Wo(){return Vt}function ro(n,e){return Pi(Fs,n,e)}function ki(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tv(n){return ru=Rs=1,ev=en(Fs=n),Vt=0,[]}function nv(n){return Fs="",n}function Go(n){return Xg(ro(Vt-1,kc(n===91?n+2:n===40?n+1:n)))}function WA(n){for(;(Ye=cn())&&Ye<33;)Ft();return ki(n)>2||ki(Ye)>3?"":" "}function GA(n,e){for(;--e&&Ft()&&!(Ye<48||Ye>102||Ye>57&&Ye<65||Ye>70&&Ye<97););return ro(n,Wo()+(e<6&&cn()==32&&Ft()==32))}function kc(n){for(;Ft();)switch(Ye){case n:return Vt;case 34:case 39:n!==34&&n!==39&&kc(Ye);break;case 40:n===41&&kc(n);break;case 92:Ft();break}return Vt}function KA(n,e){for(;Ft()&&n+Ye!==57;)if(n+Ye===84&&cn()===47)break;return"/*"+ro(e,Vt-1)+"*"+nu(n===47?n:Ft())}function QA(n){for(;!ki(cn());)Ft();return ro(n,Vt)}function ZA(n){return nv(Ko("",null,null,null,[""],n=tv(n),0,[0],n))}function Ko(n,e,t,r,s,i,o,u,c){for(var l=0,d=0,p=o,g=0,T=0,C=0,R=1,A=1,O=1,V=0,M="",$=s,x=i,H=r,b=M;A;)switch(C=V,V=Ft()){case 40:if(C!=108&&ct(b,p-1)==58){Pc(b+=Re(Go(V),"&","&\f"),"&\f")!=-1&&(O=-1);break}case 34:case 39:case 91:b+=Go(V);break;case 9:case 10:case 13:case 32:b+=WA(C);break;case 92:b+=GA(Wo()-1,7);continue;case 47:switch(cn()){case 42:case 47:ko(YA(KA(Ft(),Wo()),e,t),c);break;default:b+="/"}break;case 123*R:u[l++]=en(b)*O;case 125*R:case 59:case 0:switch(V){case 0:case 125:A=0;case 59+d:O==-1&&(b=Re(b,/\f/g,"")),T>0&&en(b)-p&&ko(T>32?Tf(b+";",r,t,p-1):Tf(Re(b," ","")+";",r,t,p-2),c);break;case 59:b+=";";default:if(ko(H=Ef(b,e,t,l,d,s,u,M,$=[],x=[],p),i),V===123)if(d===0)Ko(b,e,H,H,$,i,p,u,x);else switch(g===99&&ct(b,3)===110?100:g){case 100:case 108:case 109:case 115:Ko(n,H,H,r&&ko(Ef(n,H,H,0,0,s,u,M,s,$=[],p),x),s,x,p,u,r?$:x);break;default:Ko(b,H,H,H,[""],x,0,u,x)}}l=d=T=0,R=O=1,M=b="",p=o;break;case 58:p=1+en(b),T=C;default:if(R<1){if(V==123)--R;else if(V==125&&R++==0&&qA()==125)continue}switch(b+=nu(V),V*R){case 38:O=d>0?1:(b+="\f",-1);break;case 44:u[l++]=(en(b)-1)*O,O=1;break;case 64:cn()===45&&(b+=Go(Ft())),g=cn(),d=p=en(M=b+=QA(Wo())),V++;break;case 45:C===45&&en(b)==2&&(R=0)}}return i}function Ef(n,e,t,r,s,i,o,u,c,l,d){for(var p=s-1,g=s===0?i:[""],T=Dl(g),C=0,R=0,A=0;C<r;++C)for(var O=0,V=Pi(n,p+1,p=UA(R=o[C])),M=n;O<T;++O)(M=Xg(R>0?g[O]+" "+V:Re(V,/&\f/g,g[O])))&&(c[A++]=M);return su(n,e,t,s===0?Vl:u,c,l,d)}function YA(n,e,t){return su(n,e,t,Yg,nu(HA()),Pi(n,2,-2),0)}function Tf(n,e,t,r){return su(n,e,t,Ol,Pi(n,0,r),Pi(n,r+1,-1),r)}function fs(n,e){for(var t="",r=Dl(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function JA(n,e,t,r){switch(n.type){case FA:if(n.children.length)break;case LA:case Ol:return n.return=n.return||n.value;case Yg:return"";case Jg:return n.return=n.value+"{"+fs(n.children,r)+"}";case Vl:n.value=n.props.join(",")}return en(t=fs(n.children,r))?n.return=n.value+"{"+t+"}":""}function XA(n){var e=Dl(n);return function(t,r,s,i){for(var o="",u=0;u<e;u++)o+=n[u](t,r,s,i)||"";return o}}function eS(n){return function(e){e.root||(e=e.return)&&n(e)}}function tS(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var nS=function(e,t,r){for(var s=0,i=0;s=i,i=cn(),s===38&&i===12&&(t[r]=1),!ki(i);)Ft();return ro(e,Vt)},rS=function(e,t){var r=-1,s=44;do switch(ki(s)){case 0:s===38&&cn()===12&&(t[r]=1),e[r]+=nS(Vt-1,t,r);break;case 2:e[r]+=Go(s);break;case 4:if(s===44){e[++r]=cn()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=nu(s)}while(s=Ft());return e},sS=function(e,t){return nv(rS(tv(e),t))},If=new WeakMap,iS=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!If.get(r))&&!s){If.set(e,!0);for(var i=[],o=sS(t,i),u=r.props,c=0,l=0;c<o.length;c++)for(var d=0;d<u.length;d++,l++)e.props[l]=i[c]?o[c].replace(/&\f/g,u[d]):u[d]+" "+o[c]}}},oS=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function rv(n,e){switch(BA(n,e)){case 5103:return Ce+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ce+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Ce+n+ba+n+gt+n+n;case 6828:case 4268:return Ce+n+gt+n+n;case 6165:return Ce+n+gt+"flex-"+n+n;case 5187:return Ce+n+Re(n,/(\w+).+(:[^]+)/,Ce+"box-$1$2"+gt+"flex-$1$2")+n;case 5443:return Ce+n+gt+"flex-item-"+Re(n,/flex-|-self/,"")+n;case 4675:return Ce+n+gt+"flex-line-pack"+Re(n,/align-content|flex-|-self/,"")+n;case 5548:return Ce+n+gt+Re(n,"shrink","negative")+n;case 5292:return Ce+n+gt+Re(n,"basis","preferred-size")+n;case 6060:return Ce+"box-"+Re(n,"-grow","")+Ce+n+gt+Re(n,"grow","positive")+n;case 4554:return Ce+Re(n,/([^-])(transform)/g,"$1"+Ce+"$2")+n;case 6187:return Re(Re(Re(n,/(zoom-|grab)/,Ce+"$1"),/(image-set)/,Ce+"$1"),n,"")+n;case 5495:case 3959:return Re(n,/(image-set\([^]*)/,Ce+"$1$`$1");case 4968:return Re(Re(n,/(.+:)(flex-)?(.*)/,Ce+"box-pack:$3"+gt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ce+n+n;case 4095:case 3583:case 4068:case 2532:return Re(n,/(.+)-inline(.+)/,Ce+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(en(n)-1-e>6)switch(ct(n,e+1)){case 109:if(ct(n,e+4)!==45)break;case 102:return Re(n,/(.+:)(.+)-([^]+)/,"$1"+Ce+"$2-$3$1"+ba+(ct(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Pc(n,"stretch")?rv(Re(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(ct(n,e+1)!==115)break;case 6444:switch(ct(n,en(n)-3-(~Pc(n,"!important")&&10))){case 107:return Re(n,":",":"+Ce)+n;case 101:return Re(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ce+(ct(n,14)===45?"inline-":"")+"box$3$1"+Ce+"$2$3$1"+gt+"$2box$3")+n}break;case 5936:switch(ct(n,e+11)){case 114:return Ce+n+gt+Re(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Ce+n+gt+Re(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Ce+n+gt+Re(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Ce+n+gt+n+n}return n}var aS=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case Ol:e.return=rv(e.value,e.length);break;case Jg:return fs([Xs(e,{value:Re(e.value,"@","@"+Ce)})],s);case Vl:if(e.length)return zA(e.props,function(i){switch($A(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return fs([Xs(e,{props:[Re(i,/:(read-\w+)/,":"+ba+"$1")]})],s);case"::placeholder":return fs([Xs(e,{props:[Re(i,/:(plac\w+)/,":"+Ce+"input-$1")]}),Xs(e,{props:[Re(i,/:(plac\w+)/,":"+ba+"$1")]}),Xs(e,{props:[Re(i,/:(plac\w+)/,gt+"input-$1")]})],s)}return""})}},uS=[aS],cS=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(R){var A=R.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(R),R.setAttribute("data-s",""))})}var s=e.stylisPlugins||uS,i={},o,u=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(R){for(var A=R.getAttribute("data-emotion").split(" "),O=1;O<A.length;O++)i[A[O]]=!0;u.push(R)});var c,l=[iS,oS];{var d,p=[JA,eS(function(R){d.insert(R)})],g=XA(l.concat(s,p)),T=function(A){return fs(ZA(A),g)};c=function(A,O,V,M){d=V,T(A?A+"{"+O.styles+"}":O.styles),M&&(C.inserted[O.name]=!0)}}var C={key:t,sheet:new MA({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:c};return C.sheet.hydrate(u),C},Mu={exports:{}},ke={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf;function lS(){if(wf)return ke;wf=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,i=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,l=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.suspense_list"):60120,T=n?Symbol.for("react.memo"):60115,C=n?Symbol.for("react.lazy"):60116,R=n?Symbol.for("react.block"):60121,A=n?Symbol.for("react.fundamental"):60117,O=n?Symbol.for("react.responder"):60118,V=n?Symbol.for("react.scope"):60119;function M(x){if(typeof x=="object"&&x!==null){var H=x.$$typeof;switch(H){case e:switch(x=x.type,x){case c:case l:case r:case i:case s:case p:return x;default:switch(x=x&&x.$$typeof,x){case u:case d:case C:case T:case o:return x;default:return H}}case t:return H}}}function $(x){return M(x)===l}return ke.AsyncMode=c,ke.ConcurrentMode=l,ke.ContextConsumer=u,ke.ContextProvider=o,ke.Element=e,ke.ForwardRef=d,ke.Fragment=r,ke.Lazy=C,ke.Memo=T,ke.Portal=t,ke.Profiler=i,ke.StrictMode=s,ke.Suspense=p,ke.isAsyncMode=function(x){return $(x)||M(x)===c},ke.isConcurrentMode=$,ke.isContextConsumer=function(x){return M(x)===u},ke.isContextProvider=function(x){return M(x)===o},ke.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===e},ke.isForwardRef=function(x){return M(x)===d},ke.isFragment=function(x){return M(x)===r},ke.isLazy=function(x){return M(x)===C},ke.isMemo=function(x){return M(x)===T},ke.isPortal=function(x){return M(x)===t},ke.isProfiler=function(x){return M(x)===i},ke.isStrictMode=function(x){return M(x)===s},ke.isSuspense=function(x){return M(x)===p},ke.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===r||x===l||x===i||x===s||x===p||x===g||typeof x=="object"&&x!==null&&(x.$$typeof===C||x.$$typeof===T||x.$$typeof===o||x.$$typeof===u||x.$$typeof===d||x.$$typeof===A||x.$$typeof===O||x.$$typeof===V||x.$$typeof===R)},ke.typeOf=M,ke}var Af;function hS(){return Af||(Af=1,Mu.exports=lS()),Mu.exports}var Lu,Sf;function dS(){if(Sf)return Lu;Sf=1;var n=hS(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[n.ForwardRef]=r,i[n.Memo]=s;function o(C){return n.isMemo(C)?s:i[C.$$typeof]||e}var u=Object.defineProperty,c=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,g=Object.prototype;function T(C,R,A){if(typeof R!="string"){if(g){var O=p(R);O&&O!==g&&T(C,O,A)}var V=c(R);l&&(V=V.concat(l(R)));for(var M=o(C),$=o(R),x=0;x<V.length;++x){var H=V[x];if(!t[H]&&!(A&&A[H])&&!($&&$[H])&&!(M&&M[H])){var b=d(R,H);try{u(C,H,b)}catch{}}}}return C}return Lu=T,Lu}dS();var fS=!0;function pS(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var sv=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||fS===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},mS=function(e,t,r){sv(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var i=t;do e.insert(t===i?"."+s:"",i,e.sheet,!0),i=i.next;while(i!==void 0)}};function gS(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var vS={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},yS=/[A-Z]|^ms/g,_S=/_EMO_([^_]+?)_([^]*?)_EMO_/g,iv=function(e){return e.charCodeAt(1)===45},Cf=function(e){return e!=null&&typeof e!="boolean"},Fu=tS(function(n){return iv(n)?n:n.replace(yS,"-$&").toLowerCase()}),Rf=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(_S,function(r,s,i){return tn={name:s,styles:i,next:tn},s})}return vS[e]!==1&&!iv(e)&&typeof t=="number"&&t!==0?t+"px":t};function xi(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return tn={name:s.name,styles:s.styles,next:tn},s.name;var i=t;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)tn={name:o.name,styles:o.styles,next:tn},o=o.next;var u=i.styles+";";return u}return bS(n,e,t)}case"function":{if(n!==void 0){var c=tn,l=t(n);return tn=c,xi(n,e,l)}break}}var d=t;return d}function bS(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=xi(n,e,t[s])+";";else for(var i in t){var o=t[i];if(typeof o!="object"){var u=o;Cf(u)&&(r+=Fu(i)+":"+Rf(i,u)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var c=0;c<o.length;c++)Cf(o[c])&&(r+=Fu(i)+":"+Rf(i,o[c])+";");else{var l=xi(n,e,o);switch(i){case"animation":case"animationName":{r+=Fu(i)+":"+l+";";break}default:r+=i+"{"+l+"}"}}}return r}var Pf=/label:\s*([^\s;{]+)\s*(;|$)/g,tn;function ov(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";tn=void 0;var i=n[0];if(i==null||i.raw===void 0)r=!1,s+=xi(t,e,i);else{var o=i;s+=o[0]}for(var u=1;u<n.length;u++)if(s+=xi(t,e,n[u]),r){var c=i;s+=c[u]}Pf.lastIndex=0;for(var l="",d;(d=Pf.exec(s))!==null;)l+="-"+d[1];var p=gS(s)+l;return{name:p,styles:s,next:tn}}var ES=function(e){return e()},TS=zh.useInsertionEffect?zh.useInsertionEffect:!1,IS=TS||ES,av=F.createContext(typeof HTMLElement<"u"?cS({key:"css"}):null);av.Provider;var wS=function(e){return F.forwardRef(function(t,r){var s=F.useContext(av);return e(t,s,r)})},AS=F.createContext({}),Nl={}.hasOwnProperty,xc="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",SS=function(e,t){var r={};for(var s in t)Nl.call(t,s)&&(r[s]=t[s]);return r[xc]=e,r},CS=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return sv(t,r,s),IS(function(){return mS(t,r,s)}),null},RS=wS(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[xc],i=[r],o="";typeof n.className=="string"?o=pS(e.registered,i,n.className):n.className!=null&&(o=n.className+" ");var u=ov(i,void 0,F.useContext(AS));o+=e.key+"-"+u.name;var c={};for(var l in n)Nl.call(n,l)&&l!=="css"&&l!==xc&&(c[l]=n[l]);return c.className=o,t&&(c.ref=t),F.createElement(F.Fragment,null,F.createElement(CS,{cache:e,serialized:u,isStringTag:typeof s=="string"}),F.createElement(s,c))}),PS=RS,ne=function(e,t){var r=arguments;if(t==null||!Nl.call(t,"css"))return F.createElement.apply(void 0,r);var s=r.length,i=new Array(s);i[0]=PS,i[1]=SS(e,t);for(var o=2;o<s;o++)i[o]=r[o];return F.createElement.apply(null,i)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(ne||(ne={}));function Ml(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return ov(e)}function kS(){var n=Ml.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function xS(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var Vc=F.useLayoutEffect,VS=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Ea=function(){};function OS(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function DS(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s];var i=[].concat(r);if(e&&n)for(var o in e)e.hasOwnProperty(o)&&e[o]&&i.push("".concat(OS(n,o)));return i.filter(function(u){return u}).map(function(u){return String(u).trim()}).join(" ")}var kf=function(e){return zS(e)?e.filter(Boolean):Fr(e)==="object"&&e!==null?[e]:[]},uv=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=Un(e,VS);return re({},t)},We=function(e,t,r){var s=e.cx,i=e.getStyles,o=e.getClassNames,u=e.className;return{css:i(t,e),className:s(r??{},o(t,e),u)}};function iu(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function NS(n){return iu(n)?window.innerHeight:n.clientHeight}function cv(n){return iu(n)?window.pageYOffset:n.scrollTop}function Ta(n,e){if(iu(n)){window.scrollTo(0,e);return}n.scrollTop=e}function MS(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var s=n;s=s.parentElement;)if(e=getComputedStyle(s),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return s;return document.documentElement}function LS(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function xo(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ea,s=cv(n),i=e-s,o=10,u=0;function c(){u+=o;var l=LS(u,s,i,t);Ta(n,l),u<t?window.requestAnimationFrame(c):r(n)}c()}function xf(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),s=e.offsetHeight/3;r.bottom+s>t.bottom?Ta(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+s,n.scrollHeight)):r.top-s<t.top&&Ta(n,Math.max(e.offsetTop-s,0))}function FS(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function Vf(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function US(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var lv=!1,jS={get passive(){return lv=!0}},Vo=typeof window<"u"?window:{};Vo.addEventListener&&Vo.removeEventListener&&(Vo.addEventListener("p",Ea,jS),Vo.removeEventListener("p",Ea,!1));var BS=lv;function $S(n){return n!=null}function zS(n){return Array.isArray(n)}function Oo(n,e,t){return n?e:t}var HS=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];var i=Object.entries(e).filter(function(o){var u=kn(o,1),c=u[0];return!r.includes(c)});return i.reduce(function(o,u){var c=kn(u,2),l=c[0],d=c[1];return o[l]=d,o},{})},qS=["children","innerProps"],WS=["children","innerProps"];function GS(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,s=n.placement,i=n.shouldScroll,o=n.isFixedPosition,u=n.controlHeight,c=MS(t),l={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return l;var d=c.getBoundingClientRect(),p=d.height,g=t.getBoundingClientRect(),T=g.bottom,C=g.height,R=g.top,A=t.offsetParent.getBoundingClientRect(),O=A.top,V=o?window.innerHeight:NS(c),M=cv(c),$=parseInt(getComputedStyle(t).marginBottom,10),x=parseInt(getComputedStyle(t).marginTop,10),H=O-x,b=V-R,v=H+M,_=p-M-R,E=T-V+M+$,S=M+R-x,I=160;switch(s){case"auto":case"bottom":if(b>=C)return{placement:"bottom",maxHeight:e};if(_>=C&&!o)return i&&xo(c,E,I),{placement:"bottom",maxHeight:e};if(!o&&_>=r||o&&b>=r){i&&xo(c,E,I);var y=o?b-$:_-$;return{placement:"bottom",maxHeight:y}}if(s==="auto"||o){var pe=e,me=o?H:v;return me>=r&&(pe=Math.min(me-$-u,e)),{placement:"top",maxHeight:pe}}if(s==="bottom")return i&&Ta(c,E),{placement:"bottom",maxHeight:e};break;case"top":if(H>=C)return{placement:"top",maxHeight:e};if(v>=C&&!o)return i&&xo(c,S,I),{placement:"top",maxHeight:e};if(!o&&v>=r||o&&H>=r){var ye=e;return(!o&&v>=r||o&&H>=r)&&(ye=o?H-x:v-x),i&&xo(c,S,I),{placement:"top",maxHeight:ye}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return l}function KS(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var hv=function(e){return e==="auto"?"bottom":e},QS=function(e,t){var r,s=e.placement,i=e.theme,o=i.borderRadius,u=i.spacing,c=i.colors;return re((r={label:"menu"},li(r,KS(s),"100%"),li(r,"position","absolute"),li(r,"width","100%"),li(r,"zIndex",1),r),t?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:u.menuGutter,marginTop:u.menuGutter})},dv=F.createContext(null),ZS=function(e){var t=e.children,r=e.minMenuHeight,s=e.maxMenuHeight,i=e.menuPlacement,o=e.menuPosition,u=e.menuShouldScrollIntoView,c=e.theme,l=F.useContext(dv)||{},d=l.setPortalPlacement,p=F.useRef(null),g=F.useState(s),T=kn(g,2),C=T[0],R=T[1],A=F.useState(null),O=kn(A,2),V=O[0],M=O[1],$=c.spacing.controlHeight;return Vc(function(){var x=p.current;if(x){var H=o==="fixed",b=u&&!H,v=GS({maxHeight:s,menuEl:x,minHeight:r,placement:i,shouldScroll:b,isFixedPosition:H,controlHeight:$});R(v.maxHeight),M(v.placement),d==null||d(v.placement)}},[s,i,o,u,r,d,$]),t({ref:p,placerProps:re(re({},e),{},{placement:V||hv(i),maxHeight:C})})},YS=function(e){var t=e.children,r=e.innerRef,s=e.innerProps;return ne("div",ie({},We(e,"menu",{menu:!0}),{ref:r},s),t)},JS=YS,XS=function(e,t){var r=e.maxHeight,s=e.theme.spacing.baseUnit;return re({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:s,paddingTop:s})},eC=function(e){var t=e.children,r=e.innerProps,s=e.innerRef,i=e.isMulti;return ne("div",ie({},We(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:s},r),t)},fv=function(e,t){var r=e.theme,s=r.spacing.baseUnit,i=r.colors;return re({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},tC=fv,nC=fv,rC=function(e){var t=e.children,r=t===void 0?"No options":t,s=e.innerProps,i=Un(e,qS);return ne("div",ie({},We(re(re({},i),{},{children:r,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),r)},sC=function(e){var t=e.children,r=t===void 0?"Loading...":t,s=e.innerProps,i=Un(e,WS);return ne("div",ie({},We(re(re({},i),{},{children:r,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),r)},iC=function(e){var t=e.rect,r=e.offset,s=e.position;return{left:t.left,position:s,top:r,width:t.width,zIndex:1}},oC=function(e){var t=e.appendTo,r=e.children,s=e.controlElement,i=e.innerProps,o=e.menuPlacement,u=e.menuPosition,c=F.useRef(null),l=F.useRef(null),d=F.useState(hv(o)),p=kn(d,2),g=p[0],T=p[1],C=F.useMemo(function(){return{setPortalPlacement:T}},[]),R=F.useState(null),A=kn(R,2),O=A[0],V=A[1],M=F.useCallback(function(){if(s){var b=FS(s),v=u==="fixed"?0:window.pageYOffset,_=b[g]+v;(_!==(O==null?void 0:O.offset)||b.left!==(O==null?void 0:O.rect.left)||b.width!==(O==null?void 0:O.rect.width))&&V({offset:_,rect:b})}},[s,u,g,O==null?void 0:O.offset,O==null?void 0:O.rect.left,O==null?void 0:O.rect.width]);Vc(function(){M()},[M]);var $=F.useCallback(function(){typeof l.current=="function"&&(l.current(),l.current=null),s&&c.current&&(l.current=Py(s,c.current,M,{elementResize:"ResizeObserver"in window}))},[s,M]);Vc(function(){$()},[$]);var x=F.useCallback(function(b){c.current=b,$()},[$]);if(!t&&u!=="fixed"||!O)return null;var H=ne("div",ie({ref:x},We(re(re({},e),{},{offset:O.offset,position:u,rect:O.rect}),"menuPortal",{"menu-portal":!0}),i),r);return ne(dv.Provider,{value:C},t?ky.createPortal(H,t):H)},aC=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},uC=function(e){var t=e.children,r=e.innerProps,s=e.isDisabled,i=e.isRtl;return ne("div",ie({},We(e,"container",{"--is-disabled":s,"--is-rtl":i}),r),t)},cC=function(e,t){var r=e.theme.spacing,s=e.isMulti,i=e.hasValue,o=e.selectProps.controlShouldRenderValue;return re({alignItems:"center",display:s&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},lC=function(e){var t=e.children,r=e.innerProps,s=e.isMulti,i=e.hasValue;return ne("div",ie({},We(e,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":i}),r),t)},hC=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},dC=function(e){var t=e.children,r=e.innerProps;return ne("div",ie({},We(e,"indicatorsContainer",{indicators:!0}),r),t)},Of,fC=["size"],pC=["innerProps","isRtl","size"],mC={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},pv=function(e){var t=e.size,r=Un(e,fC);return ne("svg",ie({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:mC},r))},Ll=function(e){return ne(pv,ie({size:20},e),ne("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},mv=function(e){return ne(pv,ie({size:20},e),ne("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},gv=function(e,t){var r=e.isFocused,s=e.theme,i=s.spacing.baseUnit,o=s.colors;return re({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?o.neutral60:o.neutral20,padding:i*2,":hover":{color:r?o.neutral80:o.neutral40}})},gC=gv,vC=function(e){var t=e.children,r=e.innerProps;return ne("div",ie({},We(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||ne(mv,null))},yC=gv,_C=function(e){var t=e.children,r=e.innerProps;return ne("div",ie({},We(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||ne(Ll,null))},bC=function(e,t){var r=e.isDisabled,s=e.theme,i=s.spacing.baseUnit,o=s.colors;return re({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?o.neutral10:o.neutral20,marginBottom:i*2,marginTop:i*2})},EC=function(e){var t=e.innerProps;return ne("span",ie({},t,We(e,"indicatorSeparator",{"indicator-separator":!0})))},TC=kS(Of||(Of=xS([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),IC=function(e,t){var r=e.isFocused,s=e.size,i=e.theme,o=i.colors,u=i.spacing.baseUnit;return re({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?o.neutral60:o.neutral20,padding:u*2})},Uu=function(e){var t=e.delay,r=e.offset;return ne("span",{css:Ml({animation:"".concat(TC," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},wC=function(e){var t=e.innerProps,r=e.isRtl,s=e.size,i=s===void 0?4:s,o=Un(e,pC);return ne("div",ie({},We(re(re({},o),{},{innerProps:t,isRtl:r,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),ne(Uu,{delay:0,offset:r}),ne(Uu,{delay:160,offset:!0}),ne(Uu,{delay:320,offset:!r}))},AC=function(e,t){var r=e.isDisabled,s=e.isFocused,i=e.theme,o=i.colors,u=i.borderRadius,c=i.spacing;return re({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?o.neutral5:o.neutral0,borderColor:r?o.neutral10:s?o.primary:o.neutral20,borderRadius:u,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:s?o.primary:o.neutral30}})},SC=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,i=e.innerRef,o=e.innerProps,u=e.menuIsOpen;return ne("div",ie({ref:i},We(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":s,"control--menu-is-open":u}),o,{"aria-disabled":r||void 0}),t)},CC=SC,RC=["data"],PC=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},kC=function(e){var t=e.children,r=e.cx,s=e.getStyles,i=e.getClassNames,o=e.Heading,u=e.headingProps,c=e.innerProps,l=e.label,d=e.theme,p=e.selectProps;return ne("div",ie({},We(e,"group",{group:!0}),c),ne(o,ie({},u,{selectProps:p,theme:d,getStyles:s,getClassNames:i,cx:r}),l),ne("div",null,t))},xC=function(e,t){var r=e.theme,s=r.colors,i=r.spacing;return re({label:"group",cursor:"default",display:"block"},t?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},VC=function(e){var t=uv(e);t.data;var r=Un(t,RC);return ne("div",ie({},We(e,"groupHeading",{"group-heading":!0}),r))},OC=kC,DC=["innerRef","isDisabled","isHidden","inputClassName"],NC=function(e,t){var r=e.isDisabled,s=e.value,i=e.theme,o=i.spacing,u=i.colors;return re(re({visibility:r?"hidden":"visible",transform:s?"translateZ(0)":""},MC),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:u.neutral80})},vv={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},MC={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":re({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},vv)},LC=function(e){return re({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},vv)},FC=function(e){var t=e.cx,r=e.value,s=uv(e),i=s.innerRef,o=s.isDisabled,u=s.isHidden,c=s.inputClassName,l=Un(s,DC);return ne("div",ie({},We(e,"input",{"input-container":!0}),{"data-value":r||""}),ne("input",ie({className:t({input:!0},c),ref:i,style:LC(u),disabled:o},l)))},UC=FC,jC=function(e,t){var r=e.theme,s=r.spacing,i=r.borderRadius,o=r.colors;return re({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:s.baseUnit/2})},BC=function(e,t){var r=e.theme,s=r.borderRadius,i=r.colors,o=e.cropWithEllipsis;return re({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:s/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},$C=function(e,t){var r=e.theme,s=r.spacing,i=r.borderRadius,o=r.colors,u=e.isFocused;return re({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:u?o.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},yv=function(e){var t=e.children,r=e.innerProps;return ne("div",r,t)},zC=yv,HC=yv;function qC(n){var e=n.children,t=n.innerProps;return ne("div",ie({role:"button"},t),e||ne(Ll,{size:14}))}var WC=function(e){var t=e.children,r=e.components,s=e.data,i=e.innerProps,o=e.isDisabled,u=e.removeProps,c=e.selectProps,l=r.Container,d=r.Label,p=r.Remove;return ne(l,{data:s,innerProps:re(re({},We(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:c},ne(d,{data:s,innerProps:re({},We(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},t),ne(p,{data:s,innerProps:re(re({},We(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},u),selectProps:c}))},GC=WC,KC=function(e,t){var r=e.isDisabled,s=e.isFocused,i=e.isSelected,o=e.theme,u=o.spacing,c=o.colors;return re({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?c.primary:s?c.primary25:"transparent",color:r?c.neutral20:i?c.neutral0:"inherit",padding:"".concat(u.baseUnit*2,"px ").concat(u.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:i?c.primary:c.primary50}})},QC=function(e){var t=e.children,r=e.isDisabled,s=e.isFocused,i=e.isSelected,o=e.innerRef,u=e.innerProps;return ne("div",ie({},We(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":s,"option--is-selected":i}),{ref:o,"aria-disabled":r},u),t)},ZC=QC,YC=function(e,t){var r=e.theme,s=r.spacing,i=r.colors;return re({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},JC=function(e){var t=e.children,r=e.innerProps;return ne("div",ie({},We(e,"placeholder",{placeholder:!0}),r),t)},XC=JC,eR=function(e,t){var r=e.isDisabled,s=e.theme,i=s.spacing,o=s.colors;return re({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},tR=function(e){var t=e.children,r=e.isDisabled,s=e.innerProps;return ne("div",ie({},We(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),s),t)},nR=tR,rR={ClearIndicator:_C,Control:CC,DropdownIndicator:vC,DownChevron:mv,CrossIcon:Ll,Group:OC,GroupHeading:VC,IndicatorsContainer:dC,IndicatorSeparator:EC,Input:UC,LoadingIndicator:wC,Menu:JS,MenuList:eC,MenuPortal:oC,LoadingMessage:sC,NoOptionsMessage:rC,MultiValue:GC,MultiValueContainer:zC,MultiValueLabel:HC,MultiValueRemove:qC,Option:ZC,Placeholder:XC,SelectContainer:uC,SingleValue:nR,ValueContainer:lC},sR=function(e){return re(re({},rR),e.components)},Df=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function iR(n,e){return!!(n===e||Df(n)&&Df(e))}function oR(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!iR(n[t],e[t]))return!1;return!0}function aR(n,e){e===void 0&&(e=oR);var t=null;function r(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(t&&t.lastThis===this&&e(s,t.lastArgs))return t.lastResult;var o=n.apply(this,s);return t={lastResult:o,lastArgs:s,lastThis:this},o}return r.clear=function(){t=null},r}var uR={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},cR=function(e){return ne("span",ie({css:uR},e))},Nf=cR,lR={guidance:function(e){var t=e.isSearchable,r=e.isMulti,s=e.tabSelectsValue,i=e.context,o=e.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,s=r===void 0?"":r,i=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return o?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,s=e.options,i=e.label,o=i===void 0?"":i,u=e.selectValue,c=e.isDisabled,l=e.isSelected,d=e.isAppleDevice,p=function(R,A){return R&&R.length?"".concat(R.indexOf(A)+1," of ").concat(R.length):""};if(t==="value"&&u)return"value ".concat(o," focused, ").concat(p(u,r),".");if(t==="menu"&&d){var g=c?" disabled":"",T="".concat(l?" selected":"").concat(g);return"".concat(o).concat(T,", ").concat(p(s,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},hR=function(e){var t=e.ariaSelection,r=e.focusedOption,s=e.focusedValue,i=e.focusableOptions,o=e.isFocused,u=e.selectValue,c=e.selectProps,l=e.id,d=e.isAppleDevice,p=c.ariaLiveMessages,g=c.getOptionLabel,T=c.inputValue,C=c.isMulti,R=c.isOptionDisabled,A=c.isSearchable,O=c.menuIsOpen,V=c.options,M=c.screenReaderStatus,$=c.tabSelectsValue,x=c.isLoading,H=c["aria-label"],b=c["aria-live"],v=F.useMemo(function(){return re(re({},lR),p||{})},[p]),_=F.useMemo(function(){var me="";if(t&&v.onChange){var ye=t.option,Me=t.options,je=t.removedValue,Je=t.removedValues,dt=t.value,mn=function(Rt){return Array.isArray(Rt)?null:Rt},Pe=je||ye||mn(dt),we=Pe?g(Pe):"",Dt=Me||Je||void 0,st=Dt?Dt.map(g):[],Et=re({isDisabled:Pe&&R(Pe,u),label:we,labels:st},t);me=v.onChange(Et)}return me},[t,v,R,u,g]),E=F.useMemo(function(){var me="",ye=r||s,Me=!!(r&&u&&u.includes(r));if(ye&&v.onFocus){var je={focused:ye,label:g(ye),isDisabled:R(ye,u),isSelected:Me,options:i,context:ye===r?"menu":"value",selectValue:u,isAppleDevice:d};me=v.onFocus(je)}return me},[r,s,g,R,v,i,u,d]),S=F.useMemo(function(){var me="";if(O&&V.length&&!x&&v.onFilter){var ye=M({count:i.length});me=v.onFilter({inputValue:T,resultsMessage:ye})}return me},[i,T,O,v,V,M,x]),I=(t==null?void 0:t.action)==="initial-input-focus",y=F.useMemo(function(){var me="";if(v.guidance){var ye=s?"value":O?"menu":"input";me=v.guidance({"aria-label":H,context:ye,isDisabled:r&&R(r,u),isMulti:C,isSearchable:A,tabSelectsValue:$,isInitialFocus:I})}return me},[H,r,s,C,R,A,O,v,u,$,I]),pe=ne(F.Fragment,null,ne("span",{id:"aria-selection"},_),ne("span",{id:"aria-focused"},E),ne("span",{id:"aria-results"},S),ne("span",{id:"aria-guidance"},y));return ne(F.Fragment,null,ne(Nf,{id:l},I&&pe),ne(Nf,{"aria-live":b,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!I&&pe))},dR=hR,Oc=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],fR=new RegExp("["+Oc.map(function(n){return n.letters}).join("")+"]","g"),_v={};for(var ju=0;ju<Oc.length;ju++)for(var Bu=Oc[ju],$u=0;$u<Bu.letters.length;$u++)_v[Bu.letters[$u]]=Bu.base;var bv=function(e){return e.replace(fR,function(t){return _v[t]})},pR=aR(bv),Mf=function(e){return e.replace(/^\s+|\s+$/g,"")},mR=function(e){return"".concat(e.label," ").concat(e.value)},gR=function(e){return function(t,r){if(t.data.__isNew__)return!0;var s=re({ignoreCase:!0,ignoreAccents:!0,stringify:mR,trim:!0,matchFrom:"any"},e),i=s.ignoreCase,o=s.ignoreAccents,u=s.stringify,c=s.trim,l=s.matchFrom,d=c?Mf(r):r,p=c?Mf(u(t)):u(t);return i&&(d=d.toLowerCase(),p=p.toLowerCase()),o&&(d=pR(d),p=bv(p)),l==="start"?p.substr(0,d.length)===d:p.indexOf(d)>-1}},vR=["innerRef"];function yR(n){var e=n.innerRef,t=Un(n,vR),r=HS(t,"onExited","in","enter","exit","appear");return ne("input",ie({ref:e},r,{css:Ml({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var _R=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function bR(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,s=n.onTopArrive,i=n.onTopLeave,o=F.useRef(!1),u=F.useRef(!1),c=F.useRef(0),l=F.useRef(null),d=F.useCallback(function(A,O){if(l.current!==null){var V=l.current,M=V.scrollTop,$=V.scrollHeight,x=V.clientHeight,H=l.current,b=O>0,v=$-x-M,_=!1;v>O&&o.current&&(r&&r(A),o.current=!1),b&&u.current&&(i&&i(A),u.current=!1),b&&O>v?(t&&!o.current&&t(A),H.scrollTop=$,_=!0,o.current=!0):!b&&-O>M&&(s&&!u.current&&s(A),H.scrollTop=0,_=!0,u.current=!0),_&&_R(A)}},[t,r,s,i]),p=F.useCallback(function(A){d(A,A.deltaY)},[d]),g=F.useCallback(function(A){c.current=A.changedTouches[0].clientY},[]),T=F.useCallback(function(A){var O=c.current-A.changedTouches[0].clientY;d(A,O)},[d]),C=F.useCallback(function(A){if(A){var O=BS?{passive:!1}:!1;A.addEventListener("wheel",p,O),A.addEventListener("touchstart",g,O),A.addEventListener("touchmove",T,O)}},[T,g,p]),R=F.useCallback(function(A){A&&(A.removeEventListener("wheel",p,!1),A.removeEventListener("touchstart",g,!1),A.removeEventListener("touchmove",T,!1))},[T,g,p]);return F.useEffect(function(){if(e){var A=l.current;return C(A),function(){R(A)}}},[e,C,R]),function(A){l.current=A}}var Lf=["boxSizing","height","overflow","paddingRight","position"],Ff={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Uf(n){n.cancelable&&n.preventDefault()}function jf(n){n.stopPropagation()}function Bf(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function $f(){return"ontouchstart"in window||navigator.maxTouchPoints}var zf=!!(typeof window<"u"&&window.document&&window.document.createElement),ei=0,Xr={capture:!1,passive:!1};function ER(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,s=F.useRef({}),i=F.useRef(null),o=F.useCallback(function(c){if(zf){var l=document.body,d=l&&l.style;if(r&&Lf.forEach(function(C){var R=d&&d[C];s.current[C]=R}),r&&ei<1){var p=parseInt(s.current.paddingRight,10)||0,g=document.body?document.body.clientWidth:0,T=window.innerWidth-g+p||0;Object.keys(Ff).forEach(function(C){var R=Ff[C];d&&(d[C]=R)}),d&&(d.paddingRight="".concat(T,"px"))}l&&$f()&&(l.addEventListener("touchmove",Uf,Xr),c&&(c.addEventListener("touchstart",Bf,Xr),c.addEventListener("touchmove",jf,Xr))),ei+=1}},[r]),u=F.useCallback(function(c){if(zf){var l=document.body,d=l&&l.style;ei=Math.max(ei-1,0),r&&ei<1&&Lf.forEach(function(p){var g=s.current[p];d&&(d[p]=g)}),l&&$f()&&(l.removeEventListener("touchmove",Uf,Xr),c&&(c.removeEventListener("touchstart",Bf,Xr),c.removeEventListener("touchmove",jf,Xr)))}},[r]);return F.useEffect(function(){if(e){var c=i.current;return o(c),function(){u(c)}}},[e,o,u]),function(c){i.current=c}}var TR=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},IR={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function wR(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,s=r===void 0?!0:r,i=n.onBottomArrive,o=n.onBottomLeave,u=n.onTopArrive,c=n.onTopLeave,l=bR({isEnabled:s,onBottomArrive:i,onBottomLeave:o,onTopArrive:u,onTopLeave:c}),d=ER({isEnabled:t}),p=function(T){l(T),d(T)};return ne(F.Fragment,null,t&&ne("div",{onClick:TR,css:IR}),e(p))}var AR={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},SR=function(e){var t=e.name,r=e.onFocus;return ne("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:AR,value:"",onChange:function(){}})},CR=SR;function Fl(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function RR(){return Fl(/^iPhone/i)}function Ev(){return Fl(/^Mac/i)}function PR(){return Fl(/^iPad/i)||Ev()&&navigator.maxTouchPoints>1}function kR(){return RR()||PR()}function xR(){return Ev()||kR()}var VR=function(e){return e.label},OR=function(e){return e.label},DR=function(e){return e.value},NR=function(e){return!!e.isDisabled},MR={clearIndicator:yC,container:aC,control:AC,dropdownIndicator:gC,group:PC,groupHeading:xC,indicatorsContainer:hC,indicatorSeparator:bC,input:NC,loadingIndicator:IC,loadingMessage:nC,menu:QS,menuList:XS,menuPortal:iC,multiValue:jC,multiValueLabel:BC,multiValueRemove:$C,noOptionsMessage:tC,option:KC,placeholder:YC,singleValue:eR,valueContainer:cC},LR={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},FR=4,Tv=4,UR=38,jR=Tv*2,BR={baseUnit:Tv,controlHeight:UR,menuGutter:jR},zu={borderRadius:FR,colors:LR,spacing:BR},$R={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Vf(),captureMenuScroll:!Vf(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:gR(),formatGroupLabel:VR,getOptionLabel:OR,getOptionValue:DR,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:NR,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!US(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Hf(n,e,t,r){var s=Av(n,e,t),i=Sv(n,e,t),o=wv(n,e),u=Ia(n,e);return{type:"option",data:e,isDisabled:s,isSelected:i,label:o,value:u,index:r}}function Qo(n,e){return n.options.map(function(t,r){if("options"in t){var s=t.options.map(function(o,u){return Hf(n,o,e,u)}).filter(function(o){return Wf(n,o)});return s.length>0?{type:"group",data:t,options:s,index:r}:void 0}var i=Hf(n,t,e,r);return Wf(n,i)?i:void 0}).filter($S)}function Iv(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,xl(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function qf(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,xl(r.options.map(function(s){return{data:s.data,id:"".concat(e,"-").concat(r.index,"-").concat(s.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function zR(n,e){return Iv(Qo(n,e))}function Wf(n,e){var t=n.inputValue,r=t===void 0?"":t,s=e.data,i=e.isSelected,o=e.label,u=e.value;return(!Rv(n)||!i)&&Cv(n,{label:o,value:u,data:s},r)}function HR(n,e){var t=n.focusedValue,r=n.selectValue,s=r.indexOf(t);if(s>-1){var i=e.indexOf(t);if(i>-1)return t;if(s<e.length)return e[s]}return null}function qR(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Hu=function(e,t){var r,s=(r=e.find(function(i){return i.data===t}))===null||r===void 0?void 0:r.id;return s||null},wv=function(e,t){return e.getOptionLabel(t)},Ia=function(e,t){return e.getOptionValue(t)};function Av(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function Sv(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=Ia(n,e);return t.some(function(s){return Ia(n,s)===r})}function Cv(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var Rv=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},WR=1,Pv=function(n){CA(t,n);var e=kA(t);function t(r){var s;if(AA(this,t),s=e.call(this,r),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.isAppleDevice=xR(),s.controlRef=null,s.getControlRef=function(c){s.controlRef=c},s.focusedOptionRef=null,s.getFocusedOptionRef=function(c){s.focusedOptionRef=c},s.menuListRef=null,s.getMenuListRef=function(c){s.menuListRef=c},s.inputRef=null,s.getInputRef=function(c){s.inputRef=c},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(c,l){var d=s.props,p=d.onChange,g=d.name;l.name=g,s.ariaOnChange(c,l),p(c,l)},s.setValue=function(c,l,d){var p=s.props,g=p.closeMenuOnSelect,T=p.isMulti,C=p.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:C}),g&&(s.setState({inputIsHiddenAfterUpdate:!T}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(c,{action:l,option:d})},s.selectOption=function(c){var l=s.props,d=l.blurInputOnSelect,p=l.isMulti,g=l.name,T=s.state.selectValue,C=p&&s.isOptionSelected(c,T),R=s.isOptionDisabled(c,T);if(C){var A=s.getOptionValue(c);s.setValue(T.filter(function(O){return s.getOptionValue(O)!==A}),"deselect-option",c)}else if(!R)p?s.setValue([].concat(xl(T),[c]),"select-option",c):s.setValue(c,"select-option");else{s.ariaOnChange(c,{action:"select-option",option:c,name:g});return}d&&s.blurInput()},s.removeValue=function(c){var l=s.props.isMulti,d=s.state.selectValue,p=s.getOptionValue(c),g=d.filter(function(C){return s.getOptionValue(C)!==p}),T=Oo(l,g,g[0]||null);s.onChange(T,{action:"remove-value",removedValue:c}),s.focusInput()},s.clearValue=function(){var c=s.state.selectValue;s.onChange(Oo(s.props.isMulti,[],null),{action:"clear",removedValues:c})},s.popValue=function(){var c=s.props.isMulti,l=s.state.selectValue,d=l[l.length-1],p=l.slice(0,l.length-1),g=Oo(c,p,p[0]||null);d&&s.onChange(g,{action:"pop-value",removedValue:d})},s.getFocusedOptionId=function(c){return Hu(s.state.focusableOptionsWithIds,c)},s.getFocusableOptionsWithIds=function(){return qf(Qo(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];return DS.apply(void 0,[s.props.classNamePrefix].concat(l))},s.getOptionLabel=function(c){return wv(s.props,c)},s.getOptionValue=function(c){return Ia(s.props,c)},s.getStyles=function(c,l){var d=s.props.unstyled,p=MR[c](l,d);p.boxSizing="border-box";var g=s.props.styles[c];return g?g(p,l):p},s.getClassNames=function(c,l){var d,p;return(d=(p=s.props.classNames)[c])===null||d===void 0?void 0:d.call(p,l)},s.getElementId=function(c){return"".concat(s.state.instancePrefix,"-").concat(c)},s.getComponents=function(){return sR(s.props)},s.buildCategorizedOptions=function(){return Qo(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return Iv(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(c,l){s.setState({ariaSelection:re({value:c},l)})},s.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(c){s.blockOptionHover=!1},s.onControlMouseDown=function(c){if(!c.defaultPrevented){var l=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&s.onMenuClose():l&&s.openMenu("first"):(l&&(s.openAfterFocus=!0),s.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},s.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!s.props.isDisabled){var l=s.props,d=l.isMulti,p=l.menuIsOpen;s.focusInput(),p?(s.setState({inputIsHiddenAfterUpdate:!d}),s.onMenuClose()):s.openMenu("first"),c.preventDefault()}},s.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(s.clearValue(),c.preventDefault(),s.openAfterFocus=!1,c.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(c){typeof s.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&iu(c.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(c)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(c){var l=c.touches,d=l&&l.item(0);d&&(s.initialTouchX=d.clientX,s.initialTouchY=d.clientY,s.userIsDragging=!1)},s.onTouchMove=function(c){var l=c.touches,d=l&&l.item(0);if(d){var p=Math.abs(d.clientX-s.initialTouchX),g=Math.abs(d.clientY-s.initialTouchY),T=5;s.userIsDragging=p>T||g>T}},s.onTouchEnd=function(c){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(c.target)&&s.menuListRef&&!s.menuListRef.contains(c.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(c){s.userIsDragging||s.onControlMouseDown(c)},s.onClearIndicatorTouchEnd=function(c){s.userIsDragging||s.onClearIndicatorMouseDown(c)},s.onDropdownIndicatorTouchEnd=function(c){s.userIsDragging||s.onDropdownIndicatorMouseDown(c)},s.handleInputChange=function(c){var l=s.props.inputValue,d=c.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(d,{action:"input-change",prevInputValue:l}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(c){s.props.onFocus&&s.props.onFocus(c),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(c){var l=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(c),s.onInputChange("",{action:"input-blur",prevInputValue:l}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(c){if(!(s.blockOptionHover||s.state.focusedOption===c)){var l=s.getFocusableOptions(),d=l.indexOf(c);s.setState({focusedOption:c,focusedOptionId:d>-1?s.getFocusedOptionId(c):null})}},s.shouldHideSelectedOptions=function(){return Rv(s.props)},s.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),s.focus()},s.onKeyDown=function(c){var l=s.props,d=l.isMulti,p=l.backspaceRemovesValue,g=l.escapeClearsValue,T=l.inputValue,C=l.isClearable,R=l.isDisabled,A=l.menuIsOpen,O=l.onKeyDown,V=l.tabSelectsValue,M=l.openMenuOnFocus,$=s.state,x=$.focusedOption,H=$.focusedValue,b=$.selectValue;if(!R&&!(typeof O=="function"&&(O(c),c.defaultPrevented))){switch(s.blockOptionHover=!0,c.key){case"ArrowLeft":if(!d||T)return;s.focusValue("previous");break;case"ArrowRight":if(!d||T)return;s.focusValue("next");break;case"Delete":case"Backspace":if(T)return;if(H)s.removeValue(H);else{if(!p)return;d?s.popValue():C&&s.clearValue()}break;case"Tab":if(s.isComposing||c.shiftKey||!A||!V||!x||M&&s.isOptionSelected(x,b))return;s.selectOption(x);break;case"Enter":if(c.keyCode===229)break;if(A){if(!x||s.isComposing)return;s.selectOption(x);break}return;case"Escape":A?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:T}),s.onMenuClose()):C&&g&&s.clearValue();break;case" ":if(T)return;if(!A){s.openMenu("first");break}if(!x)return;s.selectOption(x);break;case"ArrowUp":A?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":A?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!A)return;s.focusOption("pageup");break;case"PageDown":if(!A)return;s.focusOption("pagedown");break;case"Home":if(!A)return;s.focusOption("first");break;case"End":if(!A)return;s.focusOption("last");break;default:return}c.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++WR),s.state.selectValue=kf(r.value),r.menuIsOpen&&s.state.selectValue.length){var i=s.getFocusableOptionsWithIds(),o=s.buildFocusableOptions(),u=o.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=i,s.state.focusedOption=o[u],s.state.focusedOptionId=Hu(i,o[u])}return s}return SA(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&xf(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isDisabled,u=i.menuIsOpen,c=this.state.isFocused;(c&&!o&&s.isDisabled||c&&u&&!s.menuIsOpen)&&this.focusInput(),c&&o&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(xf(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,i){this.props.onInputChange(s,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var i=this,o=this.state,u=o.selectValue,c=o.isFocused,l=this.buildFocusableOptions(),d=s==="first"?0:l.length-1;if(!this.props.isMulti){var p=l.indexOf(u[0]);p>-1&&(d=p)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:l[d],focusedOptionId:this.getFocusedOptionId(l[d])},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(s){var i=this.state,o=i.selectValue,u=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(u);u||(c=-1);var l=o.length-1,d=-1;if(o.length){switch(s){case"previous":c===0?d=0:c===-1?d=l:d=c-1;break;case"next":c>-1&&c<l&&(d=c+1);break}this.setState({inputIsHidden:d!==-1,focusedValue:o[d]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,o=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var c=0,l=u.indexOf(o);o||(l=-1),s==="up"?c=l>0?l-1:u.length-1:s==="down"?c=(l+1)%u.length:s==="pageup"?(c=l-i,c<0&&(c=0)):s==="pagedown"?(c=l+i,c>u.length-1&&(c=u.length-1)):s==="last"&&(c=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(zu):re(re({},zu),this.props.theme):zu}},{key:"getCommonProps",value:function(){var s=this.clearValue,i=this.cx,o=this.getStyles,u=this.getClassNames,c=this.getValue,l=this.selectOption,d=this.setValue,p=this.props,g=p.isMulti,T=p.isRtl,C=p.options,R=this.hasValue();return{clearValue:s,cx:i,getStyles:o,getClassNames:u,getValue:c,hasValue:R,isMulti:g,isRtl:T,options:C,selectOption:l,selectProps:p,setValue:d,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,i=s.isClearable,o=s.isMulti;return i===void 0?o:i}},{key:"isOptionDisabled",value:function(s,i){return Av(this.props,s,i)}},{key:"isOptionSelected",value:function(s,i){return Sv(this.props,s,i)}},{key:"filterOption",value:function(s,i){return Cv(this.props,s,i)}},{key:"formatOptionLabel",value:function(s,i){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(s,{context:i,inputValue:o,selectValue:u})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,i=s.isDisabled,o=s.isSearchable,u=s.inputId,c=s.inputValue,l=s.tabIndex,d=s.form,p=s.menuIsOpen,g=s.required,T=this.getComponents(),C=T.Input,R=this.state,A=R.inputIsHidden,O=R.ariaSelection,V=this.commonProps,M=u||this.getElementId("input"),$=re(re(re({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(O==null?void 0:O.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?F.createElement(C,ie({},V,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:M,innerRef:this.getInputRef,isDisabled:i,isHidden:A,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:l,form:d,type:"text",value:c},$)):F.createElement(yR,ie({id:M,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Ea,onFocus:this.onInputFocus,disabled:i,tabIndex:l,inputMode:"none",form:d,value:""},$))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,i=this.getComponents(),o=i.MultiValue,u=i.MultiValueContainer,c=i.MultiValueLabel,l=i.MultiValueRemove,d=i.SingleValue,p=i.Placeholder,g=this.commonProps,T=this.props,C=T.controlShouldRenderValue,R=T.isDisabled,A=T.isMulti,O=T.inputValue,V=T.placeholder,M=this.state,$=M.selectValue,x=M.focusedValue,H=M.isFocused;if(!this.hasValue()||!C)return O?null:F.createElement(p,ie({},g,{key:"placeholder",isDisabled:R,isFocused:H,innerProps:{id:this.getElementId("placeholder")}}),V);if(A)return $.map(function(v,_){var E=v===x,S="".concat(s.getOptionLabel(v),"-").concat(s.getOptionValue(v));return F.createElement(o,ie({},g,{components:{Container:u,Label:c,Remove:l},isFocused:E,isDisabled:R,key:S,index:_,removeProps:{onClick:function(){return s.removeValue(v)},onTouchEnd:function(){return s.removeValue(v)},onMouseDown:function(y){y.preventDefault()}},data:v}),s.formatOptionLabel(v,"value"))});if(O)return null;var b=$[0];return F.createElement(d,ie({},g,{data:b,isDisabled:R}),this.formatOptionLabel(b,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),i=s.ClearIndicator,o=this.commonProps,u=this.props,c=u.isDisabled,l=u.isLoading,d=this.state.isFocused;if(!this.isClearable()||!i||c||!this.hasValue()||l)return null;var p={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return F.createElement(i,ie({},o,{innerProps:p,isFocused:d}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),i=s.LoadingIndicator,o=this.commonProps,u=this.props,c=u.isDisabled,l=u.isLoading,d=this.state.isFocused;if(!i||!l)return null;var p={"aria-hidden":"true"};return F.createElement(i,ie({},o,{innerProps:p,isDisabled:c,isFocused:d}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator,o=s.IndicatorSeparator;if(!i||!o)return null;var u=this.commonProps,c=this.props.isDisabled,l=this.state.isFocused;return F.createElement(o,ie({},u,{isDisabled:c,isFocused:l}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator;if(!i)return null;var o=this.commonProps,u=this.props.isDisabled,c=this.state.isFocused,l={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return F.createElement(i,ie({},o,{innerProps:l,isDisabled:u,isFocused:c}))}},{key:"renderMenu",value:function(){var s=this,i=this.getComponents(),o=i.Group,u=i.GroupHeading,c=i.Menu,l=i.MenuList,d=i.MenuPortal,p=i.LoadingMessage,g=i.NoOptionsMessage,T=i.Option,C=this.commonProps,R=this.state.focusedOption,A=this.props,O=A.captureMenuScroll,V=A.inputValue,M=A.isLoading,$=A.loadingMessage,x=A.minMenuHeight,H=A.maxMenuHeight,b=A.menuIsOpen,v=A.menuPlacement,_=A.menuPosition,E=A.menuPortalTarget,S=A.menuShouldBlockScroll,I=A.menuShouldScrollIntoView,y=A.noOptionsMessage,pe=A.onMenuScrollToTop,me=A.onMenuScrollToBottom;if(!b)return null;var ye=function(we,Dt){var st=we.type,Et=we.data,it=we.isDisabled,Rt=we.isSelected,Zt=we.label,gn=we.value,vn=R===Et,yn=it?void 0:function(){return s.onOptionHover(Et)},vr=it?void 0:function(){return s.selectOption(Et)},_n="".concat(s.getElementId("option"),"-").concat(Dt),jn={id:_n,onClick:vr,onMouseMove:yn,onMouseOver:yn,tabIndex:-1,role:"option","aria-selected":s.isAppleDevice?void 0:Rt};return F.createElement(T,ie({},C,{innerProps:jn,data:Et,isDisabled:it,isSelected:Rt,key:_n,label:Zt,type:st,value:gn,isFocused:vn,innerRef:vn?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(we.data,"menu"))},Me;if(this.hasOptions())Me=this.getCategorizedOptions().map(function(Pe){if(Pe.type==="group"){var we=Pe.data,Dt=Pe.options,st=Pe.index,Et="".concat(s.getElementId("group"),"-").concat(st),it="".concat(Et,"-heading");return F.createElement(o,ie({},C,{key:Et,data:we,options:Dt,Heading:u,headingProps:{id:it,data:Pe.data},label:s.formatGroupLabel(Pe.data)}),Pe.options.map(function(Rt){return ye(Rt,"".concat(st,"-").concat(Rt.index))}))}else if(Pe.type==="option")return ye(Pe,"".concat(Pe.index))});else if(M){var je=$({inputValue:V});if(je===null)return null;Me=F.createElement(p,C,je)}else{var Je=y({inputValue:V});if(Je===null)return null;Me=F.createElement(g,C,Je)}var dt={minMenuHeight:x,maxMenuHeight:H,menuPlacement:v,menuPosition:_,menuShouldScrollIntoView:I},mn=F.createElement(ZS,ie({},C,dt),function(Pe){var we=Pe.ref,Dt=Pe.placerProps,st=Dt.placement,Et=Dt.maxHeight;return F.createElement(c,ie({},C,dt,{innerRef:we,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:M,placement:st}),F.createElement(wR,{captureEnabled:O,onTopArrive:pe,onBottomArrive:me,lockEnabled:S},function(it){return F.createElement(l,ie({},C,{innerRef:function(Zt){s.getMenuListRef(Zt),it(Zt)},innerProps:{role:"listbox","aria-multiselectable":C.isMulti,id:s.getElementId("listbox")},isLoading:M,maxHeight:Et,focusedOption:R}),Me)}))});return E||_==="fixed"?F.createElement(d,ie({},C,{appendTo:E,controlElement:this.controlRef,menuPlacement:v,menuPosition:_}),mn):mn}},{key:"renderFormField",value:function(){var s=this,i=this.props,o=i.delimiter,u=i.isDisabled,c=i.isMulti,l=i.name,d=i.required,p=this.state.selectValue;if(d&&!this.hasValue()&&!u)return F.createElement(CR,{name:l,onFocus:this.onValueInputFocus});if(!(!l||u))if(c)if(o){var g=p.map(function(R){return s.getOptionValue(R)}).join(o);return F.createElement("input",{name:l,type:"hidden",value:g})}else{var T=p.length>0?p.map(function(R,A){return F.createElement("input",{key:"i-".concat(A),name:l,type:"hidden",value:s.getOptionValue(R)})}):F.createElement("input",{name:l,type:"hidden",value:""});return F.createElement("div",null,T)}else{var C=p[0]?this.getOptionValue(p[0]):"";return F.createElement("input",{name:l,type:"hidden",value:C})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,i=this.state,o=i.ariaSelection,u=i.focusedOption,c=i.focusedValue,l=i.isFocused,d=i.selectValue,p=this.getFocusableOptions();return F.createElement(dR,ie({},s,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:u,focusedValue:c,isFocused:l,selectValue:d,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),i=s.Control,o=s.IndicatorsContainer,u=s.SelectContainer,c=s.ValueContainer,l=this.props,d=l.className,p=l.id,g=l.isDisabled,T=l.menuIsOpen,C=this.state.isFocused,R=this.commonProps=this.getCommonProps();return F.createElement(u,ie({},R,{className:d,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:C}),this.renderLiveRegion(),F.createElement(i,ie({},R,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:C,menuIsOpen:T}),F.createElement(c,ie({},R,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),F.createElement(o,ie({},R,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,i){var o=i.prevProps,u=i.clearFocusValueOnUpdate,c=i.inputIsHiddenAfterUpdate,l=i.ariaSelection,d=i.isFocused,p=i.prevWasFocused,g=i.instancePrefix,T=s.options,C=s.value,R=s.menuIsOpen,A=s.inputValue,O=s.isMulti,V=kf(C),M={};if(o&&(C!==o.value||T!==o.options||R!==o.menuIsOpen||A!==o.inputValue)){var $=R?zR(s,V):[],x=R?qf(Qo(s,V),"".concat(g,"-option")):[],H=u?HR(i,V):null,b=qR(i,$),v=Hu(x,b);M={selectValue:V,focusedOption:b,focusedOptionId:v,focusableOptionsWithIds:x,focusedValue:H,clearFocusValueOnUpdate:!1}}var _=c!=null&&s!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},E=l,S=d&&p;return d&&!S&&(E={value:Oo(O,V,V[0]||null),options:V,action:"initial-input-focus"},S=!p),(l==null?void 0:l.action)==="initial-input-focus"&&(E=null),re(re(re({},M),_),{},{prevProps:s,ariaSelection:E,prevWasFocused:S})}}]),t}(F.Component);Pv.defaultProps=$R;var GR=F.forwardRef(function(n,e){var t=wA(n);return F.createElement(Pv,ie({ref:e},t))}),KR=GR,QR="Label",kv=F.forwardRef((n,e)=>K.jsx(xy.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));kv.displayName=QR;var ZR=kv;function YR({className:n,...e}){return K.jsx(ZR,{"data-slot":"label",className:Ot("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}function JR(n){const{label:e,className:t,...r}=n;return K.jsxs("div",{className:Vy(t),children:[e&&K.jsx(YR,{children:e}),K.jsx(KR,{...r})]})}var Ie;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(u=>typeof s[s[u]]!="number"),o={};for(const u of i)o[u]=s[u];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Ie||(Ie={}));var Dc;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Dc||(Dc={}));const J=Ie.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wn=n=>{switch(typeof n){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(n)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(n)?J.array:n===null?J.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?J.promise:typeof Map<"u"&&n instanceof Map?J.map:typeof Set<"u"&&n instanceof Set?J.set:typeof Date<"u"&&n instanceof Date?J.date:J.object;default:return J.unknown}},B=Ie.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),XR=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Ut extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let u=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(u[l]=u[l]||{_errors:[]},u[l]._errors.push(t(o))):u[l]=u[l]||{_errors:[]},u=u[l],c++}}};return s(this),r}static assert(e){if(!(e instanceof Ut))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ie.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Ut.create=n=>new Ut(n);const Ps=(n,e)=>{let t;switch(n.code){case B.invalid_type:n.received===J.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case B.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Ie.jsonStringifyReplacer)}`;break;case B.unrecognized_keys:t=`Unrecognized key(s) in object: ${Ie.joinValues(n.keys,", ")}`;break;case B.invalid_union:t="Invalid input";break;case B.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Ie.joinValues(n.options)}`;break;case B.invalid_enum_value:t=`Invalid enum value. Expected ${Ie.joinValues(n.options)}, received '${n.received}'`;break;case B.invalid_arguments:t="Invalid function arguments";break;case B.invalid_return_type:t="Invalid function return type";break;case B.invalid_date:t="Invalid date";break;case B.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Ie.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case B.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case B.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case B.custom:t="Invalid input";break;case B.invalid_intersection_types:t="Intersection results could not be merged";break;case B.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case B.not_finite:t="Number must be finite";break;default:t=e.defaultError,Ie.assertNever(n)}return{message:t}};let xv=Ps;function e1(n){xv=n}function wa(){return xv}const Aa=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let u="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)u=l(o,{data:e,defaultError:u}).message;return{...s,path:i,message:u}},t1=[];function Q(n,e){const t=wa(),r=Aa({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Ps?void 0:Ps].filter(s=>!!s)});n.common.issues.push(r)}class bt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return ue;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return bt.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return ue;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const ue=Object.freeze({status:"aborted"}),us=n=>({status:"dirty",value:n}),Ct=n=>({status:"valid",value:n}),Nc=n=>n.status==="aborted",Mc=n=>n.status==="dirty",Ur=n=>n.status==="valid",Vi=n=>typeof Promise<"u"&&n instanceof Promise;function Sa(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function Vv(n,e,t,r,s){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var ee;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ee||(ee={}));var hi,di;class fn{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Gf=(n,e)=>{if(Ur(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ut(n.common.issues);return this._error=t,this._error}}};function fe(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,u)=>{var c,l;const{message:d}=n;return o.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:u.defaultError}:o.code!=="invalid_type"?{message:u.defaultError}:{message:(l=d??t)!==null&&l!==void 0?l:u.defaultError}},description:s}}class ge{get description(){return this._def.description}_getType(e){return wn(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:wn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new bt,ctx:{common:e.parent.common,data:e.data,parsedType:wn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Vi(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const s={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wn(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Gf(s,i)}"~validate"(e){var t,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wn(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return Ur(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(t=i==null?void 0:i.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>Ur(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wn(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Vi(s)?s:Promise.resolve(s));return Gf(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),u=()=>i.addIssue({code:B.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(u(),!1)):o?!0:(u(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new Qt({schema:this,typeName:ae.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ln.create(this,this._def)}nullable(){return gr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Gt.create(this)}promise(){return xs.create(this,this._def)}or(e){return Mi.create([this,e],this._def)}and(e){return Li.create(this,e,this._def)}transform(e){return new Qt({...fe(this._def),schema:this,typeName:ae.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new $i({...fe(this._def),innerType:this,defaultValue:t,typeName:ae.ZodDefault})}brand(){return new Ul({typeName:ae.ZodBranded,type:this,...fe(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new zi({...fe(this._def),innerType:this,catchValue:t,typeName:ae.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return so.create(this,e)}readonly(){return Hi.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const n1=/^c[^\s-]{8,}$/i,r1=/^[0-9a-z]+$/,s1=/^[0-9A-HJKMNP-TV-Z]{26}$/i,i1=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,o1=/^[a-z0-9_-]{21}$/i,a1=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,u1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,c1=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,l1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let qu;const h1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,d1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,f1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,p1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,m1=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,g1=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ov="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",v1=new RegExp(`^${Ov}$`);function Dv(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function y1(n){return new RegExp(`^${Dv(n)}$`)}function Nv(n){let e=`${Ov}T${Dv(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function _1(n,e){return!!((e==="v4"||!e)&&h1.test(n)||(e==="v6"||!e)&&f1.test(n))}function b1(n,e){if(!a1.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function E1(n,e){return!!((e==="v4"||!e)&&d1.test(n)||(e==="v6"||!e)&&p1.test(n))}class Wt extends ge{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){const i=this._getOrReturnCtx(e);return Q(i,{code:B.invalid_type,expected:J.string,received:i.parsedType}),ue}const r=new bt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:B.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:B.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,u=e.data.length<i.value;(o||u)&&(s=this._getOrReturnCtx(e,s),o?Q(s,{code:B.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&Q(s,{code:B.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")c1.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"email",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")qu||(qu=new RegExp(l1,"u")),qu.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"emoji",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")i1.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"uuid",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")o1.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"nanoid",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")n1.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cuid",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")r1.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cuid2",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")s1.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"ulid",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Q(s,{validation:"url",code:B.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"regex",code:B.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Q(s,{code:B.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Q(s,{code:B.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Q(s,{code:B.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Nv(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:B.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?v1.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:B.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?y1(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:B.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?u1.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"duration",code:B.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?_1(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"ip",code:B.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?b1(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"jwt",code:B.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?E1(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cidr",code:B.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?m1.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"base64",code:B.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?g1.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"base64url",code:B.invalid_string,message:i.message}),r.dirty()):Ie.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:B.invalid_string,...ee.errToObj(r)})}_addCheck(e){return new Wt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ee.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ee.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ee.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ee.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ee.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ee.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ee.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ee.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ee.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ee.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ee.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ee.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ee.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ee.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ee.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ee.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ee.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ee.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ee.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ee.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ee.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ee.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ee.errToObj(t)})}nonempty(e){return this.min(1,ee.errToObj(e))}trim(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Wt.create=n=>{var e;return new Wt({checks:[],typeName:ae.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...fe(n)})};function T1(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=parseInt(n.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class fr extends ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){const i=this._getOrReturnCtx(e);return Q(i,{code:B.invalid_type,expected:J.number,received:i.parsedType}),ue}let r;const s=new bt;for(const i of this._def.checks)i.kind==="int"?Ie.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Q(r,{code:B.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:B.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:B.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?T1(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Q(r,{code:B.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Q(r,{code:B.not_finite,message:i.message}),s.dirty()):Ie.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ee.toString(t))}setLimit(e,t,r,s){return new fr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ee.toString(s)}]})}_addCheck(e){return new fr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ee.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ee.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ee.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ee.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ee.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ie.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}fr.create=n=>new fr({checks:[],typeName:ae.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...fe(n)});class pr extends ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==J.bigint)return this._getInvalidInput(e);let r;const s=new bt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:B.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:B.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:B.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Ie.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Q(t,{code:B.invalid_type,expected:J.bigint,received:t.parsedType}),ue}gte(e,t){return this.setLimit("min",e,!0,ee.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ee.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ee.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ee.toString(t))}setLimit(e,t,r,s){return new pr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ee.toString(s)}]})}_addCheck(e){return new pr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ee.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ee.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ee.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ee.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ee.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}pr.create=n=>{var e;return new pr({checks:[],typeName:ae.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...fe(n)})};class Oi extends ge{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){const r=this._getOrReturnCtx(e);return Q(r,{code:B.invalid_type,expected:J.boolean,received:r.parsedType}),ue}return Ct(e.data)}}Oi.create=n=>new Oi({typeName:ae.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...fe(n)});class jr extends ge{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){const i=this._getOrReturnCtx(e);return Q(i,{code:B.invalid_type,expected:J.date,received:i.parsedType}),ue}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Q(i,{code:B.invalid_date}),ue}const r=new bt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:B.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:B.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Ie.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new jr({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ee.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ee.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}jr.create=n=>new jr({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ae.ZodDate,...fe(n)});class Ca extends ge{_parse(e){if(this._getType(e)!==J.symbol){const r=this._getOrReturnCtx(e);return Q(r,{code:B.invalid_type,expected:J.symbol,received:r.parsedType}),ue}return Ct(e.data)}}Ca.create=n=>new Ca({typeName:ae.ZodSymbol,...fe(n)});class Di extends ge{_parse(e){if(this._getType(e)!==J.undefined){const r=this._getOrReturnCtx(e);return Q(r,{code:B.invalid_type,expected:J.undefined,received:r.parsedType}),ue}return Ct(e.data)}}Di.create=n=>new Di({typeName:ae.ZodUndefined,...fe(n)});class Ni extends ge{_parse(e){if(this._getType(e)!==J.null){const r=this._getOrReturnCtx(e);return Q(r,{code:B.invalid_type,expected:J.null,received:r.parsedType}),ue}return Ct(e.data)}}Ni.create=n=>new Ni({typeName:ae.ZodNull,...fe(n)});class ks extends ge{constructor(){super(...arguments),this._any=!0}_parse(e){return Ct(e.data)}}ks.create=n=>new ks({typeName:ae.ZodAny,...fe(n)});class xr extends ge{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ct(e.data)}}xr.create=n=>new xr({typeName:ae.ZodUnknown,...fe(n)});class Ln extends ge{_parse(e){const t=this._getOrReturnCtx(e);return Q(t,{code:B.invalid_type,expected:J.never,received:t.parsedType}),ue}}Ln.create=n=>new Ln({typeName:ae.ZodNever,...fe(n)});class Ra extends ge{_parse(e){if(this._getType(e)!==J.undefined){const r=this._getOrReturnCtx(e);return Q(r,{code:B.invalid_type,expected:J.void,received:r.parsedType}),ue}return Ct(e.data)}}Ra.create=n=>new Ra({typeName:ae.ZodVoid,...fe(n)});class Gt extends ge{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==J.array)return Q(t,{code:B.invalid_type,expected:J.array,received:t.parsedType}),ue;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,u=t.data.length<s.exactLength.value;(o||u)&&(Q(t,{code:o?B.too_big:B.too_small,minimum:u?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(Q(t,{code:B.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(Q(t,{code:B.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,u)=>s.type._parseAsync(new fn(t,o,t.path,u)))).then(o=>bt.mergeArray(r,o));const i=[...t.data].map((o,u)=>s.type._parseSync(new fn(t,o,t.path,u)));return bt.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Gt({...this._def,minLength:{value:e,message:ee.toString(t)}})}max(e,t){return new Gt({...this._def,maxLength:{value:e,message:ee.toString(t)}})}length(e,t){return new Gt({...this._def,exactLength:{value:e,message:ee.toString(t)}})}nonempty(e){return this.min(1,e)}}Gt.create=(n,e)=>new Gt({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ae.ZodArray,...fe(e)});function os(n){if(n instanceof $e){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=ln.create(os(r))}return new $e({...n._def,shape:()=>e})}else return n instanceof Gt?new Gt({...n._def,type:os(n.element)}):n instanceof ln?ln.create(os(n.unwrap())):n instanceof gr?gr.create(os(n.unwrap())):n instanceof pn?pn.create(n.items.map(e=>os(e))):n}class $e extends ge{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Ie.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==J.object){const l=this._getOrReturnCtx(e);return Q(l,{code:B.invalid_type,expected:J.object,received:l.parsedType}),ue}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),u=[];if(!(this._def.catchall instanceof Ln&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||u.push(l);const c=[];for(const l of o){const d=i[l],p=s.data[l];c.push({key:{status:"valid",value:l},value:d._parse(new fn(s,p,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Ln){const l=this._def.unknownKeys;if(l==="passthrough")for(const d of u)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(l==="strict")u.length>0&&(Q(s,{code:B.unrecognized_keys,keys:u}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const d of u){const p=s.data[d];c.push({key:{status:"valid",value:d},value:l._parse(new fn(s,p,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const d of c){const p=await d.key,g=await d.value;l.push({key:p,value:g,alwaysSet:d.alwaysSet})}return l}).then(l=>bt.mergeObjectSync(r,l)):bt.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ee.errToObj,new $e({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,i,o,u;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(u=ee.errToObj(e).message)!==null&&u!==void 0?u:c}:{message:c}}}:{}})}strip(){return new $e({...this._def,unknownKeys:"strip"})}passthrough(){return new $e({...this._def,unknownKeys:"passthrough"})}extend(e){return new $e({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new $e({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ae.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new $e({...this._def,catchall:e})}pick(e){const t={};return Ie.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new $e({...this._def,shape:()=>t})}omit(e){const t={};return Ie.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new $e({...this._def,shape:()=>t})}deepPartial(){return os(this)}partial(e){const t={};return Ie.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}),new $e({...this._def,shape:()=>t})}required(e){const t={};return Ie.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ln;)i=i._def.innerType;t[r]=i}}),new $e({...this._def,shape:()=>t})}keyof(){return Mv(Ie.objectKeys(this.shape))}}$e.create=(n,e)=>new $e({shape:()=>n,unknownKeys:"strip",catchall:Ln.create(),typeName:ae.ZodObject,...fe(e)});$e.strictCreate=(n,e)=>new $e({shape:()=>n,unknownKeys:"strict",catchall:Ln.create(),typeName:ae.ZodObject,...fe(e)});$e.lazycreate=(n,e)=>new $e({shape:n,unknownKeys:"strip",catchall:Ln.create(),typeName:ae.ZodObject,...fe(e)});class Mi extends ge{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;const o=i.map(u=>new Ut(u.ctx.common.issues));return Q(t,{code:B.invalid_union,unionErrors:o}),ue}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...t,common:{...t.common,issues:[]},parent:null},d=c._parseSync({data:t.data,path:t.path,parent:l});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const u=o.map(c=>new Ut(c));return Q(t,{code:B.invalid_union,unionErrors:u}),ue}}get options(){return this._def.options}}Mi.create=(n,e)=>new Mi({options:n,typeName:ae.ZodUnion,...fe(e)});const In=n=>n instanceof Ui?In(n.schema):n instanceof Qt?In(n.innerType()):n instanceof ji?[n.value]:n instanceof mr?n.options:n instanceof Bi?Ie.objectValues(n.enum):n instanceof $i?In(n._def.innerType):n instanceof Di?[void 0]:n instanceof Ni?[null]:n instanceof ln?[void 0,...In(n.unwrap())]:n instanceof gr?[null,...In(n.unwrap())]:n instanceof Ul||n instanceof Hi?In(n.unwrap()):n instanceof zi?In(n._def.innerType):[];class ou extends ge{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==J.object)return Q(t,{code:B.invalid_type,expected:J.object,received:t.parsedType}),ue;const r=this.discriminator,s=t.data[r],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Q(t,{code:B.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const i of t){const o=In(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of o){if(s.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);s.set(u,i)}}return new ou({typeName:ae.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...fe(r)})}}function Lc(n,e){const t=wn(n),r=wn(e);if(n===e)return{valid:!0,data:n};if(t===J.object&&r===J.object){const s=Ie.objectKeys(e),i=Ie.objectKeys(n).filter(u=>s.indexOf(u)!==-1),o={...n,...e};for(const u of i){const c=Lc(n[u],e[u]);if(!c.valid)return{valid:!1};o[u]=c.data}return{valid:!0,data:o}}else if(t===J.array&&r===J.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],u=e[i],c=Lc(o,u);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return t===J.date&&r===J.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Li extends ge{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Nc(i)||Nc(o))return ue;const u=Lc(i.value,o.value);return u.valid?((Mc(i)||Mc(o))&&t.dirty(),{status:t.value,value:u.data}):(Q(r,{code:B.invalid_intersection_types}),ue)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Li.create=(n,e,t)=>new Li({left:n,right:e,typeName:ae.ZodIntersection,...fe(t)});class pn extends ge{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.array)return Q(r,{code:B.invalid_type,expected:J.array,received:r.parsedType}),ue;if(r.data.length<this._def.items.length)return Q(r,{code:B.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ue;!this._def.rest&&r.data.length>this._def.items.length&&(Q(r,{code:B.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,u)=>{const c=this._def.items[u]||this._def.rest;return c?c._parse(new fn(r,o,r.path,u)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>bt.mergeArray(t,o)):bt.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new pn({...this._def,rest:e})}}pn.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pn({items:n,typeName:ae.ZodTuple,rest:null,...fe(e)})};class Fi extends ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return Q(r,{code:B.invalid_type,expected:J.object,received:r.parsedType}),ue;const s=[],i=this._def.keyType,o=this._def.valueType;for(const u in r.data)s.push({key:i._parse(new fn(r,u,r.path,u)),value:o._parse(new fn(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?bt.mergeObjectAsync(t,s):bt.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof ge?new Fi({keyType:e,valueType:t,typeName:ae.ZodRecord,...fe(r)}):new Fi({keyType:Wt.create(),valueType:e,typeName:ae.ZodRecord,...fe(t)})}}class Pa extends ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.map)return Q(r,{code:B.invalid_type,expected:J.map,received:r.parsedType}),ue;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([u,c],l)=>({key:s._parse(new fn(r,u,r.path,[l,"key"])),value:i._parse(new fn(r,c,r.path,[l,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,d=await c.value;if(l.status==="aborted"||d.status==="aborted")return ue;(l.status==="dirty"||d.status==="dirty")&&t.dirty(),u.set(l.value,d.value)}return{status:t.value,value:u}})}else{const u=new Map;for(const c of o){const l=c.key,d=c.value;if(l.status==="aborted"||d.status==="aborted")return ue;(l.status==="dirty"||d.status==="dirty")&&t.dirty(),u.set(l.value,d.value)}return{status:t.value,value:u}}}}Pa.create=(n,e,t)=>new Pa({valueType:e,keyType:n,typeName:ae.ZodMap,...fe(t)});class Br extends ge{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==J.set)return Q(r,{code:B.invalid_type,expected:J.set,received:r.parsedType}),ue;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Q(r,{code:B.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Q(r,{code:B.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const d of c){if(d.status==="aborted")return ue;d.status==="dirty"&&t.dirty(),l.add(d.value)}return{status:t.value,value:l}}const u=[...r.data.values()].map((c,l)=>i._parse(new fn(r,c,r.path,l)));return r.common.async?Promise.all(u).then(c=>o(c)):o(u)}min(e,t){return new Br({...this._def,minSize:{value:e,message:ee.toString(t)}})}max(e,t){return new Br({...this._def,maxSize:{value:e,message:ee.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Br.create=(n,e)=>new Br({valueType:n,minSize:null,maxSize:null,typeName:ae.ZodSet,...fe(e)});class ps extends ge{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==J.function)return Q(t,{code:B.invalid_type,expected:J.function,received:t.parsedType}),ue;function r(u,c){return Aa({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,wa(),Ps].filter(l=>!!l),issueData:{code:B.invalid_arguments,argumentsError:c}})}function s(u,c){return Aa({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,wa(),Ps].filter(l=>!!l),issueData:{code:B.invalid_return_type,returnTypeError:c}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof xs){const u=this;return Ct(async function(...c){const l=new Ut([]),d=await u._def.args.parseAsync(c,i).catch(T=>{throw l.addIssue(r(c,T)),l}),p=await Reflect.apply(o,this,d);return await u._def.returns._def.type.parseAsync(p,i).catch(T=>{throw l.addIssue(s(p,T)),l})})}else{const u=this;return Ct(function(...c){const l=u._def.args.safeParse(c,i);if(!l.success)throw new Ut([r(c,l.error)]);const d=Reflect.apply(o,this,l.data),p=u._def.returns.safeParse(d,i);if(!p.success)throw new Ut([s(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ps({...this._def,args:pn.create(e).rest(xr.create())})}returns(e){return new ps({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ps({args:e||pn.create([]).rest(xr.create()),returns:t||xr.create(),typeName:ae.ZodFunction,...fe(r)})}}class Ui extends ge{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Ui.create=(n,e)=>new Ui({getter:n,typeName:ae.ZodLazy,...fe(e)});class ji extends ge{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Q(t,{received:t.data,code:B.invalid_literal,expected:this._def.value}),ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}ji.create=(n,e)=>new ji({value:n,typeName:ae.ZodLiteral,...fe(e)});function Mv(n,e){return new mr({values:n,typeName:ae.ZodEnum,...fe(e)})}class mr extends ge{constructor(){super(...arguments),hi.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Q(t,{expected:Ie.joinValues(r),received:t.parsedType,code:B.invalid_type}),ue}if(Sa(this,hi)||Vv(this,hi,new Set(this._def.values)),!Sa(this,hi).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return Q(t,{received:t.data,code:B.invalid_enum_value,options:r}),ue}return Ct(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return mr.create(e,{...this._def,...t})}exclude(e,t=this._def){return mr.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}hi=new WeakMap;mr.create=Mv;class Bi extends ge{constructor(){super(...arguments),di.set(this,void 0)}_parse(e){const t=Ie.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==J.string&&r.parsedType!==J.number){const s=Ie.objectValues(t);return Q(r,{expected:Ie.joinValues(s),received:r.parsedType,code:B.invalid_type}),ue}if(Sa(this,di)||Vv(this,di,new Set(Ie.getValidEnumValues(this._def.values))),!Sa(this,di).has(e.data)){const s=Ie.objectValues(t);return Q(r,{received:r.data,code:B.invalid_enum_value,options:s}),ue}return Ct(e.data)}get enum(){return this._def.values}}di=new WeakMap;Bi.create=(n,e)=>new Bi({values:n,typeName:ae.ZodNativeEnum,...fe(e)});class xs extends ge{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==J.promise&&t.common.async===!1)return Q(t,{code:B.invalid_type,expected:J.promise,received:t.parsedType}),ue;const r=t.parsedType===J.promise?t.data:Promise.resolve(t.data);return Ct(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}xs.create=(n,e)=>new xs({type:n,typeName:ae.ZodPromise,...fe(e)});class Qt extends ge{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ae.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Q(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async u=>{if(t.value==="aborted")return ue;const c=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return c.status==="aborted"?ue:c.status==="dirty"||t.value==="dirty"?us(c.value):c});{if(t.value==="aborted")return ue;const u=this._def.schema._parseSync({data:o,path:r.path,parent:r});return u.status==="aborted"?ue:u.status==="dirty"||t.value==="dirty"?us(u.value):u}}if(s.type==="refinement"){const o=u=>{const c=s.refinement(u,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?ue:(u.status==="dirty"&&t.dirty(),o(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?ue:(u.status==="dirty"&&t.dirty(),o(u.value).then(()=>({status:t.value,value:u.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ur(o))return o;const u=s.transform(o.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ur(o)?Promise.resolve(s.transform(o.value,i)).then(u=>({status:t.value,value:u})):o);Ie.assertNever(s)}}Qt.create=(n,e,t)=>new Qt({schema:n,typeName:ae.ZodEffects,effect:e,...fe(t)});Qt.createWithPreprocess=(n,e,t)=>new Qt({schema:e,effect:{type:"preprocess",transform:n},typeName:ae.ZodEffects,...fe(t)});class ln extends ge{_parse(e){return this._getType(e)===J.undefined?Ct(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ln.create=(n,e)=>new ln({innerType:n,typeName:ae.ZodOptional,...fe(e)});class gr extends ge{_parse(e){return this._getType(e)===J.null?Ct(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gr.create=(n,e)=>new gr({innerType:n,typeName:ae.ZodNullable,...fe(e)});class $i extends ge{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===J.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}$i.create=(n,e)=>new $i({innerType:n,typeName:ae.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fe(e)});class zi extends ge{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Vi(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ut(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ut(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}zi.create=(n,e)=>new zi({innerType:n,typeName:ae.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fe(e)});class ka extends ge{_parse(e){if(this._getType(e)!==J.nan){const r=this._getOrReturnCtx(e);return Q(r,{code:B.invalid_type,expected:J.nan,received:r.parsedType}),ue}return{status:"valid",value:e.data}}}ka.create=n=>new ka({typeName:ae.ZodNaN,...fe(n)});const I1=Symbol("zod_brand");class Ul extends ge{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class so extends ge{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ue:i.status==="dirty"?(t.dirty(),us(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ue:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new so({in:e,out:t,typeName:ae.ZodPipeline})}}class Hi extends ge{_parse(e){const t=this._def.innerType._parse(e),r=s=>(Ur(s)&&(s.value=Object.freeze(s.value)),s);return Vi(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}Hi.create=(n,e)=>new Hi({innerType:n,typeName:ae.ZodReadonly,...fe(e)});function Kf(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function Lv(n,e={},t){return n?ks.create().superRefine((r,s)=>{var i,o;const u=n(r);if(u instanceof Promise)return u.then(c=>{var l,d;if(!c){const p=Kf(e,r),g=(d=(l=p.fatal)!==null&&l!==void 0?l:t)!==null&&d!==void 0?d:!0;s.addIssue({code:"custom",...p,fatal:g})}});if(!u){const c=Kf(e,r),l=(o=(i=c.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0;s.addIssue({code:"custom",...c,fatal:l})}}):ks.create()}const w1={object:$e.lazycreate};var ae;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ae||(ae={}));const A1=(n,e={message:`Input not instance of ${n.name}`})=>Lv(t=>t instanceof n,e),Fv=Wt.create,Uv=fr.create,S1=ka.create,C1=pr.create,jv=Oi.create,R1=jr.create,P1=Ca.create,k1=Di.create,x1=Ni.create,V1=ks.create,O1=xr.create,D1=Ln.create,N1=Ra.create,M1=Gt.create,L1=$e.create,F1=$e.strictCreate,U1=Mi.create,j1=ou.create,B1=Li.create,$1=pn.create,z1=Fi.create,H1=Pa.create,q1=Br.create,W1=ps.create,G1=Ui.create,K1=ji.create,Q1=mr.create,Z1=Bi.create,Y1=xs.create,Qf=Qt.create,J1=ln.create,X1=gr.create,eP=Qt.createWithPreprocess,tP=so.create,nP=()=>Fv().optional(),rP=()=>Uv().optional(),sP=()=>jv().optional(),iP={string:n=>Wt.create({...n,coerce:!0}),number:n=>fr.create({...n,coerce:!0}),boolean:n=>Oi.create({...n,coerce:!0}),bigint:n=>pr.create({...n,coerce:!0}),date:n=>jr.create({...n,coerce:!0})},oP=ue;var es=Object.freeze({__proto__:null,defaultErrorMap:Ps,setErrorMap:e1,getErrorMap:wa,makeIssue:Aa,EMPTY_PATH:t1,addIssueToContext:Q,ParseStatus:bt,INVALID:ue,DIRTY:us,OK:Ct,isAborted:Nc,isDirty:Mc,isValid:Ur,isAsync:Vi,get util(){return Ie},get objectUtil(){return Dc},ZodParsedType:J,getParsedType:wn,ZodType:ge,datetimeRegex:Nv,ZodString:Wt,ZodNumber:fr,ZodBigInt:pr,ZodBoolean:Oi,ZodDate:jr,ZodSymbol:Ca,ZodUndefined:Di,ZodNull:Ni,ZodAny:ks,ZodUnknown:xr,ZodNever:Ln,ZodVoid:Ra,ZodArray:Gt,ZodObject:$e,ZodUnion:Mi,ZodDiscriminatedUnion:ou,ZodIntersection:Li,ZodTuple:pn,ZodRecord:Fi,ZodMap:Pa,ZodSet:Br,ZodFunction:ps,ZodLazy:Ui,ZodLiteral:ji,ZodEnum:mr,ZodNativeEnum:Bi,ZodPromise:xs,ZodEffects:Qt,ZodTransformer:Qt,ZodOptional:ln,ZodNullable:gr,ZodDefault:$i,ZodCatch:zi,ZodNaN:ka,BRAND:I1,ZodBranded:Ul,ZodPipeline:so,ZodReadonly:Hi,custom:Lv,Schema:ge,ZodSchema:ge,late:w1,get ZodFirstPartyTypeKind(){return ae},coerce:iP,any:V1,array:M1,bigint:C1,boolean:jv,date:R1,discriminatedUnion:j1,effect:Qf,enum:Q1,function:W1,instanceof:A1,intersection:B1,lazy:G1,literal:K1,map:H1,nan:S1,nativeEnum:Z1,never:D1,null:x1,nullable:X1,number:Uv,object:L1,oboolean:sP,onumber:rP,optional:J1,ostring:nP,pipeline:tP,preprocess:eP,promise:Y1,record:z1,set:q1,strictObject:F1,string:Fv,symbol:P1,transformer:Qf,tuple:$1,undefined:k1,union:U1,unknown:O1,void:N1,NEVER:oP,ZodIssueCode:B,quotelessJson:XR,ZodError:Ut}),io=n=>n.type==="checkbox",Sr=n=>n instanceof Date,St=n=>n==null;const Bv=n=>typeof n=="object";var Qe=n=>!St(n)&&!Array.isArray(n)&&Bv(n)&&!Sr(n),$v=n=>Qe(n)&&n.target?io(n.target)?n.target.checked:n.target.value:n,aP=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,zv=(n,e)=>n.has(aP(e)),uP=n=>{const e=n.constructor&&n.constructor.prototype;return Qe(e)&&e.hasOwnProperty("isPrototypeOf")},jl=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function at(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(jl&&(n instanceof Blob||r))&&(t||Qe(n)))if(e=t?[]:{},!t&&!uP(n))e=n;else for(const s in n)n.hasOwnProperty(s)&&(e[s]=at(n[s]));else return n;return e}var au=n=>Array.isArray(n)?n.filter(Boolean):[],Ke=n=>n===void 0,G=(n,e,t)=>{if(!e||!Qe(n))return t;const r=au(e.split(/[,[\].]+?/)).reduce((s,i)=>St(s)?s:s[i],n);return Ke(r)||r===n?Ke(n[e])?t:n[e]:r},Mt=n=>typeof n=="boolean",Bl=n=>/^\w*$/.test(n),Hv=n=>au(n.replace(/["|']|\]/g,"").split(/\.|\[/)),xe=(n,e,t)=>{let r=-1;const s=Bl(e)?[e]:Hv(e),i=s.length,o=i-1;for(;++r<i;){const u=s[r];let c=t;if(r!==o){const l=n[u];c=Qe(l)||Array.isArray(l)?l:isNaN(+s[r+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;n[u]=c,n=n[u]}};const xa={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},$t={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Tn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},cP=Ne.createContext(null),$l=()=>Ne.useContext(cP);var qv=(n,e,t,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in n)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==$t.all&&(e._proxyFormState[o]=!r||$t.all),t&&(t[o]=!0),n[o]}});return s};const zl=typeof window<"u"?F.useLayoutEffect:F.useEffect;function lP(n){const e=$l(),{control:t=e.control,disabled:r,name:s,exact:i}=n||{},[o,u]=Ne.useState(t._formState),c=Ne.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return zl(()=>t._subscribe({name:s,formState:c.current,exact:i,callback:l=>{!r&&u({...t._formState,...l})}}),[s,r,i]),Ne.useEffect(()=>{c.current.isValid&&t._setValid(!0)},[t]),Ne.useMemo(()=>qv(o,t,c.current,!1),[o,t])}var rn=n=>typeof n=="string",Wv=(n,e,t,r,s)=>rn(n)?(r&&e.watch.add(n),G(t,n,s)):Array.isArray(n)?n.map(i=>(r&&e.watch.add(i),G(t,i))):(r&&(e.watchAll=!0),t);function hP(n){const e=$l(),{control:t=e.control,name:r,defaultValue:s,disabled:i,exact:o}=n||{},u=Ne.useRef(s),[c,l]=Ne.useState(t._getWatch(r,u.current));return zl(()=>t._subscribe({name:r,formState:{values:!0},exact:o,callback:d=>!i&&l(Wv(r,t._names,d.values||t._formValues,!1,u.current))}),[r,t,i,o]),Ne.useEffect(()=>t._removeUnmounted()),c}function dP(n){const e=$l(),{name:t,disabled:r,control:s=e.control,shouldUnregister:i}=n,o=zv(s._names.array,t),u=hP({control:s,name:t,defaultValue:G(s._formValues,t,G(s._defaultValues,t,n.defaultValue)),exact:!0}),c=lP({control:s,name:t,exact:!0}),l=Ne.useRef(n),d=Ne.useRef(s.register(t,{...n.rules,value:u,...Mt(n.disabled)?{disabled:n.disabled}:{}})),p=Ne.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!G(c.errors,t)},isDirty:{enumerable:!0,get:()=>!!G(c.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!G(c.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!G(c.validatingFields,t)},error:{enumerable:!0,get:()=>G(c.errors,t)}}),[c,t]),g=Ne.useCallback(A=>d.current.onChange({target:{value:$v(A),name:t},type:xa.CHANGE}),[t]),T=Ne.useCallback(()=>d.current.onBlur({target:{value:G(s._formValues,t),name:t},type:xa.BLUR}),[t,s._formValues]),C=Ne.useCallback(A=>{const O=G(s._fields,t);O&&A&&(O._f.ref={focus:()=>A.focus(),select:()=>A.select(),setCustomValidity:V=>A.setCustomValidity(V),reportValidity:()=>A.reportValidity()})},[s._fields,t]),R=Ne.useMemo(()=>({name:t,value:u,...Mt(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:g,onBlur:T,ref:C}),[t,r,c.disabled,g,T,C,u]);return Ne.useEffect(()=>{const A=s._options.shouldUnregister||i;s.register(t,{...l.current.rules,...Mt(l.current.disabled)?{disabled:l.current.disabled}:{}});const O=(V,M)=>{const $=G(s._fields,V);$&&$._f&&($._f.mount=M)};if(O(t,!0),A){const V=at(G(s._options.defaultValues,t));xe(s._defaultValues,t,V),Ke(G(s._formValues,t))&&xe(s._formValues,t,V)}return!o&&s.register(t),()=>{(o?A&&!s._state.action:A)?s.unregister(t):O(t,!1)}},[t,s,o,i]),Ne.useEffect(()=>{s._setDisabledField({disabled:r,name:t})},[r,t,s]),Ne.useMemo(()=>({field:R,formState:c,fieldState:p}),[R,c,p])}const fP=n=>n.render(dP(n));var Gv=(n,e,t,r,s)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:s||!0}}:{},_i=n=>Array.isArray(n)?n:[n],Zf=()=>{let n=[];return{get observers(){return n},next:s=>{for(const i of n)i.next&&i.next(s)},subscribe:s=>(n.push(s),{unsubscribe:()=>{n=n.filter(i=>i!==s)}}),unsubscribe:()=>{n=[]}}},Fc=n=>St(n)||!Bv(n);function Qn(n,e){if(Fc(n)||Fc(e))return n===e;if(Sr(n)&&Sr(e))return n.getTime()===e.getTime();const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const s of t){const i=n[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(Sr(i)&&Sr(o)||Qe(i)&&Qe(o)||Array.isArray(i)&&Array.isArray(o)?!Qn(i,o):i!==o)return!1}}return!0}var At=n=>Qe(n)&&!Object.keys(n).length,Hl=n=>n.type==="file",zt=n=>typeof n=="function",Va=n=>{if(!jl)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Kv=n=>n.type==="select-multiple",ql=n=>n.type==="radio",pP=n=>ql(n)||io(n),Wu=n=>Va(n)&&n.isConnected;function mP(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=Ke(n)?r++:n[e[r++]];return n}function gP(n){for(const e in n)if(n.hasOwnProperty(e)&&!Ke(n[e]))return!1;return!0}function Xe(n,e){const t=Array.isArray(e)?e:Bl(e)?[e]:Hv(e),r=t.length===1?n:mP(n,t),s=t.length-1,i=t[s];return r&&delete r[i],s!==0&&(Qe(r)&&At(r)||Array.isArray(r)&&gP(r))&&Xe(n,t.slice(0,-1)),n}var Qv=n=>{for(const e in n)if(zt(n[e]))return!0;return!1};function Oa(n,e={}){const t=Array.isArray(n);if(Qe(n)||t)for(const r in n)Array.isArray(n[r])||Qe(n[r])&&!Qv(n[r])?(e[r]=Array.isArray(n[r])?[]:{},Oa(n[r],e[r])):St(n[r])||(e[r]=!0);return e}function Zv(n,e,t){const r=Array.isArray(n);if(Qe(n)||r)for(const s in n)Array.isArray(n[s])||Qe(n[s])&&!Qv(n[s])?Ke(e)||Fc(t[s])?t[s]=Array.isArray(n[s])?Oa(n[s],[]):{...Oa(n[s])}:Zv(n[s],St(e)?{}:e[s],t[s]):t[s]=!Qn(n[s],e[s]);return t}var ti=(n,e)=>Zv(n,e,Oa(e));const Yf={value:!1,isValid:!1},Jf={value:!0,isValid:!0};var Yv=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Ke(n[0].attributes.value)?Ke(n[0].value)||n[0].value===""?Jf:{value:n[0].value,isValid:!0}:Jf:Yf}return Yf},Jv=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>Ke(n)?n:e?n===""?NaN:n&&+n:t&&rn(n)?new Date(n):r?r(n):n;const Xf={isValid:!1,value:null};var Xv=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Xf):Xf;function ep(n){const e=n.ref;return Hl(e)?e.files:ql(e)?Xv(n.refs).value:Kv(e)?[...e.selectedOptions].map(({value:t})=>t):io(e)?Yv(n.refs).value:Jv(Ke(e.value)?n.ref.value:e.value,n)}var vP=(n,e,t,r)=>{const s={};for(const i of n){const o=G(e,i);o&&xe(s,i,o._f)}return{criteriaMode:t,names:[...n],fields:s,shouldUseNativeValidation:r}},Da=n=>n instanceof RegExp,ni=n=>Ke(n)?n:Da(n)?n.source:Qe(n)?Da(n.value)?n.value.source:n.value:n,tp=n=>({isOnSubmit:!n||n===$t.onSubmit,isOnBlur:n===$t.onBlur,isOnChange:n===$t.onChange,isOnAll:n===$t.all,isOnTouch:n===$t.onTouched});const np="AsyncFunction";var yP=n=>!!n&&!!n.validate&&!!(zt(n.validate)&&n.validate.constructor.name===np||Qe(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===np)),_P=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),rp=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const bi=(n,e,t,r)=>{for(const s of t||Object.keys(n)){const i=G(n,s);if(i){const{_f:o,...u}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(bi(u,e))break}else if(Qe(u)&&bi(u,e))break}}};function sp(n,e,t){const r=G(n,t);if(r||Bl(t))return{error:r,name:t};const s=t.split(".");for(;s.length;){const i=s.join("."),o=G(e,i),u=G(n,i);if(o&&!Array.isArray(o)&&t!==i)return{name:t};if(u&&u.type)return{name:i,error:u};s.pop()}return{name:t}}var bP=(n,e,t,r)=>{t(n);const{name:s,...i}=n;return At(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||$t.all))},EP=(n,e,t)=>!n||!e||n===e||_i(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),TP=(n,e,t,r,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||n):(t?r.isOnBlur:s.isOnBlur)?!n:(t?r.isOnChange:s.isOnChange)?n:!0,IP=(n,e)=>!au(G(n,e)).length&&Xe(n,e),wP=(n,e,t)=>{const r=_i(G(n,t));return xe(r,"root",e[t]),xe(n,t,r),n},Zo=n=>rn(n);function ip(n,e,t="validate"){if(Zo(n)||Array.isArray(n)&&n.every(Zo)||Mt(n)&&!n)return{type:t,message:Zo(n)?n:"",ref:e}}var ts=n=>Qe(n)&&!Da(n)?n:{value:n,message:""},op=async(n,e,t,r,s,i)=>{const{ref:o,refs:u,required:c,maxLength:l,minLength:d,min:p,max:g,pattern:T,validate:C,name:R,valueAsNumber:A,mount:O}=n._f,V=G(t,R);if(!O||e.has(R))return{};const M=u?u[0]:o,$=I=>{s&&M.reportValidity&&(M.setCustomValidity(Mt(I)?"":I||""),M.reportValidity())},x={},H=ql(o),b=io(o),v=H||b,_=(A||Hl(o))&&Ke(o.value)&&Ke(V)||Va(o)&&o.value===""||V===""||Array.isArray(V)&&!V.length,E=Gv.bind(null,R,r,x),S=(I,y,pe,me=Tn.maxLength,ye=Tn.minLength)=>{const Me=I?y:pe;x[R]={type:I?me:ye,message:Me,ref:o,...E(I?me:ye,Me)}};if(i?!Array.isArray(V)||!V.length:c&&(!v&&(_||St(V))||Mt(V)&&!V||b&&!Yv(u).isValid||H&&!Xv(u).isValid)){const{value:I,message:y}=Zo(c)?{value:!!c,message:c}:ts(c);if(I&&(x[R]={type:Tn.required,message:y,ref:M,...E(Tn.required,y)},!r))return $(y),x}if(!_&&(!St(p)||!St(g))){let I,y;const pe=ts(g),me=ts(p);if(!St(V)&&!isNaN(V)){const ye=o.valueAsNumber||V&&+V;St(pe.value)||(I=ye>pe.value),St(me.value)||(y=ye<me.value)}else{const ye=o.valueAsDate||new Date(V),Me=dt=>new Date(new Date().toDateString()+" "+dt),je=o.type=="time",Je=o.type=="week";rn(pe.value)&&V&&(I=je?Me(V)>Me(pe.value):Je?V>pe.value:ye>new Date(pe.value)),rn(me.value)&&V&&(y=je?Me(V)<Me(me.value):Je?V<me.value:ye<new Date(me.value))}if((I||y)&&(S(!!I,pe.message,me.message,Tn.max,Tn.min),!r))return $(x[R].message),x}if((l||d)&&!_&&(rn(V)||i&&Array.isArray(V))){const I=ts(l),y=ts(d),pe=!St(I.value)&&V.length>+I.value,me=!St(y.value)&&V.length<+y.value;if((pe||me)&&(S(pe,I.message,y.message),!r))return $(x[R].message),x}if(T&&!_&&rn(V)){const{value:I,message:y}=ts(T);if(Da(I)&&!V.match(I)&&(x[R]={type:Tn.pattern,message:y,ref:o,...E(Tn.pattern,y)},!r))return $(y),x}if(C){if(zt(C)){const I=await C(V,t),y=ip(I,M);if(y&&(x[R]={...y,...E(Tn.validate,y.message)},!r))return $(y.message),x}else if(Qe(C)){let I={};for(const y in C){if(!At(I)&&!r)break;const pe=ip(await C[y](V,t),M,y);pe&&(I={...pe,...E(y,pe.message)},$(pe.message),r&&(x[R]=I))}if(!At(I)&&(x[R]={ref:M,...I},!r))return x}}return $(!0),x};const AP={mode:$t.onSubmit,reValidateMode:$t.onChange,shouldFocusError:!0};function SP(n={}){let e={...AP,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:zt(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=Qe(e.defaultValues)||Qe(e.values)?at(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:at(s),o={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,l=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...d};const g={array:Zf(),state:Zf()},T=e.criteriaMode===$t.all,C=w=>k=>{clearTimeout(l),l=setTimeout(w,k)},R=async w=>{if(!e.disabled&&(d.isValid||p.isValid||w)){const k=e.resolver?At((await b()).errors):await _(r,!0);k!==t.isValid&&g.state.next({isValid:k})}},A=(w,k)=>{!e.disabled&&(d.isValidating||d.validatingFields||p.isValidating||p.validatingFields)&&((w||Array.from(u.mount)).forEach(N=>{N&&(k?xe(t.validatingFields,N,k):Xe(t.validatingFields,N))}),g.state.next({validatingFields:t.validatingFields,isValidating:!At(t.validatingFields)}))},O=(w,k=[],N,Z,W=!0,z=!0)=>{if(Z&&N&&!e.disabled){if(o.action=!0,z&&Array.isArray(G(r,w))){const Y=N(G(r,w),Z.argA,Z.argB);W&&xe(r,w,Y)}if(z&&Array.isArray(G(t.errors,w))){const Y=N(G(t.errors,w),Z.argA,Z.argB);W&&xe(t.errors,w,Y),IP(t.errors,w)}if((d.touchedFields||p.touchedFields)&&z&&Array.isArray(G(t.touchedFields,w))){const Y=N(G(t.touchedFields,w),Z.argA,Z.argB);W&&xe(t.touchedFields,w,Y)}(d.dirtyFields||p.dirtyFields)&&(t.dirtyFields=ti(s,i)),g.state.next({name:w,isDirty:S(w,k),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else xe(i,w,k)},V=(w,k)=>{xe(t.errors,w,k),g.state.next({errors:t.errors})},M=w=>{t.errors=w,g.state.next({errors:t.errors,isValid:!1})},$=(w,k,N,Z)=>{const W=G(r,w);if(W){const z=G(i,w,Ke(N)?G(s,w):N);Ke(z)||Z&&Z.defaultChecked||k?xe(i,w,k?z:ep(W._f)):pe(w,z),o.mount&&R()}},x=(w,k,N,Z,W)=>{let z=!1,Y=!1;const le={name:w};if(!e.disabled){if(!N||Z){(d.isDirty||p.isDirty)&&(Y=t.isDirty,t.isDirty=le.isDirty=S(),z=Y!==le.isDirty);const Se=Qn(G(s,w),k);Y=!!G(t.dirtyFields,w),Se?Xe(t.dirtyFields,w):xe(t.dirtyFields,w,!0),le.dirtyFields=t.dirtyFields,z=z||(d.dirtyFields||p.dirtyFields)&&Y!==!Se}if(N){const Se=G(t.touchedFields,w);Se||(xe(t.touchedFields,w,N),le.touchedFields=t.touchedFields,z=z||(d.touchedFields||p.touchedFields)&&Se!==N)}z&&W&&g.state.next(le)}return z?le:{}},H=(w,k,N,Z)=>{const W=G(t.errors,w),z=(d.isValid||p.isValid)&&Mt(k)&&t.isValid!==k;if(e.delayError&&N?(c=C(()=>V(w,N)),c(e.delayError)):(clearTimeout(l),c=null,N?xe(t.errors,w,N):Xe(t.errors,w)),(N?!Qn(W,N):W)||!At(Z)||z){const Y={...Z,...z&&Mt(k)?{isValid:k}:{},errors:t.errors,name:w};t={...t,...Y},g.state.next(Y)}},b=async w=>{A(w,!0);const k=await e.resolver(i,e.context,vP(w||u.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return A(w),k},v=async w=>{const{errors:k}=await b(w);if(w)for(const N of w){const Z=G(k,N);Z?xe(t.errors,N,Z):Xe(t.errors,N)}else t.errors=k;return k},_=async(w,k,N={valid:!0})=>{for(const Z in w){const W=w[Z];if(W){const{_f:z,...Y}=W;if(z){const le=u.array.has(z.name),Se=W._f&&yP(W._f);Se&&d.validatingFields&&A([Z],!0);const Tt=await op(W,u.disabled,i,T,e.shouldUseNativeValidation&&!k,le);if(Se&&d.validatingFields&&A([Z]),Tt[z.name]&&(N.valid=!1,k))break;!k&&(G(Tt,z.name)?le?wP(t.errors,Tt,z.name):xe(t.errors,z.name,Tt[z.name]):Xe(t.errors,z.name))}!At(Y)&&await _(Y,k,N)}}return N.valid},E=()=>{for(const w of u.unMount){const k=G(r,w);k&&(k._f.refs?k._f.refs.every(N=>!Wu(N)):!Wu(k._f.ref))&&it(w)}u.unMount=new Set},S=(w,k)=>!e.disabled&&(w&&k&&xe(i,w,k),!Qn(dt(),s)),I=(w,k,N)=>Wv(w,u,{...o.mount?i:Ke(k)?s:rn(w)?{[w]:k}:k},N,k),y=w=>au(G(o.mount?i:s,w,e.shouldUnregister?G(s,w,[]):[])),pe=(w,k,N={})=>{const Z=G(r,w);let W=k;if(Z){const z=Z._f;z&&(!z.disabled&&xe(i,w,Jv(k,z)),W=Va(z.ref)&&St(k)?"":k,Kv(z.ref)?[...z.ref.options].forEach(Y=>Y.selected=W.includes(Y.value)):z.refs?io(z.ref)?z.refs.forEach(Y=>{(!Y.defaultChecked||!Y.disabled)&&(Array.isArray(W)?Y.checked=!!W.find(le=>le===Y.value):Y.checked=W===Y.value||!!W)}):z.refs.forEach(Y=>Y.checked=Y.value===W):Hl(z.ref)?z.ref.value="":(z.ref.value=W,z.ref.type||g.state.next({name:w,values:at(i)})))}(N.shouldDirty||N.shouldTouch)&&x(w,W,N.shouldTouch,N.shouldDirty,!0),N.shouldValidate&&Je(w)},me=(w,k,N)=>{for(const Z in k){if(!k.hasOwnProperty(Z))return;const W=k[Z],z=`${w}.${Z}`,Y=G(r,z);(u.array.has(w)||Qe(W)||Y&&!Y._f)&&!Sr(W)?me(z,W,N):pe(z,W,N)}},ye=(w,k,N={})=>{const Z=G(r,w),W=u.array.has(w),z=at(k);xe(i,w,z),W?(g.array.next({name:w,values:at(i)}),(d.isDirty||d.dirtyFields||p.isDirty||p.dirtyFields)&&N.shouldDirty&&g.state.next({name:w,dirtyFields:ti(s,i),isDirty:S(w,z)})):Z&&!Z._f&&!St(z)?me(w,z,N):pe(w,z,N),rp(w,u)&&g.state.next({...t}),g.state.next({name:o.mount?w:void 0,values:at(i)})},Me=async w=>{o.mount=!0;const k=w.target;let N=k.name,Z=!0;const W=G(r,N),z=Se=>{Z=Number.isNaN(Se)||Sr(Se)&&isNaN(Se.getTime())||Qn(Se,G(i,N,Se))},Y=tp(e.mode),le=tp(e.reValidateMode);if(W){let Se,Tt;const yr=k.type?ep(W._f):$v(w),Yt=w.type===xa.BLUR||w.type===xa.FOCUS_OUT,_r=!_P(W._f)&&!e.resolver&&!G(t.errors,N)&&!W._f.deps||TP(Yt,G(t.touchedFields,N),t.isSubmitted,le,Y),Wr=rp(N,u,Yt);xe(i,N,yr),Yt?(W._f.onBlur&&W._f.onBlur(w),c&&c(0)):W._f.onChange&&W._f.onChange(w);const Gr=x(N,yr,Yt),js=!At(Gr)||Wr;if(!Yt&&g.state.next({name:N,type:w.type,values:at(i)}),_r)return(d.isValid||p.isValid)&&(e.mode==="onBlur"?Yt&&R():Yt||R()),js&&g.state.next({name:N,...Wr?{}:Gr});if(!Yt&&Wr&&g.state.next({...t}),e.resolver){const{errors:ao}=await b([N]);if(z(yr),Z){const cu=sp(t.errors,r,N),Kr=sp(ao,r,cu.name||N);Se=Kr.error,N=Kr.name,Tt=At(ao)}}else A([N],!0),Se=(await op(W,u.disabled,i,T,e.shouldUseNativeValidation))[N],A([N]),z(yr),Z&&(Se?Tt=!1:(d.isValid||p.isValid)&&(Tt=await _(r,!0)));Z&&(W._f.deps&&Je(W._f.deps),H(N,Tt,Se,Gr))}},je=(w,k)=>{if(G(t.errors,k)&&w.focus)return w.focus(),1},Je=async(w,k={})=>{let N,Z;const W=_i(w);if(e.resolver){const z=await v(Ke(w)?w:W);N=At(z),Z=w?!W.some(Y=>G(z,Y)):N}else w?(Z=(await Promise.all(W.map(async z=>{const Y=G(r,z);return await _(Y&&Y._f?{[z]:Y}:Y)}))).every(Boolean),!(!Z&&!t.isValid)&&R()):Z=N=await _(r);return g.state.next({...!rn(w)||(d.isValid||p.isValid)&&N!==t.isValid?{}:{name:w},...e.resolver||!w?{isValid:N}:{},errors:t.errors}),k.shouldFocus&&!Z&&bi(r,je,w?W:u.mount),Z},dt=w=>{const k={...o.mount?i:s};return Ke(w)?k:rn(w)?G(k,w):w.map(N=>G(k,N))},mn=(w,k)=>({invalid:!!G((k||t).errors,w),isDirty:!!G((k||t).dirtyFields,w),error:G((k||t).errors,w),isValidating:!!G(t.validatingFields,w),isTouched:!!G((k||t).touchedFields,w)}),Pe=w=>{w&&_i(w).forEach(k=>Xe(t.errors,k)),g.state.next({errors:w?t.errors:{}})},we=(w,k,N)=>{const Z=(G(r,w,{_f:{}})._f||{}).ref,W=G(t.errors,w)||{},{ref:z,message:Y,type:le,...Se}=W;xe(t.errors,w,{...Se,...k,ref:Z}),g.state.next({name:w,errors:t.errors,isValid:!1}),N&&N.shouldFocus&&Z&&Z.focus&&Z.focus()},Dt=(w,k)=>zt(w)?g.state.subscribe({next:N=>w(I(void 0,k),N)}):I(w,k,!0),st=w=>g.state.subscribe({next:k=>{EP(w.name,k.name,w.exact)&&bP(k,w.formState||d,uu,w.reRenderRoot)&&w.callback({values:{...i},...t,...k})}}).unsubscribe,Et=w=>(o.mount=!0,p={...p,...w.formState},st({...w,formState:p})),it=(w,k={})=>{for(const N of w?_i(w):u.mount)u.mount.delete(N),u.array.delete(N),k.keepValue||(Xe(r,N),Xe(i,N)),!k.keepError&&Xe(t.errors,N),!k.keepDirty&&Xe(t.dirtyFields,N),!k.keepTouched&&Xe(t.touchedFields,N),!k.keepIsValidating&&Xe(t.validatingFields,N),!e.shouldUnregister&&!k.keepDefaultValue&&Xe(s,N);g.state.next({values:at(i)}),g.state.next({...t,...k.keepDirty?{isDirty:S()}:{}}),!k.keepIsValid&&R()},Rt=({disabled:w,name:k})=>{(Mt(w)&&o.mount||w||u.disabled.has(k))&&(w?u.disabled.add(k):u.disabled.delete(k))},Zt=(w,k={})=>{let N=G(r,w);const Z=Mt(k.disabled)||Mt(e.disabled);return xe(r,w,{...N||{},_f:{...N&&N._f?N._f:{ref:{name:w}},name:w,mount:!0,...k}}),u.mount.add(w),N?Rt({disabled:Mt(k.disabled)?k.disabled:e.disabled,name:w}):$(w,!0,k.value),{...Z?{disabled:k.disabled||e.disabled}:{},...e.progressive?{required:!!k.required,min:ni(k.min),max:ni(k.max),minLength:ni(k.minLength),maxLength:ni(k.maxLength),pattern:ni(k.pattern)}:{},name:w,onChange:Me,onBlur:Me,ref:W=>{if(W){Zt(w,k),N=G(r,w);const z=Ke(W.value)&&W.querySelectorAll&&W.querySelectorAll("input,select,textarea")[0]||W,Y=pP(z),le=N._f.refs||[];if(Y?le.find(Se=>Se===z):z===N._f.ref)return;xe(r,w,{_f:{...N._f,...Y?{refs:[...le.filter(Wu),z,...Array.isArray(G(s,w))?[{}]:[]],ref:{type:z.type,name:w}}:{ref:z}}}),$(w,!1,void 0,z)}else N=G(r,w,{}),N._f&&(N._f.mount=!1),(e.shouldUnregister||k.shouldUnregister)&&!(zv(u.array,w)&&o.action)&&u.unMount.add(w)}}},gn=()=>e.shouldFocusError&&bi(r,je,u.mount),vn=w=>{Mt(w)&&(g.state.next({disabled:w}),bi(r,(k,N)=>{const Z=G(r,N);Z&&(k.disabled=Z._f.disabled||w,Array.isArray(Z._f.refs)&&Z._f.refs.forEach(W=>{W.disabled=Z._f.disabled||w}))},0,!1))},yn=(w,k)=>async N=>{let Z;N&&(N.preventDefault&&N.preventDefault(),N.persist&&N.persist());let W=at(i);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:z,values:Y}=await b();t.errors=z,W=Y}else await _(r);if(u.disabled.size)for(const z of u.disabled)xe(W,z,void 0);if(Xe(t.errors,"root"),At(t.errors)){g.state.next({errors:{}});try{await w(W,N)}catch(z){Z=z}}else k&&await k({...t.errors},N),gn(),setTimeout(gn);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:At(t.errors)&&!Z,submitCount:t.submitCount+1,errors:t.errors}),Z)throw Z},vr=(w,k={})=>{G(r,w)&&(Ke(k.defaultValue)?ye(w,at(G(s,w))):(ye(w,k.defaultValue),xe(s,w,at(k.defaultValue))),k.keepTouched||Xe(t.touchedFields,w),k.keepDirty||(Xe(t.dirtyFields,w),t.isDirty=k.defaultValue?S(w,at(G(s,w))):S()),k.keepError||(Xe(t.errors,w),d.isValid&&R()),g.state.next({...t}))},_n=(w,k={})=>{const N=w?at(w):s,Z=at(N),W=At(w),z=W?s:Z;if(k.keepDefaultValues||(s=N),!k.keepValues){if(k.keepDirtyValues){const Y=new Set([...u.mount,...Object.keys(ti(s,i))]);for(const le of Array.from(Y))G(t.dirtyFields,le)?xe(z,le,G(i,le)):ye(le,G(z,le))}else{if(jl&&Ke(w))for(const Y of u.mount){const le=G(r,Y);if(le&&le._f){const Se=Array.isArray(le._f.refs)?le._f.refs[0]:le._f.ref;if(Va(Se)){const Tt=Se.closest("form");if(Tt){Tt.reset();break}}}}for(const Y of u.mount)ye(Y,G(z,Y))}i=at(z),g.array.next({values:{...z}}),g.state.next({values:{...z}})}u={mount:k.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!k.keepIsValid||!!k.keepDirtyValues,o.watch=!!e.shouldUnregister,g.state.next({submitCount:k.keepSubmitCount?t.submitCount:0,isDirty:W?!1:k.keepDirty?t.isDirty:!!(k.keepDefaultValues&&!Qn(w,s)),isSubmitted:k.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:W?{}:k.keepDirtyValues?k.keepDefaultValues&&i?ti(s,i):t.dirtyFields:k.keepDefaultValues&&w?ti(s,w):k.keepDirty?t.dirtyFields:{},touchedFields:k.keepTouched?t.touchedFields:{},errors:k.keepErrors?t.errors:{},isSubmitSuccessful:k.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},jn=(w,k)=>_n(zt(w)?w(i):w,k),oo=(w,k={})=>{const N=G(r,w),Z=N&&N._f;if(Z){const W=Z.refs?Z.refs[0]:Z.ref;W.focus&&(W.focus(),k.shouldSelect&&zt(W.select)&&W.select())}},uu=w=>{t={...t,...w}},Us={control:{register:Zt,unregister:it,getFieldState:mn,handleSubmit:yn,setError:we,_subscribe:st,_runSchema:b,_getWatch:I,_getDirty:S,_setValid:R,_setFieldArray:O,_setDisabledField:Rt,_setErrors:M,_getFieldArray:y,_reset:_n,_resetDefaultValues:()=>zt(e.defaultValues)&&e.defaultValues().then(w=>{jn(w,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:E,_disableForm:vn,_subjects:g,_proxyFormState:d,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(w){o=w},get _defaultValues(){return s},get _names(){return u},set _names(w){u=w},get _formState(){return t},get _options(){return e},set _options(w){e={...e,...w}}},subscribe:Et,trigger:Je,register:Zt,handleSubmit:yn,watch:Dt,setValue:ye,getValues:dt,reset:jn,resetField:vr,clearErrors:Pe,unregister:it,setError:we,setFocus:oo,getFieldState:mn};return{...Us,formControl:Us}}function CP(n={}){const e=Ne.useRef(void 0),t=Ne.useRef(void 0),[r,s]=Ne.useState({isDirty:!1,isValidating:!1,isLoading:zt(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:zt(n.defaultValues)?void 0:n.defaultValues});e.current||(e.current={...n.formControl?n.formControl:SP(n),formState:r},n.formControl&&n.defaultValues&&!zt(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions));const i=e.current.control;return i._options=n,zl(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),i._formState.isReady=!0,o},[i]),Ne.useEffect(()=>i._disableForm(n.disabled),[i,n.disabled]),Ne.useEffect(()=>{n.mode&&(i._options.mode=n.mode),n.reValidateMode&&(i._options.reValidateMode=n.reValidateMode),n.errors&&!At(n.errors)&&i._setErrors(n.errors)},[i,n.errors,n.mode,n.reValidateMode]),Ne.useEffect(()=>{n.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,n.shouldUnregister]),Ne.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),Ne.useEffect(()=>{n.values&&!Qn(n.values,t.current)?(i._reset(n.values,i._options.resetOptions),t.current=n.values,s(o=>({...o}))):i._resetDefaultValues()},[i,n.values]),Ne.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=qv(r,i),e.current}const ap=(n,e,t)=>{if(n&&"reportValidity"in n){const r=G(t,e);n.setCustomValidity(r&&r.message||""),n.reportValidity()}},ey=(n,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?ap(r.ref,t,n):r&&r.refs&&r.refs.forEach(s=>ap(s,t,n))}},RP=(n,e)=>{e.shouldUseNativeValidation&&ey(n,e);const t={};for(const r in n){const s=G(e.fields,r),i=Object.assign(n[r]||{},{ref:s&&s.ref});if(PP(e.names||Object.keys(n),r)){const o=Object.assign({},G(t,r));xe(o,"root",i),xe(t,r,o)}else xe(t,r,i)}return t},PP=(n,e)=>{const t=up(e);return n.some(r=>up(r).match(`^${t}\\.\\d+`))};function up(n){return n.replace(/\]|\[/g,"")}function kP(n,e){for(var t={};n.length;){var r=n[0],s=r.code,i=r.message,o=r.path.join(".");if(!t[o])if("unionErrors"in r){var u=r.unionErrors[0].errors[0];t[o]={message:u.message,type:u.code}}else t[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(p){return n.push(p)})}),e){var c=t[o].types,l=c&&c[r.code];t[o]=Gv(o,e,t,s,l?[].concat(l,r.message):r.message)}n.shift()}return t}function xP(n,e,t){return t===void 0&&(t={}),function(r,s,i){try{return Promise.resolve(function(o,u){try{var c=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(l){return i.shouldUseNativeValidation&&ey({},i),{errors:{},values:t.raw?Object.assign({},r):l}})}catch(l){return u(l)}return c&&c.then?c.then(void 0,u):c}(0,function(o){if(function(u){return Array.isArray(u==null?void 0:u.errors)}(o))return{values:{},errors:RP(kP(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}}function VP(n){return $c({queryKey:["characters",n],queryFn:()=>dA(n)})}function OP(){const n=Uc();return h_({mutationFn:async e=>{await fA(e)},onSuccess:()=>{n.invalidateQueries({queryKey:["characters"]})}})}const DP=es.object({class:es.string().min(1,"Class is required"),key:es.string().min(1,"Key is required"),ilvl:es.number().min(1,"iLvl is required"),role:es.array(es.enum(["tank","healer","dps"])).nonempty("Role is required")}),cp=[{label:"Tank",value:"tank"},{label:"DPS",value:"dps"},{label:"Healer",value:"healer"}];function NP({characterId:n}){const{data:e}=VP(n),{mutate:t,isPending:r}=OP();console.log(e);const s=CP({resolver:xP(DP),defaultValues:{class:e==null?void 0:e.class,key:e==null?void 0:e.key,ilvl:e==null?void 0:e.ilvl,role:e==null?void 0:e.role}});F.useEffect(()=>{e&&(console.log("role",e.role),s.reset({class:e.class,key:e.key,ilvl:e.ilvl,role:e.role}))},[e,s]);const i=o=>{e&&t({id:n,playerId:e==null?void 0:e.playerId,class:o.class,key:o.key,ilvl:o.ilvl,role:o.role})};return K.jsxs("form",{onSubmit:s.handleSubmit(i),children:[K.jsx(fP,{control:s.control,name:"role",render:({field:o})=>{const u=cp.filter(c=>{var l;return(l=o.value)==null?void 0:l.includes(c.value)});return K.jsx(JR,{...o,label:"Roles",options:cp,isMulti:!0,value:u,onChange:c=>{const l=(c??[]).map(d=>d.value);o.onChange(l)}})}}),K.jsx(vA,{type:"submit",loading:r,children:"Save"})]})}function MP({...n}){return K.jsx(Oy,{"data-slot":"dialog",...n})}function LP({...n}){return K.jsx(Dy,{"data-slot":"dialog-trigger",...n})}function FP({...n}){return K.jsx(jy,{"data-slot":"dialog-portal",...n})}function UP({className:n,...e}){return K.jsx(By,{"data-slot":"dialog-overlay",className:Ot("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function jP({className:n,children:e,...t}){return K.jsxs(FP,{"data-slot":"dialog-portal",children:[K.jsx(UP,{}),K.jsxs(Ny,{"data-slot":"dialog-content",className:Ot("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...t,children:[e,K.jsxs(My,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[K.jsx(Ly,{}),K.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function BP({className:n,...e}){return K.jsx("div",{"data-slot":"dialog-header",className:Ot("flex flex-col gap-2 text-center sm:text-left",n),...e})}function $P({className:n,...e}){return K.jsx(Fy,{"data-slot":"dialog-title",className:Ot("text-lg leading-none font-semibold",n),...e})}function zP({className:n,...e}){return K.jsx(Uy,{"data-slot":"dialog-description",className:Ot("text-muted-foreground text-sm",n),...e})}function HP({title:n,description:e,trigger:t,open:r,onOpenChange:s,children:i}){const[o,u]=F.useState(r),c=l=>{u(l),s&&s(l)};return K.jsxs(MP,{open:o,onOpenChange:c,children:[K.jsx(LP,{children:t}),K.jsxs(jP,{children:[K.jsxs(BP,{children:[K.jsx($P,{children:n}),e&&K.jsx(zP,{children:e})]}),o&&i]})]})}function qP({characterId:n}){return K.jsx(HP,{title:"Edit Characters",trigger:K.jsx(Qy,{className:"cursor-pointer",size:16}),children:K.jsx(NP,{characterId:n})})}function WP({className:n,...e}){return K.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:K.jsx("table",{"data-slot":"table",className:Ot("w-full caption-bottom text-sm",n),...e})})}function GP({className:n,...e}){return K.jsx("thead",{"data-slot":"table-header",className:Ot("[&_tr]:border-b",n),...e})}function KP({className:n,...e}){return K.jsx("tbody",{"data-slot":"table-body",className:Ot("[&_tr:last-child]:border-0",n),...e})}function lp({className:n,...e}){return K.jsx("tr",{"data-slot":"table-row",className:Ot("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n),...e})}function ri({className:n,...e}){return K.jsx("th",{"data-slot":"table-head",className:Ot("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e})}function si({className:n,...e}){return K.jsx("td",{"data-slot":"table-cell",className:Ot("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e})}const QP="data:image/png;base64,UklGRiwEAABXRUJQVlA4TCAEAAAvE8AEEPVA0rbt2PJl/bbt9/uybdu2bdtNW4lt28Zm/v+vPbyzVtIyWkaNOtpA0xYA6ba2Y8tz47mf5zOqX92wYauhbdu27T7bemFJkm3aWkdv/hN4X7Zt29bhtbEP9l5rw21s23HCDrEaI9zkSG4IFfPrILRDteH1CAiKTPAC6jPROklZ906sIhjsFoZmygJ7CgKn2ZMdNDE9oiDBNyEKThKA7KfMGE6Cj9T4WZ+f61uo60uc+1mp/ZGsMz4EI0Ob/PkKouChQqv6gV5dpUphfBxooLQYUhkRaxwX6zxclxqDY4pMLInMastU//XkCNUDOaUuISsGXwCMmCH8lOQvSPJOWBENn7dZ1jV3+2DINyeHJIXWFULIBuhcUO0qXWJZl5hRTfmC7C4576Oc337O9yDnfFbQPCD+j2RRdnmaZw2BBSlo7VTRHUQUJBuwBxepIDa5H/AgeO3moleZqc8jB/EN+4k91Qc1vhsFp7OC5IOYVzw+7gsF9osbwvBBdqziSBkhV5DTQPWMvPZyieNMSW/PdmTRS2nKY33N8FIsdYAJWcnY3HDsiIJvoBj/oXBUSKKKSDnhJBXUBsP/URzOuYj5XHH3QEdn1/bfttvKpovWufHhsqqunsSxlMd+Qf6GCDkLZj/FSJOCTSgUNBtTQslLiicUejww835p/enC1sODs/Kpi+alE3yzmQwtfVVMZxoqrrvArcCMGlysiTa/nMhqSqUmIAFqRlI9oOjjrpv8ssfaqqvGobPmrWP8tIf/9mxkLxDbaX/X8lpieyEIvhV6q8/V+MQEkwrUBExAK/qk47q47QHOXdODI/iyrwO7rti227cReLLWsa7265vNJRF8S5RWxk5iVDKTGFSzc/2jFIjsFflcMLWRWMN/U9dPzSoEdtyRTZ9vLBMrjYUK8y/Cn6qwa8SIaQyny00qOAyNo6xwcf1iNAf439Kv70YhvW+ovqtjthxaDXyaDZ7pnw4V9DBR0wXnY0H2jshpg491dszQ2QTesYsNt2H2Cyljkb8i98NC9GyqcLBnAj6sduyYax/Vsv0ufiznu51D7zlORMKVjHclSVaGyoeSzBDiuUdvDTBihvpJcDzjQjYyJWVfJd4q0VtiLkKeOxx6Lwh+CK5gYWGbPbdxCQZEIEGisjs/zPdQ7xl8E9ESQPaG0DsB3CLsGmHXEnqLZO+I90dIGUByMmqpUKDecFq9IITs1kgN5bYo3yGB04LPW/5En0T0Rb64fxI1qeGKBlN1APFxiZC1rK8eMRyvOtNgjXE9c3Y/4UEDtcIRi9I3pVZgQpdCIkDX0EiveJE/xAuP1y9xjpsBWKOjbvOwvxzsN2ASailDpUzDTVLkOAR/vNATvg1hSATRPZt08Fg0gVYTE2BiADQKm7AyKiMK7hBCCAE=",ZP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAD/AP8A/6C9p5MAAAAHdElNRQfpAhAQKAZ/Xkz6AAAFKklEQVQ4yyXMzW8UZRwH8O/veWa7szu7s9vtdrdbaKEvFIFqjMEEovguxkSDVkQU1IPx4IFED14wnrx4MfHlqBdfY0w1McboQSUYEQJWpAVaKAJ9Y7vb7b50ZnZm5+X5efDzB3yovzeNoOMCJLBl7Hbxz7kpFZMwt2wdPpjN5SbMTPcuTdNK+d4+rFbWyrVq9dLK4vx3lXpjEsDGo/v3i79P/arCKEI6bYK6TQN+EOLwU0/QJ19N8m3Dg4c3DY68YxjaqN9eUDEZkIoCMlJxGAlwsTjAK7WMWFmxrl2fv/D2zZlLXz//4lH6+eRJ1mMSZMaB0xXGriyJHWPb3u/r7z8G/wavVRa51gS3XVDog6QA0mnwjhHwIw+WqGLdSbdWDVpauPHR6amp15lZxYkgjx9/i1KUwdkzJz4oFLPHGpXz4eUr67RchbBdIgRCxBVRQkmK2oIWViSd+NMSXfIaH3gsFrl8x1727dyzDz380749Y0RbBobguvYLo6NDX7abM9HFeVeEEVGcmHUi0knAIEJCEBJSgsIAdhjxImu0717m++/ZpM5f2yNPnfjhCFPXV7K10UxvG93+hdFVzU/PriMISBgCnCBBBkl0C4GclMhLiaTXgd7bh8HdeylZL/Pp+YCkbGJ0KEtWsGnX5fmrn8mMmTtSKnS9slq+EVXrECki6CTIFAI5KdArJQqahmTHw/CTT2PsyKsQkUL57Cnq0jSeLUc02NdQiI0UmtXyvMjlchOasLFWZ+gQ0IWglCDkpURBSmzWNPQEPnYefQmPv/Em7to5hs70WSBSEJLI9yRm5mwk4xbyfQMTWkyT437HRccFJYnIIEJBCPSzQlHGYEQB6vc8gPbOPfhjaga1n75FdeocZCKBKAwgAVqrg8ZgIdOdH9eIuNQJXJACJSQhJwRMIeH39iPRWsPijt1Yzo/g8pm/UJr/G91zF6DiOuwwQJsBBYbjgsrlVayu2iVNSgVJQIyAJBEyQiDJwHKXgfSDu3F+1UXScrDj1ixK/15CTU+iGfhwmOEqhRAMpQCvE8LeaELzPa+czcW26prLOohiRBiIaTDXb2L/I6+guLKBhU8/xk6rhqVYHBXfR1MpWEohYEYIQNPASSNNiaQqC6etLnZ1aTBSYChiyQo3HQdqaxGXf/8et86dQmZoGMtCQy0I/s+Y4SqGD4YC2EiCnXYMHc+9KMMAejabOpA1bG5WmPJmBvsPHaKabKFychpibh7TkQZSHtY9Dw0AG4rhguEzGABGtujseKZora++KzzfmnTc1FzfYK+UZsTNdkCNtQa7V+ogy0MipWOweh11y8I6gFak0GGFiJgVQP294HiyKB3bm2u40aRMG3m/3mg0CsWRZ7aPNtTVazZdmpsjsm12NEnVMEKTBFrM2FAKLiv4YPaZyDTAA/0mW64pmmsrr8U18Y989eWXaO++N2d++W2yJ1cY3jN+RyNqWBGWGkJsRMwuM20oBUcxbMXcARAAVOxGNDSQjKqNlGa36h/1jN/3XiKVIAKAK+ea2H53VmSzpffHt/ccG93c5qWlBV5cjLjVIvJ8pgiAjIGTBriQ00iLZ2i5rCjsuB8WbO+NxuZhDmvXmVK6RBgxBjaPkzTe5RtXnzs8MjL0TnfaGTXilnIcjxyPCczQpORQaXA8nZw2TwfO+nFpZH4UKqTAsVhKAUolYgj8AEIAPcVBsby8qACYhm4czGazE1KGu4SQpU4nRBSpcscPZqPA+9z2Ot8AiDKmQXEOGQCYCP8Bo7ejSxgkXicAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjUtMDItMTZUMTY6NDA6MDYrMDA6MDAJdU13AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDI1LTAyLTE2VDE2OjQwOjA2KzAwOjAweCj1ywAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyNS0wMi0xNlQxNjo0MDowNiswMDowMC891BQAAAAgdEVYdHNvZnR3YXJlAGh0dHBzOi8vaW1hZ2VtYWdpY2sub3JnvM8dnQAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7LwAAABd0RVh0VGh1bWI6OkltYWdlOjpIZWlnaHQANDJntW4zAAAAFnRFWHRUaHVtYjo6SW1hZ2U6OldpZHRoADQynxquvgAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNzM5NzI0MDA2D6d4qgAAABF0RVh0VGh1bWI6OlNpemUAMzQ1MUJ0tvtdAAAANXRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vdG1wL3RodW1ibHIvaW1nMTY0NjQ1ODMxODUyMzAzNjQ5MZKqa58AAAAASUVORK5CYII=",YP="data:image/png;base64,UklGRhgEAABXRUJQVlA4TAsEAAAvE8AEEPVIDgCAjKSsN3ayY9tY27Zt237Z9m/fW4Rxeqmime3Bv2vjWrjfNXJt3BXgQLLdtJG+ZDtc7v1vR2HmBJJt26adc5++bdu23cxU3YmkaNvJj22/9+51G9t2nLBDrMYINzmSG0LF/DoI7VBteD1CAoKqefHkUaAkhTLTxyoVOQqtWMSpDdRUIHRLZya0hvQBHp+eHgkQnBxAOZ3RmCkfou1QlH8kyt8WH27Ij+Z1hAuazKNCkFHncP7jBUDwcADVBPyvTndBZq9QxEMWJXgygCYD4kDM9lT7dUpzsKle/9cUMPW/BwujGq1fVOYCvMtAgxfWRFFFGlVkUUUGUSVBQ4jfbmeyQ/PXEa34FiZ0fXp6UjLqovG7a+wFcLYgywRxlmLMU+LasIrJIbf3cJVJijSLKmMC1iCbuTRyHVUtZJca3D0BBMnFMITac/AqJ64CWg+ZM0YuIPrAtC+HwteT9YOwGwKnh1zKYOd7+Lj8LU3BukShh18cUcUlXyTyAu6DjI3fhP2wt8ZsbVXLW9vs1jY01Iz1dQd9yvkpVbma4XVU8K6Wk0zLBY93YlETHaH2Gr5ziCpGXwWVs1z3OnAcmZz5amuG1c+UOpJInp1qF4uM2YrJssDRy+CdyHdXjEqHjlCz2UvIpEUVEcospR4KXVww95BZjVWWWaqVaNlChK06RZtGVOfBpjlo6yOQd5neiVBhmp7JZLAXwMmEzsME35KWU6JHMkafcpMPhalEpg5IIoBxV0shGVMTxP1zsMaDJCzUnRILmnSMJ5MbgkYjOg9h05qSVWVMvVqfBr1vpe6XSkUoFcGIZlWIOjmyfwGbpqCtG3ECtxtiBU1yCM3tHYBWFaLy+G0pQ2aEVupbVN1Y1XeV4qeB2eiZdynroiX4VPyDBgeGf0WaWwJBjWcqQr0TDP7AvRuTRfG/mqKDUScyicrL8TnJsYHOaEQASLMk7p+D1x6Bi4XE3rPJF9oIAQIXq3li93cELlZE5cX986RlXLH5FascJzN0p1q4EMbBjP9V0XkE0jkEHioWd0ILDPKEAhAkJfCQHmwKwRdwdKGKoJ/K3ibJfjKCFqdE6KLC/4rYNAGv3d4F+sqpz0KUDEAACSA4BAO6KPnfc6JZNGHQ4PPCpnmSwShW/0RsclyWxGQJeO0TNFvQ+GUwt5SMNtjxr6enJ5qomiDfiuMZelwDRwesCfrLlj5kFURUUUjnAS1aAnmht0MCYJgVq9cjHHS1QljzvGPx4TKV3OI2GjGpkbMCe2ASvDC7UwZ9QQGtiBF+AS/+4f0yiCErQY0W8yXSnXN4x6zeOZO7ZLYXtPpGCgEj8Ecc/3x6LMCQQMU9pThYEZsQMNGgJgKooYIj2IoZILh72icA";function JP(){const{data:n}=pA(),{data:e,isPending:t}=gA(),{selectedPlayers:r,setSelectedPlayers:s}=$y(),i=u=>{r.some(c=>c.id===u.id)?s(r.filter(c=>c.id!==u.id)):s([...r,u])},o=u=>{switch(u){case"tank":return K.jsx("img",{src:YP,alt:"Tank",className:"w-4 h-4"},u);case"healer":return K.jsx("img",{src:QP,alt:"Healer",className:"w-4 h-4"},u);case"dps":return K.jsx("img",{src:ZP,alt:"DPS",className:"w-4 h-4"},u);default:return"❓"}};return t?K.jsxs("div",{className:"flex flex-col gap-2 h-full grow justify-center items-center",children:[K.jsx(gp,{className:"animate-spin",size:50}),K.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]}):K.jsx("div",{className:"flex flex-row gap-4",children:e==null?void 0:e.map(u=>{var c;return K.jsxs(zy,{className:Ot("cursor-pointer",{"bg-green-100":r.some(l=>l.id===u.id)}),onClick:()=>i(u),children:[K.jsx(Hy,{children:K.jsx("h2",{className:"text-lg font-bold",children:u.name})}),K.jsxs(qy,{children:[K.jsxs("p",{children:["Rio Score: ",u.rioScore]}),K.jsxs("p",{children:["Discord ID: ",u.discordId]})]}),K.jsx(Wy,{className:"text-sm cursor-default",children:((c=u.characterIds)==null?void 0:c.length)===0?K.jsx("div",{className:"text-muted",children:"No characters"}):K.jsxs(K.Fragment,{children:[K.jsx("h3",{className:"font-bold",children:"Characters"}),K.jsxs(WP,{children:[K.jsx(GP,{children:K.jsxs(lp,{children:[K.jsx(ri,{className:"text-left",children:"Class"}),K.jsx(ri,{className:"text-left",children:"Roles"}),K.jsx(ri,{className:"text-left",children:"iLvl"}),K.jsx(ri,{className:"text-left",children:"Key"}),K.jsx(ri,{className:"text-left",children:"Actions"})]})}),K.jsx(KP,{children:n==null?void 0:n.filter(l=>l.playerId===u.id).map(l=>K.jsxs(lp,{onClick:d=>d.stopPropagation(),children:[K.jsx(si,{children:l.class}),K.jsx(si,{children:K.jsx("div",{className:"flex flex-row gap-1",children:l.role.map(d=>o(d))})}),K.jsx(si,{children:l.ilvl}),K.jsx(si,{children:l.key}),K.jsx(si,{className:"text-right",children:K.jsx(qP,{characterId:l.id})})]},l.id))})]})]})})]},u.id)})})}const nk=JP;export{nk as component};
