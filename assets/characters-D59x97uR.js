var zv=n=>{throw TypeError(n)};var xf=(n,e,t)=>e.has(n)||zv("Cannot "+t);var ne=(n,e,t)=>(xf(n,e,"read from private field"),t?t.call(n):e.get(n)),Vt=(n,e,t)=>e.has(n)?zv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),bt=(n,e,t,r)=>(xf(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),It=(n,e,t)=>(xf(n,e,"access private method"),t);import{c as w0,S as E0,p as Hv,r as Hr,s as lh,a as qc,n as ch,i as Xf,b as Wv,t as OR,f as kR,d as VR,e as qv,g as Gh,h as Gv,j as DR,k as X,l as T0,u as Wp,_ as qp,m as ce,B as MR,o as Qn,R as Kv,q as NR,v as LR,P as FR,w as UR,x as wt,y as Mc,z as BR,T as jR,C as $R,A as zR,X as HR,D as WR,E as qR,F as GR,O as KR,G as QR,H as ZR,I as YR,J as JR,K as XR}from"./index-BH2W15Cs.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M22 12a1 1 0 0 1-10 0 1 1 0 0 0-10 0",key:"1lzz15"}],["path",{d:"M7 20.7a1 1 0 1 1 5-8.7 1 1 0 1 0 5-8.6",key:"1gnrpi"}],["path",{d:"M7 3.3a1 1 0 1 1 5 8.6 1 1 0 1 0 5 8.6",key:"u9yy5q"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],I0=w0("loader-pinwheel",eP);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],nP=w0("square-pen",tP);var Wn,et,al,kn,to,la,us,ls,ul,ca,ha,no,ro,cs,da,mt,bu,ep,tp,np,rp,ip,sp,op,A0,y0,rP=(y0=class extends E0{constructor(e,t){super();Vt(this,mt);Vt(this,Wn);Vt(this,et);Vt(this,al);Vt(this,kn);Vt(this,to);Vt(this,la);Vt(this,us);Vt(this,ls);Vt(this,ul);Vt(this,ca);Vt(this,ha);Vt(this,no);Vt(this,ro);Vt(this,cs);Vt(this,da,new Set);this.options=t,bt(this,Wn,e),bt(this,ls,null),bt(this,us,Hv()),this.options.experimental_prefetchInRender||ne(this,us).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ne(this,et).addObserver(this),Qv(ne(this,et),this.options)?It(this,mt,bu).call(this):this.updateResult(),It(this,mt,rp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ap(ne(this,et),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ap(ne(this,et),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,It(this,mt,ip).call(this),It(this,mt,sp).call(this),ne(this,et).removeObserver(this)}setOptions(e){const t=this.options,r=ne(this,et);if(this.options=ne(this,Wn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Hr(this.options.enabled,ne(this,et))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");It(this,mt,op).call(this),ne(this,et).setOptions(this.options),t._defaulted&&!lh(this.options,t)&&ne(this,Wn).getQueryCache().notify({type:"observerOptionsUpdated",query:ne(this,et),observer:this});const i=this.hasListeners();i&&Zv(ne(this,et),r,this.options,t)&&It(this,mt,bu).call(this),this.updateResult(),i&&(ne(this,et)!==r||Hr(this.options.enabled,ne(this,et))!==Hr(t.enabled,ne(this,et))||qc(this.options.staleTime,ne(this,et))!==qc(t.staleTime,ne(this,et)))&&It(this,mt,ep).call(this);const o=It(this,mt,tp).call(this);i&&(ne(this,et)!==r||Hr(this.options.enabled,ne(this,et))!==Hr(t.enabled,ne(this,et))||o!==ne(this,cs))&&It(this,mt,np).call(this,o)}getOptimisticResult(e){const t=ne(this,Wn).getQueryCache().build(ne(this,Wn),e),r=this.createResult(t,e);return sP(this,r)&&(bt(this,kn,r),bt(this,la,this.options),bt(this,to,ne(this,et).state)),r}getCurrentResult(){return ne(this,kn)}trackResult(e,t){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),t==null||t(i),Reflect.get(r,i))})}trackProp(e){ne(this,da).add(e)}getCurrentQuery(){return ne(this,et)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ne(this,Wn).defaultQueryOptions(e),r=ne(this,Wn).getQueryCache().build(ne(this,Wn),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return It(this,mt,bu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ne(this,kn)))}createResult(e,t){var S;const r=ne(this,et),i=this.options,o=ne(this,kn),u=ne(this,to),c=ne(this,la),f=e!==r?e.state:ne(this,al),{state:m}=e;let y={...m},T=!1,P;if(t._optimisticResults){const x=this.hasListeners(),M=!x&&Qv(e,t),V=x&&Zv(e,r,t,i);(M||V)&&(y={...y,...VR(m.data,e.options)}),t._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:N,errorUpdatedAt:L,status:O}=y;P=y.data;let z=!1;if(t.placeholderData!==void 0&&P===void 0&&O==="pending"){let x;o!=null&&o.isPlaceholderData&&t.placeholderData===(c==null?void 0:c.placeholderData)?(x=o.data,z=!0):x=typeof t.placeholderData=="function"?t.placeholderData((S=ne(this,ha))==null?void 0:S.state.data,ne(this,ha)):t.placeholderData,x!==void 0&&(O="success",P=qv(o==null?void 0:o.data,x,t),T=!0)}if(t.select&&P!==void 0&&!z)if(o&&P===(u==null?void 0:u.data)&&t.select===ne(this,ul))P=ne(this,ca);else try{bt(this,ul,t.select),P=t.select(P),P=qv(o==null?void 0:o.data,P,t),bt(this,ca,P),bt(this,ls,null)}catch(x){bt(this,ls,x)}ne(this,ls)&&(N=ne(this,ls),P=ne(this,ca),L=Date.now(),O="error");const H=y.fetchStatus==="fetching",G=O==="pending",re=O==="error",$=G&&H,oe=P!==void 0,I={status:O,fetchStatus:y.fetchStatus,isPending:G,isSuccess:O==="success",isError:re,isInitialLoading:$,isLoading:$,data:P,dataUpdatedAt:y.dataUpdatedAt,error:N,errorUpdatedAt:L,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>f.dataUpdateCount||y.errorUpdateCount>f.errorUpdateCount,isFetching:H,isRefetching:H&&!G,isLoadingError:re&&!oe,isPaused:y.fetchStatus==="paused",isPlaceholderData:T,isRefetchError:re&&oe,isStale:Gp(e,t),refetch:this.refetch,promise:ne(this,us)};if(this.options.experimental_prefetchInRender){const x=A=>{I.status==="error"?A.reject(I.error):I.data!==void 0&&A.resolve(I.data)},M=()=>{const A=bt(this,us,I.promise=Hv());x(A)},V=ne(this,us);switch(V.status){case"pending":e.queryHash===r.queryHash&&x(V);break;case"fulfilled":(I.status==="error"||I.data!==V.value)&&M();break;case"rejected":(I.status!=="error"||I.error!==V.reason)&&M();break}}return I}updateResult(){const e=ne(this,kn),t=this.createResult(ne(this,et),this.options);if(bt(this,to,ne(this,et).state),bt(this,la,this.options),ne(this,to).data!==void 0&&bt(this,ha,ne(this,et)),lh(t,e))return;bt(this,kn,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,o=typeof i=="function"?i():i;if(o==="all"||!o&&!ne(this,da).size)return!0;const u=new Set(o??ne(this,da));return this.options.throwOnError&&u.add("error"),Object.keys(ne(this,kn)).some(c=>{const d=c;return ne(this,kn)[d]!==e[d]&&u.has(d)})};It(this,mt,A0).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&It(this,mt,rp).call(this)}},Wn=new WeakMap,et=new WeakMap,al=new WeakMap,kn=new WeakMap,to=new WeakMap,la=new WeakMap,us=new WeakMap,ls=new WeakMap,ul=new WeakMap,ca=new WeakMap,ha=new WeakMap,no=new WeakMap,ro=new WeakMap,cs=new WeakMap,da=new WeakMap,mt=new WeakSet,bu=function(e){It(this,mt,op).call(this);let t=ne(this,et).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ch)),t},ep=function(){It(this,mt,ip).call(this);const e=qc(this.options.staleTime,ne(this,et));if(Xf||ne(this,kn).isStale||!Wv(e))return;const r=OR(ne(this,kn).dataUpdatedAt,e)+1;bt(this,no,setTimeout(()=>{ne(this,kn).isStale||this.updateResult()},r))},tp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ne(this,et)):this.options.refetchInterval)??!1},np=function(e){It(this,mt,sp).call(this),bt(this,cs,e),!(Xf||Hr(this.options.enabled,ne(this,et))===!1||!Wv(ne(this,cs))||ne(this,cs)===0)&&bt(this,ro,setInterval(()=>{(this.options.refetchIntervalInBackground||kR.isFocused())&&It(this,mt,bu).call(this)},ne(this,cs)))},rp=function(){It(this,mt,ep).call(this),It(this,mt,np).call(this,It(this,mt,tp).call(this))},ip=function(){ne(this,no)&&(clearTimeout(ne(this,no)),bt(this,no,void 0))},sp=function(){ne(this,ro)&&(clearInterval(ne(this,ro)),bt(this,ro,void 0))},op=function(){const e=ne(this,Wn).getQueryCache().build(ne(this,Wn),this.options);if(e===ne(this,et))return;const t=ne(this,et);bt(this,et,e),bt(this,al,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},A0=function(e){Gh.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(ne(this,kn))}),ne(this,Wn).getQueryCache().notify({query:ne(this,et),type:"observerResultsUpdated"})})},y0);function iP(n,e){return Hr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Qv(n,e){return iP(n,e)||n.state.data!==void 0&&ap(n,e,e.refetchOnMount)}function ap(n,e,t){if(Hr(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&Gp(n,e)}return!1}function Zv(n,e,t,r){return(n!==e||Hr(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&Gp(n,t)}function Gp(n,e){return Hr(e.enabled,n)!==!1&&n.isStaleByTime(qc(e.staleTime,n))}function sP(n,e){return!lh(n.getCurrentResult(),e)}var hs,ds,qn,Ii,xi,Gc,up,b0,oP=(b0=class extends E0{constructor(e,t){super();Vt(this,xi);Vt(this,hs);Vt(this,ds);Vt(this,qn);Vt(this,Ii);bt(this,hs,e),this.setOptions(t),this.bindMethods(),It(this,xi,Gc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var r;const t=this.options;this.options=ne(this,hs).defaultMutationOptions(e),lh(this.options,t)||ne(this,hs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ne(this,qn),observer:this}),t!=null&&t.mutationKey&&this.options.mutationKey&&Gv(t.mutationKey)!==Gv(this.options.mutationKey)?this.reset():((r=ne(this,qn))==null?void 0:r.state.status)==="pending"&&ne(this,qn).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=ne(this,qn))==null||e.removeObserver(this)}onMutationUpdate(e){It(this,xi,Gc).call(this),It(this,xi,up).call(this,e)}getCurrentResult(){return ne(this,ds)}reset(){var e;(e=ne(this,qn))==null||e.removeObserver(this),bt(this,qn,void 0),It(this,xi,Gc).call(this),It(this,xi,up).call(this)}mutate(e,t){var r;return bt(this,Ii,t),(r=ne(this,qn))==null||r.removeObserver(this),bt(this,qn,ne(this,hs).getMutationCache().build(ne(this,hs),this.options)),ne(this,qn).addObserver(this),ne(this,qn).execute(e)}},hs=new WeakMap,ds=new WeakMap,qn=new WeakMap,Ii=new WeakMap,xi=new WeakSet,Gc=function(){var t;const e=((t=ne(this,qn))==null?void 0:t.state)??DR();bt(this,ds,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},up=function(e){Gh.batch(()=>{var t,r,i,o,u,c,d,f;if(ne(this,Ii)&&this.hasListeners()){const m=ne(this,ds).variables,y=ne(this,ds).context;(e==null?void 0:e.type)==="success"?((r=(t=ne(this,Ii)).onSuccess)==null||r.call(t,e.data,m,y),(o=(i=ne(this,Ii)).onSettled)==null||o.call(i,e.data,null,m,y)):(e==null?void 0:e.type)==="error"&&((c=(u=ne(this,Ii)).onError)==null||c.call(u,e.error,m,y),(f=(d=ne(this,Ii)).onSettled)==null||f.call(d,void 0,e.error,m,y))}this.listeners.forEach(m=>{m(ne(this,ds))})})},b0),S0=X.createContext(!1),aP=()=>X.useContext(S0);S0.Provider;function uP(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var lP=X.createContext(uP()),cP=()=>X.useContext(lP),hP=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},dP=n=>{X.useEffect(()=>{n.clearReset()},[n])},fP=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(i&&n.data===void 0||T0(t,[n.error,r])),pP=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},gP=(n,e)=>n.isLoading&&n.isFetching&&!e,mP=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,Yv=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function vP(n,e,t){var y,T,P,N,L;const r=Wp(),i=aP(),o=cP(),u=r.defaultQueryOptions(n);(T=(y=r.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||T.call(y,u),u._optimisticResults=i?"isRestoring":"optimistic",pP(u),hP(u,o),dP(o);const c=!r.getQueryCache().get(u.queryHash),[d]=X.useState(()=>new e(r,u)),f=d.getOptimisticResult(u),m=!i&&n.subscribed!==!1;if(X.useSyncExternalStore(X.useCallback(O=>{const z=m?d.subscribe(Gh.batchCalls(O)):ch;return d.updateResult(),z},[d,m]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),X.useEffect(()=>{d.setOptions(u)},[u,d]),mP(u,f))throw Yv(u,d,o);if(fP({result:f,errorResetBoundary:o,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw f.error;if((N=(P=r.getDefaultOptions().queries)==null?void 0:P._experimental_afterQuery)==null||N.call(P,u,f),u.experimental_prefetchInRender&&!Xf&&gP(f,i)){const O=c?Yv(u,d,o):(L=r.getQueryCache().get(u.queryHash))==null?void 0:L.promise;O==null||O.catch(ch).finally(()=>{d.updateResult()})}return u.notifyOnChangeProps?f:d.trackResult(f)}function Kp(n,e){return vP(n,rP)}function _P(n,e){const t=Wp(),[r]=X.useState(()=>new oP(t,n));X.useEffect(()=>{r.setOptions(n)},[r,n]);const i=X.useSyncExternalStore(X.useCallback(u=>r.subscribe(Gh.batchCalls(u)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=X.useCallback((u,c)=>{r.mutate(u,c).catch(ch)},[r]);if(i.error&&T0(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}const yP=()=>{};var Jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},bP=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],u=n[t++],c=n[t++],d=((i&7)<<18|(o&63)<<12|(u&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],u=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|u&63)}}return e.join("")},R0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],u=i+1<n.length,c=u?n[i+1]:0,d=i+2<n.length,f=d?n[i+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let T=(c&15)<<2|f>>6,P=f&63;d||(P=64,u||(T=64)),r.push(t[m],t[y],t[T],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(C0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):bP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||f==null||y==null)throw new wP;const T=o<<2|c>>4;if(r.push(T),f!==64){const P=c<<4&240|f>>2;if(r.push(P),y!==64){const N=f<<6&192|y;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EP=function(n){const e=C0(n);return R0.encodeByteArray(e,!0)},hh=function(n){return EP(n).replace(/\./g,"")},P0=function(n){try{return R0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=()=>TP().__FIREBASE_DEFAULTS__,AP=()=>{if(typeof process>"u"||typeof Jv>"u")return;const n=Jv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},SP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&P0(n[1]);return e&&JSON.parse(e)},Kh=()=>{try{return yP()||IP()||AP()||SP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},x0=n=>{var e,t;return(t=(e=Kh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},CP=n=>{const e=x0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},O0=()=>{var n;return(n=Kh())===null||n===void 0?void 0:n.config},k0=n=>{var e;return(e=Kh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(n){return n.endsWith(".cloudworkstations.dev")}async function V0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[hh(JSON.stringify(t)),hh(JSON.stringify(u)),""].join(".")}const Pu={};function xP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Pu))Pu[e]?n.emulator.push(e):n.prod.push(e);return n}function OP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Xv=!1;function Qh(n,e){if(typeof window>"u"||typeof document>"u"||!ll(window.location.host)||Pu[n]===e||Pu[n]||Xv)return;Pu[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",o=xP().prod.length>0;function u(){const T=document.getElementById(r);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,P){T.setAttribute("width","24"),T.setAttribute("id",P),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Xv=!0,u()},T}function m(T,P){T.setAttribute("id",P),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function y(){const T=OP(r),P=t("text"),N=document.getElementById(P)||document.createElement("span"),L=t("learnmore"),O=document.getElementById(L)||document.createElement("a"),z=t("preprendIcon"),H=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;c(G),m(O,L);const re=f();d(H,z),G.append(H,N,O,re),document.body.appendChild(G)}o?(N.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function VP(){var n;const e=(n=Kh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function NP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LP(){const n=An();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FP(){return!VP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UP(){try{return typeof indexedDB=="object"}catch{return!1}}function BP(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="FirebaseError";class Li extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=jP,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],u=o?$P(o,r):"Error",c=`${this.serviceName}: ${u} (${i}).`;return new Li(i,c,r)}}function $P(n,e){return n.replace(zP,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zP=/\{\$([^}]+)}/g;function HP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function oo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],u=e[i];if(e_(o)&&e_(u)){if(!oo(o,u))return!1}else if(o!==u)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function e_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function WP(n,e){const t=new qP(n,e);return t.subscribe.bind(t)}class qP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");GP(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Of),i.error===void 0&&(i.error=Of),i.complete===void 0&&(i.complete=Of);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Of(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n){return n&&n._delegate?n._delegate:n}class ao{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new RP;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZP(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&u.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QP(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QP(n){return n===Js?void 0:n}function ZP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new KP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const JP={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},XP=Qe.INFO,ex={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},tx=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ex[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qp{constructor(e){this.name=e,this._logLevel=XP,this._logHandler=tx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const nx=(n,e)=>e.some(t=>n instanceof t);let t_,n_;function rx(){return t_||(t_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ix(){return n_||(n_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D0=new WeakMap,lp=new WeakMap,M0=new WeakMap,kf=new WeakMap,Zp=new WeakMap;function sx(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(ps(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&D0.set(t,n)}).catch(()=>{}),Zp.set(e,n),e}function ox(n){if(lp.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});lp.set(n,e)}let cp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||M0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ps(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ax(n){cp=n(cp)}function ux(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Vf(this),e,...t);return M0.set(r,e.sort?e.sort():[e]),ps(r)}:ix().includes(n)?function(...e){return n.apply(Vf(this),e),ps(D0.get(this))}:function(...e){return ps(n.apply(Vf(this),e))}}function lx(n){return typeof n=="function"?ux(n):(n instanceof IDBTransaction&&ox(n),nx(n,rx())?new Proxy(n,cp):n)}function ps(n){if(n instanceof IDBRequest)return sx(n);if(kf.has(n))return kf.get(n);const e=lx(n);return e!==n&&(kf.set(n,e),Zp.set(e,n)),e}const Vf=n=>Zp.get(n);function cx(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const u=indexedDB.open(n,e),c=ps(u);return r&&u.addEventListener("upgradeneeded",d=>{r(ps(u.result),d.oldVersion,d.newVersion,ps(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const hx=["get","getKey","getAll","getAllKeys","count"],dx=["put","add","delete","clear"],Df=new Map;function r_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Df.get(e))return Df.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=dx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hx.includes(t)))return;const o=async function(u,...c){const d=this.transaction(u,i?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),i&&d.done]))[0]};return Df.set(e,o),o}ax(n=>({...n,get:(e,t,r)=>r_(e,t)||n.get(e,t,r),has:(e,t)=>!!r_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(px(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function px(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hp="@firebase/app",i_="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new Qp("@firebase/app"),gx="@firebase/app-compat",mx="@firebase/analytics-compat",vx="@firebase/analytics",_x="@firebase/app-check-compat",yx="@firebase/app-check",bx="@firebase/auth",wx="@firebase/auth-compat",Ex="@firebase/database",Tx="@firebase/data-connect",Ix="@firebase/database-compat",Ax="@firebase/functions",Sx="@firebase/functions-compat",Cx="@firebase/installations",Rx="@firebase/installations-compat",Px="@firebase/messaging",xx="@firebase/messaging-compat",Ox="@firebase/performance",kx="@firebase/performance-compat",Vx="@firebase/remote-config",Dx="@firebase/remote-config-compat",Mx="@firebase/storage",Nx="@firebase/storage-compat",Lx="@firebase/firestore",Fx="@firebase/vertexai",Ux="@firebase/firestore-compat",Bx="firebase",jx="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="[DEFAULT]",$x={[hp]:"fire-core",[gx]:"fire-core-compat",[vx]:"fire-analytics",[mx]:"fire-analytics-compat",[yx]:"fire-app-check",[_x]:"fire-app-check-compat",[bx]:"fire-auth",[wx]:"fire-auth-compat",[Ex]:"fire-rtdb",[Tx]:"fire-data-connect",[Ix]:"fire-rtdb-compat",[Ax]:"fire-fn",[Sx]:"fire-fn-compat",[Cx]:"fire-iid",[Rx]:"fire-iid-compat",[Px]:"fire-fcm",[xx]:"fire-fcm-compat",[Ox]:"fire-perf",[kx]:"fire-perf-compat",[Vx]:"fire-rc",[Dx]:"fire-rc-compat",[Mx]:"fire-gcs",[Nx]:"fire-gcs-compat",[Lx]:"fire-fst",[Ux]:"fire-fst-compat",[Fx]:"fire-vertex","fire-js":"fire-js",[Bx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Map,zx=new Map,fp=new Map;function s_(n,e){try{n.container.addComponent(e)}catch(t){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function fa(n){const e=n.name;if(fp.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;fp.set(e,n);for(const t of dh.values())s_(t,n);for(const t of zx.values())s_(t,n);return!0}function Yp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new cl("app","Firebase",Hx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=jx;function N0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:dp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw gs.create("bad-app-name",{appName:String(i)});if(t||(t=O0()),!t)throw gs.create("no-options");const o=dh.get(i);if(o){if(oo(t,o.options)&&oo(r,o.config))return o;throw gs.create("duplicate-app",{appName:i})}const u=new YP(i);for(const d of fp.values())u.addComponent(d);const c=new Wx(t,r,u);return dh.set(i,c),c}function L0(n=dp){const e=dh.get(n);if(!e&&n===dp&&O0())return N0();if(!e)throw gs.create("no-app",{appName:n});return e}function ms(n,e,t){var r;let i=(r=$x[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(c.join(" "));return}fa(new ao(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="firebase-heartbeat-database",Gx=1,Lu="firebase-heartbeat-store";let Mf=null;function F0(){return Mf||(Mf=cx(qx,Gx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lu)}catch(t){console.warn(t)}}}}).catch(n=>{throw gs.create("idb-open",{originalErrorMessage:n.message})})),Mf}async function Kx(n){try{const t=(await F0()).transaction(Lu),r=await t.objectStore(Lu).get(U0(n));return await t.done,r}catch(e){if(e instanceof Li)Oi.warn(e.message);else{const t=gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oi.warn(t.message)}}}async function o_(n,e){try{const r=(await F0()).transaction(Lu,"readwrite");await r.objectStore(Lu).put(e,U0(n)),await r.done}catch(t){if(t instanceof Li)Oi.warn(t.message);else{const r=gs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Oi.warn(r.message)}}}function U0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=1024,Zx=30;class Yx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Xx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=a_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Zx){const u=eO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Oi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=a_(),{heartbeatsToSend:r,unsentEntries:i}=Jx(this._heartbeatsCache.heartbeats),o=hh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Oi.warn(t),""}}}function a_(){return new Date().toISOString().substring(0,10)}function Jx(n,e=Qx){const t=[];let r=n.slice();for(const i of n){const o=t.find(u=>u.agent===i.agent);if(o){if(o.dates.push(i.date),u_(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),u_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Xx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UP()?BP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Kx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return o_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return o_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function u_(n){return hh(JSON.stringify({version:2,heartbeats:n})).length}function eO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(n){fa(new ao("platform-logger",e=>new fx(e),"PRIVATE")),fa(new ao("heartbeat",e=>new Yx(e),"PRIVATE")),ms(hp,i_,n),ms(hp,i_,"esm2017"),ms("fire-js","")}tO("");var nO="firebase",rO="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(nO,rO,"app");function B0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iO=B0,j0=new cl("auth","Firebase",B0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Qp("@firebase/auth");function sO(n,...e){fh.logLevel<=Qe.WARN&&fh.warn(`Auth (${Sa}): ${n}`,...e)}function Kc(n,...e){fh.logLevel<=Qe.ERROR&&fh.error(`Auth (${Sa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(n,...e){throw Jp(n,...e)}function Qr(n,...e){return Jp(n,...e)}function $0(n,e,t){const r=Object.assign(Object.assign({},iO()),{[e]:t});return new cl("auth","Firebase",r).create(e,{appName:n.name})}function io(n){return $0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jp(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return j0.create(n,...e)}function ke(n,e,...t){if(!n)throw Jp(e,...t)}function Ai(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Kc(e),new Error(e)}function Vi(n,e){n||Ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function oO(){return l_()==="http:"||l_()==="https:"}function l_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oO()||MP()||"connection"in navigator)?navigator.onLine:!0}function uO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vi(t>e,"Short delay should be less than long delay!"),this.isMobile=kP()||NP()}get(){return aO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(n,e){Vi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hO=new dl(3e4,6e4);function eg(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ca(n,e,t,r,i={}){return H0(n,i,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const c=hl(Object.assign({key:n.config.apiKey},u)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:d},o);return DP()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&ll(n.emulatorConfig.host)&&(f.credentials="include"),z0.fetch()(await W0(n,n.config.apiHost,t,c),f)})}async function H0(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},lO),e);try{const i=new fO(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Nc(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const c=o.ok?u.errorMessage:u.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nc(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Nc(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Nc(n,"user-disabled",u);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw $0(n,m,f);ki(n,m)}}catch(i){if(i instanceof Li)throw i;ki(n,"network-request-failed",{message:String(i)})}}async function dO(n,e,t,r,i={}){const o=await Ca(n,e,t,r,i);return"mfaPendingCredential"in o&&ki(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function W0(n,e,t,r){const i=`${e}${t}?${r}`,o=n,u=o.config.emulator?Xp(n.config,i):`${n.config.apiScheme}://${i}`;return cO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}class fO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qr(this.auth,"network-request-failed")),hO.get())})}}function Nc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Qr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(n,e){return Ca(n,"POST","/v1/accounts:delete",e)}async function ph(n,e){return Ca(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gO(n,e=!1){const t=kr(n),r=await t.getIdToken(e),i=tg(r);ke(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:xu(Nf(i.auth_time)),issuedAtTime:xu(Nf(i.iat)),expirationTime:xu(Nf(i.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Nf(n){return Number(n)*1e3}function tg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Kc("JWT malformed, contained fewer than 3 sections"),null;try{const i=P0(t);return i?JSON.parse(i):(Kc("Failed to decode base64 JWT payload"),null)}catch(i){return Kc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function c_(n){const e=tg(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Li&&mO(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function mO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gh(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Fu(n,ph(t,{idToken:r}));ke(i==null?void 0:i.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?q0(o.providerUserInfo):[],c=yO(n.providerData,u),d=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),m=d?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new gp(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,y)}async function _O(n){const e=kr(n);await gh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yO(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function q0(n){return n.map(e=>{var{providerId:t}=e,r=qp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(n,e){const t=await H0(n,{},async()=>{const r=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,u=await W0(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",z0.fetch()(u,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wO(n,e){return Ca(n,"POST","/v2/accounts:revokeToken",eg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):c_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=c_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await bO(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,u=new ra;return r&&(ke(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(ke(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),o&&(ke(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ra,this.toJSON())}_performRefresh(){return Ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=qp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new gp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Fu(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return gO(this,e)}reload(){return _O(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await gh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gr(this.auth.app))return Promise.reject(io(this.auth));const e=await this.getIdToken();return await Fu(this,pO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,u,c,d,f,m;const y=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(i=t.email)!==null&&i!==void 0?i:void 0,P=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,N=(u=t.photoURL)!==null&&u!==void 0?u:void 0,L=(c=t.tenantId)!==null&&c!==void 0?c:void 0,O=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,z=(f=t.createdAt)!==null&&f!==void 0?f:void 0,H=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:G,emailVerified:re,isAnonymous:$,providerData:oe,stsTokenManager:C}=t;ke(G&&C,e,"internal-error");const I=ra.fromJSON(this.name,C);ke(typeof G=="string",e,"internal-error"),ns(y,e.name),ns(T,e.name),ke(typeof re=="boolean",e,"internal-error"),ke(typeof $=="boolean",e,"internal-error"),ns(P,e.name),ns(N,e.name),ns(L,e.name),ns(O,e.name),ns(z,e.name),ns(H,e.name);const S=new Rr({uid:G,auth:e,email:T,emailVerified:re,displayName:y,isAnonymous:$,photoURL:N,phoneNumber:P,tenantId:L,stsTokenManager:I,createdAt:z,lastLoginAt:H});return oe&&Array.isArray(oe)&&(S.providerData=oe.map(x=>Object.assign({},x))),O&&(S._redirectEventId=O),S}static async _fromIdTokenResponse(e,t,r=!1){const i=new ra;i.updateFromServerResponse(t);const o=new Rr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await gh(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ke(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?q0(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new ra;c.updateFromIdToken(r);const d=new Rr({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:u}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new gp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=new Map;function Si(n){Vi(n instanceof Function,"Expected a class definition");let e=h_.get(n);return e?(Vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,h_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}G0.type="NONE";const d_=G0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(n,e,t){return`firebase:${n}:${e}:${t}`}class ia{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Qc(this.userKey,i.apiKey,o),this.fullPersistenceKey=Qc("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ph(this.auth,{idToken:e}).catch(()=>{});return t?Rr._fromGetAccountInfoResponse(this.auth,t,e):null}return Rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ia(Si(d_),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||Si(d_);const u=Qc(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const m=await f._get(u);if(m){let y;if(typeof m=="string"){const T=await ph(e,{idToken:m}).catch(()=>{});if(!T)break;y=await Rr._fromGetAccountInfoResponse(e,T,m)}else y=Rr._fromJSON(e,m);f!==o&&(c=y),o=f;break}}catch{}const d=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new ia(o,e,r):(o=d[0],c&&await o._set(u,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(u)}catch{}})),new ia(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(K0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X0(e))return"Blackberry";if(eb(e))return"Webos";if(Q0(e))return"Safari";if((e.includes("chrome/")||Z0(e))&&!e.includes("edge/"))return"Chrome";if(J0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function K0(n=An()){return/firefox\//i.test(n)}function Q0(n=An()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Z0(n=An()){return/crios\//i.test(n)}function Y0(n=An()){return/iemobile/i.test(n)}function J0(n=An()){return/android/i.test(n)}function X0(n=An()){return/blackberry/i.test(n)}function eb(n=An()){return/webos/i.test(n)}function ng(n=An()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function EO(n=An()){var e;return ng(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TO(){return LP()&&document.documentMode===10}function tb(n=An()){return ng(n)||J0(n)||eb(n)||X0(n)||/windows phone/i.test(n)||Y0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n,e=[]){let t;switch(n){case"Browser":t=f_(An());break;case"Worker":t=`${f_(An())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((u,c)=>{try{const d=e(o);u(d)}catch(d){c(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(n,e={}){return Ca(n,"GET","/v2/passwordPolicy",eg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=6;class CO{constructor(e){var t,r,i,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:SO,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,u,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new p_(this),this.idTokenSubscription=new p_(this),this.beforeStateQueue=new IO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Si(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await ia.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ph(this,{idToken:e}),r=await Rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===c)&&(d!=null&&d.user)&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gr(this.app))return Promise.reject(io(this));const t=e?kr(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gr(this.app)?Promise.reject(io(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gr(this.app)?Promise.reject(io(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AO(this),t=new CO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await wO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Si(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await ia.create(this,[Si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(c,this,"internal-error"),c.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&sO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function rg(n){return kr(n)}class p_{constructor(e){this.auth=e,this.observer=null,this.addObserver=WP(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PO(n){ig=n}function xO(n){return ig.loadJS(n)}function OO(){return ig.gapiScript}function kO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(n,e){const t=Yp(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(oo(o,e??{}))return i;ki(i,"already-initialized")}return t.initialize({options:e})}function DO(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Si);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MO(n,e,t){const r=rg(n);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=rb(e),{host:u,port:c}=NO(e),d=c===null?"":`:${c}`,f={url:`${o}//${u}${d}/`},m=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(oo(f,r.config.emulator)&&oo(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,ll(u)?(Qh("Auth",!0),V0(`${o}//${u}${d}`)):LO()}function rb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NO(n){const e=rb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:g_(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:g_(u)}}}function g_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function LO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ai("not implemented")}_getIdTokenResponse(e){return Ai("not implemented")}_linkToIdToken(e,t){return Ai("not implemented")}_getReauthenticationResolver(e){return Ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(n,e){return dO(n,"POST","/v1/accounts:signInWithIdp",eg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="http://localhost";class uo extends ib{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ki("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=qp(t,["providerId","signInMethod"]);if(!r||!i)return null;const u=new uo(r,i);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return sa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,sa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sa(e,t)}buildRequest(){const e={requestUri:FO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends sb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends fl{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uo._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return is.credential(t,r)}catch{return null}}}is.GOOGLE_SIGN_IN_METHOD="google.com";is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends fl{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends fl{constructor(){super("twitter.com")}static credential(e,t){return uo._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return os.credential(t,r)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Rr._fromIdTokenResponse(e,r,i),u=m_(r);return new pa({user:o,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=m_(r);return new pa({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function m_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends Li{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new mh(e,t,r,i)}}function ob(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(n,o,e,r):o})}async function UO(n,e,t=!1){const r=await Fu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return pa._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(n,e,t=!1){const{auth:r}=n;if(Gr(r.app))return Promise.reject(io(r));const i="reauthenticate";try{const o=await Fu(n,ob(r,i,e,n),t);ke(o.idToken,r,"internal-error");const u=tg(o.idToken);ke(u,r,"internal-error");const{sub:c}=u;return ke(n.uid===c,r,"user-mismatch"),pa._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ki(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(n,e,t=!1){if(Gr(n.app))return Promise.reject(io(n));const r="signIn",i=await ob(n,r,e),o=await pa._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function $O(n,e,t,r){return kr(n).onIdTokenChanged(e,t,r)}function zO(n,e,t){return kr(n).beforeAuthStateChanged(e,t)}const vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=1e3,WO=10;class ub extends ab{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,c,d)=>{this.notifyListeners(u,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);TO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,WO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},HO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ub.type="LOCAL";const qO=ub;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb extends ab{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lb.type="SESSION";const cb=lb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Zh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,u=this.handlersMap[i];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(u).map(async f=>f(t.origin,o)),d=await GO(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,u;return new Promise((c,d)=>{const f=sg("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(y){const T=y;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(T.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return window}function QO(n){Zr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(){return typeof Zr().WorkerGlobalScope<"u"&&typeof Zr().importScripts=="function"}async function ZO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YO(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function JO(){return hb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="firebaseLocalStorageDb",XO=1,_h="firebaseLocalStorage",fb="fbase_key";class pl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yh(n,e){return n.transaction([_h],e?"readwrite":"readonly").objectStore(_h)}function ek(){const n=indexedDB.deleteDatabase(db);return new pl(n).toPromise()}function mp(){const n=indexedDB.open(db,XO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(_h,{keyPath:fb})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(_h)?e(r):(r.close(),await ek(),e(await mp()))})})}async function v_(n,e,t){const r=Yh(n,!0).put({[fb]:e,value:t});return new pl(r).toPromise()}async function tk(n,e){const t=Yh(n,!1).get(e),r=await new pl(t).toPromise();return r===void 0?null:r.value}function __(n,e){const t=Yh(n,!0).delete(e);return new pl(t).toPromise()}const nk=800,rk=3;class pb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>rk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zh._getInstance(JO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ZO(),!this.activeServiceWorker)return;this.sender=new KO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mp();return await v_(e,vh,"1"),await __(e,vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>v_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>tk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>__(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Yh(i,!1).getAll();return new pl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pb.type="LOCAL";const ik=pb;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(n,e){return e?Si(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends ib{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ok(n){return jO(n.auth,new og(n),n.bypassAuthState)}function ak(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),BO(t,new og(n),n.bypassAuthState)}async function uk(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),UO(t,new og(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:u,type:c}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ok;case"linkViaPopup":case"linkViaRedirect":return uk;case"reauthViaPopup":case"reauthViaRedirect":return ak;default:ki(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new dl(2e3,1e4);class ta extends gb{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,ta.currentPopupAction&&ta.currentPopupAction.cancel(),ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lk.get())};e()}}ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="pendingRedirect",Zc=new Map;class hk extends gb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zc.get(this.auth._key());if(!e){try{const r=await dk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zc.set(this.auth._key(),e)}return this.bypassAuthState||Zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dk(n,e){const t=gk(e),r=pk(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function fk(n,e){Zc.set(n._key(),e)}function pk(n){return Si(n._redirectPersistence)}function gk(n){return Qc(ck,n.config.apiKey,n.name)}async function mk(n,e,t=!1){if(Gr(n.app))return Promise.reject(io(n));const r=rg(n),i=sk(r,e),u=await new hk(r,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=10*60*1e3;class _k{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!mb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vk&&this.cachedEventUids.clear(),this.cachedEventUids.has(y_(e))}saveEventToCache(e){this.cachedEventUids.add(y_(e)),this.lastProcessedEventTime=Date.now()}}function y_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mb({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mb(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(n,e={}){return Ca(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ek=/^https?/;async function Tk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await bk(n);for(const t of e)try{if(Ik(t))return}catch{}ki(n,"unauthorized-domain")}function Ik(n){const e=pp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!Ek.test(t))return!1;if(wk.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new dl(3e4,6e4);function b_(){const n=Zr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Sk(n){return new Promise((e,t)=>{var r,i,o;function u(){b_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b_(),t(Qr(n,"network-request-failed"))},timeout:Ak.get()})}if(!((i=(r=Zr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Zr().gapi)===null||o===void 0)&&o.load)u();else{const c=kO("iframefcb");return Zr()[c]=()=>{gapi.load?u():t(Qr(n,"network-request-failed"))},xO(`${OO()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw Yc=null,e})}let Yc=null;function Ck(n){return Yc=Yc||Sk(n),Yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=new dl(5e3,15e3),Pk="__/auth/iframe",xk="emulator/auth/iframe",Ok={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vk(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Xp(e,xk):`https://${n.config.authDomain}/${Pk}`,r={apiKey:e.apiKey,appName:n.name,v:Sa},i=kk.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${hl(r).slice(1)}`}async function Dk(n){const e=await Ck(n),t=Zr().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:Vk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ok,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const u=Qr(n,"network-request-failed"),c=Zr().setTimeout(()=>{o(u)},Rk.get());function d(){Zr().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nk=500,Lk=600,Fk="_blank",Uk="http://localhost";class w_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Bk(n,e,t,r=Nk,i=Lk){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},Mk),{width:r.toString(),height:i.toString(),top:o,left:u}),f=An().toLowerCase();t&&(c=Z0(f)?Fk:t),K0(f)&&(e=e||Uk,d.scrollbars="yes");const m=Object.entries(d).reduce((T,[P,N])=>`${T}${P}=${N},`,"");if(EO(f)&&c!=="_self")return jk(e||"",c),new w_(null);const y=window.open(e||"",c,m);ke(y,n,"popup-blocked");try{y.focus()}catch{}return new w_(y)}function jk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="__/auth/handler",zk="emulator/auth/handler",Hk=encodeURIComponent("fac");async function E_(n,e,t,r,i,o){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Sa,eventId:i};if(e instanceof sb){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",HP(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))u[m]=y}if(e instanceof fl){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(u.scopes=m.join(","))}n.tenantId&&(u.tid=n.tenantId);const c=u;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await n._getAppCheckToken(),f=d?`#${Hk}=${encodeURIComponent(d)}`:"";return`${Wk(n)}?${hl(c).slice(1)}${f}`}function Wk({config:n}){return n.emulator?Xp(n,zk):`https://${n.authDomain}/${$k}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="webStorageSupport";class qk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cb,this._completeRedirectFn=mk,this._overrideRedirectResult=fk}async _openPopup(e,t,r,i){var o;Vi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await E_(e,t,r,pp(),i);return Bk(e,u,sg())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await E_(e,t,r,pp(),i);return QO(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Vi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Dk(e),r=new _k(e);return t.register("authEvent",i=>(ke(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lf,{type:Lf},i=>{var o;const u=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Lf];u!==void 0&&t(!!u),ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Tk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tb()||Q0()||ng()}}const Gk=qk;var T_="@firebase/auth",I_="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Zk(n){fa(new ao("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:c}=r.options;ke(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nb(n)},f=new RO(r,i,o,d);return DO(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),fa(new ao("auth-internal",e=>{const t=rg(e.getProvider("auth").getImmediate());return(r=>new Kk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(T_,I_,Qk(n)),ms(T_,I_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=5*60,Jk=k0("authIdTokenMaxAge")||Yk;let A_=null;const Xk=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Jk)return;const i=t==null?void 0:t.token;A_!==i&&(A_=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function eV(n=L0()){const e=Yp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=VO(n,{popupRedirectResolver:Gk,persistence:[ik,qO,cb]}),r=k0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=Xk(o.toString());zO(t,u,()=>u(t.currentUser)),$O(t,c=>u(c))}}const i=x0("auth");return i?MO(t,`http://${i}`):Qh("Auth",!1),t}function tV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}PO({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Qr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",tV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Zk("Browser");var S_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,vb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function S(){}S.prototype=I.prototype,C.D=I.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(x,M,V){for(var A=Array(arguments.length-2),De=2;De<arguments.length;De++)A[De-2]=arguments[De];return I.prototype[M].apply(x,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,S){S||(S=0);var x=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)x[M]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(M=0;16>M;++M)x[M]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=C.g[0],S=C.g[1],M=C.g[2];var V=C.g[3],A=I+(V^S&(M^V))+x[0]+3614090360&4294967295;I=S+(A<<7&4294967295|A>>>25),A=V+(M^I&(S^M))+x[1]+3905402710&4294967295,V=I+(A<<12&4294967295|A>>>20),A=M+(S^V&(I^S))+x[2]+606105819&4294967295,M=V+(A<<17&4294967295|A>>>15),A=S+(I^M&(V^I))+x[3]+3250441966&4294967295,S=M+(A<<22&4294967295|A>>>10),A=I+(V^S&(M^V))+x[4]+4118548399&4294967295,I=S+(A<<7&4294967295|A>>>25),A=V+(M^I&(S^M))+x[5]+1200080426&4294967295,V=I+(A<<12&4294967295|A>>>20),A=M+(S^V&(I^S))+x[6]+2821735955&4294967295,M=V+(A<<17&4294967295|A>>>15),A=S+(I^M&(V^I))+x[7]+4249261313&4294967295,S=M+(A<<22&4294967295|A>>>10),A=I+(V^S&(M^V))+x[8]+1770035416&4294967295,I=S+(A<<7&4294967295|A>>>25),A=V+(M^I&(S^M))+x[9]+2336552879&4294967295,V=I+(A<<12&4294967295|A>>>20),A=M+(S^V&(I^S))+x[10]+4294925233&4294967295,M=V+(A<<17&4294967295|A>>>15),A=S+(I^M&(V^I))+x[11]+2304563134&4294967295,S=M+(A<<22&4294967295|A>>>10),A=I+(V^S&(M^V))+x[12]+1804603682&4294967295,I=S+(A<<7&4294967295|A>>>25),A=V+(M^I&(S^M))+x[13]+4254626195&4294967295,V=I+(A<<12&4294967295|A>>>20),A=M+(S^V&(I^S))+x[14]+2792965006&4294967295,M=V+(A<<17&4294967295|A>>>15),A=S+(I^M&(V^I))+x[15]+1236535329&4294967295,S=M+(A<<22&4294967295|A>>>10),A=I+(M^V&(S^M))+x[1]+4129170786&4294967295,I=S+(A<<5&4294967295|A>>>27),A=V+(S^M&(I^S))+x[6]+3225465664&4294967295,V=I+(A<<9&4294967295|A>>>23),A=M+(I^S&(V^I))+x[11]+643717713&4294967295,M=V+(A<<14&4294967295|A>>>18),A=S+(V^I&(M^V))+x[0]+3921069994&4294967295,S=M+(A<<20&4294967295|A>>>12),A=I+(M^V&(S^M))+x[5]+3593408605&4294967295,I=S+(A<<5&4294967295|A>>>27),A=V+(S^M&(I^S))+x[10]+38016083&4294967295,V=I+(A<<9&4294967295|A>>>23),A=M+(I^S&(V^I))+x[15]+3634488961&4294967295,M=V+(A<<14&4294967295|A>>>18),A=S+(V^I&(M^V))+x[4]+3889429448&4294967295,S=M+(A<<20&4294967295|A>>>12),A=I+(M^V&(S^M))+x[9]+568446438&4294967295,I=S+(A<<5&4294967295|A>>>27),A=V+(S^M&(I^S))+x[14]+3275163606&4294967295,V=I+(A<<9&4294967295|A>>>23),A=M+(I^S&(V^I))+x[3]+4107603335&4294967295,M=V+(A<<14&4294967295|A>>>18),A=S+(V^I&(M^V))+x[8]+1163531501&4294967295,S=M+(A<<20&4294967295|A>>>12),A=I+(M^V&(S^M))+x[13]+2850285829&4294967295,I=S+(A<<5&4294967295|A>>>27),A=V+(S^M&(I^S))+x[2]+4243563512&4294967295,V=I+(A<<9&4294967295|A>>>23),A=M+(I^S&(V^I))+x[7]+1735328473&4294967295,M=V+(A<<14&4294967295|A>>>18),A=S+(V^I&(M^V))+x[12]+2368359562&4294967295,S=M+(A<<20&4294967295|A>>>12),A=I+(S^M^V)+x[5]+4294588738&4294967295,I=S+(A<<4&4294967295|A>>>28),A=V+(I^S^M)+x[8]+2272392833&4294967295,V=I+(A<<11&4294967295|A>>>21),A=M+(V^I^S)+x[11]+1839030562&4294967295,M=V+(A<<16&4294967295|A>>>16),A=S+(M^V^I)+x[14]+4259657740&4294967295,S=M+(A<<23&4294967295|A>>>9),A=I+(S^M^V)+x[1]+2763975236&4294967295,I=S+(A<<4&4294967295|A>>>28),A=V+(I^S^M)+x[4]+1272893353&4294967295,V=I+(A<<11&4294967295|A>>>21),A=M+(V^I^S)+x[7]+4139469664&4294967295,M=V+(A<<16&4294967295|A>>>16),A=S+(M^V^I)+x[10]+3200236656&4294967295,S=M+(A<<23&4294967295|A>>>9),A=I+(S^M^V)+x[13]+681279174&4294967295,I=S+(A<<4&4294967295|A>>>28),A=V+(I^S^M)+x[0]+3936430074&4294967295,V=I+(A<<11&4294967295|A>>>21),A=M+(V^I^S)+x[3]+3572445317&4294967295,M=V+(A<<16&4294967295|A>>>16),A=S+(M^V^I)+x[6]+76029189&4294967295,S=M+(A<<23&4294967295|A>>>9),A=I+(S^M^V)+x[9]+3654602809&4294967295,I=S+(A<<4&4294967295|A>>>28),A=V+(I^S^M)+x[12]+3873151461&4294967295,V=I+(A<<11&4294967295|A>>>21),A=M+(V^I^S)+x[15]+530742520&4294967295,M=V+(A<<16&4294967295|A>>>16),A=S+(M^V^I)+x[2]+3299628645&4294967295,S=M+(A<<23&4294967295|A>>>9),A=I+(M^(S|~V))+x[0]+4096336452&4294967295,I=S+(A<<6&4294967295|A>>>26),A=V+(S^(I|~M))+x[7]+1126891415&4294967295,V=I+(A<<10&4294967295|A>>>22),A=M+(I^(V|~S))+x[14]+2878612391&4294967295,M=V+(A<<15&4294967295|A>>>17),A=S+(V^(M|~I))+x[5]+4237533241&4294967295,S=M+(A<<21&4294967295|A>>>11),A=I+(M^(S|~V))+x[12]+1700485571&4294967295,I=S+(A<<6&4294967295|A>>>26),A=V+(S^(I|~M))+x[3]+2399980690&4294967295,V=I+(A<<10&4294967295|A>>>22),A=M+(I^(V|~S))+x[10]+4293915773&4294967295,M=V+(A<<15&4294967295|A>>>17),A=S+(V^(M|~I))+x[1]+2240044497&4294967295,S=M+(A<<21&4294967295|A>>>11),A=I+(M^(S|~V))+x[8]+1873313359&4294967295,I=S+(A<<6&4294967295|A>>>26),A=V+(S^(I|~M))+x[15]+4264355552&4294967295,V=I+(A<<10&4294967295|A>>>22),A=M+(I^(V|~S))+x[6]+2734768916&4294967295,M=V+(A<<15&4294967295|A>>>17),A=S+(V^(M|~I))+x[13]+1309151649&4294967295,S=M+(A<<21&4294967295|A>>>11),A=I+(M^(S|~V))+x[4]+4149444226&4294967295,I=S+(A<<6&4294967295|A>>>26),A=V+(S^(I|~M))+x[11]+3174756917&4294967295,V=I+(A<<10&4294967295|A>>>22),A=M+(I^(V|~S))+x[2]+718787259&4294967295,M=V+(A<<15&4294967295|A>>>17),A=S+(V^(M|~I))+x[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var S=I-this.blockSize,x=this.B,M=this.h,V=0;V<I;){if(M==0)for(;V<=S;)i(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<I;)if(x[M++]=C.charCodeAt(V++),M==this.blockSize){i(this,x),M=0;break}}else for(;V<I;)if(x[M++]=C[V++],M==this.blockSize){i(this,x),M=0;break}}this.h=M,this.o+=I},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var S=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=S&255,S/=256;for(this.u(C),C=Array(16),I=S=0;4>I;++I)for(var x=0;32>x;x+=8)C[S++]=this.g[I]>>>x&255;return C};function o(C,I){var S=c;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=I(C)}function u(C,I){this.h=I;for(var S=[],x=!0,M=C.length-1;0<=M;M--){var V=C[M]|0;x&&V==I||(S[M]=V,x=!1)}this.g=S}var c={};function d(C){return-128<=C&&128>C?o(C,function(I){return new u([I|0],0>I?-1:0)}):new u([C|0],0>C?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return y;if(0>C)return O(f(-C));for(var I=[],S=1,x=0;C>=S;x++)I[x]=C/S|0,S*=4294967296;return new u(I,0)}function m(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return O(m(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=f(Math.pow(I,8)),x=y,M=0;M<C.length;M+=8){var V=Math.min(8,C.length-M),A=parseInt(C.substring(M,M+V),I);8>V?(V=f(Math.pow(I,V)),x=x.j(V).add(f(A))):(x=x.j(S),x=x.add(f(A)))}return x}var y=d(0),T=d(1),P=d(16777216);n=u.prototype,n.m=function(){if(L(this))return-O(this).m();for(var C=0,I=1,S=0;S<this.g.length;S++){var x=this.i(S);C+=(0<=x?x:4294967296+x)*I,I*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(N(this))return"0";if(L(this))return"-"+O(this).toString(C);for(var I=f(Math.pow(C,6)),S=this,x="";;){var M=re(S,I).g;S=z(S,M.j(I));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=M,N(S))return V+x;for(;6>V.length;)V="0"+V;x=V+x}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function N(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function L(C){return C.h==-1}n.l=function(C){return C=z(this,C),L(C)?-1:N(C)?0:1};function O(C){for(var I=C.g.length,S=[],x=0;x<I;x++)S[x]=~C.g[x];return new u(S,~C.h).add(T)}n.abs=function(){return L(this)?O(this):this},n.add=function(C){for(var I=Math.max(this.g.length,C.g.length),S=[],x=0,M=0;M<=I;M++){var V=x+(this.i(M)&65535)+(C.i(M)&65535),A=(V>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);x=A>>>16,V&=65535,A&=65535,S[M]=A<<16|V}return new u(S,S[S.length-1]&-2147483648?-1:0)};function z(C,I){return C.add(O(I))}n.j=function(C){if(N(this)||N(C))return y;if(L(this))return L(C)?O(this).j(O(C)):O(O(this).j(C));if(L(C))return O(this.j(O(C)));if(0>this.l(P)&&0>C.l(P))return f(this.m()*C.m());for(var I=this.g.length+C.g.length,S=[],x=0;x<2*I;x++)S[x]=0;for(x=0;x<this.g.length;x++)for(var M=0;M<C.g.length;M++){var V=this.i(x)>>>16,A=this.i(x)&65535,De=C.i(M)>>>16,Fe=C.i(M)&65535;S[2*x+2*M]+=A*Fe,H(S,2*x+2*M),S[2*x+2*M+1]+=V*Fe,H(S,2*x+2*M+1),S[2*x+2*M+1]+=A*De,H(S,2*x+2*M+1),S[2*x+2*M+2]+=V*De,H(S,2*x+2*M+2)}for(x=0;x<I;x++)S[x]=S[2*x+1]<<16|S[2*x];for(x=I;x<2*I;x++)S[x]=0;return new u(S,0)};function H(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function G(C,I){this.g=C,this.h=I}function re(C,I){if(N(I))throw Error("division by zero");if(N(C))return new G(y,y);if(L(C))return I=re(O(C),I),new G(O(I.g),O(I.h));if(L(I))return I=re(C,O(I)),new G(O(I.g),I.h);if(30<C.g.length){if(L(C)||L(I))throw Error("slowDivide_ only works with positive integers.");for(var S=T,x=I;0>=x.l(C);)S=$(S),x=$(x);var M=oe(S,1),V=oe(x,1);for(x=oe(x,2),S=oe(S,2);!N(x);){var A=V.add(x);0>=A.l(C)&&(M=M.add(S),V=A),x=oe(x,1),S=oe(S,1)}return I=z(C,M.j(I)),new G(M,I)}for(M=y;0<=C.l(I);){for(S=Math.max(1,Math.floor(C.m()/I.m())),x=Math.ceil(Math.log(S)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),V=f(S),A=V.j(I);L(A)||0<A.l(C);)S-=x,V=f(S),A=V.j(I);N(V)&&(V=T),M=M.add(V),C=z(C,A)}return new G(M,C)}n.A=function(C){return re(this,C).h},n.and=function(C){for(var I=Math.max(this.g.length,C.g.length),S=[],x=0;x<I;x++)S[x]=this.i(x)&C.i(x);return new u(S,this.h&C.h)},n.or=function(C){for(var I=Math.max(this.g.length,C.g.length),S=[],x=0;x<I;x++)S[x]=this.i(x)|C.i(x);return new u(S,this.h|C.h)},n.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),S=[],x=0;x<I;x++)S[x]=this.i(x)^C.i(x);return new u(S,this.h^C.h)};function $(C){for(var I=C.g.length+1,S=[],x=0;x<I;x++)S[x]=C.i(x)<<1|C.i(x-1)>>>31;return new u(S,C.h)}function oe(C,I){var S=I>>5;I%=32;for(var x=C.g.length-S,M=[],V=0;V<x;V++)M[V]=0<I?C.i(V+S)>>>I|C.i(V+S+1)<<32-I:C.i(V+S);return new u(M,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vb=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=m,vs=u}).apply(typeof S_<"u"?S_:typeof self<"u"?self:typeof window<"u"?window:{});var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _b,wu,yb,Jc,vp,bb,wb,Eb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,v){return l==Array.prototype||l==Object.prototype||(l[p]=v.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lc=="object"&&Lc];for(var p=0;p<l.length;++p){var v=l[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(l,p){if(p)e:{var v=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var B=l[w];if(!(B in v))break e;v=v[B]}l=l[l.length-1],w=v[l],p=p(w),p!=w&&p!=null&&e(v,l,{configurable:!0,writable:!0,value:p})}}function o(l,p){l instanceof String&&(l+="");var v=0,w=!1,B={next:function(){if(!w&&v<l.length){var q=v++;return{value:p(q,l[q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}i("Array.prototype.values",function(l){return l||function(){return o(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function d(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function f(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function m(l,p,v){return l.call.apply(l.bind,arguments)}function y(l,p,v){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,w),l.apply(p,B)}}return function(){return l.apply(p,arguments)}}function T(l,p,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,T.apply(null,arguments)}function P(l,p){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function N(l,p){function v(){}v.prototype=p.prototype,l.aa=p.prototype,l.prototype=new v,l.prototype.constructor=l,l.Qb=function(w,B,q){for(var ae=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)ae[ut-2]=arguments[ut];return p.prototype[B].apply(w,ae)}}function L(l){const p=l.length;if(0<p){const v=Array(p);for(let w=0;w<p;w++)v[w]=l[w];return v}return[]}function O(l,p){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(d(w)){const B=l.length||0,q=w.length||0;l.length=B+q;for(let ae=0;ae<q;ae++)l[B+ae]=w[ae]}else l.push(w)}}class z{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function H(l){return/^[\s\xa0]*$/.test(l)}function G(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function re(l){return re[" "](l),l}re[" "]=function(){};var $=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function oe(l,p,v){for(const w in l)p.call(v,l[w],w,l)}function C(l,p){for(const v in l)p.call(void 0,l[v],v,l)}function I(l){const p={};for(const v in l)p[v]=l[v];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,p){let v,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(v in w)l[v]=w[v];for(let q=0;q<S.length;q++)v=S[q],Object.prototype.hasOwnProperty.call(w,v)&&(l[v]=w[v])}}function M(l){var p=1;l=l.split(":");const v=[];for(;0<p&&l.length;)v.push(l.shift()),p--;return l.length&&v.push(l.join(":")),v}function V(l){c.setTimeout(()=>{throw l},0)}function A(){var l=Mt;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class De{constructor(){this.h=this.g=null}add(p,v){const w=Fe.get();w.set(p,v),this.h?this.h.next=w:this.g=w,this.h=w}}var Fe=new z(()=>new We,l=>l.reset());class We{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,ot=!1,Mt=new De,Nt=()=>{const l=c.Promise.resolve(void 0);rt=()=>{l.then(zt)}};var zt=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(v){V(v)}var p=Fe;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}ot=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ye(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var Cn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const v=()=>{};c.addEventListener("test",v,p),c.removeEventListener("test",v,p)}catch{}return l}();function At(l,p){if(Ye.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var v=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if($){e:{try{re(p.nodeName);var B=!0;break e}catch{}B=!1}B||(p=null)}}else v=="mouseover"?p=l.fromElement:v=="mouseout"&&(p=l.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ht[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&At.aa.h.call(this)}}N(At,Ye);var Ht={2:"touch",3:"pen",4:"mouse"};At.prototype.h=function(){At.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Qt="closure_listenable_"+(1e6*Math.random()|0),Wt=0;function mn(l,p,v,w,B){this.listener=l,this.proxy=null,this.src=p,this.type=v,this.capture=!!w,this.ha=B,this.key=++Wt,this.da=this.fa=!1}function vr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Nn(l){this.src=l,this.g={},this.h=0}Nn.prototype.add=function(l,p,v,w,B){var q=l.toString();l=this.g[q],l||(l=this.g[q]=[],this.h++);var ae=Dr(l,p,w,B);return-1<ae?(p=l[ae],v||(p.fa=!1)):(p=new mn(p,this.src,q,!!w,B),p.fa=v,l.push(p)),p};function Ln(l,p){var v=p.type;if(v in l.g){var w=l.g[v],B=Array.prototype.indexOf.call(w,p,void 0),q;(q=0<=B)&&Array.prototype.splice.call(w,B,1),q&&(vr(p),l.g[v].length==0&&(delete l.g[v],l.h--))}}function Dr(l,p,v,w){for(var B=0;B<l.length;++B){var q=l[B];if(!q.da&&q.listener==p&&q.capture==!!v&&q.ha==w)return B}return-1}var Lt="closure_lm_"+(1e6*Math.random()|0),Fn={};function wo(l,p,v,w,B){if(Array.isArray(p)){for(var q=0;q<p.length;q++)wo(l,p[q],v,w,B);return null}return v=se(v),l&&l[Qt]?l.K(p,v,f(w)?!!w.capture:!1,B):Zn(l,p,v,!1,w,B)}function Zn(l,p,v,w,B,q){if(!p)throw Error("Invalid event type");var ae=f(B)?!!B.capture:!!B,ut=le(l);if(ut||(l[Lt]=ut=new Nn(l)),v=ut.add(p,v,w,ae,q),v.proxy)return v;if(w=Va(),v.proxy=w,w.src=l,w.listener=v,l.addEventListener)Cn||(B=ae),B===void 0&&(B=!1),l.addEventListener(p.toString(),w,B);else if(l.attachEvent)l.attachEvent(j(p.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Va(){function l(v){return p.call(l.src,l.listener,v)}const p=K;return l}function Ps(l,p,v,w,B){if(Array.isArray(p))for(var q=0;q<p.length;q++)Ps(l,p[q],v,w,B);else w=f(w)?!!w.capture:!!w,v=se(v),l&&l[Qt]?(l=l.i,p=String(p).toString(),p in l.g&&(q=l.g[p],v=Dr(q,v,w,B),-1<v&&(vr(q[v]),Array.prototype.splice.call(q,v,1),q.length==0&&(delete l.g[p],l.h--)))):l&&(l=le(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Dr(p,v,w,B)),(v=-1<l?p[l]:null)&&k(v))}function k(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Qt])Ln(p.i,l);else{var v=l.type,w=l.proxy;p.removeEventListener?p.removeEventListener(v,w,l.capture):p.detachEvent?p.detachEvent(j(v),w):p.addListener&&p.removeListener&&p.removeListener(w),(v=le(p))?(Ln(v,l),v.h==0&&(v.src=null,p[Lt]=null)):vr(l)}}}function j(l){return l in Fn?Fn[l]:Fn[l]="on"+l}function K(l,p){if(l.da)l=!0;else{p=new At(p,this);var v=l.listener,w=l.ha||l.src;l.fa&&k(l),l=v.call(w,p)}return l}function le(l){return l=l[Lt],l instanceof Nn?l:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function se(l){return typeof l=="function"?l:(l[ue]||(l[ue]=function(p){return l.handleEvent(p)}),l[ue])}function pe(){it.call(this),this.i=new Nn(this),this.M=this,this.F=null}N(pe,it),pe.prototype[Qt]=!0,pe.prototype.removeEventListener=function(l,p,v,w){Ps(this,l,p,v,w)};function Ie(l,p){var v,w=l.F;if(w)for(v=[];w;w=w.F)v.push(w);if(l=l.M,w=p.type||p,typeof p=="string")p=new Ye(p,l);else if(p instanceof Ye)p.target=p.target||l;else{var B=p;p=new Ye(w,l),x(p,B)}if(B=!0,v)for(var q=v.length-1;0<=q;q--){var ae=p.g=v[q];B=qe(ae,w,!0,p)&&B}if(ae=p.g=l,B=qe(ae,w,!0,p)&&B,B=qe(ae,w,!1,p)&&B,v)for(q=0;q<v.length;q++)ae=p.g=v[q],B=qe(ae,w,!1,p)&&B}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var v=l.g[p],w=0;w<v.length;w++)vr(v[w]);delete l.g[p],l.h--}}this.F=null},pe.prototype.K=function(l,p,v,w){return this.i.add(String(l),p,!1,v,w)},pe.prototype.L=function(l,p,v,w){return this.i.add(String(l),p,!0,v,w)};function qe(l,p,v,w){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var B=!0,q=0;q<p.length;++q){var ae=p[q];if(ae&&!ae.da&&ae.capture==v){var ut=ae.listener,Yt=ae.ha||ae.src;ae.fa&&Ln(l.i,ae),B=ut.call(Yt,w)!==!1&&B}}return B&&!w.defaultPrevented}function Zt(l,p,v){if(typeof l=="function")v&&(l=T(l,v));else if(l&&typeof l.handleEvent=="function")l=T(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:c.setTimeout(l,p||0)}function _r(l){l.g=Zt(()=>{l.g=null,l.i&&(l.i=!1,_r(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class Un extends it{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(l){it.call(this),this.h=l,this.g={}}N(yr,it);var Mr=[];function Nr(l){oe(l.g,function(p,v){this.g.hasOwnProperty(v)&&k(p)},l),l.g={}}yr.prototype.N=function(){yr.aa.N.call(this),Nr(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var si=c.JSON.stringify,Ui=c.JSON.parse,xs=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Bi(){}Bi.prototype.h=null;function El(l){return l.h||(l.h=l.i())}function Tl(){}var ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Eo(){Ye.call(this,"d")}N(Eo,Ye);function Da(){Ye.call(this,"c")}N(Da,Ye);var oi={},Il=null;function To(){return Il=Il||new pe}oi.La="serverreachability";function Ma(l){Ye.call(this,oi.La,l)}N(Ma,Ye);function Os(l){const p=To();Ie(p,new Ma(p))}oi.STAT_EVENT="statevent";function Al(l,p){Ye.call(this,oi.STAT_EVENT,l),this.stat=p}N(Al,Ye);function un(l){const p=To();Ie(p,new Al(p,l))}oi.Ma="timingevent";function Io(l,p){Ye.call(this,oi.Ma,l),this.size=p}N(Io,Ye);function ks(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},p)}function ai(){this.g=!0}ai.prototype.xa=function(){this.g=!1};function bd(l,p,v,w,B,q){l.info(function(){if(l.g)if(q)for(var ae="",ut=q.split("&"),Yt=0;Yt<ut.length;Yt++){var Je=ut[Yt].split("=");if(1<Je.length){var dt=Je[0];Je=Je[1];var qt=dt.split("_");ae=2<=qt.length&&qt[1]=="type"?ae+(dt+"="+Je+"&"):ae+(dt+"=redacted&")}}else ae=null;else ae=q;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+p+`
`+v+`
`+ae})}function wd(l,p,v,w,B,q,ae){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+p+`
`+v+`
`+q+" "+ae})}function $i(l,p,v,w){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Td(l,v)+(w?" "+w:"")})}function Ed(l,p){l.info(function(){return"TIMEOUT: "+p})}ai.prototype.info=function(){};function Td(l,p){if(!l.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(l=0;l<v.length;l++)if(Array.isArray(v[l])){var w=v[l];if(!(2>w.length)){var B=w[1];if(Array.isArray(B)&&!(1>B.length)){var q=B[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ae=1;ae<B.length;ae++)B[ae]=""}}}}return si(v)}catch{return p}}var Ao={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Na;function Vs(){}N(Vs,Bi),Vs.prototype.g=function(){return new XMLHttpRequest},Vs.prototype.i=function(){return{}},Na=new Vs;function Lr(l,p,v,w){this.j=l,this.i=p,this.l=v,this.R=w||1,this.U=new yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cl}function Cl(){this.i=null,this.g="",this.h=!1}var Rl={},La={};function Fa(l,p,v){l.L=1,l.v=Hi(sr(p)),l.m=v,l.P=!0,Pl(l,null)}function Pl(l,p){l.F=Date.now(),ui(l),l.A=sr(l.v);var v=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),qa(v.i,"t",w),l.C=0,v=l.j.J,l.h=new Cl,l.g=Zl(l.j,v?p:null,!l.m),0<l.O&&(l.M=new Un(T(l.Y,l,l.g),l.O)),p=l.U,v=l.g,w=l.ca;var B="readystatechange";Array.isArray(B)||(B&&(Mr[0]=B.toString()),B=Mr);for(var q=0;q<B.length;q++){var ae=wo(v,B[q],w||p.handleEvent,!1,p.h||p);if(!ae)break;p.g[ae.key]=ae}p=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),Os(),bd(l.i,l.u,l.A,l.l,l.R,l.m)}Lr.prototype.ca=function(l){l=l.target;const p=this.M;p&&ln(l)==3?p.j():this.Y(l)},Lr.prototype.Y=function(l){try{if(l==this.g)e:{const qt=ln(this.g);var p=this.g.Ba();const lr=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Qa(this.g)))){this.J||qt!=4||p==7||(p==8||0>=lr?Os(3):Os(2)),Ua(this);var v=this.g.Z();this.X=v;t:if(Ds(this)){var w=Qa(this.g);l="";var B=w.length,q=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fr(this),Ms(this);var ae="";break t}this.h.i=new c.TextDecoder}for(p=0;p<B;p++)this.h.h=!0,l+=this.h.i.decode(w[p],{stream:!(q&&p==B-1)});w.length=0,this.h.g+=l,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=v==200,wd(this.i,this.u,this.A,this.l,this.R,qt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Yt=this.g;if((ut=Yt.g?Yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(ut)){var Je=ut;break t}}Je=null}if(v=Je)$i(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,So(this,v);else{this.o=!1,this.s=3,un(12),Fr(this),Ms(this);break e}}if(this.P){v=!0;let Bn;for(;!this.J&&this.C<ae.length;)if(Bn=Id(this,ae),Bn==La){qt==4&&(this.s=4,un(14),v=!1),$i(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==Rl){this.s=4,un(15),$i(this.i,this.l,ae,"[Invalid Chunk]"),v=!1;break}else $i(this.i,this.l,Bn,null),So(this,Bn);if(Ds(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||ae.length!=0||this.h.h||(this.s=1,un(16),v=!1),this.o=this.o&&v,!v)$i(this.i,this.l,ae,"[Invalid Chunked Response]"),Fr(this),Ms(this);else if(0<ae.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),ur(dt),dt.M=!0,un(11))}}else $i(this.i,this.l,ae,null),So(this,ae);qt==4&&Fr(this),this.o&&!this.J&&(qt==4?Et(this.j,this):(this.o=!1,ui(this)))}else Za(this.g),v==400&&0<ae.indexOf("Unknown SID")?(this.s=3,un(12)):(this.s=0,un(13)),Fr(this),Ms(this)}}}catch{}finally{}};function Ds(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Id(l,p){var v=l.C,w=p.indexOf(`
`,v);return w==-1?La:(v=Number(p.substring(v,w)),isNaN(v)?Rl:(w+=1,w+v>p.length?La:(p=p.slice(w,w+v),l.C=w+v,p)))}Lr.prototype.cancel=function(){this.J=!0,Fr(this)};function ui(l){l.S=Date.now()+l.I,xl(l,l.I)}function xl(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ks(T(l.ba,l),p)}function Ua(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Lr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ed(this.i,this.A),this.L!=2&&(Os(),un(17)),Fr(this),this.s=2,Ms(this)):xl(this,this.S-l)};function Ms(l){l.j.G==0||l.J||Et(l.j,l)}function Fr(l){Ua(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,Nr(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function So(l,p){try{var v=l.j;if(v.G!=0&&(v.g==l||Ba(v.h,l))){if(!l.K&&Ba(v.h,l)&&v.G==3){try{var w=v.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<l.F)Gi(v),Fs(v);else break e;ko(v),un(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=ks(T(v.Za,v),6e3));if(1>=Dl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else wr(v,11)}else if((l.K||v.g==l)&&Gi(v),!H(p))for(B=v.Da.g.parse(p),p=0;p<B.length;p++){let Je=B[p];if(v.T=Je[0],Je=Je[1],v.G==2)if(Je[0]=="c"){v.K=Je[1],v.ia=Je[2];const dt=Je[3];dt!=null&&(v.la=dt,v.j.info("VER="+v.la));const qt=Je[4];qt!=null&&(v.Aa=qt,v.j.info("SVER="+v.Aa));const lr=Je[5];lr!=null&&typeof lr=="number"&&0<lr&&(w=1.5*lr,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Bn=l.g;if(Bn){const zs=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var q=w.h;q.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Co(q,q.h),q.h=null))}if(w.D){const Xa=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xa&&(w.ya=Xa,yt(w.I,w.D,Xa))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-l.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var ae=l;if(w.qa=Vo(w,w.J?w.ia:null,w.W),ae.K){ja(w.h,ae);var ut=ae,Yt=w.L;Yt&&(ut.I=Yt),ut.B&&(Ua(ut),ui(ut)),w.g=ae}else Kl(w);0<v.i.length&&Us(v)}else Je[0]!="stop"&&Je[0]!="close"||wr(v,7);else v.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?wr(v,7):Oo(v):Je[0]!="noop"&&v.l&&v.l.ta(Je),v.v=0)}}Os(4)}catch{}}var Ol=class{constructor(l,p){this.g=l,this.map=p}};function kl(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vl(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Dl(l){return l.h?1:l.g?l.g.size:0}function Ba(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Co(l,p){l.g?l.g.add(p):l.h=p}function ja(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}kl.prototype.cancel=function(){if(this.i=$a(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function $a(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const v of l.g.values())p=p.concat(v.D);return p}return L(l.i)}function za(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(d(l)){for(var p=[],v=l.length,w=0;w<v;w++)p.push(l[w]);return p}p=[],v=0;for(w in l)p[v++]=l[w];return p}function Ad(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(d(l)||typeof l=="string"){var p=[];l=l.length;for(var v=0;v<l;v++)p.push(v);return p}p=[],v=0;for(const w in l)p[v++]=w;return p}}}function Ha(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(d(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var v=Ad(l),w=za(l),B=w.length,q=0;q<B;q++)p.call(void 0,w[q],v&&v[q],l)}var Ns=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ml(l,p){if(l){l=l.split("&");for(var v=0;v<l.length;v++){var w=l[v].indexOf("="),B=null;if(0<=w){var q=l[v].substring(0,w);B=l[v].substring(w+1)}else q=l[v];p(q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function li(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof li){this.h=l.h,Ls(this,l.j),this.o=l.o,this.g=l.g,zi(this,l.s),this.l=l.l;var p=l.i,v=new Wi;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Nl(this,v),this.m=l.m}else l&&(p=String(l).match(Ns))?(this.h=!1,Ls(this,p[1]||"",!0),this.o=ci(p[2]||""),this.g=ci(p[3]||"",!0),zi(this,p[4]),this.l=ci(p[5]||"",!0),Nl(this,p[6]||"",!0),this.m=ci(p[7]||"")):(this.h=!1,this.i=new Wi(null,this.h))}li.prototype.toString=function(){var l=[],p=this.j;p&&l.push(or(p,Wa,!0),":");var v=this.g;return(v||p=="file")&&(l.push("//"),(p=this.o)&&l.push(or(p,Wa,!0),"@"),l.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&l.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(or(v,v.charAt(0)=="/"?Fl:Sd,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",or(v,Bl)),l.join("")};function sr(l){return new li(l)}function Ls(l,p,v){l.j=v?ci(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function zi(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function Nl(l,p,v){p instanceof Wi?(l.i=p,Cd(l.i,l.h)):(v||(p=or(p,Ul)),l.i=new Wi(p,l.h))}function yt(l,p,v){l.i.set(p,v)}function Hi(l){return yt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ci(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function or(l,p,v){return typeof l=="string"?(l=encodeURI(l).replace(p,Ll),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ll(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Wa=/[#\/\?@]/g,Sd=/[#\?:]/g,Fl=/[#\?]/g,Ul=/[#\?@]/g,Bl=/#/g;function Wi(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Ur(l){l.g||(l.g=new Map,l.h=0,l.i&&Ml(l.i,function(p,v){l.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}n=Wi.prototype,n.add=function(l,p){Ur(this),this.i=null,l=qi(this,l);var v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(p),this.h+=1,this};function jl(l,p){Ur(l),p=qi(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function $l(l,p){return Ur(l),p=qi(l,p),l.g.has(p)}n.forEach=function(l,p){Ur(this),this.g.forEach(function(v,w){v.forEach(function(B){l.call(p,B,w,this)},this)},this)},n.na=function(){Ur(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let w=0;w<p.length;w++){const B=l[w];for(let q=0;q<B.length;q++)v.push(p[w])}return v},n.V=function(l){Ur(this);let p=[];if(typeof l=="string")$l(this,l)&&(p=p.concat(this.g.get(qi(this,l))));else{l=Array.from(this.g.values());for(let v=0;v<l.length;v++)p=p.concat(l[v])}return p},n.set=function(l,p){return Ur(this),this.i=null,l=qi(this,l),$l(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function qa(l,p,v){jl(l,p),0<v.length&&(l.i=null,l.g.set(qi(l,p),L(v)),l.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var w=p[v];const q=encodeURIComponent(String(w)),ae=this.V(w);for(w=0;w<ae.length;w++){var B=q;ae[w]!==""&&(B+="="+encodeURIComponent(String(ae[w]))),l.push(B)}}return this.i=l.join("&")};function qi(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Cd(l,p){p&&!l.j&&(Ur(l),l.i=null,l.g.forEach(function(v,w){var B=w.toLowerCase();w!=B&&(jl(this,w),qa(this,B,v))},l)),l.j=p}function Rd(l,p){const v=new ai;if(c.Image){const w=new Image;w.onload=P(ar,v,"TestLoadImage: loaded",!0,p,w),w.onerror=P(ar,v,"TestLoadImage: error",!1,p,w),w.onabort=P(ar,v,"TestLoadImage: abort",!1,p,w),w.ontimeout=P(ar,v,"TestLoadImage: timeout",!1,p,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else p(!1)}function Pd(l,p){const v=new ai,w=new AbortController,B=setTimeout(()=>{w.abort(),ar(v,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:w.signal}).then(q=>{clearTimeout(B),q.ok?ar(v,"TestPingServer: ok",!0,p):ar(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(B),ar(v,"TestPingServer: error",!1,p)})}function ar(l,p,v,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(v)}catch{}}function xd(){this.g=new xs}function Od(l,p,v){const w=v||"";try{Ha(l,function(B,q){let ae=B;f(B)&&(ae=si(B)),p.push(w+q+"="+encodeURIComponent(ae))})}catch(B){throw p.push(w+"type="+encodeURIComponent("_badmap")),B}}function Ro(l){this.l=l.Ub||null,this.j=l.eb||!1}N(Ro,Bi),Ro.prototype.g=function(){return new Po(this.l,this.j)},Ro.prototype.i=function(l){return function(){return l}}({});function Po(l,p){pe.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Po,pe),n=Po.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,st(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||c).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,at(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,st(this)),this.g&&(this.readyState=3,st(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zl(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function zl(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?at(this):st(this),this.readyState==3&&zl(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,at(this))},n.Qa=function(l){this.g&&(this.response=l,at(this))},n.ga=function(){this.g&&at(this)};function at(l){l.readyState=4,l.l=null,l.j=null,l.v=null,st(l)}n.setRequestHeader=function(l,p){this.u.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=p.next();return l.join(`\r
`)};function st(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Hl(l){let p="";return oe(l,function(v,w){p+=w,p+=":",p+=v,p+=`\r
`}),p}function Ga(l,p,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Hl(v),typeof l=="string"?v!=null&&encodeURIComponent(String(v)):yt(l,p,v))}function St(l){pe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(St,pe);var kd=/^https?$/i,Vd=["POST","PUT"];n=St.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,p,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Na.g(),this.v=this.o?El(this.o):El(Na),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(q){Wl(this,q);return}if(l=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)v.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const q of w.keys())v.set(q,w.get(q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),B=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Vd,p,void 0))||w||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ae]of v)this.g.setRequestHeader(q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xo(this),this.u=!0,this.g.send(l),this.u=!1}catch(q){Wl(this,q)}};function Wl(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,Ka(l),Ot(l)}function Ka(l){l.A||(l.A=!0,Ie(l,"complete"),Ie(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ie(this,"complete"),Ie(this,"abort"),Ot(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ot(this,!0)),St.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ql(this):this.bb())},n.bb=function(){ql(this)};function ql(l){if(l.h&&typeof u<"u"&&(!l.v[1]||ln(l)!=4||l.Z()!=2)){if(l.u&&ln(l)==4)Zt(l.Ea,0,l);else if(Ie(l,"readystatechange"),ln(l)==4){l.h=!1;try{const ae=l.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var w;if(w=ae===0){var B=String(l.D).match(Ns)[1]||null;!B&&c.self&&c.self.location&&(B=c.self.location.protocol.slice(0,-1)),w=!kd.test(B?B.toLowerCase():"")}v=w}if(v)Ie(l,"complete"),Ie(l,"success");else{l.m=6;try{var q=2<ln(l)?l.g.statusText:""}catch{q=""}l.l=q+" ["+l.Z()+"]",Ka(l)}}finally{Ot(l)}}}}function Ot(l,p){if(l.g){xo(l);const v=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||Ie(l,"ready");try{v.onreadystatechange=w}catch{}}}function xo(l){l.I&&(c.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function ln(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),Ui(p)}};function Qa(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Za(l){const p={};l=(l.g&&2<=ln(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(H(l[w]))continue;var v=M(l[w]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=p[B]||[];p[B]=q,q.push(v)}C(p,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sn(l,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||p}function Ya(l){this.Aa=0,this.i=[],this.j=new ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sn("baseRetryDelayMs",5e3,l),this.cb=sn("retryDelaySeedMs",1e4,l),this.Wa=sn("forwardChannelMaxRetries",2,l),this.wa=sn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new kl(l&&l.concurrentRequestLimit),this.Da=new xd,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ya.prototype,n.la=8,n.G=1,n.connect=function(l,p,v,w){un(0),this.W=l,this.H=p||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Vo(this,null,this.W),Us(this)};function Oo(l){if(Ja(l),l.G==3){var p=l.U++,v=sr(l.I);if(yt(v,"SID",l.K),yt(v,"RID",p),yt(v,"TYPE","terminate"),Bs(l,v),p=new Lr(l,l.j,p),p.L=2,p.v=Hi(sr(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&c.Image&&(new Image().src=p.v,v=!0),v||(p.g=Zl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ui(p)}Ql(l)}function Fs(l){l.g&&(ur(l),l.g.cancel(),l.g=null)}function Ja(l){Fs(l),l.u&&(c.clearTimeout(l.u),l.u=null),Gi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Us(l){if(!Vl(l.h)&&!l.s){l.s=!0;var p=l.Ga;rt||Nt(),ot||(rt(),ot=!0),Mt.add(p,l),l.B=0}}function Gl(l,p){return Dl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ks(T(l.Ga,l,p),br(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const B=new Lr(this,this.j,l);let q=this.o;if(this.S&&(q?(q=I(q),x(q,this.S)):q=this.S),this.m!==null||this.O||(B.H=q,q=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=Rn(this,B,p),v=sr(this.I),yt(v,"RID",l),yt(v,"CVER",22),this.D&&yt(v,"X-HTTP-Session-Id",this.D),Bs(this,v),q&&(this.O?p="headers="+encodeURIComponent(String(Hl(q)))+"&"+p:this.m&&Ga(v,this.m,q)),Co(this.h,B),this.Ua&&yt(v,"TYPE","init"),this.P?(yt(v,"$req",p),yt(v,"SID","null"),B.T=!0,Fa(B,v,null)):Fa(B,v,p),this.G=2}}else this.G==3&&(l?vn(this,l):this.i.length==0||Vl(this.h)||vn(this))};function vn(l,p){var v;p?v=p.l:v=l.U++;const w=sr(l.I);yt(w,"SID",l.K),yt(w,"RID",v),yt(w,"AID",l.T),Bs(l,w),l.m&&l.o&&Ga(w,l.m,l.o),v=new Lr(l,l.j,v,l.B+1),l.m===null&&(v.H=l.o),p&&(l.i=p.D.concat(l.i)),p=Rn(l,v,1e3),v.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Co(l.h,v),Fa(v,w,p)}function Bs(l,p){l.H&&oe(l.H,function(v,w){yt(p,w,v)}),l.l&&Ha({},function(v,w){yt(p,w,v)})}function Rn(l,p,v){v=Math.min(l.i.length,v);var w=l.l?T(l.l.Na,l.l,l):null;e:{var B=l.i;let q=-1;for(;;){const ae=["count="+v];q==-1?0<v?(q=B[0].g,ae.push("ofs="+q)):q=0:ae.push("ofs="+q);let ut=!0;for(let Yt=0;Yt<v;Yt++){let Je=B[Yt].g;const dt=B[Yt].map;if(Je-=q,0>Je)q=Math.max(0,B[Yt].g-100),ut=!1;else try{Od(dt,ae,"req"+Je+"_")}catch{w&&w(dt)}}if(ut){w=ae.join("&");break e}}}return l=l.i.splice(0,v),p.D=l,w}function Kl(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;rt||Nt(),ot||(rt(),ot=!0),Mt.add(p,l),l.v=0}}function ko(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ks(T(l.Fa,l),br(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,js(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ks(T(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,un(10),Fs(this),js(this))};function ur(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function js(l){l.g=new Lr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=sr(l.qa);yt(p,"RID","rpc"),yt(p,"SID",l.K),yt(p,"AID",l.T),yt(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&yt(p,"TO",l.ja),yt(p,"TYPE","xmlhttp"),Bs(l,p),l.m&&l.o&&Ga(p,l.m,l.o),l.L&&(l.g.I=l.L);var v=l.g;l=l.ia,v.L=1,v.v=Hi(sr(p)),v.m=null,v.P=!0,Pl(v,l)}n.Za=function(){this.C!=null&&(this.C=null,Fs(this),ko(this),un(19))};function Gi(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Et(l,p){var v=null;if(l.g==p){Gi(l),ur(l),l.g=null;var w=2}else if(Ba(l.h,p))v=p.D,ja(l.h,p),w=1;else return;if(l.G!=0){if(p.o)if(w==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var B=l.B;w=To(),Ie(w,new Io(w,v)),Us(l)}else Kl(l);else if(B=p.s,B==3||B==0&&0<p.X||!(w==1&&Gl(l,p)||w==2&&ko(l)))switch(v&&0<v.length&&(p=l.h,p.i=p.i.concat(v)),B){case 1:wr(l,5);break;case 4:wr(l,10);break;case 3:wr(l,6);break;default:wr(l,2)}}}function br(l,p){let v=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(v*=2),v*p}function wr(l,p){if(l.j.info("Error code "+p),p==2){var v=T(l.fb,l),w=l.Xa;const B=!w;w=new li(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ls(w,"https"),Hi(w),B?Rd(w.toString(),v):Pd(w.toString(),v)}else un(2);l.G=0,l.l&&l.l.sa(p),Ql(l),Ja(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function Ql(l){if(l.G=0,l.ka=[],l.l){const p=$a(l.h);(p.length!=0||l.i.length!=0)&&(O(l.ka,p),O(l.ka,l.i),l.h.i.length=0,L(l.i),l.i.length=0),l.l.ra()}}function Vo(l,p,v){var w=v instanceof li?sr(v):new li(v);if(w.g!="")p&&(w.g=p+"."+w.g),zi(w,w.s);else{var B=c.location;w=B.protocol,p=p?p+"."+B.hostname:B.hostname,B=+B.port;var q=new li(null);w&&Ls(q,w),p&&(q.g=p),B&&zi(q,B),v&&(q.l=v),w=q}return v=l.D,p=l.ya,v&&p&&yt(w,v,p),yt(w,"VER",l.la),Bs(l,w),w}function Zl(l,p,v){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new St(new Ro({eb:v})):new St(l.pa),p.Ha(l.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yl(){}n=Yl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Do(){}Do.prototype.g=function(l,p){return new _n(l,p)};function _n(l,p){pe.call(this),this.g=new Ya(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!H(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!H(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Ki(this)}N(_n,pe),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Oo(this.g)},_n.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.u&&(v={},v.__data__=si(l),l=v);p.i.push(new Ol(p.Ya++,l)),p.G==3&&Us(p)},_n.prototype.N=function(){this.g.l=null,delete this.j,Oo(this.g),delete this.g,_n.aa.N.call(this)};function $s(l){Eo.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const v in p){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}N($s,Eo);function hi(){Da.call(this),this.status=1}N(hi,Da);function Ki(l){this.g=l}N(Ki,Yl),Ki.prototype.ua=function(){Ie(this.g,"a")},Ki.prototype.ta=function(l){Ie(this.g,new $s(l))},Ki.prototype.sa=function(l){Ie(this.g,new hi)},Ki.prototype.ra=function(){Ie(this.g,"b")},Do.prototype.createWebChannel=Do.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,Eb=function(){return new Do},wb=function(){return To()},bb=oi,vp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ao.NO_ERROR=0,Ao.TIMEOUT=8,Ao.HTTP_ERROR=6,Jc=Ao,Sl.COMPLETE="complete",yb=Sl,Tl.EventType=ji,ji.OPEN="a",ji.CLOSE="b",ji.ERROR="c",ji.MESSAGE="d",pe.prototype.listen=pe.prototype.K,wu=Tl,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,_b=St}).apply(typeof Lc<"u"?Lc:typeof self<"u"?self:typeof window<"u"?window:{});const C_="@firebase/firestore",R_="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new Qp("@firebase/firestore");function Zo(){return lo.logLevel}function me(n,...e){if(lo.logLevel<=Qe.DEBUG){const t=e.map(ag);lo.debug(`Firestore (${Ra}): ${n}`,...t)}}function Di(n,...e){if(lo.logLevel<=Qe.ERROR){const t=e.map(ag);lo.error(`Firestore (${Ra}): ${n}`,...t)}}function ga(n,...e){if(lo.logLevel<=Qe.WARN){const t=e.map(ag);lo.warn(`Firestore (${Ra}): ${n}`,...t)}}function ag(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Tb(n,r,t)}function Tb(n,e,t){let r=`FIRESTORE (${Ra}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Di(r),new Error(r)}function vt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Tb(e,i,r)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Tn.UNAUTHENTICATED))}shutdown(){}}class rV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iV{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vt(this.o===void 0,42304);let r=this.i;const i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ci,e.enqueueRetryable(()=>i(this.currentUser))};const u=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ci)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt(typeof r.accessToken=="string",31837,{l:r}),new Ib(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class sV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new sV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class P_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vt(this.o===void 0,3512);const r=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new P_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new P_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=uV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function He(n,e){return n<e?-1:n>e?1:0}function _p(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return He(r,i);{const o=Ab(),u=lV(o.encode(x_(n,t)),o.encode(x_(e,t)));return u!==0?u:He(r,i)}}t+=r>65535?2:1}return He(n.length,e.length)}function x_(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function lV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return He(n[t],e[t]);return He(n.length,e.length)}function ma(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=-62135596800,k_=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*k_);return new nn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<O_)throw new be(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/k_}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-O_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new nn(0,0))}static max(){return new Ve(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="__name__";class zr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=zr.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return He(e.length,t.length)}static compareSegments(e,t){const r=zr.isNumericId(e),i=zr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?zr.extractNumericId(e).compare(zr.extractNumericId(t)):_p(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class Ct extends zr{construct(e,t,r){return new Ct(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ct(t)}static emptyPath(){return new Ct([])}}const cV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends zr{construct(e,t,r){return new pn(e,t,r)}static isValidIdentifier(e){return cV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===V_}static keyField(){return new pn([V_])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new be(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new be(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new be(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else c==="`"?(u=!u,i++):c!=="."||u?(r+=c,i++):(o(),i++)}if(o(),u)throw new be(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(Ct.fromString(e))}static fromName(e){return new Te(Ct.fromString(e).popFirst(5))}static empty(){return new Te(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new Ct(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=-1;function hV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new nn(t+1,0):new nn(t,r));return new ys(i,Te.empty(),e)}function dV(n){return new ys(n.readTime,n.key,Uu)}class ys{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ys(Ve.min(),Te.empty(),Uu)}static max(){return new ys(Ve.max(),Te.empty(),Uu)}}function fV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==pV)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,r)=>{t(e)})}static reject(e){return new J((t,r)=>{r(e)})}static waitFor(e){return new J((t,r)=>{let i=0,o=0,u=!1;e.forEach(c=>{++i,c.next(()=>{++o,u&&o===i&&t()},d=>r(d))}),u=!0,o===i&&t()})}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next(i=>i?J.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new J((r,i)=>{const o=e.length,u=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next(m=>{u[f]=m,++c,c===o&&r(u)},m=>i(m))}})}static doWhile(e,t){return new J((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function mV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Jh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug=-1;function Xh(n){return n==null}function yh(n){return n===0&&1/n==-1/0}function vV(n){return typeof n=="number"&&Number.isInteger(n)&&!yh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="";function _V(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=D_(e)),e=yV(n.get(t),e);return D_(e)}function yV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case Cb:t+="";break;default:t+=o}}return t}function D_(n){return n+Cb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Rb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.comparator=e,this.root=t||dn.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}}class Fc{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??dn.RED,this.left=i??dn.EMPTY,this.right=o??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new dn(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return dn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new N_(this.data.getIterator())}getIteratorFrom(e){return new N_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rn(this.comparator);return t.data=e,t}}class N_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Pr([])}unionWith(e){let t=new rn(pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Pr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ma(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pb("Invalid base64 string: "+o):o}}(e);return new gn(t)}static fromUint8Array(e){const t=function(i){let o="";for(let u=0;u<i.length;++u)o+=String.fromCharCode(i[u]);return o}(e);return new gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const bV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(n){if(vt(!!n,39018),typeof n=="string"){let e=0;const t=bV.exec(n);if(vt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(n.seconds),nanos:Bt(n.nanos)}}function Bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ws(n){return typeof n=="string"?gn.fromBase64String(n):gn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="server_timestamp",Ob="__type__",kb="__previous_value__",Vb="__local_write_time__";function lg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ob])===null||t===void 0?void 0:t.stringValue)===xb}function ed(n){const e=n.mapValue.fields[kb];return lg(e)?ed(e):e}function Bu(n){const e=bs(n.mapValue.fields[Vb].timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e,t,r,i,o,u,c,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=m}}const bh="(default)";class ju{constructor(e,t){this.projectId=e,this.database=t||bh}static empty(){return new ju("","")}get isDefaultDatabase(){return this.database===bh}isEqual(e){return e instanceof ju&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="__type__",EV="__max__",Uc={mapValue:{}},Mb="__vector__",wh="value";function Es(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lg(n)?4:IV(n)?9007199254740991:TV(n)?10:11:Pe(28295,{value:n})}function ti(n,e){if(n===e)return!0;const t=Es(n);if(t!==Es(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bu(n).isEqual(Bu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const u=bs(i.timestampValue),c=bs(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ws(i.bytesValue).isEqual(ws(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Bt(i.geoPointValue.latitude)===Bt(o.geoPointValue.latitude)&&Bt(i.geoPointValue.longitude)===Bt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Bt(i.integerValue)===Bt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const u=Bt(i.doubleValue),c=Bt(o.doubleValue);return u===c?yh(u)===yh(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return ma(n.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(i,o){const u=i.mapValue.fields||{},c=o.mapValue.fields||{};if(M_(u)!==M_(c))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(c[d]===void 0||!ti(u[d],c[d])))return!1;return!0}(n,e);default:return Pe(52216,{left:n})}}function $u(n,e){return(n.values||[]).find(t=>ti(t,e))!==void 0}function va(n,e){if(n===e)return 0;const t=Es(n),r=Es(e);if(t!==r)return He(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Bt(o.integerValue||o.doubleValue),d=Bt(u.integerValue||u.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return L_(n.timestampValue,e.timestampValue);case 4:return L_(Bu(n),Bu(e));case 5:return _p(n.stringValue,e.stringValue);case 6:return function(o,u){const c=ws(o),d=ws(u);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),d=u.split("/");for(let f=0;f<c.length&&f<d.length;f++){const m=He(c[f],d[f]);if(m!==0)return m}return He(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=He(Bt(o.latitude),Bt(u.latitude));return c!==0?c:He(Bt(o.longitude),Bt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return F_(n.arrayValue,e.arrayValue);case 10:return function(o,u){var c,d,f,m;const y=o.fields||{},T=u.fields||{},P=(c=y[wh])===null||c===void 0?void 0:c.arrayValue,N=(d=T[wh])===null||d===void 0?void 0:d.arrayValue,L=He(((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0,((m=N==null?void 0:N.values)===null||m===void 0?void 0:m.length)||0);return L!==0?L:F_(P,N)}(n.mapValue,e.mapValue);case 11:return function(o,u){if(o===Uc.mapValue&&u===Uc.mapValue)return 0;if(o===Uc.mapValue)return 1;if(u===Uc.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=u.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let y=0;y<d.length&&y<m.length;++y){const T=_p(d[y],m[y]);if(T!==0)return T;const P=va(c[d[y]],f[m[y]]);if(P!==0)return P}return He(d.length,m.length)}(n.mapValue,e.mapValue);default:throw Pe(23264,{Pe:t})}}function L_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=bs(n),r=bs(e),i=He(t.seconds,r.seconds);return i!==0?i:He(t.nanos,r.nanos)}function F_(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=va(t[i],r[i]);if(o)return o}return He(t.length,r.length)}function _a(n){return yp(n)}function yp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=bs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ws(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=yp(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const u of r)o?o=!1:i+=",",i+=`${u}:${yp(t.fields[u])}`;return i+"}"}(n.mapValue):Pe(61005,{value:n})}function Xc(n){switch(Es(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ed(n);return e?16+Xc(e):16;case 5:return 2*n.stringValue.length;case 6:return ws(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Xc(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return vo(r.fields,(o,u)=>{i+=o.length+Xc(u)}),i}(n.mapValue);default:throw Pe(13486,{value:n})}}function bp(n){return!!n&&"integerValue"in n}function cg(n){return!!n&&"arrayValue"in n}function U_(n){return!!n&&"nullValue"in n}function B_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eh(n){return!!n&&"mapValue"in n}function TV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Db])===null||t===void 0?void 0:t.stringValue)===Mb}function Ou(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ou(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ou(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===EV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.value=e}static empty(){return new mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!eh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ou(t)}setAll(e){let t=pn.emptyPath(),r={},i=[];e.forEach((u,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=c.popLast()}u?r[c.lastSegment()]=Ou(u):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());eh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];eh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){vo(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new mr(Ou(this.value))}}function Nb(n){const e=[];return vo(n.fields,(t,r)=>{const i=new pn([t]);if(eh(r)){const o=Nb(r.mapValue).fields;if(o.length===0)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)}),new Pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,t,r,i,o,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new In(e,0,Ve.min(),Ve.min(),Ve.min(),mr.empty(),0)}static newFoundDocument(e,t,r,i){return new In(e,1,t,Ve.min(),r,i,0)}static newNoDocument(e,t){return new In(e,2,t,Ve.min(),Ve.min(),mr.empty(),0)}static newUnknownDocument(e,t){return new In(e,3,t,Ve.min(),Ve.min(),mr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t){this.position=e,this.inclusive=t}}function j_(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],u=n.position[i];if(o.field.isKeyField()?r=Te.comparator(Te.fromName(u.referenceValue),t.key):r=va(u,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ti(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t="asc"){this.field=e,this.dir=t}}function AV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{}class tn extends Lb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new CV(e,t,r):t==="array-contains"?new xV(e,r):t==="in"?new OV(e,r):t==="not-in"?new kV(e,r):t==="array-contains-any"?new VV(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new RV(e,r):new PV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(va(t,this.value)):t!==null&&Es(this.value)===Es(t)&&this.matchesComparison(va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends Lb{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ni(e,t)}matches(e){return Fb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Fb(n){return n.op==="and"}function Ub(n){return SV(n)&&Fb(n)}function SV(n){for(const e of n.filters)if(e instanceof ni)return!1;return!0}function wp(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+_a(n.value);if(Ub(n))return n.filters.map(e=>wp(e)).join(",");{const e=n.filters.map(t=>wp(t)).join(",");return`${n.op}(${e})`}}function Bb(n,e){return n instanceof tn?function(r,i){return i instanceof tn&&r.op===i.op&&r.field.isEqual(i.field)&&ti(r.value,i.value)}(n,e):n instanceof ni?function(r,i){return i instanceof ni&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,u,c)=>o&&Bb(u,i.filters[c]),!0):!1}(n,e):void Pe(19439)}function jb(n){return n instanceof tn?function(t){return`${t.field.canonicalString()} ${t.op} ${_a(t.value)}`}(n):n instanceof ni?function(t){return t.op.toString()+" {"+t.getFilters().map(jb).join(" ,")+"}"}(n):"Filter"}class CV extends tn{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class RV extends tn{constructor(e,t){super(e,"in",t),this.keys=$b("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class PV extends tn{constructor(e,t){super(e,"not-in",t),this.keys=$b("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $b(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Te.fromName(r.referenceValue))}class xV extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cg(t)&&$u(t.arrayValue,this.value)}}class OV extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$u(this.value.arrayValue,t)}}class kV extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$u(this.value.arrayValue,t)}}class VV extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$u(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,t=null,r=[],i=[],o=null,u=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=c,this.Ie=null}}function z_(n,e=null,t=[],r=[],i=null,o=null,u=null){return new DV(n,e,t,r,i,o,u)}function hg(n){const e=Ne(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>wp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Xh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_a(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_a(r)).join(",")),e.Ie=t}return e.Ie}function dg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Bb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$_(n.startAt,e.startAt)&&$_(n.endAt,e.endAt)}function Ep(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t=null,r=[],i=[],o=null,u="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=c,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function MV(n,e,t,r,i,o,u,c){return new td(n,e,t,r,i,o,u,c)}function fg(n){return new td(n)}function H_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NV(n){return n.collectionGroup!==null}function ku(n){const e=Ne(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new rn(pn.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Th(o,r))}),t.has(pn.keyField().canonicalString())||e.Ee.push(new Th(pn.keyField(),r))}return e.Ee}function Yr(n){const e=Ne(n);return e.de||(e.de=LV(e,ku(n))),e.de}function LV(n,e){if(n.limitType==="F")return z_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Th(i.field,o)});const t=n.endAt?new Eh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Eh(n.startAt.position,n.startAt.inclusive):null;return z_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Tp(n,e,t){return new td(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nd(n,e){return dg(Yr(n),Yr(e))&&n.limitType===e.limitType}function zb(n){return`${hg(Yr(n))}|lt:${n.limitType}`}function Yo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>jb(i)).join(", ")}]`),Xh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>_a(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>_a(i)).join(",")),`Target(${r})`}(Yr(n))}; limitType=${n.limitType})`}function rd(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of ku(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(u,c,d){const f=j_(u,c,d);return u.inclusive?f<=0:f<0}(r.startAt,ku(r),i)||r.endAt&&!function(u,c,d){const f=j_(u,c,d);return u.inclusive?f>=0:f>0}(r.endAt,ku(r),i))}(n,e)}function FV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Hb(n){return(e,t)=>{let r=!1;for(const i of ku(n)){const o=UV(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function UV(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):function(o,u,c){const d=u.data.field(o),f=c.data.field(o);return d!==null&&f!==null?va(d,f):Pe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Rb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=new xt(Te.comparator);function Mi(){return BV}const Wb=new xt(Te.comparator);function Eu(...n){let e=Wb;for(const t of n)e=e.insert(t.key,t);return e}function qb(n){let e=Wb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xs(){return Vu()}function Gb(){return Vu()}function Vu(){return new _o(n=>n.toString(),(n,e)=>n.isEqual(e))}const jV=new xt(Te.comparator),$V=new rn(Te.comparator);function Ze(...n){let e=$V;for(const t of n)e=e.add(t);return e}const zV=new rn(He);function HV(){return zV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function Kb(n){return{integerValue:""+n}}function WV(n,e){return vV(e)?Kb(e):pg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(){this._=void 0}}function qV(n,e,t){return n instanceof Ih?function(i,o){const u={fields:{[Ob]:{stringValue:xb},[Vb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&lg(o)&&(o=ed(o)),o&&(u.fields[kb]=o),{mapValue:u}}(t,e):n instanceof zu?Zb(n,e):n instanceof Hu?Yb(n,e):function(i,o){const u=Qb(i,o),c=W_(u)+W_(i.Re);return bp(u)&&bp(i.Re)?Kb(c):pg(i.serializer,c)}(n,e)}function GV(n,e,t){return n instanceof zu?Zb(n,e):n instanceof Hu?Yb(n,e):t}function Qb(n,e){return n instanceof Ah?function(r){return bp(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Ih extends id{}class zu extends id{constructor(e){super(),this.elements=e}}function Zb(n,e){const t=Jb(e);for(const r of n.elements)t.some(i=>ti(i,r))||t.push(r);return{arrayValue:{values:t}}}class Hu extends id{constructor(e){super(),this.elements=e}}function Yb(n,e){let t=Jb(e);for(const r of n.elements)t=t.filter(i=>!ti(i,r));return{arrayValue:{values:t}}}class Ah extends id{constructor(e,t){super(),this.serializer=e,this.Re=t}}function W_(n){return Bt(n.integerValue||n.doubleValue)}function Jb(n){return cg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function KV(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof zu&&i instanceof zu||r instanceof Hu&&i instanceof Hu?ma(r.elements,i.elements,ti):r instanceof Ah&&i instanceof Ah?ti(r.Re,i.Re):r instanceof Ih&&i instanceof Ih}(n.transform,e.transform)}class QV{constructor(e,t){this.version=e,this.transformResults=t}}class Ri{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ri}static exists(e){return new Ri(void 0,e)}static updateTime(e){return new Ri(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function th(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class sd{}function Xb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tw(n.key,Ri.none()):new gl(n.key,n.data,Ri.none());{const t=n.data,r=mr.empty();let i=new rn(pn.comparator);for(let o of e.fields)if(!i.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?r.delete(o):r.set(o,u),i=i.add(o)}return new yo(n.key,r,new Pr(i.toArray()),Ri.none())}}function ZV(n,e,t){n instanceof gl?function(i,o,u){const c=i.value.clone(),d=G_(i.fieldTransforms,o,u.transformResults);c.setAll(d),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof yo?function(i,o,u){if(!th(i.precondition,o))return void o.convertToUnknownDocument(u.version);const c=G_(i.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(ew(i)),d.setAll(c),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):function(i,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Du(n,e,t,r){return n instanceof gl?function(o,u,c,d){if(!th(o.precondition,u))return c;const f=o.value.clone(),m=K_(o.fieldTransforms,d,u);return f.setAll(m),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof yo?function(o,u,c,d){if(!th(o.precondition,u))return c;const f=K_(o.fieldTransforms,d,u),m=u.data;return m.setAll(ew(o)),m.setAll(f),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,u,c){return th(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c}(n,e,t)}function YV(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=Qb(r.transform,i||null);o!=null&&(t===null&&(t=mr.empty()),t.set(r.field,o))}return t||null}function q_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ma(r,i,(o,u)=>KV(o,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class gl extends sd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class yo extends sd{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ew(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function G_(n,e,t){const r=new Map;vt(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){const o=n[i],u=o.transform,c=e.data.field(o.field);r.set(o.field,GV(u,c,t[i]))}return r}function K_(n,e,t){const r=new Map;for(const i of n){const o=i.transform,u=t.data.field(i.field);r.set(i.field,qV(o,u,e))}return r}class tw extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JV extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&ZV(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Du(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Du(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Gb();return this.mutations.forEach(i=>{const o=e.get(i.key),u=o.overlayedDocument;let c=this.applyToLocalView(u,o.mutatedFields);c=t.has(i.key)?null:c;const d=Xb(u,c);d!==null&&r.set(i.key,d),u.isValidDocument()||u.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ze())}isEqual(e){return this.batchId===e.batchId&&ma(this.mutations,e.mutations,(t,r)=>q_(t,r))&&ma(this.baseMutations,e.baseMutations,(t,r)=>q_(t,r))}}class gg{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){vt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return jV}();const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new gg(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,tt;function nD(n){switch(n){case te.OK:return Pe(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Pe(15467,{code:n})}}function nw(n){if(n===void 0)return Di("GRPC error has no .code"),te.UNKNOWN;switch(n){case Gt.OK:return te.OK;case Gt.CANCELLED:return te.CANCELLED;case Gt.UNKNOWN:return te.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return te.INTERNAL;case Gt.UNAVAILABLE:return te.UNAVAILABLE;case Gt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Gt.NOT_FOUND:return te.NOT_FOUND;case Gt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Gt.ABORTED:return te.ABORTED;case Gt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Gt.DATA_LOSS:return te.DATA_LOSS;default:return Pe(39323,{code:n})}}(tt=Gt||(Gt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=new vs([4294967295,4294967295],0);function Q_(n){const e=Ab().encode(n),t=new vb;return t.update(e),new Uint8Array(t.digest())}function Z_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new vs([t,r],0),new vs([i,o],0)]}class mg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Tu(`Invalid padding: ${t}`);if(r<0)throw new Tu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=vs.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(vs.fromNumber(r)));return i.compare(rD)===1&&(i=new vs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Q_(e),[r,i]=Z_(t);for(let o=0;o<this.hashCount;o++){const u=this.we(r,i,o);if(!this.be(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new mg(o,i,t);return r.forEach(c=>u.insert(c)),u}insert(e){if(this.pe===0)return;const t=Q_(e),[r,i]=Z_(t);for(let o=0;o<this.hashCount;o++){const u=this.we(r,i,o);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ml.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new od(Ve.min(),i,new xt(He),Mi(),Ze())}}class ml{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ml(r,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}}class rw{constructor(e,t){this.targetId=e,this.Ce=t}}class iw{constructor(e,t,r=gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Y_{constructor(){this.Fe=0,this.Me=J_(),this.xe=gn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ze(),t=Ze(),r=Ze();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Pe(38017,{changeType:o})}}),new ml(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=J_()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,vt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class iD{constructor(e){this.ze=e,this.je=new Map,this.He=Mi(),this.Je=Bc(),this.Ye=Bc(),this.Ze=new xt(He)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Pe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){const t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){const o=i.target;if(Ep(o))if(r===0){const u=new Te(o.path);this.tt(t,u,In.newNoDocument(u,Ve.min()))}else vt(r===1,20013,{expectedCount:r});else{const u=this.ut(t);if(u!==r){const c=this.ct(e),d=c?this.lt(c,e,u):1;if(d!==0){this.st(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let u,c;try{u=ws(r).toUint8Array()}catch(d){if(d instanceof Pb)return ga("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new mg(u,i,o)}catch(d){return ga(d instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.pe===0?null:c}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const u=this.ze.Pt(),c=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(t,o,null),i++)}),i}It(e){const t=new Map;this.je.forEach((o,u)=>{const c=this._t(u);if(c){if(o.current&&Ep(c.target)){const d=new Te(c.target.path);this.Et(d).has(u)||this.dt(u,d)||this.tt(u,d,In.newNoDocument(d,e))}o.Le&&(t.set(u,o.qe()),o.Qe())}});let r=Ze();this.Ye.forEach((o,u)=>{let c=!0;u.forEachWhile(d=>{const f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,u)=>u.setReadTime(e));const i=new od(e,t,this.Ze,this.He,r);return this.He=Mi(),this.Je=Bc(),this.Ye=Bc(),this.Ze=new xt(He),i}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Y_,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new rn(He),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new rn(He),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Y_),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Bc(){return new xt(Te.comparator)}function J_(){return new xt(Te.comparator)}const sD={asc:"ASCENDING",desc:"DESCENDING"},oD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aD={and:"AND",or:"OR"};class uD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ip(n,e){return n.useProto3Json||Xh(e)?e:{value:e}}function Sh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lD(n,e){return Sh(n,e.toTimestamp())}function Jr(n){return vt(!!n,49232),Ve.fromTimestamp(function(t){const r=bs(t);return new nn(r.seconds,r.nanos)}(n))}function vg(n,e){return Ap(n,e).canonicalString()}function Ap(n,e){const t=function(i){return new Ct(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ow(n){const e=Ct.fromString(n);return vt(hw(e),10190,{key:e.toString()}),e}function Sp(n,e){return vg(n.databaseId,e.path)}function Ff(n,e){const t=ow(e);if(t.get(1)!==n.databaseId.projectId)throw new be(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(uw(t))}function aw(n,e){return vg(n.databaseId,e)}function cD(n){const e=ow(n);return e.length===4?Ct.emptyPath():uw(e)}function Cp(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uw(n){return vt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function X_(n,e,t){return{name:Sp(n,e),fields:t.value.mapValue.fields}}function hD(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Pe(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(vt(m===void 0||typeof m=="string",58123),gn.fromBase64String(m||"")):(vt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),gn.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&function(f){const m=f.code===void 0?te.UNKNOWN:nw(f.code);return new be(m,f.message||"")}(u);t=new iw(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ff(n,r.document.name),o=Jr(r.document.updateTime),u=r.document.createTime?Jr(r.document.createTime):Ve.min(),c=new mr({mapValue:{fields:r.document.fields}}),d=In.newFoundDocument(i,o,u,c),f=r.targetIds||[],m=r.removedTargetIds||[];t=new nh(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ff(n,r.document),o=r.readTime?Jr(r.readTime):Ve.min(),u=In.newNoDocument(i,o),c=r.removedTargetIds||[];t=new nh([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ff(n,r.document),o=r.removedTargetIds||[];t=new nh([],o,i,null)}else{if(!("filter"in e))return Pe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,u=new tD(i,o),c=r.targetId;t=new rw(c,u)}}return t}function dD(n,e){let t;if(e instanceof gl)t={update:X_(n,e.key,e.value)};else if(e instanceof tw)t={delete:Sp(n,e.key)};else if(e instanceof yo)t={update:X_(n,e.key,e.data),updateMask:wD(e.fieldMask)};else{if(!(e instanceof JV))return Pe(16599,{ft:e.type});t={verify:Sp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof Ih)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof zu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Hu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ah)return{fieldPath:u.field.canonicalString(),increment:c.Re};throw Pe(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:lD(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Pe(27497)}(n,e.precondition)),t}function fD(n,e){return n&&n.length>0?(vt(e!==void 0,14353),n.map(t=>function(i,o){let u=i.updateTime?Jr(i.updateTime):Jr(o);return u.isEqual(Ve.min())&&(u=Jr(o)),new QV(u,i.transformResults||[])}(t,e))):[]}function pD(n,e){return{documents:[aw(n,e.path)]}}function gD(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aw(n,i);const o=function(f){if(f.length!==0)return cw(ni.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(f){if(f.length!==0)return f.map(m=>function(T){return{field:Jo(T.field),direction:_D(T.dir)}}(m))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=Ip(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:t,parent:i}}function mD(n){let e=cD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){vt(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(y){const T=lw(y);return T instanceof ni&&Ub(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(y){return y.map(T=>function(N){return new Th(Xo(N.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(T))}(t.orderBy));let c=null;t.limit&&(c=function(y){let T;return T=typeof y=="object"?y.value:y,Xh(T)?null:T}(t.limit));let d=null;t.startAt&&(d=function(y){const T=!!y.before,P=y.values||[];return new Eh(P,T)}(t.startAt));let f=null;return t.endAt&&(f=function(y){const T=!y.before,P=y.values||[];return new Eh(P,T)}(t.endAt)),MV(e,i,u,o,c,"F",d,f)}function vD(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Xo(t.unaryFilter.field);return tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Xo(t.unaryFilter.field);return tn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xo(t.unaryFilter.field);return tn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Xo(t.unaryFilter.field);return tn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}}(n):n.fieldFilter!==void 0?function(t){return tn.create(Xo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ni.create(t.compositeFilter.filters.map(r=>lw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}}(t.compositeFilter.op))}(n):Pe(30097,{filter:n})}function _D(n){return sD[n]}function yD(n){return oD[n]}function bD(n){return aD[n]}function Jo(n){return{fieldPath:n.canonicalString()}}function Xo(n){return pn.fromServerFormat(n.fieldPath)}function cw(n){return n instanceof tn?function(t){if(t.op==="=="){if(B_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NAN"}};if(U_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(B_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NAN"}};if(U_(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(t.field),op:yD(t.op),value:t.value}}}(n):n instanceof ni?function(t){const r=t.getFilters().map(i=>cw(i));return r.length===1?r[0]:{compositeFilter:{op:bD(t.op),filters:r}}}(n):Pe(54877,{filter:n})}function wD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t,r,i,o=Ve.min(),u=Ve.min(),c=gn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.wt=e}}function TD(n){const e=mD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.yn=new AD}addToCollectionParentIndex(e,t){return this.yn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(ys.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class AD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rn(Ct.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rn(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dw=41943040;class Gn{static withCacheSize(e){return new Gn(e,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(dw,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new ya(0)}static ir(){return new ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="LruGarbageCollector",SD=1048576;function ny([n,e],[t,r]){const i=He(n,t);return i===0?He(e,r):i}class CD{constructor(e){this.cr=e,this.buffer=new rn(ny),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ny(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class RD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){me(ty,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xa(t)?me(ty,"Ignoring IndexedDB error during garbage collection: ",t):await Pa(t)}await this.Ir(3e5)})}}class PD{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return J.resolve(Jh.le);const r=new CD(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(ey)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ey):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,o,u,c,d,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,u=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),Zo()<=Qe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-m}ms
	Determined least recently used ${i} in `+(c-u)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}}function xD(n,e){return new PD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.changes=new _o(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Du(r.mutation,i,Pr.empty(),nn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ze()){const i=Xs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let u=Eu();return o.forEach((c,d)=>{u=u.insert(c,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Xs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ze()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((u,c)=>{t.set(u,c)})})}computeViews(e,t,r,i){let o=Mi();const u=Vu(),c=function(){return Vu()}();return t.forEach((d,f)=>{const m=r.get(f.key);i.has(f.key)&&(m===void 0||m.mutation instanceof yo)?o=o.insert(f.key,f):m!==void 0?(u.set(f.key,m.mutation.getFieldMask()),Du(m.mutation,f,m.mutation.getFieldMask(),nn.now())):u.set(f.key,Pr.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,m)=>u.set(f,m)),t.forEach((f,m)=>{var y;return c.set(f,new kD(m,(y=u.get(f))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Vu();let i=new xt((u,c)=>u-c),o=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const c of u)c.keys().forEach(d=>{const f=t.get(d);if(f===null)return;let m=r.get(d)||Pr.empty();m=c.applyToLocalView(f,m),r.set(d,m);const y=(i.get(c.batchId)||Ze()).add(d);i=i.insert(c.batchId,y)})}).next(()=>{const u=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,m=d.value,y=Gb();m.forEach(T=>{if(!o.has(T)){const P=Xb(t.get(T),r.get(T));P!==null&&y.set(T,P),o=o.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,f,y))}return J.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(u){return Te.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):J.resolve(Xs());let c=Uu,d=o;return u.next(f=>J.forEach(f,(m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?J.resolve():this.remoteDocumentCache.getEntry(e,m).next(T=>{d=d.insert(m,T)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,Ze())).next(m=>({batchId:c,changes:qb(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let i=Eu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let u=Eu();return this.indexManager.getCollectionParents(e,o).next(c=>J.forEach(c,d=>{const f=function(y,T){return new td(T,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(m=>{m.forEach((y,T)=>{u=u.insert(y,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(u=>{o.forEach((d,f)=>{const m=f.getKey();u.get(m)===null&&(u=u.insert(m,In.newInvalidDocument(m)))});let c=Eu();return u.forEach((d,f)=>{const m=o.get(d);m!==void 0&&Du(m.mutation,f,Pr.empty(),nn.now()),rd(t,f)&&(c=c.insert(d,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return J.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Jr(i.createTime)}}(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:TD(i.bundledQuery),readTime:Jr(i.readTime)}}(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.overlays=new xt(Te.comparator),this.Or=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xs();return J.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),J.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Or.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Or.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const i=Xs(),o=t.length+1,u=new Te(t.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return J.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new xt((f,m)=>f-m);const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=Xs(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=Xs(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=i)););return J.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new eD(t,r));let o=this.Or.get(t);o===void 0&&(o=Ze(),this.Or.set(t,o)),this.Or.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Nr=new rn(an.Br),this.Lr=new rn(an.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new an(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new an(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new Te(new Ct([])),r=new an(t,e),i=new an(t,e+1),o=[];return this.Lr.forEachInRange([r,i],u=>{this.Qr(u),o.push(u.key)}),o}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Te(new Ct([])),r=new an(t,e),i=new an(t,e+1);let o=Ze();return this.Lr.forEachInRange([r,i],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new an(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class an{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Te.comparator(e.key,t.key)||He(e.Gr,t.Gr)}static kr(e,t){return He(e.Gr,t.Gr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new rn(an.Br)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new XV(o,t,r,i);this.mutationQueue.push(u);for(const c of i)this.zr=this.zr.add(new an(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return J.resolve(u)}lookupMutationBatch(e,t){return J.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Hr(r),o=i<0?0:i;return J.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?ug:this.Jn-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new an(t,0),i=new an(t,Number.POSITIVE_INFINITY),o=[];return this.zr.forEachInRange([r,i],u=>{const c=this.jr(u.Gr);o.push(c)}),J.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rn(He);return t.forEach(i=>{const o=new an(i,0),u=new an(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([o,u],c=>{r=r.add(c.Gr)})}),J.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Te.isDocumentKey(o)||(o=o.child(""));const u=new an(new Te(o),0);let c=new rn(He);return this.zr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(c=c.add(d.Gr)),!0)},u),J.resolve(this.Jr(c))}Jr(e){const t=[];return e.forEach(r=>{const i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){vt(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return J.forEach(t.mutations,i=>{const o=new an(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new an(t,0),i=this.zr.firstAfterOrEqual(r);return J.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.Zr=e,this.docs=function(){return new xt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,u=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let r=Mi();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():In.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Mi();const u=t.path,c=new Te(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||fV(dV(m),r)<=0||(i.has(m.key)||rd(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return J.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Pe(9500)}Xr(e,t){return J.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new UD(this)}getSize(e){return J.resolve(this.size)}}class UD extends OD{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),J.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.persistence=e,this.ei=new _o(t=>hg(t),dg),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.ti=0,this.ni=new _g,this.targetCount=0,this.ri=ya.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),J.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new ya(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.ar(t),J.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.ei.forEach((u,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ei.delete(u),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),J.waitFor(o).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(u=>{o.push(i.markPotentiallyOrphaned(e,u))}),J.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t){this.ii={},this.overlays={},this.si=new Jh(0),this.oi=!1,this.oi=!0,this._i=new ND,this.referenceDelegate=e(this),this.ai=new BD(this),this.indexManager=new ID,this.remoteDocumentCache=function(i){return new FD(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new ED(t),this.ci=new DD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new LD(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const i=new jD(this.si.next());return this.referenceDelegate.li(),r(i).next(o=>this.referenceDelegate.hi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Pi(e,t){return J.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class jD extends gV{constructor(e){super(),this.currentSequenceNumber=e}}class yg{constructor(e){this.persistence=e,this.Ti=new _g,this.Ii=null}static Ei(e){return new yg(e)}get di(){if(this.Ii)return this.Ii;throw Pe(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.di,r=>{const i=Te.fromPath(r);return this.Ai(e,i).next(o=>{o||t.removeEntry(i,Ve.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return J.or([()=>J.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Ch{constructor(e,t){this.persistence=e,this.Ri=new _o(r=>_V(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=xD(this,t)}static Ei(e,t){return new Ch(e,t)}li(){}hi(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return J.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(o=>o?J.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Xr(e,u=>this.gr(e,u,t).next(c=>{c||(r++,o.removeEntry(u,Ve.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),J.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xc(e.data.value)),t}gr(e,t,r){return J.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.Ri.get(t);return J.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=Ze(),i=Ze();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new bg(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return FP()?8:mV(An())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Rs(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.Vs(e,t,i,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new $D;return this.fs(e,t,u).next(c=>{if(o.result=c,this.Is)return this.gs(e,t,u,c.size)})}).next(()=>o.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(Zo()<=Qe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Yo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),J.resolve()):(Zo()<=Qe.DEBUG&&me("QueryEngine","Query:",Yo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Zo()<=Qe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Yo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(t))):J.resolve())}Rs(e,t){if(H_(t))return J.resolve(null);let r=Yr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Tp(t,null,"F"),r=Yr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=Ze(...o);return this.As.getDocuments(e,u).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.ps(t,c);return this.ys(t,f,u,d.readTime)?this.Rs(e,Tp(t,null,"F")):this.ws(e,f,t,d)}))})))}Vs(e,t,r,i){return H_(t)||i.isEqual(Ve.min())?J.resolve(null):this.As.getDocuments(e,r).next(o=>{const u=this.ps(t,o);return this.ys(t,u,r,i)?J.resolve(null):(Zo()<=Qe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yo(t)),this.ws(e,u,t,hV(i,Uu)).next(c=>c))})}ps(e,t){let r=new rn(Hb(e));return t.forEach((i,o)=>{rd(e,o)&&(r=r.add(o))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}fs(e,t,r){return Zo()<=Qe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Yo(t)),this.As.getDocumentsMatchingQuery(e,t,ys.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="LocalStore",HD=3e8;class WD{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new xt(He),this.Ds=new _o(o=>hg(o),dg),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VD(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function qD(n,e,t,r){return new WD(n,e,t,r)}async function pw(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],c=[];let d=Ze();for(const f of i){u.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next(f=>({Ms:f,removedBatchIds:u,addedBatchIds:c}))})})}function GD(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Cs.newChangeBuffer({trackRemovals:!0});return function(c,d,f,m){const y=f.batch,T=y.keys();let P=J.resolve();return T.forEach(N=>{P=P.next(()=>m.getEntry(d,N)).next(L=>{const O=f.docVersions.get(N);vt(O!==null,48541),L.version.compareTo(O)<0&&(y.applyToRemoteDocument(L,f),L.isValidDocument()&&(L.setReadTime(f.commitVersion),m.addEntry(L)))})}),P.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=Ze();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gw(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function KD(n,e){const t=Ne(n),r=e.snapshotVersion;let i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;const c=[];e.targetChanges.forEach((m,y)=>{const T=i.get(y);if(!T)return;c.push(t.ai.removeMatchingKeys(o,m.removedDocuments,y).next(()=>t.ai.addMatchingKeys(o,m.addedDocuments,y)));let P=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?P=P.withResumeToken(gn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):m.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(m.resumeToken,r)),i=i.insert(y,P),function(L,O,z){return L.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=HD?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(T,P,m)&&c.push(t.ai.updateTargetData(o,P))});let d=Mi(),f=Ze();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(QD(o,u,e.documentUpdates).next(m=>{d=m.xs,f=m.Os})),!r.isEqual(Ve.min())){const m=t.ai.getLastRemoteSnapshotVersion(o).next(y=>t.ai.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return J.waitFor(c).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(t.Ss=i,o))}function QD(n,e,t){let r=Ze(),i=Ze();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Mi();return t.forEach((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(Ve.min())?(e.removeEntry(c,d.readTime),u=u.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),u=u.insert(c,d)):me(wg,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{xs:u,Os:i}})}function ZD(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ug),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YD(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(o=>o?(i=o,J.resolve(i)):t.ai.allocateTargetId(r).next(u=>(i=new fs(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function Rp(n,e,t){const r=Ne(n),i=r.Ss.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,i))}catch(u){if(!xa(u))throw u;me(wg,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)}function ry(n,e,t){const r=Ne(n);let i=Ve.min(),o=Ze();return r.persistence.runTransaction("Execute query","readwrite",u=>function(d,f,m){const y=Ne(d),T=y.Ds.get(m);return T!==void 0?J.resolve(y.Ss.get(T)):y.ai.getTargetData(f,m)}(r,u,Yr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(u,c.targetId).next(d=>{o=d})}).next(()=>r.bs.getDocumentsMatchingQuery(u,e,t?i:Ve.min(),t?o:Ze())).next(c=>(JD(r,FV(e),c),{documents:c,Ns:o})))}function JD(n,e,t){let r=n.vs.get(e)||Ve.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.vs.set(e,r)}class iy{constructor(){this.activeTargetIds=HV()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XD{constructor(){this.So=new iy,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new iy,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="ConnectivityMonitor";class oy{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){me(sy,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){me(sy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc=null;function Pp(){return jc===null?jc=function(){return 268435456+Math.round(2147483648*Math.random())}():jc++,"0x"+jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="RestConnection",t2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n2{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===bh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,o){const u=Pp(),c=this.$o(e,t.toUriEncodedString());me(Uf,`Sending RPC '${e}' ${u}:`,c,r);const d={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(d,i,o);const{host:f}=new URL(c),m=ll(f);return this.Ko(e,c,d,r,m).then(y=>(me(Uf,`Received RPC '${e}' ${u}: `,y),y),y=>{throw ga(Uf,`RPC '${e}' ${u} failed with error: `,y,"url: ",c,"request:",r),y})}Wo(e,t,r,i,o,u){return this.Qo(e,t,r,i,o)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ra}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}$o(e,t){const r=t2[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class i2 extends n2{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i,o){const u=Pp();return new Promise((c,d)=>{const f=new _b;f.setWithCredentials(!0),f.listenOnce(yb.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Jc.NO_ERROR:const y=f.getResponseJson();me(wn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(y)),c(y);break;case Jc.TIMEOUT:me(wn,`RPC '${e}' ${u} timed out`),d(new be(te.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:const T=f.getStatus();if(me(wn,`RPC '${e}' ${u} failed with status:`,T,"response text:",f.getResponseText()),T>0){let P=f.getResponseJson();Array.isArray(P)&&(P=P[0]);const N=P==null?void 0:P.error;if(N&&N.status&&N.message){const L=function(z){const H=z.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(H)>=0?H:te.UNKNOWN}(N.status);d(new be(L,N.message))}else d(new be(te.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new be(te.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{s_:e,streamId:u,o_:f.getLastErrorCode(),__:f.getLastError()})}}finally{me(wn,`RPC '${e}' ${u} completed.`)}});const m=JSON.stringify(i);me(wn,`RPC '${e}' ${u} sending request:`,i),f.send(t,"POST",m,r,15)})}a_(e,t,r){const i=Pp(),o=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Eb(),c=wb(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Uo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=o.join("");me(wn,`Creating RPC '${e}' stream ${i}: ${m}`,d);const y=u.createWebChannel(m,d);let T=!1,P=!1;const N=new r2({Go:O=>{P?me(wn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(T||(me(wn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),T=!0),me(wn,`RPC '${e}' stream ${i} sending:`,O),y.send(O))},zo:()=>y.close()}),L=(O,z,H)=>{O.listen(z,G=>{try{H(G)}catch(re){setTimeout(()=>{throw re},0)}})};return L(y,wu.EventType.OPEN,()=>{P||(me(wn,`RPC '${e}' stream ${i} transport opened.`),N.t_())}),L(y,wu.EventType.CLOSE,()=>{P||(P=!0,me(wn,`RPC '${e}' stream ${i} transport closed`),N.r_())}),L(y,wu.EventType.ERROR,O=>{P||(P=!0,ga(wn,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),N.r_(new be(te.UNAVAILABLE,"The operation could not be completed")))}),L(y,wu.EventType.MESSAGE,O=>{var z;if(!P){const H=O.data[0];vt(!!H,16349);const G=H,re=(G==null?void 0:G.error)||((z=G[0])===null||z===void 0?void 0:z.error);if(re){me(wn,`RPC '${e}' stream ${i} received error:`,re);const $=re.status;let oe=function(S){const x=Gt[S];if(x!==void 0)return nw(x)}($),C=re.message;oe===void 0&&(oe=te.INTERNAL,C="Unknown error status: "+$+" with message "+re.message),P=!0,N.r_(new be(oe,C)),y.close()}else me(wn,`RPC '${e}' stream ${i} received:`,H),N.i_(H)}}),L(c,bb.STAT_EVENT,O=>{O.stat===vp.PROXY?me(wn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===vp.NOPROXY&&me(wn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.n_()},0),N}}function Bf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(n){return new uD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t,r=1e3,i=1.5,o=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=o,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="PersistentStream";class vw{constructor(e,t,r,i,o,u,c,d){this.bi=e,this.R_=r,this.V_=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new mw(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{const i=new be(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return me(ay,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(me(ay,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s2 extends vw{constructor(e,t,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=hD(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ve.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ve.min():u.readTime?Jr(u.readTime):Ve.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=Cp(this.serializer),t.addTarget=function(o,u){let c;const d=u.target;if(c=Ep(d)?{documents:pD(o,d)}:{query:gD(o,d).gt},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=sw(o,u.resumeToken);const f=Ip(o,u.expectedCount);f!==null&&(c.expectedCount=f)}else if(u.snapshotVersion.compareTo(Ve.min())>0){c.readTime=Sh(o,u.snapshotVersion.toTimestamp());const f=Ip(o,u.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=vD(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=Cp(this.serializer),t.removeTarget=e,this.F_(t)}}class o2 extends vw{constructor(e,t,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=fD(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=Cp(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>dD(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{}class u2 extends a2{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new be(te.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Qo(e,Ap(t,r),i,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(te.UNKNOWN,o.toString())})}Wo(e,t,r,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Wo(e,Ap(t,r),i,u,c,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(te.UNKNOWN,u.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class l2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Di(t),this.ea=!1):me("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="RemoteStore";class c2{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=o,this.ca.vo(u=>{r.enqueueAndForget(async()=>{bo(this)&&(me(co,"Restarting streams for network reachability change."),await async function(d){const f=Ne(d);f.aa.add(4),await vl(f),f.la.set("Unknown"),f.aa.delete(4),await ud(f)}(this))})}),this.la=new l2(r,i)}}async function ud(n){if(bo(n))for(const e of n.ua)await e(!0)}async function vl(n){for(const e of n.ua)await e(!1)}function _w(n,e){const t=Ne(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Ag(t)?Ig(t):Oa(t).b_()&&Tg(t,e))}function Eg(n,e){const t=Ne(n),r=Oa(t);t._a.delete(e),r.b_()&&yw(t,e),t._a.size===0&&(r.b_()?r.v_():bo(t)&&t.la.set("Unknown"))}function Tg(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Oa(n).U_(e)}function yw(n,e){n.ha.Ke(e),Oa(n).K_(e)}function Ig(n){n.ha=new iD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Oa(n).start(),n.la.ta()}function Ag(n){return bo(n)&&!Oa(n).w_()&&n._a.size>0}function bo(n){return Ne(n).aa.size===0}function bw(n){n.ha=void 0}async function h2(n){n.la.set("Online")}async function d2(n){n._a.forEach((e,t)=>{Tg(n,e)})}async function f2(n,e){bw(n),Ag(n)?(n.la.ia(e),Ig(n)):n.la.set("Unknown")}async function p2(n,e,t){if(n.la.set("Online"),e instanceof iw&&e.state===2&&e.cause)try{await async function(i,o){const u=o.cause;for(const c of o.targetIds)i._a.has(c)&&(await i.remoteSyncer.rejectListen(c,u),i._a.delete(c),i.ha.removeTarget(c))}(n,e)}catch(r){me(co,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rh(n,r)}else if(e instanceof nh?n.ha.Xe(e):e instanceof rw?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Ve.min()))try{const r=await gw(n.localStore);t.compareTo(r)>=0&&await function(o,u){const c=o.ha.It(u);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=o._a.get(f);m&&o._a.set(f,m.withResumeToken(d.resumeToken,u))}}),c.targetMismatches.forEach((d,f)=>{const m=o._a.get(d);if(!m)return;o._a.set(d,m.withResumeToken(gn.EMPTY_BYTE_STRING,m.snapshotVersion)),yw(o,d);const y=new fs(m.target,d,f,m.sequenceNumber);Tg(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){me(co,"Failed to raise snapshot:",r),await Rh(n,r)}}async function Rh(n,e,t){if(!xa(e))throw e;n.aa.add(1),await vl(n),n.la.set("Offline"),t||(t=()=>gw(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{me(co,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await ud(n)})}function ww(n,e){return e().catch(t=>Rh(n,t,e))}async function ld(n){const e=Ne(n),t=Ts(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:ug;for(;g2(e);)try{const i=await ZD(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,m2(e,i)}catch(i){await Rh(e,i)}Ew(e)&&Tw(e)}function g2(n){return bo(n)&&n.oa.length<10}function m2(n,e){n.oa.push(e);const t=Ts(n);t.b_()&&t.W_&&t.G_(e.mutations)}function Ew(n){return bo(n)&&!Ts(n).w_()&&n.oa.length>0}function Tw(n){Ts(n).start()}async function v2(n){Ts(n).H_()}async function _2(n){const e=Ts(n);for(const t of n.oa)e.G_(t.mutations)}async function y2(n,e,t){const r=n.oa.shift(),i=gg.from(r,e,t);await ww(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await ld(n)}async function b2(n,e){e&&Ts(n).W_&&await async function(r,i){if(function(u){return nD(u)&&u!==te.ABORTED}(i.code)){const o=r.oa.shift();Ts(r).D_(),await ww(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await ld(r)}}(n,e),Ew(n)&&Tw(n)}async function uy(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),me(co,"RemoteStore received new credentials");const r=bo(t);t.aa.add(3),await vl(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await ud(t)}async function w2(n,e){const t=Ne(n);e?(t.aa.delete(2),await ud(t)):e||(t.aa.add(2),await vl(t),t.la.set("Unknown"))}function Oa(n){return n.Pa||(n.Pa=function(t,r,i){const o=Ne(t);return o.Y_(),new s2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:h2.bind(null,n),Jo:d2.bind(null,n),Zo:f2.bind(null,n),Q_:p2.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),Ag(n)?Ig(n):n.la.set("Unknown")):(await n.Pa.stop(),bw(n))})),n.Pa}function Ts(n){return n.Ta||(n.Ta=function(t,r,i){const o=Ne(t);return o.Y_(),new o2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:v2.bind(null,n),Zo:b2.bind(null,n),z_:_2.bind(null,n),j_:y2.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await ld(n)):(await n.Ta.stop(),n.oa.length>0&&(me(co,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const u=Date.now()+r,c=new Sg(e,t,u,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(n,e){if(Di("AsyncQueue",`${e}: ${n}`),xa(n))return new be(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{static emptySet(e){return new oa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=Eu(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new oa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.Ia=new xt(Te.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Pe(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class ba{constructor(e,t,r,i,o,u,c,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new ba(e,t,oa.emptySet(t),u,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class T2{constructor(){this.queries=cy(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const i=Ne(t),o=i.queries;i.queries=cy(),o.forEach((u,c)=>{for(const d of c.Ra)d.onError(r)})})(this,new be(te.ABORTED,"Firestore shutting down"))}}function cy(){return new _o(n=>zb(n),nd)}async function Iw(n,e){const t=Ne(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.Va()&&e.ma()&&(r=2):(o=new E2,r=e.ma()?0:1);try{switch(r){case 0:o.Aa=await t.onListen(i,!0);break;case 1:o.Aa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const c=Cg(u,`Initialization of query '${Yo(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Ra.push(e),e.ga(t.onlineState),o.Aa&&e.pa(o.Aa)&&Rg(t)}async function Aw(n,e){const t=Ne(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const u=o.Ra.indexOf(e);u>=0&&(o.Ra.splice(u,1),o.Ra.length===0?i=e.ma()?0:1:!o.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function I2(n,e){const t=Ne(n);let r=!1;for(const i of e){const o=i.query,u=t.queries.get(o);if(u){for(const c of u.Ra)c.pa(i)&&(r=!0);u.Aa=i}}r&&Rg(t)}function A2(n,e,t){const r=Ne(n),i=r.queries.get(e);if(i)for(const o of i.Ra)o.onError(t);r.queries.delete(e)}function Rg(n){n.fa.forEach(e=>{e.next()})}var xp,hy;(hy=xp||(xp={})).ya="default",hy.Cache="cache";class Sw{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ba(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.key=e}}class Rw{constructor(e){this.key=e}}class S2{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Ze(),this.mutatedKeys=Ze(),this.Ua=Hb(e),this.Ka=new oa(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new ly,i=t?t.Ka:this.Ka;let o=t?t.mutatedKeys:this.mutatedKeys,u=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{const T=i.get(m),P=rd(this.query,y)?y:null,N=!!T&&this.mutatedKeys.has(T.key),L=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let O=!1;T&&P?T.data.isEqual(P.data)?N!==L&&(r.track({type:3,doc:P}),O=!0):this.ja(T,P)||(r.track({type:2,doc:P}),O=!0,(d&&this.Ua(P,d)>0||f&&this.Ua(P,f)<0)&&(c=!0)):!T&&P?(r.track({type:0,doc:P}),O=!0):T&&!P&&(r.track({type:1,doc:T}),O=!0,(d||f)&&(c=!0)),O&&(P?(u=u.add(P),o=L?o.add(m):o.delete(m)):(u=u.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const m=this.query.limitType==="F"?u.last():u.first();u=u.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{Ka:u,za:r,ys:c,mutatedKeys:o}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const u=e.za.da();u.sort((m,y)=>function(P,N){const L=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Vt:O})}};return L(P)-L(N)}(m.type,y.type)||this.Ua(m.doc,y.doc)),this.Ha(r),i=i!=null&&i;const c=t&&!i?this.Ja():[],d=this.$a.size===0&&this.current&&!i?1:0,f=d!==this.Qa;return this.Qa=d,u.length!==0||f?{snapshot:new ba(this.query,e.Ka,o,u,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:c}:{Ya:c}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new ly,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Ze(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new Rw(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new Cw(r))}),t}Xa(e){this.qa=e.Ns,this.$a=Ze();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return ba.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Pg="SyncEngine";class C2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class R2{constructor(e){this.key=e,this.tu=!1}}class P2{constructor(e,t,r,i,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.nu={},this.ru=new _o(c=>zb(c),nd),this.iu=new Map,this.su=new Set,this.ou=new xt(Te.comparator),this._u=new Map,this.au=new _g,this.uu={},this.cu=new Map,this.lu=ya.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function x2(n,e,t=!0){const r=Dw(n);let i;const o=r.ru.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=await Pw(r,e,t,!0),i}async function O2(n,e){const t=Dw(n);await Pw(t,e,!0,!1)}async function Pw(n,e,t,r){const i=await YD(n.localStore,Yr(e)),o=i.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await k2(n,e,o,u==="current",i.resumeToken)),n.isPrimaryClient&&t&&_w(n.remoteStore,i),c}async function k2(n,e,t,r,i){n.Pu=(y,T,P)=>async function(L,O,z,H){let G=O.view.Ga(z);G.ys&&(G=await ry(L.localStore,O.query,!1).then(({documents:C})=>O.view.Ga(C,G)));const re=H&&H.targetChanges.get(O.targetId),$=H&&H.targetMismatches.get(O.targetId)!=null,oe=O.view.applyChanges(G,L.isPrimaryClient,re,$);return fy(L,O.targetId,oe.Ya),oe.snapshot}(n,y,T,P);const o=await ry(n.localStore,e,!0),u=new S2(e,o.Ns),c=u.Ga(o.documents),d=ml.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=u.applyChanges(c,n.isPrimaryClient,d);fy(n,t,f.Ya);const m=new C2(e,t,u);return n.ru.set(e,m),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),f.snapshot}async function V2(n,e,t){const r=Ne(n),i=r.ru.get(e),o=r.iu.get(i.targetId);if(o.length>1)return r.iu.set(i.targetId,o.filter(u=>!nd(u,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Eg(r.remoteStore,i.targetId),Op(r,i.targetId)}).catch(Pa)):(Op(r,i.targetId),await Rp(r.localStore,i.targetId,!0))}async function D2(n,e){const t=Ne(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Eg(t.remoteStore,r.targetId))}async function M2(n,e,t){const r=$2(n);try{const i=await function(u,c){const d=Ne(u),f=nn.now(),m=c.reduce((P,N)=>P.add(N.key),Ze());let y,T;return d.persistence.runTransaction("Locally write mutations","readwrite",P=>{let N=Mi(),L=Ze();return d.Cs.getEntries(P,m).next(O=>{N=O,N.forEach((z,H)=>{H.isValidDocument()||(L=L.add(z))})}).next(()=>d.localDocuments.getOverlayedDocuments(P,N)).next(O=>{y=O;const z=[];for(const H of c){const G=YV(H,y.get(H.key).overlayedDocument);G!=null&&z.push(new yo(H.key,G,Nb(G.value.mapValue),Ri.exists(!0)))}return d.mutationQueue.addMutationBatch(P,f,z,c)}).next(O=>{T=O;const z=O.applyToLocalDocumentSet(y,L);return d.documentOverlayCache.saveOverlays(P,O.batchId,z)})}).then(()=>({batchId:T.batchId,changes:qb(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,d){let f=u.uu[u.currentUser.toKey()];f||(f=new xt(He)),f=f.insert(c,d),u.uu[u.currentUser.toKey()]=f}(r,i.batchId,t),await _l(r,i.changes),await ld(r.remoteStore)}catch(i){const o=Cg(i,"Failed to persist write");t.reject(o)}}async function xw(n,e){const t=Ne(n);try{const r=await KD(t.localStore,e);e.targetChanges.forEach((i,o)=>{const u=t._u.get(o);u&&(vt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.tu=!0:i.modifiedDocuments.size>0?vt(u.tu,14607):i.removedDocuments.size>0&&(vt(u.tu,42227),u.tu=!1))}),await _l(t,r,e)}catch(r){await Pa(r)}}function dy(n,e,t){const r=Ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ru.forEach((o,u)=>{const c=u.view.ga(e);c.snapshot&&i.push(c.snapshot)}),function(u,c){const d=Ne(u);d.onlineState=c;let f=!1;d.queries.forEach((m,y)=>{for(const T of y.Ra)T.ga(c)&&(f=!0)}),f&&Rg(d)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function N2(n,e,t){const r=Ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r._u.get(e),o=i&&i.key;if(o){let u=new xt(Te.comparator);u=u.insert(o,In.newNoDocument(o,Ve.min()));const c=Ze().add(o),d=new od(Ve.min(),new Map,new xt(He),u,c);await xw(r,d),r.ou=r.ou.remove(o),r._u.delete(e),xg(r)}else await Rp(r.localStore,e,!1).then(()=>Op(r,e,t)).catch(Pa)}async function L2(n,e){const t=Ne(n),r=e.batch.batchId;try{const i=await GD(t.localStore,e);kw(t,r,null),Ow(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await _l(t,i)}catch(i){await Pa(i)}}async function F2(n,e,t){const r=Ne(n);try{const i=await function(u,c){const d=Ne(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,c).next(y=>(vt(y!==null,37113),m=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})}(r.localStore,e);kw(r,e,t),Ow(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await _l(r,i)}catch(i){await Pa(i)}}function Ow(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function kw(n,e,t){const r=Ne(n);let i=r.uu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function Op(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||Vw(n,r)})}function Vw(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(Eg(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),xg(n))}function fy(n,e,t){for(const r of t)r instanceof Cw?(n.au.addReference(r.key,e),U2(n,r)):r instanceof Rw?(me(Pg,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||Vw(n,r.key)):Pe(19791,{Iu:r})}function U2(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(me(Pg,"New document in limbo: "+t),n.su.add(r),xg(n))}function xg(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Te(Ct.fromString(e)),r=n.lu.next();n._u.set(r,new R2(t)),n.ou=n.ou.insert(t,r),_w(n.remoteStore,new fs(Yr(fg(t.path)),r,"TargetPurposeLimboResolution",Jh.le))}}async function _l(n,e,t){const r=Ne(n),i=[],o=[],u=[];r.ru.isEmpty()||(r.ru.forEach((c,d)=>{u.push(r.Pu(d,e,t).then(f=>{var m;if((f||t)&&r.isPrimaryClient){const y=f?!f.fromCache:(m=t==null?void 0:t.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){i.push(f);const y=bg.Ps(d.targetId,f);o.push(y)}}))}),await Promise.all(u),r.nu.Q_(i),await async function(d,f){const m=Ne(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>J.forEach(f,T=>J.forEach(T.ls,P=>m.persistence.referenceDelegate.addReference(y,T.targetId,P)).next(()=>J.forEach(T.hs,P=>m.persistence.referenceDelegate.removeReference(y,T.targetId,P)))))}catch(y){if(!xa(y))throw y;me(wg,"Failed to update sequence numbers: "+y)}for(const y of f){const T=y.targetId;if(!y.fromCache){const P=m.Ss.get(T),N=P.snapshotVersion,L=P.withLastLimboFreeSnapshotVersion(N);m.Ss=m.Ss.insert(T,L)}}}(r.localStore,o))}async function B2(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){me(Pg,"User change. New user:",e.toKey());const r=await pw(t.localStore,e);t.currentUser=e,function(o,u){o.cu.forEach(c=>{c.forEach(d=>{d.reject(new be(te.CANCELLED,u))})}),o.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _l(t,r.Ms)}}function j2(n,e){const t=Ne(n),r=t._u.get(e);if(r&&r.tu)return Ze().add(r.key);{let i=Ze();const o=t.iu.get(e);if(!o)return i;for(const u of o){const c=t.ru.get(u);i=i.unionWith(c.view.Wa)}return i}}function Dw(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N2.bind(null,e),e.nu.Q_=I2.bind(null,e.eventManager),e.nu.Tu=A2.bind(null,e.eventManager),e}function $2(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F2.bind(null,e),e}class Ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ad(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return qD(this.persistence,new zD,e.initialUser,this.serializer)}Ru(e){return new fw(yg.Ei,this.serializer)}Au(e){return new XD}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ph.provider={build:()=>new Ph};class z2 extends Ph{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){vt(this.persistence.referenceDelegate instanceof Ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RD(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new fw(r=>Ch.Ei(r,t),this.serializer)}}class kp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=B2.bind(null,this.syncEngine),await w2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new T2}()}createDatastore(e){const t=ad(e.databaseInfo.databaseId),r=function(o){return new i2(o)}(e.databaseInfo);return function(o,u,c,d){return new u2(o,u,c,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,u,c){return new c2(r,i,o,u,c)}(this.localStore,this.datastore,e.asyncQueue,t=>dy(this.syncEngine,t,0),function(){return oy.C()?new oy:new e2}())}createSyncEngine(e,t){return function(i,o,u,c,d,f,m){const y=new P2(i,o,u,c,d,f);return m&&(y.hu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=Ne(i);me(co,"RemoteStore shutting down."),o.aa.add(5),await vl(o),o.ca.shutdown(),o.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}kp.provider={build:()=>new kp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="FirestoreClient";class H2{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Tn.UNAUTHENTICATED,this.clientId=Sb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{me(Is,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(me(Is,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Cg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jf(n,e){n.asyncQueue.verifyOperationInProgress(),me(Is,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function py(n,e){n.asyncQueue.verifyOperationInProgress();const t=await W2(n);me(Is,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>uy(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>uy(e.remoteStore,i)),n._onlineComponents=e}async function W2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(Is,"Using user provided OfflineComponentProvider");try{await jf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ga("Error using user provided cache. Falling back to memory cache: "+t),await jf(n,new Ph)}}else me(Is,"Using default OfflineComponentProvider"),await jf(n,new z2(void 0));return n._offlineComponents}async function Nw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(Is,"Using user provided OnlineComponentProvider"),await py(n,n._uninitializedComponentsProvider._online)):(me(Is,"Using default OnlineComponentProvider"),await py(n,new kp))),n._onlineComponents}function q2(n){return Nw(n).then(e=>e.syncEngine)}async function Lw(n){const e=await Nw(n),t=e.eventManager;return t.onListen=x2.bind(null,e.syncEngine),t.onUnlisten=V2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=O2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=D2.bind(null,e.syncEngine),t}function G2(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,c,d,f){const m=new Mw({next:T=>{m.yu(),u.enqueueAndForget(()=>Aw(o,y));const P=T.docs.has(c);!P&&T.fromCache?f.reject(new be(te.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&T.fromCache&&d&&d.source==="server"?f.reject(new be(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(T)},error:T=>f.reject(T)}),y=new Sw(fg(c.path),m,{includeMetadataChanges:!0,Fa:!0});return Iw(o,y)}(await Lw(n),n.asyncQueue,e,t,r)),r.promise}function K2(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,c,d,f){const m=new Mw({next:T=>{m.yu(),u.enqueueAndForget(()=>Aw(o,y)),T.fromCache&&d.source==="server"?f.reject(new be(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(T)},error:T=>f.reject(T)}),y=new Sw(c,m,{includeMetadataChanges:!0,Fa:!0});return Iw(o,y)}(await Lw(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(n,e,t){if(!t)throw new be(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Q2(n,e,t,r){if(e===!0&&r===!0)throw new be(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function my(n){if(!Te.isDocumentKey(n))throw new be(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vy(n){if(Te.isDocumentKey(n))throw new be(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Og(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe(12329,{type:typeof n})}function ho(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Og(n);throw new be(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="firestore.googleapis.com",_y=!0;class yy{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new be(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Bw,this.ssl=_y}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:_y;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SD)throw new be(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Q2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new be(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new be(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new be(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cd{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nV;switch(r.type){case"firstParty":return new oV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Qh("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=gy.get(t);r&&(me("ComponentProvider","Removing Datastore"),gy.delete(t),r.terminate())}(this),Promise.resolve()}}function Z2(n,e,t,r={}){var i;n=ho(n,cd);const o=ll(e),u=n._getSettings(),c=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;u.host!==Bw&&u.host!==d&&ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},u),{host:d,ssl:o,emulatorOptions:r});if(!oo(f,c)&&(n._setSettings(f),o&&(V0(`https://${d}`),Qh("Firestore",!0)),r.mockUserToken)){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=Tn.MOCK_USER;else{m=PP(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new be(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Tn(T)}n._authCredentials=new rV(new Ib(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hd(this.firestore,e,this._query)}}class nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class _s extends hd{constructor(e,t,r){super(e,t,fg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new Te(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function jw(n,e,...t){if(n=kr(n),Uw("collection","path",e),n instanceof cd){const r=Ct.fromString(e,...t);return vy(r),new _s(n,null,r)}{if(!(n instanceof nr||n instanceof _s))throw new be(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ct.fromString(e,...t));return vy(r),new _s(n.firestore,null,r)}}function $w(n,e,...t){if(n=kr(n),arguments.length===1&&(e=Sb.newId()),Uw("doc","path",e),n instanceof cd){const r=Ct.fromString(e,...t);return my(r),new nr(n,null,new Te(r))}{if(!(n instanceof nr||n instanceof _s))throw new be(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ct.fromString(e,...t));return my(r),new nr(n.firestore,n instanceof _s?n.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="AsyncQueue";class wy{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new mw(this,"async_queue_retry"),this.ju=()=>{const r=Bf();r&&me(by,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=Bf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Bf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Ci;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!xa(e))throw e;me(by,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Di("INTERNAL UNHANDLED ERROR: ",Ey(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const i=Sg.createAndSchedule(this,e,t,r,o=>this.Xu(o));return this.Uu.push(i),i}Ju(){this.Ku&&Pe(47125,{ec:Ey(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function Ey(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class dd extends cd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new wy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wy(e),this._firestoreClient=void 0,await e}}}function Y2(n,e){const t=typeof n=="object"?n:L0(),r=typeof n=="string"?n:bh,i=Yp(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=CP("firestore");o&&Z2(i,...o)}return i}function kg(n){if(n._terminated)throw new be(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||J2(n),n._firestoreClient}function J2(n){var e,t,r;const i=n._freezeSettings(),o=function(c,d,f,m){return new wV(c,d,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Fw(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new H2(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wa(gn.fromBase64String(e))}catch(t){throw new be(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wa(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=/^__.*__$/;class eM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new gl(e,this.data,t,this.fieldTransforms)}}function Hw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{oc:n})}}class Ng{constructor(e,t,r,i,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this._c(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Ng(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return xh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(Hw(this.oc)&&X2.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class tM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ad(e)}dc(e,t,r,i=!1){return new Ng({oc:e,methodName:t,Ec:r,path:pn.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nM(n){const e=n._freezeSettings(),t=ad(n._databaseId);return new tM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rM(n,e,t,r,i,o={}){const u=n.dc(o.merge||o.mergeFields?2:0,e,t,i);Kw("Data must be an object, but it was:",u,r);const c=qw(r,u);let d,f;if(o.merge)d=new Pr(u.fieldMask),f=u.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const T=iM(e,y,t);if(!u.contains(T))throw new be(te.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);oM(m,T)||m.push(T)}d=new Pr(m),f=u.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=u.fieldTransforms;return new eM(new mr(c),d,f)}function Ww(n,e){if(Gw(n=kr(n)))return Kw("Unsupported field value:",e,n),qw(n,e);if(n instanceof zw)return function(r,i){if(!Hw(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){const o=[];let u=0;for(const c of r){let d=Ww(c,i.Pc(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=kr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=nn.fromDate(r);return{timestampValue:Sh(i.serializer,o)}}if(r instanceof nn){const o=new nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sh(i.serializer,o)}}if(r instanceof Dg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wa)return{bytesValue:sw(i.serializer,r._byteString)};if(r instanceof nr){const o=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw i.Tc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:vg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Mg)return function(u,c){return{mapValue:{fields:{[Db]:{stringValue:Mb},[wh]:{arrayValue:{values:u.toArray().map(f=>{if(typeof f!="number")throw c.Tc("VectorValues must only contain numeric values.");return pg(c.serializer,f)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${Og(r)}`)}(n,e)}function qw(n,e){const t={};return Rb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(n,(r,i)=>{const o=Ww(i,e.uc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Gw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nn||n instanceof Dg||n instanceof wa||n instanceof nr||n instanceof zw||n instanceof Mg)}function Kw(n,e,t){if(!Gw(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Og(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function iM(n,e,t){if((e=kr(e))instanceof Vg)return e._internalPath;if(typeof e=="string")return Qw(n,e);throw xh("Field path arguments must be of type string or ",n,!1,void 0,t)}const sM=new RegExp("[~\\*/\\[\\]]");function Qw(n,e,t){if(e.search(sM)>=0)throw xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vg(...e.split("."))._internalPath}catch{throw xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xh(n,e,t,r,i){const o=r&&!r.isEmpty(),u=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${r}`),u&&(d+=` in document ${i}`),d+=")"),new be(te.INVALID_ARGUMENT,c+n+d)}function oM(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aM extends Zw{data(){return super.data()}}function Yw(n,e){return typeof e=="string"?Qw(n,e):e instanceof Vg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new be(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lM{convertValue(e,t="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return vo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[wh].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(u=>Bt(u.doubleValue));return new Mg(o)}convertGeoPoint(e){return new Dg(Bt(e.latitude),Bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ed(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bu(e));default:return null}}convertTimestamp(e){const t=bs(e);return new nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ct.fromString(e);vt(hw(r),9688,{name:e});const i=new ju(r.get(1),r.get(3)),o=new Te(r.popFirst(5));return i.isEqual(t)||Di(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jw extends Zw{constructor(e,t,r,i,o,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Yw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class rh extends Jw{data(e={}){return super.data(e)}}class hM{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Iu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new rh(this._firestore,this._userDataWriter,r.key,r,new Iu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map(c=>{const d=new rh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Iu(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const d=new rh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Iu(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,m=-1;return c.type!==0&&(f=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(u=u.add(c.doc),m=u.indexOf(c.doc.key)),{type:dM(c.type),doc:d,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(n){n=ho(n,nr);const e=ho(n.firestore,dd);return G2(kg(e),n._key).then(t=>mM(e,n,t))}class Xw extends lM{constructor(e){super(),this.firestore=e}convertBytes(e){return new wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}function eE(n){n=ho(n,hd);const e=ho(n.firestore,dd),t=kg(e),r=new Xw(e);return uM(n._query),K2(t,n._query).then(i=>new hM(e,r,n,i))}function pM(n,e,t){n=ho(n,nr);const r=ho(n.firestore,dd),i=cM(n.converter,e);return gM(r,[rM(nM(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ri.none())])}function gM(n,e){return function(r,i){const o=new Ci;return r.asyncQueue.enqueueAndForget(async()=>M2(await q2(r),i,o)),o.promise}(kg(n),e)}function mM(n,e,t){const r=t.docs.get(e._key),i=new Xw(n);return new Jw(n,i,e._key,r,new Iu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Ra=i})(Sa),fa(new ao("firestore",(r,{instanceIdentifier:i,options:o})=>{const u=r.getProvider("app").getImmediate(),c=new dd(new iV(r.getProvider("auth-internal")),new aV(u,r.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new be(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ju(f.options.projectId,m)}(u,i),u);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),ms(C_,R_,e),ms(C_,R_,"esm2017")})();const vM={apiKey:"AIzaSyDvYBoFo8Fo9Ev4TbMxsr6bj5aVMwT0vRA",authDomain:"boosting-tools.firebaseapp.com",projectId:"boosting-tools",storageBucket:"boosting-tools.firebasestorage.app",messagingSenderId:"21372571049",appId:"1:21372571049:web:f74314043db1d269b488b8",measurementId:"G-42QHSTWFLC"},tE=N0(vM);eV(tE);const fd=Y2(tE);async function _M(){try{return(await eE(jw(fd,"characters"))).docs.map(t=>{const r=t.data();return{id:t.id,...r,role:Array.isArray(r.role)?r.role:[r.role]}})}catch(n){return console.error("Error fetching characters: ",n),[]}}async function yM(n){try{const e=$w(fd,"characters",n),t=await fM(e);return t.exists()?{id:t.id,...t.data()}:(console.warn(`Character with ID ${n} not found.`),null)}catch(e){return console.error("Error fetching character by ID:",e),null}}async function bM(n){try{const e=$w(fd,"characters",n.id);await pM(e,n),console.log("Document updated with ID: ",e.id)}catch(e){console.error("Error updating document: ",e)}}function wM(){return Kp({queryKey:["characters"],queryFn:_M})}async function EM(){try{return(await eE(jw(fd,"players"))).docs.map(t=>({id:t.id,...t.data()}))}catch(n){return console.error("Error fetching players: ",n),[]}}function TM(){return Kp({queryKey:["players"],queryFn:EM})}function IM(n){return ce.jsx(MR,{...n,disabled:n.loading||n.disabled,className:Qn("cursor-pointer"),children:n.loading?ce.jsxs("div",{className:"flex items-center gap-2",children:[ce.jsx(I0,{className:"animate-spin"})," Processing..."]}):n.children})}function fo(n){"@babel/helpers - typeof";return fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fo(n)}function AM(n,e){if(fo(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(fo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nE(n){var e=AM(n,"string");return fo(e)=="symbol"?e:e+""}function Au(n,e,t){return(e=nE(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ty(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ee(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ty(Object(t),!0).forEach(function(r){Au(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ty(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function SM(n){if(Array.isArray(n))return n}function CM(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,u,c=[],d=!0,f=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;d=!1}else for(;!(d=(r=o.call(t)).done)&&(c.push(r.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(f)throw i}}return c}}function Vp(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function rE(n,e){if(n){if(typeof n=="string")return Vp(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Vp(n,e):void 0}}function RM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pi(n,e){return SM(n)||CM(n,e)||rE(n,e)||RM()}function PM(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Fi(n,e){if(n==null)return{};var t,r,i=PM(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}var xM=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function OM(n){var e=n.defaultInputValue,t=e===void 0?"":e,r=n.defaultMenuIsOpen,i=r===void 0?!1:r,o=n.defaultValue,u=o===void 0?null:o,c=n.inputValue,d=n.menuIsOpen,f=n.onChange,m=n.onInputChange,y=n.onMenuClose,T=n.onMenuOpen,P=n.value,N=Fi(n,xM),L=X.useState(c!==void 0?c:t),O=Pi(L,2),z=O[0],H=O[1],G=X.useState(d!==void 0?d:i),re=Pi(G,2),$=re[0],oe=re[1],C=X.useState(P!==void 0?P:u),I=Pi(C,2),S=I[0],x=I[1],M=X.useCallback(function(ot,Mt){typeof f=="function"&&f(ot,Mt),x(ot)},[f]),V=X.useCallback(function(ot,Mt){var Nt;typeof m=="function"&&(Nt=m(ot,Mt)),H(Nt!==void 0?Nt:ot)},[m]),A=X.useCallback(function(){typeof T=="function"&&T(),oe(!0)},[T]),De=X.useCallback(function(){typeof y=="function"&&y(),oe(!1)},[y]),Fe=c!==void 0?c:z,We=d!==void 0?d:$,rt=P!==void 0?P:S;return Ee(Ee({},N),{},{inputValue:Fe,menuIsOpen:We,onChange:M,onInputChange:V,onMenuClose:De,onMenuOpen:A,value:rt})}function Re(){return Re=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Re.apply(null,arguments)}function kM(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Iy(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,nE(r.key),r)}}function VM(n,e,t){return e&&Iy(n.prototype,e),t&&Iy(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Dp(n,e){return Dp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Dp(n,e)}function DM(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Dp(n,e)}function Oh(n){return Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oh(n)}function iE(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iE=function(){return!!n})()}function MM(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function NM(n,e){if(e&&(fo(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MM(n)}function LM(n){var e=iE();return function(){var t,r=Oh(n);if(e){var i=Oh(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return NM(this,t)}}function FM(n){if(Array.isArray(n))return Vp(n)}function UM(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function BM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lg(n){return FM(n)||UM(n)||rE(n)||BM()}function jM(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function $M(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var zM=function(){function n(t){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag($M(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=jM(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},n}(),En="-ms-",kh="-moz-",ct="-webkit-",sE="comm",Fg="rule",Ug="decl",HM="@import",oE="@keyframes",WM="@layer",qM=Math.abs,pd=String.fromCharCode,GM=Object.assign;function KM(n,e){return fn(n,0)^45?(((e<<2^fn(n,0))<<2^fn(n,1))<<2^fn(n,2))<<2^fn(n,3):0}function aE(n){return n.trim()}function QM(n,e){return(n=e.exec(n))?n[0]:n}function ht(n,e,t){return n.replace(e,t)}function Mp(n,e){return n.indexOf(e)}function fn(n,e){return n.charCodeAt(e)|0}function Wu(n,e,t){return n.slice(e,t)}function Wr(n){return n.length}function Bg(n){return n.length}function $c(n,e){return e.push(n),n}function ZM(n,e){return n.map(e).join("")}var gd=1,Ea=1,uE=0,Kn=0,Kt=0,ka="";function md(n,e,t,r,i,o,u){return{value:n,root:e,parent:t,type:r,props:i,children:o,line:gd,column:Ea,length:u,return:""}}function pu(n,e){return GM(md("",null,null,"",null,null,0),n,{length:-n.length},e)}function YM(){return Kt}function JM(){return Kt=Kn>0?fn(ka,--Kn):0,Ea--,Kt===10&&(Ea=1,gd--),Kt}function rr(){return Kt=Kn<uE?fn(ka,Kn++):0,Ea++,Kt===10&&(Ea=1,gd++),Kt}function Xr(){return fn(ka,Kn)}function ih(){return Kn}function yl(n,e){return Wu(ka,n,e)}function qu(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lE(n){return gd=Ea=1,uE=Wr(ka=n),Kn=0,[]}function cE(n){return ka="",n}function sh(n){return aE(yl(Kn-1,Np(n===91?n+2:n===40?n+1:n)))}function XM(n){for(;(Kt=Xr())&&Kt<33;)rr();return qu(n)>2||qu(Kt)>3?"":" "}function eN(n,e){for(;--e&&rr()&&!(Kt<48||Kt>102||Kt>57&&Kt<65||Kt>70&&Kt<97););return yl(n,ih()+(e<6&&Xr()==32&&rr()==32))}function Np(n){for(;rr();)switch(Kt){case n:return Kn;case 34:case 39:n!==34&&n!==39&&Np(Kt);break;case 40:n===41&&Np(n);break;case 92:rr();break}return Kn}function tN(n,e){for(;rr()&&n+Kt!==57;)if(n+Kt===84&&Xr()===47)break;return"/*"+yl(e,Kn-1)+"*"+pd(n===47?n:rr())}function nN(n){for(;!qu(Xr());)rr();return yl(n,Kn)}function rN(n){return cE(oh("",null,null,null,[""],n=lE(n),0,[0],n))}function oh(n,e,t,r,i,o,u,c,d){for(var f=0,m=0,y=u,T=0,P=0,N=0,L=1,O=1,z=1,H=0,G="",re=i,$=o,oe=r,C=G;O;)switch(N=H,H=rr()){case 40:if(N!=108&&fn(C,y-1)==58){Mp(C+=ht(sh(H),"&","&\f"),"&\f")!=-1&&(z=-1);break}case 34:case 39:case 91:C+=sh(H);break;case 9:case 10:case 13:case 32:C+=XM(N);break;case 92:C+=eN(ih()-1,7);continue;case 47:switch(Xr()){case 42:case 47:$c(iN(tN(rr(),ih()),e,t),d);break;default:C+="/"}break;case 123*L:c[f++]=Wr(C)*z;case 125*L:case 59:case 0:switch(H){case 0:case 125:O=0;case 59+m:z==-1&&(C=ht(C,/\f/g,"")),P>0&&Wr(C)-y&&$c(P>32?Sy(C+";",r,t,y-1):Sy(ht(C," ","")+";",r,t,y-2),d);break;case 59:C+=";";default:if($c(oe=Ay(C,e,t,f,m,i,c,G,re=[],$=[],y),o),H===123)if(m===0)oh(C,e,oe,oe,re,o,y,c,$);else switch(T===99&&fn(C,3)===110?100:T){case 100:case 108:case 109:case 115:oh(n,oe,oe,r&&$c(Ay(n,oe,oe,0,0,i,c,G,i,re=[],y),$),i,$,y,c,r?re:$);break;default:oh(C,oe,oe,oe,[""],$,0,c,$)}}f=m=P=0,L=z=1,G=C="",y=u;break;case 58:y=1+Wr(C),P=N;default:if(L<1){if(H==123)--L;else if(H==125&&L++==0&&JM()==125)continue}switch(C+=pd(H),H*L){case 38:z=m>0?1:(C+="\f",-1);break;case 44:c[f++]=(Wr(C)-1)*z,z=1;break;case 64:Xr()===45&&(C+=sh(rr())),T=Xr(),m=y=Wr(G=C+=nN(ih())),H++;break;case 45:N===45&&Wr(C)==2&&(L=0)}}return o}function Ay(n,e,t,r,i,o,u,c,d,f,m){for(var y=i-1,T=i===0?o:[""],P=Bg(T),N=0,L=0,O=0;N<r;++N)for(var z=0,H=Wu(n,y+1,y=qM(L=u[N])),G=n;z<P;++z)(G=aE(L>0?T[z]+" "+H:ht(H,/&\f/g,T[z])))&&(d[O++]=G);return md(n,e,t,i===0?Fg:c,d,f,m)}function iN(n,e,t){return md(n,e,t,sE,pd(YM()),Wu(n,2,-2),0)}function Sy(n,e,t,r){return md(n,e,t,Ug,Wu(n,0,r),Wu(n,r+1,-1),r)}function aa(n,e){for(var t="",r=Bg(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function sN(n,e,t,r){switch(n.type){case WM:if(n.children.length)break;case HM:case Ug:return n.return=n.return||n.value;case sE:return"";case oE:return n.return=n.value+"{"+aa(n.children,r)+"}";case Fg:n.value=n.props.join(",")}return Wr(t=aa(n.children,r))?n.return=n.value+"{"+t+"}":""}function oN(n){var e=Bg(n);return function(t,r,i,o){for(var u="",c=0;c<e;c++)u+=n[c](t,r,i,o)||"";return u}}function aN(n){return function(e){e.root||(e=e.return)&&n(e)}}function uN(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var lN=function(e,t,r){for(var i=0,o=0;i=o,o=Xr(),i===38&&o===12&&(t[r]=1),!qu(o);)rr();return yl(e,Kn)},cN=function(e,t){var r=-1,i=44;do switch(qu(i)){case 0:i===38&&Xr()===12&&(t[r]=1),e[r]+=lN(Kn-1,t,r);break;case 2:e[r]+=sh(i);break;case 4:if(i===44){e[++r]=Xr()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=pd(i)}while(i=rr());return e},hN=function(e,t){return cE(cN(lE(e),t))},Cy=new WeakMap,dN=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!Cy.get(r))&&!i){Cy.set(e,!0);for(var o=[],u=hN(t,o),c=r.props,d=0,f=0;d<u.length;d++)for(var m=0;m<c.length;m++,f++)e.props[f]=o[d]?u[d].replace(/&\f/g,c[m]):c[m]+" "+u[d]}}},fN=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function hE(n,e){switch(KM(n,e)){case 5103:return ct+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ct+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return ct+n+kh+n+En+n+n;case 6828:case 4268:return ct+n+En+n+n;case 6165:return ct+n+En+"flex-"+n+n;case 5187:return ct+n+ht(n,/(\w+).+(:[^]+)/,ct+"box-$1$2"+En+"flex-$1$2")+n;case 5443:return ct+n+En+"flex-item-"+ht(n,/flex-|-self/,"")+n;case 4675:return ct+n+En+"flex-line-pack"+ht(n,/align-content|flex-|-self/,"")+n;case 5548:return ct+n+En+ht(n,"shrink","negative")+n;case 5292:return ct+n+En+ht(n,"basis","preferred-size")+n;case 6060:return ct+"box-"+ht(n,"-grow","")+ct+n+En+ht(n,"grow","positive")+n;case 4554:return ct+ht(n,/([^-])(transform)/g,"$1"+ct+"$2")+n;case 6187:return ht(ht(ht(n,/(zoom-|grab)/,ct+"$1"),/(image-set)/,ct+"$1"),n,"")+n;case 5495:case 3959:return ht(n,/(image-set\([^]*)/,ct+"$1$`$1");case 4968:return ht(ht(n,/(.+:)(flex-)?(.*)/,ct+"box-pack:$3"+En+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ct+n+n;case 4095:case 3583:case 4068:case 2532:return ht(n,/(.+)-inline(.+)/,ct+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Wr(n)-1-e>6)switch(fn(n,e+1)){case 109:if(fn(n,e+4)!==45)break;case 102:return ht(n,/(.+:)(.+)-([^]+)/,"$1"+ct+"$2-$3$1"+kh+(fn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Mp(n,"stretch")?hE(ht(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(fn(n,e+1)!==115)break;case 6444:switch(fn(n,Wr(n)-3-(~Mp(n,"!important")&&10))){case 107:return ht(n,":",":"+ct)+n;case 101:return ht(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ct+(fn(n,14)===45?"inline-":"")+"box$3$1"+ct+"$2$3$1"+En+"$2box$3")+n}break;case 5936:switch(fn(n,e+11)){case 114:return ct+n+En+ht(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return ct+n+En+ht(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return ct+n+En+ht(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return ct+n+En+n+n}return n}var pN=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case Ug:e.return=hE(e.value,e.length);break;case oE:return aa([pu(e,{value:ht(e.value,"@","@"+ct)})],i);case Fg:if(e.length)return ZM(e.props,function(o){switch(QM(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return aa([pu(e,{props:[ht(o,/:(read-\w+)/,":"+kh+"$1")]})],i);case"::placeholder":return aa([pu(e,{props:[ht(o,/:(plac\w+)/,":"+ct+"input-$1")]}),pu(e,{props:[ht(o,/:(plac\w+)/,":"+kh+"$1")]}),pu(e,{props:[ht(o,/:(plac\w+)/,En+"input-$1")]})],i)}return""})}},gN=[pN],mN=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(L){var O=L.getAttribute("data-emotion");O.indexOf(" ")!==-1&&(document.head.appendChild(L),L.setAttribute("data-s",""))})}var i=e.stylisPlugins||gN,o={},u,c=[];u=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(L){for(var O=L.getAttribute("data-emotion").split(" "),z=1;z<O.length;z++)o[O[z]]=!0;c.push(L)});var d,f=[dN,fN];{var m,y=[sN,aN(function(L){m.insert(L)})],T=oN(f.concat(i,y)),P=function(O){return aa(rN(O),T)};d=function(O,z,H,G){m=H,P(O?O+"{"+z.styles+"}":z.styles),G&&(N.inserted[z.name]=!0)}}var N={key:t,sheet:new zM({key:t,container:u,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:d};return N.sheet.hydrate(c),N},$f={exports:{}},pt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function vN(){if(Ry)return pt;Ry=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,m=n?Symbol.for("react.forward_ref"):60112,y=n?Symbol.for("react.suspense"):60113,T=n?Symbol.for("react.suspense_list"):60120,P=n?Symbol.for("react.memo"):60115,N=n?Symbol.for("react.lazy"):60116,L=n?Symbol.for("react.block"):60121,O=n?Symbol.for("react.fundamental"):60117,z=n?Symbol.for("react.responder"):60118,H=n?Symbol.for("react.scope"):60119;function G($){if(typeof $=="object"&&$!==null){var oe=$.$$typeof;switch(oe){case e:switch($=$.type,$){case d:case f:case r:case o:case i:case y:return $;default:switch($=$&&$.$$typeof,$){case c:case m:case N:case P:case u:return $;default:return oe}}case t:return oe}}}function re($){return G($)===f}return pt.AsyncMode=d,pt.ConcurrentMode=f,pt.ContextConsumer=c,pt.ContextProvider=u,pt.Element=e,pt.ForwardRef=m,pt.Fragment=r,pt.Lazy=N,pt.Memo=P,pt.Portal=t,pt.Profiler=o,pt.StrictMode=i,pt.Suspense=y,pt.isAsyncMode=function($){return re($)||G($)===d},pt.isConcurrentMode=re,pt.isContextConsumer=function($){return G($)===c},pt.isContextProvider=function($){return G($)===u},pt.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===e},pt.isForwardRef=function($){return G($)===m},pt.isFragment=function($){return G($)===r},pt.isLazy=function($){return G($)===N},pt.isMemo=function($){return G($)===P},pt.isPortal=function($){return G($)===t},pt.isProfiler=function($){return G($)===o},pt.isStrictMode=function($){return G($)===i},pt.isSuspense=function($){return G($)===y},pt.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===r||$===f||$===o||$===i||$===y||$===T||typeof $=="object"&&$!==null&&($.$$typeof===N||$.$$typeof===P||$.$$typeof===u||$.$$typeof===c||$.$$typeof===m||$.$$typeof===O||$.$$typeof===z||$.$$typeof===H||$.$$typeof===L)},pt.typeOf=G,pt}var Py;function _N(){return Py||(Py=1,$f.exports=vN()),$f.exports}var zf,xy;function yN(){if(xy)return zf;xy=1;var n=_N(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[n.ForwardRef]=r,o[n.Memo]=i;function u(N){return n.isMemo(N)?i:o[N.$$typeof]||e}var c=Object.defineProperty,d=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,y=Object.getPrototypeOf,T=Object.prototype;function P(N,L,O){if(typeof L!="string"){if(T){var z=y(L);z&&z!==T&&P(N,z,O)}var H=d(L);f&&(H=H.concat(f(L)));for(var G=u(N),re=u(L),$=0;$<H.length;++$){var oe=H[$];if(!t[oe]&&!(O&&O[oe])&&!(re&&re[oe])&&!(G&&G[oe])){var C=m(L,oe);try{c(N,oe,C)}catch{}}}}return N}return zf=P,zf}yN();var bN=!0;function wN(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):i&&(r+=i+" ")}),r}var dE=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||bN===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},EN=function(e,t,r){dE(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var o=t;do e.insert(t===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function TN(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var IN={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},AN=/[A-Z]|^ms/g,SN=/_EMO_([^_]+?)_([^]*?)_EMO_/g,fE=function(e){return e.charCodeAt(1)===45},Oy=function(e){return e!=null&&typeof e!="boolean"},Hf=uN(function(n){return fE(n)?n:n.replace(AN,"-$&").toLowerCase()}),ky=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(SN,function(r,i,o){return qr={name:i,styles:o,next:qr},i})}return IN[e]!==1&&!fE(e)&&typeof t=="number"&&t!==0?t+"px":t};function Gu(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return qr={name:i.name,styles:i.styles,next:qr},i.name;var o=t;if(o.styles!==void 0){var u=o.next;if(u!==void 0)for(;u!==void 0;)qr={name:u.name,styles:u.styles,next:qr},u=u.next;var c=o.styles+";";return c}return CN(n,e,t)}case"function":{if(n!==void 0){var d=qr,f=t(n);return qr=d,Gu(n,e,f)}break}}var m=t;return m}function CN(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=Gu(n,e,t[i])+";";else for(var o in t){var u=t[o];if(typeof u!="object"){var c=u;Oy(c)&&(r+=Hf(o)+":"+ky(o,c)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&e==null)for(var d=0;d<u.length;d++)Oy(u[d])&&(r+=Hf(o)+":"+ky(o,u[d])+";");else{var f=Gu(n,e,u);switch(o){case"animation":case"animationName":{r+=Hf(o)+":"+f+";";break}default:r+=o+"{"+f+"}"}}}return r}var Vy=/label:\s*([^\s;{]+)\s*(;|$)/g,qr;function pE(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,i="";qr=void 0;var o=n[0];if(o==null||o.raw===void 0)r=!1,i+=Gu(t,e,o);else{var u=o;i+=u[0]}for(var c=1;c<n.length;c++)if(i+=Gu(t,e,n[c]),r){var d=o;i+=d[c]}Vy.lastIndex=0;for(var f="",m;(m=Vy.exec(i))!==null;)f+="-"+m[1];var y=TN(i)+f;return{name:y,styles:i,next:qr}}var RN=function(e){return e()},PN=Kv.useInsertionEffect?Kv.useInsertionEffect:!1,xN=PN||RN,gE=X.createContext(typeof HTMLElement<"u"?mN({key:"css"}):null);gE.Provider;var ON=function(e){return X.forwardRef(function(t,r){var i=X.useContext(gE);return e(t,i,r)})},kN=X.createContext({}),jg={}.hasOwnProperty,Lp="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",VN=function(e,t){var r={};for(var i in t)jg.call(t,i)&&(r[i]=t[i]);return r[Lp]=e,r},DN=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return dE(t,r,i),xN(function(){return EN(t,r,i)}),null},MN=ON(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=n[Lp],o=[r],u="";typeof n.className=="string"?u=wN(e.registered,o,n.className):n.className!=null&&(u=n.className+" ");var c=pE(o,void 0,X.useContext(kN));u+=e.key+"-"+c.name;var d={};for(var f in n)jg.call(n,f)&&f!=="css"&&f!==Lp&&(d[f]=n[f]);return d.className=u,t&&(d.ref=t),X.createElement(X.Fragment,null,X.createElement(DN,{cache:e,serialized:c,isStringTag:typeof i=="string"}),X.createElement(i,d))}),NN=MN,we=function(e,t){var r=arguments;if(t==null||!jg.call(t,"css"))return X.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=NN,o[1]=VN(e,t);for(var u=2;u<i;u++)o[u]=r[u];return X.createElement.apply(null,o)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(we||(we={}));function $g(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return pE(e)}function LN(){var n=$g.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function FN(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var Fp=X.useLayoutEffect,UN=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Vh=function(){};function BN(n,e){return e?e[0]==="-"?n+e:n+"__"+e:n}function jN(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];var o=[].concat(r);if(e&&n)for(var u in e)e.hasOwnProperty(u)&&e[u]&&o.push("".concat(BN(n,u)));return o.filter(function(c){return c}).map(function(c){return String(c).trim()}).join(" ")}var Dy=function(e){return ZN(e)?e.filter(Boolean):fo(e)==="object"&&e!==null?[e]:[]},mE=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=Fi(e,UN);return Ee({},t)},Dt=function(e,t,r){var i=e.cx,o=e.getStyles,u=e.getClassNames,c=e.className;return{css:o(t,e),className:i(r??{},u(t,e),c)}};function vd(n){return[document.documentElement,document.body,window].indexOf(n)>-1}function $N(n){return vd(n)?window.innerHeight:n.clientHeight}function vE(n){return vd(n)?window.pageYOffset:n.scrollTop}function Dh(n,e){if(vd(n)){window.scrollTo(0,e);return}n.scrollTop=e}function zN(n){var e=getComputedStyle(n),t=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=n;i=i.parentElement;)if(e=getComputedStyle(i),!(t&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function HN(n,e,t,r){return t*((n=n/r-1)*n*n+1)+e}function zc(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Vh,i=vE(n),o=e-i,u=10,c=0;function d(){c+=u;var f=HN(c,i,o,t);Dh(n,f),c<t?window.requestAnimationFrame(d):r(n)}d()}function My(n,e){var t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>t.bottom?Dh(n,Math.min(e.offsetTop+e.clientHeight-n.offsetHeight+i,n.scrollHeight)):r.top-i<t.top&&Dh(n,Math.max(e.offsetTop-i,0))}function WN(n){var e=n.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function Ny(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function qN(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var _E=!1,GN={get passive(){return _E=!0}},Hc=typeof window<"u"?window:{};Hc.addEventListener&&Hc.removeEventListener&&(Hc.addEventListener("p",Vh,GN),Hc.removeEventListener("p",Vh,!1));var KN=_E;function QN(n){return n!=null}function ZN(n){return Array.isArray(n)}function Wc(n,e,t){return n?e:t}var YN=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var o=Object.entries(e).filter(function(u){var c=Pi(u,1),d=c[0];return!r.includes(d)});return o.reduce(function(u,c){var d=Pi(c,2),f=d[0],m=d[1];return u[f]=m,u},{})},JN=["children","innerProps"],XN=["children","innerProps"];function eL(n){var e=n.maxHeight,t=n.menuEl,r=n.minHeight,i=n.placement,o=n.shouldScroll,u=n.isFixedPosition,c=n.controlHeight,d=zN(t),f={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return f;var m=d.getBoundingClientRect(),y=m.height,T=t.getBoundingClientRect(),P=T.bottom,N=T.height,L=T.top,O=t.offsetParent.getBoundingClientRect(),z=O.top,H=u?window.innerHeight:$N(d),G=vE(d),re=parseInt(getComputedStyle(t).marginBottom,10),$=parseInt(getComputedStyle(t).marginTop,10),oe=z-$,C=H-L,I=oe+G,S=y-G-L,x=P-H+G+re,M=G+L-$,V=160;switch(i){case"auto":case"bottom":if(C>=N)return{placement:"bottom",maxHeight:e};if(S>=N&&!u)return o&&zc(d,x,V),{placement:"bottom",maxHeight:e};if(!u&&S>=r||u&&C>=r){o&&zc(d,x,V);var A=u?C-re:S-re;return{placement:"bottom",maxHeight:A}}if(i==="auto"||u){var De=e,Fe=u?oe:I;return Fe>=r&&(De=Math.min(Fe-re-c,e)),{placement:"top",maxHeight:De}}if(i==="bottom")return o&&Dh(d,x),{placement:"bottom",maxHeight:e};break;case"top":if(oe>=N)return{placement:"top",maxHeight:e};if(I>=N&&!u)return o&&zc(d,M,V),{placement:"top",maxHeight:e};if(!u&&I>=r||u&&oe>=r){var We=e;return(!u&&I>=r||u&&oe>=r)&&(We=u?oe-$:I-$),o&&zc(d,M,V),{placement:"top",maxHeight:We}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return f}function tL(n){var e={bottom:"top",top:"bottom"};return n?e[n]:"bottom"}var yE=function(e){return e==="auto"?"bottom":e},nL=function(e,t){var r,i=e.placement,o=e.theme,u=o.borderRadius,c=o.spacing,d=o.colors;return Ee((r={label:"menu"},Au(r,tL(i),"100%"),Au(r,"position","absolute"),Au(r,"width","100%"),Au(r,"zIndex",1),r),t?{}:{backgroundColor:d.neutral0,borderRadius:u,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:c.menuGutter,marginTop:c.menuGutter})},bE=X.createContext(null),rL=function(e){var t=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,u=e.menuPosition,c=e.menuShouldScrollIntoView,d=e.theme,f=X.useContext(bE)||{},m=f.setPortalPlacement,y=X.useRef(null),T=X.useState(i),P=Pi(T,2),N=P[0],L=P[1],O=X.useState(null),z=Pi(O,2),H=z[0],G=z[1],re=d.spacing.controlHeight;return Fp(function(){var $=y.current;if($){var oe=u==="fixed",C=c&&!oe,I=eL({maxHeight:i,menuEl:$,minHeight:r,placement:o,shouldScroll:C,isFixedPosition:oe,controlHeight:re});L(I.maxHeight),G(I.placement),m==null||m(I.placement)}},[i,o,u,c,r,m,re]),t({ref:y,placerProps:Ee(Ee({},e),{},{placement:H||yE(o),maxHeight:N})})},iL=function(e){var t=e.children,r=e.innerRef,i=e.innerProps;return we("div",Re({},Dt(e,"menu",{menu:!0}),{ref:r},i),t)},sL=iL,oL=function(e,t){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return Ee({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:i,paddingTop:i})},aL=function(e){var t=e.children,r=e.innerProps,i=e.innerRef,o=e.isMulti;return we("div",Re({},Dt(e,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:i},r),t)},wE=function(e,t){var r=e.theme,i=r.spacing.baseUnit,o=r.colors;return Ee({textAlign:"center"},t?{}:{color:o.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},uL=wE,lL=wE,cL=function(e){var t=e.children,r=t===void 0?"No options":t,i=e.innerProps,o=Fi(e,JN);return we("div",Re({},Dt(Ee(Ee({},o),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},hL=function(e){var t=e.children,r=t===void 0?"Loading...":t,i=e.innerProps,o=Fi(e,XN);return we("div",Re({},Dt(Ee(Ee({},o),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},dL=function(e){var t=e.rect,r=e.offset,i=e.position;return{left:t.left,position:i,top:r,width:t.width,zIndex:1}},fL=function(e){var t=e.appendTo,r=e.children,i=e.controlElement,o=e.innerProps,u=e.menuPlacement,c=e.menuPosition,d=X.useRef(null),f=X.useRef(null),m=X.useState(yE(u)),y=Pi(m,2),T=y[0],P=y[1],N=X.useMemo(function(){return{setPortalPlacement:P}},[]),L=X.useState(null),O=Pi(L,2),z=O[0],H=O[1],G=X.useCallback(function(){if(i){var C=WN(i),I=c==="fixed"?0:window.pageYOffset,S=C[T]+I;(S!==(z==null?void 0:z.offset)||C.left!==(z==null?void 0:z.rect.left)||C.width!==(z==null?void 0:z.rect.width))&&H({offset:S,rect:C})}},[i,c,T,z==null?void 0:z.offset,z==null?void 0:z.rect.left,z==null?void 0:z.rect.width]);Fp(function(){G()},[G]);var re=X.useCallback(function(){typeof f.current=="function"&&(f.current(),f.current=null),i&&d.current&&(f.current=NR(i,d.current,G,{elementResize:"ResizeObserver"in window}))},[i,G]);Fp(function(){re()},[re]);var $=X.useCallback(function(C){d.current=C,re()},[re]);if(!t&&c!=="fixed"||!z)return null;var oe=we("div",Re({ref:$},Dt(Ee(Ee({},e),{},{offset:z.offset,position:c,rect:z.rect}),"menuPortal",{"menu-portal":!0}),o),r);return we(bE.Provider,{value:N},t?LR.createPortal(oe,t):oe)},pL=function(e){var t=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},gL=function(e){var t=e.children,r=e.innerProps,i=e.isDisabled,o=e.isRtl;return we("div",Re({},Dt(e,"container",{"--is-disabled":i,"--is-rtl":o}),r),t)},mL=function(e,t){var r=e.theme.spacing,i=e.isMulti,o=e.hasValue,u=e.selectProps.controlShouldRenderValue;return Ee({alignItems:"center",display:i&&o&&u?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},vL=function(e){var t=e.children,r=e.innerProps,i=e.isMulti,o=e.hasValue;return we("div",Re({},Dt(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":o}),r),t)},_L=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},yL=function(e){var t=e.children,r=e.innerProps;return we("div",Re({},Dt(e,"indicatorsContainer",{indicators:!0}),r),t)},Ly,bL=["size"],wL=["innerProps","isRtl","size"],EL={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},EE=function(e){var t=e.size,r=Fi(e,bL);return we("svg",Re({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:EL},r))},zg=function(e){return we(EE,Re({size:20},e),we("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},TE=function(e){return we(EE,Re({size:20},e),we("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},IE=function(e,t){var r=e.isFocused,i=e.theme,o=i.spacing.baseUnit,u=i.colors;return Ee({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?u.neutral60:u.neutral20,padding:o*2,":hover":{color:r?u.neutral80:u.neutral40}})},TL=IE,IL=function(e){var t=e.children,r=e.innerProps;return we("div",Re({},Dt(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||we(TE,null))},AL=IE,SL=function(e){var t=e.children,r=e.innerProps;return we("div",Re({},Dt(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||we(zg,null))},CL=function(e,t){var r=e.isDisabled,i=e.theme,o=i.spacing.baseUnit,u=i.colors;return Ee({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?u.neutral10:u.neutral20,marginBottom:o*2,marginTop:o*2})},RL=function(e){var t=e.innerProps;return we("span",Re({},t,Dt(e,"indicatorSeparator",{"indicator-separator":!0})))},PL=LN(Ly||(Ly=FN([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),xL=function(e,t){var r=e.isFocused,i=e.size,o=e.theme,u=o.colors,c=o.spacing.baseUnit;return Ee({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?u.neutral60:u.neutral20,padding:c*2})},Wf=function(e){var t=e.delay,r=e.offset;return we("span",{css:$g({animation:"".concat(PL," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},OL=function(e){var t=e.innerProps,r=e.isRtl,i=e.size,o=i===void 0?4:i,u=Fi(e,wL);return we("div",Re({},Dt(Ee(Ee({},u),{},{innerProps:t,isRtl:r,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),we(Wf,{delay:0,offset:r}),we(Wf,{delay:160,offset:!0}),we(Wf,{delay:320,offset:!r}))},kL=function(e,t){var r=e.isDisabled,i=e.isFocused,o=e.theme,u=o.colors,c=o.borderRadius,d=o.spacing;return Ee({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:d.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?u.neutral5:u.neutral0,borderColor:r?u.neutral10:i?u.primary:u.neutral20,borderRadius:c,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(u.primary):void 0,"&:hover":{borderColor:i?u.primary:u.neutral30}})},VL=function(e){var t=e.children,r=e.isDisabled,i=e.isFocused,o=e.innerRef,u=e.innerProps,c=e.menuIsOpen;return we("div",Re({ref:o},Dt(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":c}),u,{"aria-disabled":r||void 0}),t)},DL=VL,ML=["data"],NL=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},LL=function(e){var t=e.children,r=e.cx,i=e.getStyles,o=e.getClassNames,u=e.Heading,c=e.headingProps,d=e.innerProps,f=e.label,m=e.theme,y=e.selectProps;return we("div",Re({},Dt(e,"group",{group:!0}),d),we(u,Re({},c,{selectProps:y,theme:m,getStyles:i,getClassNames:o,cx:r}),f),we("div",null,t))},FL=function(e,t){var r=e.theme,i=r.colors,o=r.spacing;return Ee({label:"group",cursor:"default",display:"block"},t?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},UL=function(e){var t=mE(e);t.data;var r=Fi(t,ML);return we("div",Re({},Dt(e,"groupHeading",{"group-heading":!0}),r))},BL=LL,jL=["innerRef","isDisabled","isHidden","inputClassName"],$L=function(e,t){var r=e.isDisabled,i=e.value,o=e.theme,u=o.spacing,c=o.colors;return Ee(Ee({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},zL),t?{}:{margin:u.baseUnit/2,paddingBottom:u.baseUnit/2,paddingTop:u.baseUnit/2,color:c.neutral80})},AE={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},zL={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ee({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},AE)},HL=function(e){return Ee({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},AE)},WL=function(e){var t=e.cx,r=e.value,i=mE(e),o=i.innerRef,u=i.isDisabled,c=i.isHidden,d=i.inputClassName,f=Fi(i,jL);return we("div",Re({},Dt(e,"input",{"input-container":!0}),{"data-value":r||""}),we("input",Re({className:t({input:!0},d),ref:o,style:HL(c),disabled:u},f)))},qL=WL,GL=function(e,t){var r=e.theme,i=r.spacing,o=r.borderRadius,u=r.colors;return Ee({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:u.neutral10,borderRadius:o/2,margin:i.baseUnit/2})},KL=function(e,t){var r=e.theme,i=r.borderRadius,o=r.colors,u=e.cropWithEllipsis;return Ee({overflow:"hidden",textOverflow:u||u===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:i/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},QL=function(e,t){var r=e.theme,i=r.spacing,o=r.borderRadius,u=r.colors,c=e.isFocused;return Ee({alignItems:"center",display:"flex"},t?{}:{borderRadius:o/2,backgroundColor:c?u.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:u.dangerLight,color:u.danger}})},SE=function(e){var t=e.children,r=e.innerProps;return we("div",r,t)},ZL=SE,YL=SE;function JL(n){var e=n.children,t=n.innerProps;return we("div",Re({role:"button"},t),e||we(zg,{size:14}))}var XL=function(e){var t=e.children,r=e.components,i=e.data,o=e.innerProps,u=e.isDisabled,c=e.removeProps,d=e.selectProps,f=r.Container,m=r.Label,y=r.Remove;return we(f,{data:i,innerProps:Ee(Ee({},Dt(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":u})),o),selectProps:d},we(m,{data:i,innerProps:Ee({},Dt(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:d},t),we(y,{data:i,innerProps:Ee(Ee({},Dt(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},c),selectProps:d}))},eF=XL,tF=function(e,t){var r=e.isDisabled,i=e.isFocused,o=e.isSelected,u=e.theme,c=u.spacing,d=u.colors;return Ee({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:o?d.primary:i?d.primary25:"transparent",color:r?d.neutral20:o?d.neutral0:"inherit",padding:"".concat(c.baseUnit*2,"px ").concat(c.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:o?d.primary:d.primary50}})},nF=function(e){var t=e.children,r=e.isDisabled,i=e.isFocused,o=e.isSelected,u=e.innerRef,c=e.innerProps;return we("div",Re({},Dt(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":o}),{ref:u,"aria-disabled":r},c),t)},rF=nF,iF=function(e,t){var r=e.theme,i=r.spacing,o=r.colors;return Ee({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:o.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},sF=function(e){var t=e.children,r=e.innerProps;return we("div",Re({},Dt(e,"placeholder",{placeholder:!0}),r),t)},oF=sF,aF=function(e,t){var r=e.isDisabled,i=e.theme,o=i.spacing,u=i.colors;return Ee({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?u.neutral40:u.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},uF=function(e){var t=e.children,r=e.isDisabled,i=e.innerProps;return we("div",Re({},Dt(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),t)},lF=uF,cF={ClearIndicator:SL,Control:DL,DropdownIndicator:IL,DownChevron:TE,CrossIcon:zg,Group:BL,GroupHeading:UL,IndicatorsContainer:yL,IndicatorSeparator:RL,Input:qL,LoadingIndicator:OL,Menu:sL,MenuList:aL,MenuPortal:fL,LoadingMessage:hL,NoOptionsMessage:cL,MultiValue:eF,MultiValueContainer:ZL,MultiValueLabel:YL,MultiValueRemove:JL,Option:rF,Placeholder:oF,SelectContainer:gL,SingleValue:lF,ValueContainer:vL},hF=function(e){return Ee(Ee({},cF),e.components)},Fy=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function dF(n,e){return!!(n===e||Fy(n)&&Fy(e))}function fF(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!dF(n[t],e[t]))return!1;return!0}function pF(n,e){e===void 0&&(e=fF);var t=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var u=n.apply(this,i);return t={lastResult:u,lastArgs:i,lastThis:this},u}return r.clear=function(){t=null},r}var gF={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},mF=function(e){return we("span",Re({css:gF},e))},Uy=mF,vF={guidance:function(e){var t=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,o=e.context,u=e.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return u?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,i=r===void 0?"":r,o=e.labels,u=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return u?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,i=e.options,o=e.label,u=o===void 0?"":o,c=e.selectValue,d=e.isDisabled,f=e.isSelected,m=e.isAppleDevice,y=function(L,O){return L&&L.length?"".concat(L.indexOf(O)+1," of ").concat(L.length):""};if(t==="value"&&c)return"value ".concat(u," focused, ").concat(y(c,r),".");if(t==="menu"&&m){var T=d?" disabled":"",P="".concat(f?" selected":"").concat(T);return"".concat(u).concat(P,", ").concat(y(i,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},_F=function(e){var t=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,o=e.focusableOptions,u=e.isFocused,c=e.selectValue,d=e.selectProps,f=e.id,m=e.isAppleDevice,y=d.ariaLiveMessages,T=d.getOptionLabel,P=d.inputValue,N=d.isMulti,L=d.isOptionDisabled,O=d.isSearchable,z=d.menuIsOpen,H=d.options,G=d.screenReaderStatus,re=d.tabSelectsValue,$=d.isLoading,oe=d["aria-label"],C=d["aria-live"],I=X.useMemo(function(){return Ee(Ee({},vF),y||{})},[y]),S=X.useMemo(function(){var Fe="";if(t&&I.onChange){var We=t.option,rt=t.options,ot=t.removedValue,Mt=t.removedValues,Nt=t.value,zt=function(Wt){return Array.isArray(Wt)?null:Wt},it=ot||We||zt(Nt),Ye=it?T(it):"",Cn=rt||Mt||void 0,At=Cn?Cn.map(T):[],Ht=Ee({isDisabled:it&&L(it,c),label:Ye,labels:At},t);Fe=I.onChange(Ht)}return Fe},[t,I,L,c,T]),x=X.useMemo(function(){var Fe="",We=r||i,rt=!!(r&&c&&c.includes(r));if(We&&I.onFocus){var ot={focused:We,label:T(We),isDisabled:L(We,c),isSelected:rt,options:o,context:We===r?"menu":"value",selectValue:c,isAppleDevice:m};Fe=I.onFocus(ot)}return Fe},[r,i,T,L,I,o,c,m]),M=X.useMemo(function(){var Fe="";if(z&&H.length&&!$&&I.onFilter){var We=G({count:o.length});Fe=I.onFilter({inputValue:P,resultsMessage:We})}return Fe},[o,P,z,I,H,G,$]),V=(t==null?void 0:t.action)==="initial-input-focus",A=X.useMemo(function(){var Fe="";if(I.guidance){var We=i?"value":z?"menu":"input";Fe=I.guidance({"aria-label":oe,context:We,isDisabled:r&&L(r,c),isMulti:N,isSearchable:O,tabSelectsValue:re,isInitialFocus:V})}return Fe},[oe,r,i,N,L,O,z,I,c,re,V]),De=we(X.Fragment,null,we("span",{id:"aria-selection"},S),we("span",{id:"aria-focused"},x),we("span",{id:"aria-results"},M),we("span",{id:"aria-guidance"},A));return we(X.Fragment,null,we(Uy,{id:f},V&&De),we(Uy,{"aria-live":C,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},u&&!V&&De))},yF=_F,Up=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],bF=new RegExp("["+Up.map(function(n){return n.letters}).join("")+"]","g"),CE={};for(var qf=0;qf<Up.length;qf++)for(var Gf=Up[qf],Kf=0;Kf<Gf.letters.length;Kf++)CE[Gf.letters[Kf]]=Gf.base;var RE=function(e){return e.replace(bF,function(t){return CE[t]})},wF=pF(RE),By=function(e){return e.replace(/^\s+|\s+$/g,"")},EF=function(e){return"".concat(e.label," ").concat(e.value)},TF=function(e){return function(t,r){if(t.data.__isNew__)return!0;var i=Ee({ignoreCase:!0,ignoreAccents:!0,stringify:EF,trim:!0,matchFrom:"any"},e),o=i.ignoreCase,u=i.ignoreAccents,c=i.stringify,d=i.trim,f=i.matchFrom,m=d?By(r):r,y=d?By(c(t)):c(t);return o&&(m=m.toLowerCase(),y=y.toLowerCase()),u&&(m=wF(m),y=RE(y)),f==="start"?y.substr(0,m.length)===m:y.indexOf(m)>-1}},IF=["innerRef"];function AF(n){var e=n.innerRef,t=Fi(n,IF),r=YN(t,"onExited","in","enter","exit","appear");return we("input",Re({ref:e},r,{css:$g({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var SF=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function CF(n){var e=n.isEnabled,t=n.onBottomArrive,r=n.onBottomLeave,i=n.onTopArrive,o=n.onTopLeave,u=X.useRef(!1),c=X.useRef(!1),d=X.useRef(0),f=X.useRef(null),m=X.useCallback(function(O,z){if(f.current!==null){var H=f.current,G=H.scrollTop,re=H.scrollHeight,$=H.clientHeight,oe=f.current,C=z>0,I=re-$-G,S=!1;I>z&&u.current&&(r&&r(O),u.current=!1),C&&c.current&&(o&&o(O),c.current=!1),C&&z>I?(t&&!u.current&&t(O),oe.scrollTop=re,S=!0,u.current=!0):!C&&-z>G&&(i&&!c.current&&i(O),oe.scrollTop=0,S=!0,c.current=!0),S&&SF(O)}},[t,r,i,o]),y=X.useCallback(function(O){m(O,O.deltaY)},[m]),T=X.useCallback(function(O){d.current=O.changedTouches[0].clientY},[]),P=X.useCallback(function(O){var z=d.current-O.changedTouches[0].clientY;m(O,z)},[m]),N=X.useCallback(function(O){if(O){var z=KN?{passive:!1}:!1;O.addEventListener("wheel",y,z),O.addEventListener("touchstart",T,z),O.addEventListener("touchmove",P,z)}},[P,T,y]),L=X.useCallback(function(O){O&&(O.removeEventListener("wheel",y,!1),O.removeEventListener("touchstart",T,!1),O.removeEventListener("touchmove",P,!1))},[P,T,y]);return X.useEffect(function(){if(e){var O=f.current;return N(O),function(){L(O)}}},[e,N,L]),function(O){f.current=O}}var jy=["boxSizing","height","overflow","paddingRight","position"],$y={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function zy(n){n.cancelable&&n.preventDefault()}function Hy(n){n.stopPropagation()}function Wy(){var n=this.scrollTop,e=this.scrollHeight,t=n+this.offsetHeight;n===0?this.scrollTop=1:t===e&&(this.scrollTop=n-1)}function qy(){return"ontouchstart"in window||navigator.maxTouchPoints}var Gy=!!(typeof window<"u"&&window.document&&window.document.createElement),gu=0,Go={capture:!1,passive:!1};function RF(n){var e=n.isEnabled,t=n.accountForScrollbars,r=t===void 0?!0:t,i=X.useRef({}),o=X.useRef(null),u=X.useCallback(function(d){if(Gy){var f=document.body,m=f&&f.style;if(r&&jy.forEach(function(N){var L=m&&m[N];i.current[N]=L}),r&&gu<1){var y=parseInt(i.current.paddingRight,10)||0,T=document.body?document.body.clientWidth:0,P=window.innerWidth-T+y||0;Object.keys($y).forEach(function(N){var L=$y[N];m&&(m[N]=L)}),m&&(m.paddingRight="".concat(P,"px"))}f&&qy()&&(f.addEventListener("touchmove",zy,Go),d&&(d.addEventListener("touchstart",Wy,Go),d.addEventListener("touchmove",Hy,Go))),gu+=1}},[r]),c=X.useCallback(function(d){if(Gy){var f=document.body,m=f&&f.style;gu=Math.max(gu-1,0),r&&gu<1&&jy.forEach(function(y){var T=i.current[y];m&&(m[y]=T)}),f&&qy()&&(f.removeEventListener("touchmove",zy,Go),d&&(d.removeEventListener("touchstart",Wy,Go),d.removeEventListener("touchmove",Hy,Go)))}},[r]);return X.useEffect(function(){if(e){var d=o.current;return u(d),function(){c(d)}}},[e,u,c]),function(d){o.current=d}}var PF=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},xF={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function OF(n){var e=n.children,t=n.lockEnabled,r=n.captureEnabled,i=r===void 0?!0:r,o=n.onBottomArrive,u=n.onBottomLeave,c=n.onTopArrive,d=n.onTopLeave,f=CF({isEnabled:i,onBottomArrive:o,onBottomLeave:u,onTopArrive:c,onTopLeave:d}),m=RF({isEnabled:t}),y=function(P){f(P),m(P)};return we(X.Fragment,null,t&&we("div",{onClick:PF,css:xF}),e(y))}var kF={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},VF=function(e){var t=e.name,r=e.onFocus;return we("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:kF,value:"",onChange:function(){}})},DF=VF;function Hg(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function MF(){return Hg(/^iPhone/i)}function PE(){return Hg(/^Mac/i)}function NF(){return Hg(/^iPad/i)||PE()&&navigator.maxTouchPoints>1}function LF(){return MF()||NF()}function FF(){return PE()||LF()}var UF=function(e){return e.label},BF=function(e){return e.label},jF=function(e){return e.value},$F=function(e){return!!e.isDisabled},zF={clearIndicator:AL,container:pL,control:kL,dropdownIndicator:TL,group:NL,groupHeading:FL,indicatorsContainer:_L,indicatorSeparator:CL,input:$L,loadingIndicator:xL,loadingMessage:lL,menu:nL,menuList:oL,menuPortal:dL,multiValue:GL,multiValueLabel:KL,multiValueRemove:QL,noOptionsMessage:uL,option:tF,placeholder:iF,singleValue:aF,valueContainer:mL},HF={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},WF=4,xE=4,qF=38,GF=xE*2,KF={baseUnit:xE,controlHeight:qF,menuGutter:GF},Qf={borderRadius:WF,colors:HF,spacing:KF},QF={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Ny(),captureMenuScroll:!Ny(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:TF(),formatGroupLabel:UF,getOptionLabel:BF,getOptionValue:jF,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:$F,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!qN(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Ky(n,e,t,r){var i=VE(n,e,t),o=DE(n,e,t),u=kE(n,e),c=Mh(n,e);return{type:"option",data:e,isDisabled:i,isSelected:o,label:u,value:c,index:r}}function ah(n,e){return n.options.map(function(t,r){if("options"in t){var i=t.options.map(function(u,c){return Ky(n,u,e,c)}).filter(function(u){return Zy(n,u)});return i.length>0?{type:"group",data:t,options:i,index:r}:void 0}var o=Ky(n,t,e,r);return Zy(n,o)?o:void 0}).filter(QN)}function OE(n){return n.reduce(function(e,t){return t.type==="group"?e.push.apply(e,Lg(t.options.map(function(r){return r.data}))):e.push(t.data),e},[])}function Qy(n,e){return n.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Lg(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):t.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),t},[])}function ZF(n,e){return OE(ah(n,e))}function Zy(n,e){var t=n.inputValue,r=t===void 0?"":t,i=e.data,o=e.isSelected,u=e.label,c=e.value;return(!NE(n)||!o)&&ME(n,{label:u,value:c,data:i},r)}function YF(n,e){var t=n.focusedValue,r=n.selectValue,i=r.indexOf(t);if(i>-1){var o=e.indexOf(t);if(o>-1)return t;if(i<e.length)return e[i]}return null}function JF(n,e){var t=n.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var Zf=function(e,t){var r,i=(r=e.find(function(o){return o.data===t}))===null||r===void 0?void 0:r.id;return i||null},kE=function(e,t){return e.getOptionLabel(t)},Mh=function(e,t){return e.getOptionValue(t)};function VE(n,e,t){return typeof n.isOptionDisabled=="function"?n.isOptionDisabled(e,t):!1}function DE(n,e,t){if(t.indexOf(e)>-1)return!0;if(typeof n.isOptionSelected=="function")return n.isOptionSelected(e,t);var r=Mh(n,e);return t.some(function(i){return Mh(n,i)===r})}function ME(n,e,t){return n.filterOption?n.filterOption(e,t):!0}var NE=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},XF=1,LE=function(n){DM(t,n);var e=LM(t);function t(r){var i;if(kM(this,t),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=FF(),i.controlRef=null,i.getControlRef=function(d){i.controlRef=d},i.focusedOptionRef=null,i.getFocusedOptionRef=function(d){i.focusedOptionRef=d},i.menuListRef=null,i.getMenuListRef=function(d){i.menuListRef=d},i.inputRef=null,i.getInputRef=function(d){i.inputRef=d},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(d,f){var m=i.props,y=m.onChange,T=m.name;f.name=T,i.ariaOnChange(d,f),y(d,f)},i.setValue=function(d,f,m){var y=i.props,T=y.closeMenuOnSelect,P=y.isMulti,N=y.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:N}),T&&(i.setState({inputIsHiddenAfterUpdate:!P}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(d,{action:f,option:m})},i.selectOption=function(d){var f=i.props,m=f.blurInputOnSelect,y=f.isMulti,T=f.name,P=i.state.selectValue,N=y&&i.isOptionSelected(d,P),L=i.isOptionDisabled(d,P);if(N){var O=i.getOptionValue(d);i.setValue(P.filter(function(z){return i.getOptionValue(z)!==O}),"deselect-option",d)}else if(!L)y?i.setValue([].concat(Lg(P),[d]),"select-option",d):i.setValue(d,"select-option");else{i.ariaOnChange(d,{action:"select-option",option:d,name:T});return}m&&i.blurInput()},i.removeValue=function(d){var f=i.props.isMulti,m=i.state.selectValue,y=i.getOptionValue(d),T=m.filter(function(N){return i.getOptionValue(N)!==y}),P=Wc(f,T,T[0]||null);i.onChange(P,{action:"remove-value",removedValue:d}),i.focusInput()},i.clearValue=function(){var d=i.state.selectValue;i.onChange(Wc(i.props.isMulti,[],null),{action:"clear",removedValues:d})},i.popValue=function(){var d=i.props.isMulti,f=i.state.selectValue,m=f[f.length-1],y=f.slice(0,f.length-1),T=Wc(d,y,y[0]||null);m&&i.onChange(T,{action:"pop-value",removedValue:m})},i.getFocusedOptionId=function(d){return Zf(i.state.focusableOptionsWithIds,d)},i.getFocusableOptionsWithIds=function(){return Qy(ah(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var d=arguments.length,f=new Array(d),m=0;m<d;m++)f[m]=arguments[m];return jN.apply(void 0,[i.props.classNamePrefix].concat(f))},i.getOptionLabel=function(d){return kE(i.props,d)},i.getOptionValue=function(d){return Mh(i.props,d)},i.getStyles=function(d,f){var m=i.props.unstyled,y=zF[d](f,m);y.boxSizing="border-box";var T=i.props.styles[d];return T?T(y,f):y},i.getClassNames=function(d,f){var m,y;return(m=(y=i.props.classNames)[d])===null||m===void 0?void 0:m.call(y,f)},i.getElementId=function(d){return"".concat(i.state.instancePrefix,"-").concat(d)},i.getComponents=function(){return hF(i.props)},i.buildCategorizedOptions=function(){return ah(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return OE(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(d,f){i.setState({ariaSelection:Ee({value:d},f)})},i.onMenuMouseDown=function(d){d.button===0&&(d.stopPropagation(),d.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(d){i.blockOptionHover=!1},i.onControlMouseDown=function(d){if(!d.defaultPrevented){var f=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&i.onMenuClose():f&&i.openMenu("first"):(f&&(i.openAfterFocus=!0),i.focusInput()),d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&d.preventDefault()}},i.onDropdownIndicatorMouseDown=function(d){if(!(d&&d.type==="mousedown"&&d.button!==0)&&!i.props.isDisabled){var f=i.props,m=f.isMulti,y=f.menuIsOpen;i.focusInput(),y?(i.setState({inputIsHiddenAfterUpdate:!m}),i.onMenuClose()):i.openMenu("first"),d.preventDefault()}},i.onClearIndicatorMouseDown=function(d){d&&d.type==="mousedown"&&d.button!==0||(i.clearValue(),d.preventDefault(),i.openAfterFocus=!1,d.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(d){typeof i.props.closeMenuOnScroll=="boolean"?d.target instanceof HTMLElement&&vd(d.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(d)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(d){var f=d.touches,m=f&&f.item(0);m&&(i.initialTouchX=m.clientX,i.initialTouchY=m.clientY,i.userIsDragging=!1)},i.onTouchMove=function(d){var f=d.touches,m=f&&f.item(0);if(m){var y=Math.abs(m.clientX-i.initialTouchX),T=Math.abs(m.clientY-i.initialTouchY),P=5;i.userIsDragging=y>P||T>P}},i.onTouchEnd=function(d){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(d.target)&&i.menuListRef&&!i.menuListRef.contains(d.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(d){i.userIsDragging||i.onControlMouseDown(d)},i.onClearIndicatorTouchEnd=function(d){i.userIsDragging||i.onClearIndicatorMouseDown(d)},i.onDropdownIndicatorTouchEnd=function(d){i.userIsDragging||i.onDropdownIndicatorMouseDown(d)},i.handleInputChange=function(d){var f=i.props.inputValue,m=d.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(m,{action:"input-change",prevInputValue:f}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(d){i.props.onFocus&&i.props.onFocus(d),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(d){var f=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(d),i.onInputChange("",{action:"input-blur",prevInputValue:f}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(d){if(!(i.blockOptionHover||i.state.focusedOption===d)){var f=i.getFocusableOptions(),m=f.indexOf(d);i.setState({focusedOption:d,focusedOptionId:m>-1?i.getFocusedOptionId(d):null})}},i.shouldHideSelectedOptions=function(){return NE(i.props)},i.onValueInputFocus=function(d){d.preventDefault(),d.stopPropagation(),i.focus()},i.onKeyDown=function(d){var f=i.props,m=f.isMulti,y=f.backspaceRemovesValue,T=f.escapeClearsValue,P=f.inputValue,N=f.isClearable,L=f.isDisabled,O=f.menuIsOpen,z=f.onKeyDown,H=f.tabSelectsValue,G=f.openMenuOnFocus,re=i.state,$=re.focusedOption,oe=re.focusedValue,C=re.selectValue;if(!L&&!(typeof z=="function"&&(z(d),d.defaultPrevented))){switch(i.blockOptionHover=!0,d.key){case"ArrowLeft":if(!m||P)return;i.focusValue("previous");break;case"ArrowRight":if(!m||P)return;i.focusValue("next");break;case"Delete":case"Backspace":if(P)return;if(oe)i.removeValue(oe);else{if(!y)return;m?i.popValue():N&&i.clearValue()}break;case"Tab":if(i.isComposing||d.shiftKey||!O||!H||!$||G&&i.isOptionSelected($,C))return;i.selectOption($);break;case"Enter":if(d.keyCode===229)break;if(O){if(!$||i.isComposing)return;i.selectOption($);break}return;case"Escape":O?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:P}),i.onMenuClose()):N&&T&&i.clearValue();break;case" ":if(P)return;if(!O){i.openMenu("first");break}if(!$)return;i.selectOption($);break;case"ArrowUp":O?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":O?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!O)return;i.focusOption("pageup");break;case"PageDown":if(!O)return;i.focusOption("pagedown");break;case"Home":if(!O)return;i.focusOption("first");break;case"End":if(!O)return;i.focusOption("last");break;default:return}d.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++XF),i.state.selectValue=Dy(r.value),r.menuIsOpen&&i.state.selectValue.length){var o=i.getFocusableOptionsWithIds(),u=i.buildFocusableOptions(),c=u.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=o,i.state.focusedOption=u[c],i.state.focusedOptionId=Zf(o,u[c])}return i}return VM(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&My(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,u=o.isDisabled,c=o.menuIsOpen,d=this.state.isFocused;(d&&!u&&i.isDisabled||d&&c&&!i.menuIsOpen)&&this.focusInput(),d&&u&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!d&&!u&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(My(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,u=this.state,c=u.selectValue,d=u.isFocused,f=this.buildFocusableOptions(),m=i==="first"?0:f.length-1;if(!this.props.isMulti){var y=f.indexOf(c[0]);y>-1&&(m=y)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[m],focusedOptionId:this.getFocusedOptionId(f[m])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,u=o.selectValue,c=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=u.indexOf(c);c||(d=-1);var f=u.length-1,m=-1;if(u.length){switch(i){case"previous":d===0?m=0:d===-1?m=f:m=d-1;break;case"next":d>-1&&d<f&&(m=d+1);break}this.setState({inputIsHidden:m!==-1,focusedValue:u[m]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,u=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var d=0,f=c.indexOf(u);u||(f=-1),i==="up"?d=f>0?f-1:c.length-1:i==="down"?d=(f+1)%c.length:i==="pageup"?(d=f-o,d<0&&(d=0)):i==="pagedown"?(d=f+o,d>c.length-1&&(d=c.length-1)):i==="last"&&(d=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Qf):Ee(Ee({},Qf),this.props.theme):Qf}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,u=this.getStyles,c=this.getClassNames,d=this.getValue,f=this.selectOption,m=this.setValue,y=this.props,T=y.isMulti,P=y.isRtl,N=y.options,L=this.hasValue();return{clearValue:i,cx:o,getStyles:u,getClassNames:c,getValue:d,hasValue:L,isMulti:T,isRtl:P,options:N,selectOption:f,selectProps:y,setValue:m,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,u=i.isMulti;return o===void 0?u:o}},{key:"isOptionDisabled",value:function(i,o){return VE(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return DE(this.props,i,o)}},{key:"filterOption",value:function(i,o){return ME(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var u=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:u,selectValue:c})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,u=i.isSearchable,c=i.inputId,d=i.inputValue,f=i.tabIndex,m=i.form,y=i.menuIsOpen,T=i.required,P=this.getComponents(),N=P.Input,L=this.state,O=L.inputIsHidden,z=L.ariaSelection,H=this.commonProps,G=c||this.getElementId("input"),re=Ee(Ee(Ee({"aria-autocomplete":"list","aria-expanded":y,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":T,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},y&&{"aria-controls":this.getElementId("listbox")}),!u&&{"aria-readonly":!0}),this.hasValue()?(z==null?void 0:z.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return u?X.createElement(N,Re({},H,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:G,innerRef:this.getInputRef,isDisabled:o,isHidden:O,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:m,type:"text",value:d},re)):X.createElement(AF,Re({id:G,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Vh,onFocus:this.onInputFocus,disabled:o,tabIndex:f,inputMode:"none",form:m,value:""},re))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),u=o.MultiValue,c=o.MultiValueContainer,d=o.MultiValueLabel,f=o.MultiValueRemove,m=o.SingleValue,y=o.Placeholder,T=this.commonProps,P=this.props,N=P.controlShouldRenderValue,L=P.isDisabled,O=P.isMulti,z=P.inputValue,H=P.placeholder,G=this.state,re=G.selectValue,$=G.focusedValue,oe=G.isFocused;if(!this.hasValue()||!N)return z?null:X.createElement(y,Re({},T,{key:"placeholder",isDisabled:L,isFocused:oe,innerProps:{id:this.getElementId("placeholder")}}),H);if(O)return re.map(function(I,S){var x=I===$,M="".concat(i.getOptionLabel(I),"-").concat(i.getOptionValue(I));return X.createElement(u,Re({},T,{components:{Container:c,Label:d,Remove:f},isFocused:x,isDisabled:L,key:M,index:S,removeProps:{onClick:function(){return i.removeValue(I)},onTouchEnd:function(){return i.removeValue(I)},onMouseDown:function(A){A.preventDefault()}},data:I}),i.formatOptionLabel(I,"value"))});if(z)return null;var C=re[0];return X.createElement(m,Re({},T,{data:C,isDisabled:L}),this.formatOptionLabel(C,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),o=i.ClearIndicator,u=this.commonProps,c=this.props,d=c.isDisabled,f=c.isLoading,m=this.state.isFocused;if(!this.isClearable()||!o||d||!this.hasValue()||f)return null;var y={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return X.createElement(o,Re({},u,{innerProps:y,isFocused:m}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),o=i.LoadingIndicator,u=this.commonProps,c=this.props,d=c.isDisabled,f=c.isLoading,m=this.state.isFocused;if(!o||!f)return null;var y={"aria-hidden":"true"};return X.createElement(o,Re({},u,{innerProps:y,isDisabled:d,isFocused:m}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,u=i.IndicatorSeparator;if(!o||!u)return null;var c=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return X.createElement(u,Re({},c,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator;if(!o)return null;var u=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused,f={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return X.createElement(o,Re({},u,{innerProps:f,isDisabled:c,isFocused:d}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),u=o.Group,c=o.GroupHeading,d=o.Menu,f=o.MenuList,m=o.MenuPortal,y=o.LoadingMessage,T=o.NoOptionsMessage,P=o.Option,N=this.commonProps,L=this.state.focusedOption,O=this.props,z=O.captureMenuScroll,H=O.inputValue,G=O.isLoading,re=O.loadingMessage,$=O.minMenuHeight,oe=O.maxMenuHeight,C=O.menuIsOpen,I=O.menuPlacement,S=O.menuPosition,x=O.menuPortalTarget,M=O.menuShouldBlockScroll,V=O.menuShouldScrollIntoView,A=O.noOptionsMessage,De=O.onMenuScrollToTop,Fe=O.onMenuScrollToBottom;if(!C)return null;var We=function(Ye,Cn){var At=Ye.type,Ht=Ye.data,Qt=Ye.isDisabled,Wt=Ye.isSelected,mn=Ye.label,vr=Ye.value,Nn=L===Ht,Ln=Qt?void 0:function(){return i.onOptionHover(Ht)},Dr=Qt?void 0:function(){return i.selectOption(Ht)},Lt="".concat(i.getElementId("option"),"-").concat(Cn),Fn={id:Lt,onClick:Dr,onMouseMove:Ln,onMouseOver:Ln,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:Wt};return X.createElement(P,Re({},N,{innerProps:Fn,data:Ht,isDisabled:Qt,isSelected:Wt,key:Lt,label:mn,type:At,value:vr,isFocused:Nn,innerRef:Nn?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Ye.data,"menu"))},rt;if(this.hasOptions())rt=this.getCategorizedOptions().map(function(it){if(it.type==="group"){var Ye=it.data,Cn=it.options,At=it.index,Ht="".concat(i.getElementId("group"),"-").concat(At),Qt="".concat(Ht,"-heading");return X.createElement(u,Re({},N,{key:Ht,data:Ye,options:Cn,Heading:c,headingProps:{id:Qt,data:it.data},label:i.formatGroupLabel(it.data)}),it.options.map(function(Wt){return We(Wt,"".concat(At,"-").concat(Wt.index))}))}else if(it.type==="option")return We(it,"".concat(it.index))});else if(G){var ot=re({inputValue:H});if(ot===null)return null;rt=X.createElement(y,N,ot)}else{var Mt=A({inputValue:H});if(Mt===null)return null;rt=X.createElement(T,N,Mt)}var Nt={minMenuHeight:$,maxMenuHeight:oe,menuPlacement:I,menuPosition:S,menuShouldScrollIntoView:V},zt=X.createElement(rL,Re({},N,Nt),function(it){var Ye=it.ref,Cn=it.placerProps,At=Cn.placement,Ht=Cn.maxHeight;return X.createElement(d,Re({},N,Nt,{innerRef:Ye,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:G,placement:At}),X.createElement(OF,{captureEnabled:z,onTopArrive:De,onBottomArrive:Fe,lockEnabled:M},function(Qt){return X.createElement(f,Re({},N,{innerRef:function(mn){i.getMenuListRef(mn),Qt(mn)},innerProps:{role:"listbox","aria-multiselectable":N.isMulti,id:i.getElementId("listbox")},isLoading:G,maxHeight:Ht,focusedOption:L}),rt)}))});return x||S==="fixed"?X.createElement(m,Re({},N,{appendTo:x,controlElement:this.controlRef,menuPlacement:I,menuPosition:S}),zt):zt}},{key:"renderFormField",value:function(){var i=this,o=this.props,u=o.delimiter,c=o.isDisabled,d=o.isMulti,f=o.name,m=o.required,y=this.state.selectValue;if(m&&!this.hasValue()&&!c)return X.createElement(DF,{name:f,onFocus:this.onValueInputFocus});if(!(!f||c))if(d)if(u){var T=y.map(function(L){return i.getOptionValue(L)}).join(u);return X.createElement("input",{name:f,type:"hidden",value:T})}else{var P=y.length>0?y.map(function(L,O){return X.createElement("input",{key:"i-".concat(O),name:f,type:"hidden",value:i.getOptionValue(L)})}):X.createElement("input",{name:f,type:"hidden",value:""});return X.createElement("div",null,P)}else{var N=y[0]?this.getOptionValue(y[0]):"";return X.createElement("input",{name:f,type:"hidden",value:N})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,u=o.ariaSelection,c=o.focusedOption,d=o.focusedValue,f=o.isFocused,m=o.selectValue,y=this.getFocusableOptions();return X.createElement(yF,Re({},i,{id:this.getElementId("live-region"),ariaSelection:u,focusedOption:c,focusedValue:d,isFocused:f,selectValue:m,focusableOptions:y,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,u=i.IndicatorsContainer,c=i.SelectContainer,d=i.ValueContainer,f=this.props,m=f.className,y=f.id,T=f.isDisabled,P=f.menuIsOpen,N=this.state.isFocused,L=this.commonProps=this.getCommonProps();return X.createElement(c,Re({},L,{className:m,innerProps:{id:y,onKeyDown:this.onKeyDown},isDisabled:T,isFocused:N}),this.renderLiveRegion(),X.createElement(o,Re({},L,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:T,isFocused:N,menuIsOpen:P}),X.createElement(d,Re({},L,{isDisabled:T}),this.renderPlaceholderOrValue(),this.renderInput()),X.createElement(u,Re({},L,{isDisabled:T}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,o){var u=o.prevProps,c=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,f=o.ariaSelection,m=o.isFocused,y=o.prevWasFocused,T=o.instancePrefix,P=i.options,N=i.value,L=i.menuIsOpen,O=i.inputValue,z=i.isMulti,H=Dy(N),G={};if(u&&(N!==u.value||P!==u.options||L!==u.menuIsOpen||O!==u.inputValue)){var re=L?ZF(i,H):[],$=L?Qy(ah(i,H),"".concat(T,"-option")):[],oe=c?YF(o,H):null,C=JF(o,re),I=Zf($,C);G={selectValue:H,focusedOption:C,focusedOptionId:I,focusableOptionsWithIds:$,focusedValue:oe,clearFocusValueOnUpdate:!1}}var S=d!=null&&i!==u?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},x=f,M=m&&y;return m&&!M&&(x={value:Wc(z,H,H[0]||null),options:H,action:"initial-input-focus"},M=!y),(f==null?void 0:f.action)==="initial-input-focus"&&(x=null),Ee(Ee(Ee({},G),S),{},{prevProps:i,ariaSelection:x,prevWasFocused:M})}}]),t}(X.Component);LE.defaultProps=QF;var e4=X.forwardRef(function(n,e){var t=OM(n);return X.createElement(LE,Re({ref:e},t))}),t4=e4,n4="Label",FE=X.forwardRef((n,e)=>ce.jsx(FR.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));FE.displayName=n4;var r4=FE;function i4({className:n,...e}){return ce.jsx(r4,{"data-slot":"label",className:Qn("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}function Yy(n){const{label:e,className:t,...r}=n;return ce.jsxs("div",{className:UR(t),children:[e&&ce.jsx(i4,{children:e}),ce.jsx(t4,{...r})]})}const s4=["warlock","hunter","mage","rogue","priest","paladin","druid","shaman","death knight","monk","demon hunter","warrior","evoker"];var nt;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const o={};for(const u of i)o[u]=u;return o},n.getValidEnumValues=i=>{const o=n.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),u={};for(const c of o)u[c]=i[c];return n.objectValues(u)},n.objectValues=i=>n.objectKeys(i).map(function(o){return i[o]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const u in i)Object.prototype.hasOwnProperty.call(i,u)&&o.push(u);return o},n.find=(i,o)=>{for(const u of i)if(o(u))return u},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}n.joinValues=r,n.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(nt||(nt={}));var Bp;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Bp||(Bp={}));const ge=nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ti=n=>{switch(typeof n){case"undefined":return ge.undefined;case"string":return ge.string;case"number":return isNaN(n)?ge.nan:ge.number;case"boolean":return ge.boolean;case"function":return ge.function;case"bigint":return ge.bigint;case"symbol":return ge.symbol;case"object":return Array.isArray(n)?ge.array:n===null?ge.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ge.promise:typeof Map<"u"&&n instanceof Map?ge.map:typeof Set<"u"&&n instanceof Set?ge.set:typeof Date<"u"&&n instanceof Date?ge.date:ge.object;default:return ge.unknown}},ie=nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),o4=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class ir extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(o){return o.message},r={_errors:[]},i=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(i);else if(u.code==="invalid_return_type")i(u.returnTypeError);else if(u.code==="invalid_arguments")i(u.argumentsError);else if(u.path.length===0)r._errors.push(t(u));else{let c=r,d=0;for(;d<u.path.length;){const f=u.path[d];d===u.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(t(u))):c[f]=c[f]||{_errors:[]},c=c[f],d++}}};return i(this),r}static assert(e){if(!(e instanceof ir))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,nt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}ir.create=n=>new ir(n);const Ta=(n,e)=>{let t;switch(n.code){case ie.invalid_type:n.received===ge.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case ie.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,nt.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:t=`Unrecognized key(s) in object: ${nt.joinValues(n.keys,", ")}`;break;case ie.invalid_union:t="Invalid input";break;case ie.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${nt.joinValues(n.options)}`;break;case ie.invalid_enum_value:t=`Invalid enum value. Expected ${nt.joinValues(n.options)}, received '${n.received}'`;break;case ie.invalid_arguments:t="Invalid function arguments";break;case ie.invalid_return_type:t="Invalid function return type";break;case ie.invalid_date:t="Invalid date";break;case ie.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:nt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case ie.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case ie.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case ie.custom:t="Invalid input";break;case ie.invalid_intersection_types:t="Intersection results could not be merged";break;case ie.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case ie.not_finite:t="Number must be finite";break;default:t=e.defaultError,nt.assertNever(n)}return{message:t}};let UE=Ta;function a4(n){UE=n}function Nh(){return UE}const Lh=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,o=[...t,...i.path||[]],u={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="";const d=r.filter(f=>!!f).slice().reverse();for(const f of d)c=f(u,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},u4=[];function fe(n,e){const t=Nh(),r=Lh({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Ta?void 0:Ta].filter(i=>!!i)});n.common.issues.push(r)}class Sn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return Oe;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t){const o=await i.key,u=await i.value;r.push({key:o,value:u})}return Sn.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:o,value:u}=i;if(o.status==="aborted"||u.status==="aborted")return Oe;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||i.alwaysSet)&&(r[o.value]=u.value)}return{status:e.value,value:r}}}const Oe=Object.freeze({status:"aborted"}),na=n=>({status:"dirty",value:n}),Mn=n=>({status:"valid",value:n}),jp=n=>n.status==="aborted",$p=n=>n.status==="dirty",po=n=>n.status==="valid",Ku=n=>typeof Promise<"u"&&n instanceof Promise;function Fh(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function BE(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var ye;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ye||(ye={}));var Su,Cu;class ri{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Jy=(n,e)=>{if(po(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ir(n.common.issues);return this._error=t,this._error}}};function Ue(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(u,c)=>{var d,f;const{message:m}=n;return u.code==="invalid_enum_value"?{message:m??c.defaultError}:typeof c.data>"u"?{message:(d=m??r)!==null&&d!==void 0?d:c.defaultError}:u.code!=="invalid_type"?{message:c.defaultError}:{message:(f=m??t)!==null&&f!==void 0?f:c.defaultError}},description:i}}class $e{get description(){return this._def.description}_getType(e){return Ti(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ti(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Sn,ctx:{common:e.parent.common,data:e.data,parsedType:Ti(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ku(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ti(e)},o=this._parseSync({data:e,path:i.path,parent:i});return Jy(i,o)}"~validate"(e){var t,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ti(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:i});return po(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((r=(t=o==null?void 0:o.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>po(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ti(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(Ku(i)?i:Promise.resolve(i));return Jy(r,o)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,o)=>{const u=e(i),c=()=>o.addIssue({code:ie.custom,...r(i)});return typeof Promise<"u"&&u instanceof Promise?u.then(d=>d?!0:(c(),!1)):u?!0:(c(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new Vr({schema:this,typeName:xe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ei.create(this,this._def)}nullable(){return Rs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Or.create(this)}promise(){return Aa.create(this,this._def)}or(e){return Ju.create([this,e],this._def)}and(e){return Xu.create(this,e,this._def)}transform(e){return new Vr({...Ue(this._def),schema:this,typeName:xe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new il({...Ue(this._def),innerType:this,defaultValue:t,typeName:xe.ZodDefault})}brand(){return new Wg({typeName:xe.ZodBranded,type:this,...Ue(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new sl({...Ue(this._def),innerType:this,catchValue:t,typeName:xe.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return bl.create(this,e)}readonly(){return ol.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const l4=/^c[^\s-]{8,}$/i,c4=/^[0-9a-z]+$/,h4=/^[0-9A-HJKMNP-TV-Z]{26}$/i,d4=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,f4=/^[a-z0-9_-]{21}$/i,p4=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,g4=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,m4=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,v4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Yf;const _4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,y4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,b4=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,w4=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,E4=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,T4=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,jE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",I4=new RegExp(`^${jE}$`);function $E(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function A4(n){return new RegExp(`^${$E(n)}$`)}function zE(n){let e=`${jE}T${$E(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function S4(n,e){return!!((e==="v4"||!e)&&_4.test(n)||(e==="v6"||!e)&&b4.test(n))}function C4(n,e){if(!p4.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function R4(n,e){return!!((e==="v4"||!e)&&y4.test(n)||(e==="v6"||!e)&&w4.test(n))}class xr extends $e{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ge.string){const o=this._getOrReturnCtx(e);return fe(o,{code:ie.invalid_type,expected:ge.string,received:o.parsedType}),Oe}const r=new Sn;let i;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:ie.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:ie.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,c=e.data.length<o.value;(u||c)&&(i=this._getOrReturnCtx(e,i),u?fe(i,{code:ie.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&fe(i,{code:ie.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")m4.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"email",code:ie.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Yf||(Yf=new RegExp(v4,"u")),Yf.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"emoji",code:ie.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")d4.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"uuid",code:ie.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")f4.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"nanoid",code:ie.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")l4.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"cuid",code:ie.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")c4.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"cuid2",code:ie.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")h4.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"ulid",code:ie.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),fe(i,{validation:"url",code:ie.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"regex",code:ie.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),fe(i,{code:ie.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),fe(i,{code:ie.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),fe(i,{code:ie.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?zE(o).test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{code:ie.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?I4.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{code:ie.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?A4(o).test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{code:ie.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?g4.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"duration",code:ie.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?S4(e.data,o.version)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"ip",code:ie.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?C4(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"jwt",code:ie.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?R4(e.data,o.version)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"cidr",code:ie.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?E4.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"base64",code:ie.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?T4.test(e.data)||(i=this._getOrReturnCtx(e,i),fe(i,{validation:"base64url",code:ie.invalid_string,message:o.message}),r.dirty()):nt.assertNever(o);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:ie.invalid_string,...ye.errToObj(r)})}_addCheck(e){return new xr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ye.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ye.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ye.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ye.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ye.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ye.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ye.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ye.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ye.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ye.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ye.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ye.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ye.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ye.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ye.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ye.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ye.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ye.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ye.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ye.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ye.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ye.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ye.errToObj(t)})}nonempty(e){return this.min(1,ye.errToObj(e))}trim(){return new xr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new xr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new xr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}xr.create=n=>{var e;return new xr({checks:[],typeName:xe.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Ue(n)})};function P4(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,o=parseInt(n.toFixed(i).replace(".","")),u=parseInt(e.toFixed(i).replace(".",""));return o%u/Math.pow(10,i)}class As extends $e{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ge.number){const o=this._getOrReturnCtx(e);return fe(o,{code:ie.invalid_type,expected:ge.number,received:o.parsedType}),Oe}let r;const i=new Sn;for(const o of this._def.checks)o.kind==="int"?nt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{code:ie.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),fe(r,{code:ie.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),fe(r,{code:ie.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?P4(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),fe(r,{code:ie.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),fe(r,{code:ie.not_finite,message:o.message}),i.dirty()):nt.assertNever(o);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ye.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ye.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ye.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ye.toString(t))}setLimit(e,t,r,i){return new As({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ye.toString(i)}]})}_addCheck(e){return new As({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ye.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ye.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ye.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ye.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ye.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&nt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}As.create=n=>new As({checks:[],typeName:xe.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Ue(n)});class Ss extends $e{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ge.bigint)return this._getInvalidInput(e);let r;const i=new Sn;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),fe(r,{code:ie.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),fe(r,{code:ie.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),fe(r,{code:ie.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):nt.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return fe(t,{code:ie.invalid_type,expected:ge.bigint,received:t.parsedType}),Oe}gte(e,t){return this.setLimit("min",e,!0,ye.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ye.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ye.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ye.toString(t))}setLimit(e,t,r,i){return new Ss({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ye.toString(i)}]})}_addCheck(e){return new Ss({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ye.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ye.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ye.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ss.create=n=>{var e;return new Ss({checks:[],typeName:xe.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Ue(n)})};class Qu extends $e{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ge.boolean){const r=this._getOrReturnCtx(e);return fe(r,{code:ie.invalid_type,expected:ge.boolean,received:r.parsedType}),Oe}return Mn(e.data)}}Qu.create=n=>new Qu({typeName:xe.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Ue(n)});class go extends $e{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ge.date){const o=this._getOrReturnCtx(e);return fe(o,{code:ie.invalid_type,expected:ge.date,received:o.parsedType}),Oe}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return fe(o,{code:ie.invalid_date}),Oe}const r=new Sn;let i;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:ie.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),fe(i,{code:ie.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):nt.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new go({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ye.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ye.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}go.create=n=>new go({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:xe.ZodDate,...Ue(n)});class Uh extends $e{_parse(e){if(this._getType(e)!==ge.symbol){const r=this._getOrReturnCtx(e);return fe(r,{code:ie.invalid_type,expected:ge.symbol,received:r.parsedType}),Oe}return Mn(e.data)}}Uh.create=n=>new Uh({typeName:xe.ZodSymbol,...Ue(n)});class Zu extends $e{_parse(e){if(this._getType(e)!==ge.undefined){const r=this._getOrReturnCtx(e);return fe(r,{code:ie.invalid_type,expected:ge.undefined,received:r.parsedType}),Oe}return Mn(e.data)}}Zu.create=n=>new Zu({typeName:xe.ZodUndefined,...Ue(n)});class Yu extends $e{_parse(e){if(this._getType(e)!==ge.null){const r=this._getOrReturnCtx(e);return fe(r,{code:ie.invalid_type,expected:ge.null,received:r.parsedType}),Oe}return Mn(e.data)}}Yu.create=n=>new Yu({typeName:xe.ZodNull,...Ue(n)});class Ia extends $e{constructor(){super(...arguments),this._any=!0}_parse(e){return Mn(e.data)}}Ia.create=n=>new Ia({typeName:xe.ZodAny,...Ue(n)});class so extends $e{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Mn(e.data)}}so.create=n=>new so({typeName:xe.ZodUnknown,...Ue(n)});class Ni extends $e{_parse(e){const t=this._getOrReturnCtx(e);return fe(t,{code:ie.invalid_type,expected:ge.never,received:t.parsedType}),Oe}}Ni.create=n=>new Ni({typeName:xe.ZodNever,...Ue(n)});class Bh extends $e{_parse(e){if(this._getType(e)!==ge.undefined){const r=this._getOrReturnCtx(e);return fe(r,{code:ie.invalid_type,expected:ge.void,received:r.parsedType}),Oe}return Mn(e.data)}}Bh.create=n=>new Bh({typeName:xe.ZodVoid,...Ue(n)});class Or extends $e{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==ge.array)return fe(t,{code:ie.invalid_type,expected:ge.array,received:t.parsedType}),Oe;if(i.exactLength!==null){const u=t.data.length>i.exactLength.value,c=t.data.length<i.exactLength.value;(u||c)&&(fe(t,{code:u?ie.too_big:ie.too_small,minimum:c?i.exactLength.value:void 0,maximum:u?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(fe(t,{code:ie.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(fe(t,{code:ie.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((u,c)=>i.type._parseAsync(new ri(t,u,t.path,c)))).then(u=>Sn.mergeArray(r,u));const o=[...t.data].map((u,c)=>i.type._parseSync(new ri(t,u,t.path,c)));return Sn.mergeArray(r,o)}get element(){return this._def.type}min(e,t){return new Or({...this._def,minLength:{value:e,message:ye.toString(t)}})}max(e,t){return new Or({...this._def,maxLength:{value:e,message:ye.toString(t)}})}length(e,t){return new Or({...this._def,exactLength:{value:e,message:ye.toString(t)}})}nonempty(e){return this.min(1,e)}}Or.create=(n,e)=>new Or({type:n,minLength:null,maxLength:null,exactLength:null,typeName:xe.ZodArray,...Ue(e)});function ea(n){if(n instanceof Pt){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=ei.create(ea(r))}return new Pt({...n._def,shape:()=>e})}else return n instanceof Or?new Or({...n._def,type:ea(n.element)}):n instanceof ei?ei.create(ea(n.unwrap())):n instanceof Rs?Rs.create(ea(n.unwrap())):n instanceof ii?ii.create(n.items.map(e=>ea(e))):n}class Pt extends $e{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=nt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==ge.object){const f=this._getOrReturnCtx(e);return fe(f,{code:ie.invalid_type,expected:ge.object,received:f.parsedType}),Oe}const{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),c=[];if(!(this._def.catchall instanceof Ni&&this._def.unknownKeys==="strip"))for(const f in i.data)u.includes(f)||c.push(f);const d=[];for(const f of u){const m=o[f],y=i.data[f];d.push({key:{status:"valid",value:f},value:m._parse(new ri(i,y,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Ni){const f=this._def.unknownKeys;if(f==="passthrough")for(const m of c)d.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(f==="strict")c.length>0&&(fe(i,{code:ie.unrecognized_keys,keys:c}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const m of c){const y=i.data[m];d.push({key:{status:"valid",value:m},value:f._parse(new ri(i,y,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const m of d){const y=await m.key,T=await m.value;f.push({key:y,value:T,alwaysSet:m.alwaysSet})}return f}).then(f=>Sn.mergeObjectSync(r,f)):Sn.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(e){return ye.errToObj,new Pt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,o,u,c;const d=(u=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,t,r).message)!==null&&u!==void 0?u:r.defaultError;return t.code==="unrecognized_keys"?{message:(c=ye.errToObj(e).message)!==null&&c!==void 0?c:d}:{message:d}}}:{}})}strip(){return new Pt({...this._def,unknownKeys:"strip"})}passthrough(){return new Pt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Pt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Pt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:xe.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Pt({...this._def,catchall:e})}pick(e){const t={};return nt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new Pt({...this._def,shape:()=>t})}omit(e){const t={};return nt.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new Pt({...this._def,shape:()=>t})}deepPartial(){return ea(this)}partial(e){const t={};return nt.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new Pt({...this._def,shape:()=>t})}required(e){const t={};return nt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof ei;)o=o._def.innerType;t[r]=o}}),new Pt({...this._def,shape:()=>t})}keyof(){return HE(nt.objectKeys(this.shape))}}Pt.create=(n,e)=>new Pt({shape:()=>n,unknownKeys:"strip",catchall:Ni.create(),typeName:xe.ZodObject,...Ue(e)});Pt.strictCreate=(n,e)=>new Pt({shape:()=>n,unknownKeys:"strict",catchall:Ni.create(),typeName:xe.ZodObject,...Ue(e)});Pt.lazycreate=(n,e)=>new Pt({shape:n,unknownKeys:"strip",catchall:Ni.create(),typeName:xe.ZodObject,...Ue(e)});class Ju extends $e{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const u=o.map(c=>new ir(c.ctx.common.issues));return fe(t,{code:ie.invalid_union,unionErrors:u}),Oe}if(t.common.async)return Promise.all(r.map(async o=>{const u={...t,common:{...t.common,issues:[]},parent:null};return{result:await o._parseAsync({data:t.data,path:t.path,parent:u}),ctx:u}})).then(i);{let o;const u=[];for(const d of r){const f={...t,common:{...t.common,issues:[]},parent:null},m=d._parseSync({data:t.data,path:t.path,parent:f});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:f}),f.common.issues.length&&u.push(f.common.issues)}if(o)return t.common.issues.push(...o.ctx.common.issues),o.result;const c=u.map(d=>new ir(d));return fe(t,{code:ie.invalid_union,unionErrors:c}),Oe}}get options(){return this._def.options}}Ju.create=(n,e)=>new Ju({options:n,typeName:xe.ZodUnion,...Ue(e)});const Ei=n=>n instanceof tl?Ei(n.schema):n instanceof Vr?Ei(n.innerType()):n instanceof nl?[n.value]:n instanceof Cs?n.options:n instanceof rl?nt.objectValues(n.enum):n instanceof il?Ei(n._def.innerType):n instanceof Zu?[void 0]:n instanceof Yu?[null]:n instanceof ei?[void 0,...Ei(n.unwrap())]:n instanceof Rs?[null,...Ei(n.unwrap())]:n instanceof Wg||n instanceof ol?Ei(n.unwrap()):n instanceof sl?Ei(n._def.innerType):[];class _d extends $e{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ge.object)return fe(t,{code:ie.invalid_type,expected:ge.object,received:t.parsedType}),Oe;const r=this.discriminator,i=t.data[r],o=this.optionsMap.get(i);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(fe(t,{code:ie.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Oe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const o of t){const u=Ei(o.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of u){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new _d({typeName:xe.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...Ue(r)})}}function zp(n,e){const t=Ti(n),r=Ti(e);if(n===e)return{valid:!0,data:n};if(t===ge.object&&r===ge.object){const i=nt.objectKeys(e),o=nt.objectKeys(n).filter(c=>i.indexOf(c)!==-1),u={...n,...e};for(const c of o){const d=zp(n[c],e[c]);if(!d.valid)return{valid:!1};u[c]=d.data}return{valid:!0,data:u}}else if(t===ge.array&&r===ge.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let o=0;o<n.length;o++){const u=n[o],c=e[o],d=zp(u,c);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return t===ge.date&&r===ge.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Xu extends $e{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(o,u)=>{if(jp(o)||jp(u))return Oe;const c=zp(o.value,u.value);return c.valid?(($p(o)||$p(u))&&t.dirty(),{status:t.value,value:c.data}):(fe(r,{code:ie.invalid_intersection_types}),Oe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,u])=>i(o,u)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Xu.create=(n,e,t)=>new Xu({left:n,right:e,typeName:xe.ZodIntersection,...Ue(t)});class ii extends $e{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.array)return fe(r,{code:ie.invalid_type,expected:ge.array,received:r.parsedType}),Oe;if(r.data.length<this._def.items.length)return fe(r,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Oe;!this._def.rest&&r.data.length>this._def.items.length&&(fe(r,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const o=[...r.data].map((u,c)=>{const d=this._def.items[c]||this._def.rest;return d?d._parse(new ri(r,u,r.path,c)):null}).filter(u=>!!u);return r.common.async?Promise.all(o).then(u=>Sn.mergeArray(t,u)):Sn.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new ii({...this._def,rest:e})}}ii.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ii({items:n,typeName:xe.ZodTuple,rest:null,...Ue(e)})};class el extends $e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.object)return fe(r,{code:ie.invalid_type,expected:ge.object,received:r.parsedType}),Oe;const i=[],o=this._def.keyType,u=this._def.valueType;for(const c in r.data)i.push({key:o._parse(new ri(r,c,r.path,c)),value:u._parse(new ri(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?Sn.mergeObjectAsync(t,i):Sn.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof $e?new el({keyType:e,valueType:t,typeName:xe.ZodRecord,...Ue(r)}):new el({keyType:xr.create(),valueType:e,typeName:xe.ZodRecord,...Ue(t)})}}class jh extends $e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.map)return fe(r,{code:ie.invalid_type,expected:ge.map,received:r.parsedType}),Oe;const i=this._def.keyType,o=this._def.valueType,u=[...r.data.entries()].map(([c,d],f)=>({key:i._parse(new ri(r,c,r.path,[f,"key"])),value:o._parse(new ri(r,d,r.path,[f,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const d of u){const f=await d.key,m=await d.value;if(f.status==="aborted"||m.status==="aborted")return Oe;(f.status==="dirty"||m.status==="dirty")&&t.dirty(),c.set(f.value,m.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const d of u){const f=d.key,m=d.value;if(f.status==="aborted"||m.status==="aborted")return Oe;(f.status==="dirty"||m.status==="dirty")&&t.dirty(),c.set(f.value,m.value)}return{status:t.value,value:c}}}}jh.create=(n,e,t)=>new jh({valueType:e,keyType:n,typeName:xe.ZodMap,...Ue(t)});class mo extends $e{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.set)return fe(r,{code:ie.invalid_type,expected:ge.set,received:r.parsedType}),Oe;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(fe(r,{code:ie.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(fe(r,{code:ie.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const o=this._def.valueType;function u(d){const f=new Set;for(const m of d){if(m.status==="aborted")return Oe;m.status==="dirty"&&t.dirty(),f.add(m.value)}return{status:t.value,value:f}}const c=[...r.data.values()].map((d,f)=>o._parse(new ri(r,d,r.path,f)));return r.common.async?Promise.all(c).then(d=>u(d)):u(c)}min(e,t){return new mo({...this._def,minSize:{value:e,message:ye.toString(t)}})}max(e,t){return new mo({...this._def,maxSize:{value:e,message:ye.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}mo.create=(n,e)=>new mo({valueType:n,minSize:null,maxSize:null,typeName:xe.ZodSet,...Ue(e)});class ua extends $e{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ge.function)return fe(t,{code:ie.invalid_type,expected:ge.function,received:t.parsedType}),Oe;function r(c,d){return Lh({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Nh(),Ta].filter(f=>!!f),issueData:{code:ie.invalid_arguments,argumentsError:d}})}function i(c,d){return Lh({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Nh(),Ta].filter(f=>!!f),issueData:{code:ie.invalid_return_type,returnTypeError:d}})}const o={errorMap:t.common.contextualErrorMap},u=t.data;if(this._def.returns instanceof Aa){const c=this;return Mn(async function(...d){const f=new ir([]),m=await c._def.args.parseAsync(d,o).catch(P=>{throw f.addIssue(r(d,P)),f}),y=await Reflect.apply(u,this,m);return await c._def.returns._def.type.parseAsync(y,o).catch(P=>{throw f.addIssue(i(y,P)),f})})}else{const c=this;return Mn(function(...d){const f=c._def.args.safeParse(d,o);if(!f.success)throw new ir([r(d,f.error)]);const m=Reflect.apply(u,this,f.data),y=c._def.returns.safeParse(m,o);if(!y.success)throw new ir([i(m,y.error)]);return y.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ua({...this._def,args:ii.create(e).rest(so.create())})}returns(e){return new ua({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ua({args:e||ii.create([]).rest(so.create()),returns:t||so.create(),typeName:xe.ZodFunction,...Ue(r)})}}class tl extends $e{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}tl.create=(n,e)=>new tl({getter:n,typeName:xe.ZodLazy,...Ue(e)});class nl extends $e{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return fe(t,{received:t.data,code:ie.invalid_literal,expected:this._def.value}),Oe}return{status:"valid",value:e.data}}get value(){return this._def.value}}nl.create=(n,e)=>new nl({value:n,typeName:xe.ZodLiteral,...Ue(e)});function HE(n,e){return new Cs({values:n,typeName:xe.ZodEnum,...Ue(e)})}class Cs extends $e{constructor(){super(...arguments),Su.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return fe(t,{expected:nt.joinValues(r),received:t.parsedType,code:ie.invalid_type}),Oe}if(Fh(this,Su)||BE(this,Su,new Set(this._def.values)),!Fh(this,Su).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return fe(t,{received:t.data,code:ie.invalid_enum_value,options:r}),Oe}return Mn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Cs.create(e,{...this._def,...t})}exclude(e,t=this._def){return Cs.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Su=new WeakMap;Cs.create=HE;class rl extends $e{constructor(){super(...arguments),Cu.set(this,void 0)}_parse(e){const t=nt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ge.string&&r.parsedType!==ge.number){const i=nt.objectValues(t);return fe(r,{expected:nt.joinValues(i),received:r.parsedType,code:ie.invalid_type}),Oe}if(Fh(this,Cu)||BE(this,Cu,new Set(nt.getValidEnumValues(this._def.values))),!Fh(this,Cu).has(e.data)){const i=nt.objectValues(t);return fe(r,{received:r.data,code:ie.invalid_enum_value,options:i}),Oe}return Mn(e.data)}get enum(){return this._def.values}}Cu=new WeakMap;rl.create=(n,e)=>new rl({values:n,typeName:xe.ZodNativeEnum,...Ue(e)});class Aa extends $e{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ge.promise&&t.common.async===!1)return fe(t,{code:ie.invalid_type,expected:ge.promise,received:t.parsedType}),Oe;const r=t.parsedType===ge.promise?t.data:Promise.resolve(t.data);return Mn(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Aa.create=(n,e)=>new Aa({type:n,typeName:xe.ZodPromise,...Ue(e)});class Vr extends $e{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===xe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:u=>{fe(r,u),u.fatal?t.abort():t.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const u=i.transform(r.data,o);if(r.common.async)return Promise.resolve(u).then(async c=>{if(t.value==="aborted")return Oe;const d=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return d.status==="aborted"?Oe:d.status==="dirty"||t.value==="dirty"?na(d.value):d});{if(t.value==="aborted")return Oe;const c=this._def.schema._parseSync({data:u,path:r.path,parent:r});return c.status==="aborted"?Oe:c.status==="dirty"||t.value==="dirty"?na(c.value):c}}if(i.type==="refinement"){const u=c=>{const d=i.refinement(c,o);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?Oe:(c.status==="dirty"&&t.dirty(),u(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?Oe:(c.status==="dirty"&&t.dirty(),u(c.value).then(()=>({status:t.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!po(u))return u;const c=i.transform(u.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>po(u)?Promise.resolve(i.transform(u.value,o)).then(c=>({status:t.value,value:c})):u);nt.assertNever(i)}}Vr.create=(n,e,t)=>new Vr({schema:n,typeName:xe.ZodEffects,effect:e,...Ue(t)});Vr.createWithPreprocess=(n,e,t)=>new Vr({schema:e,effect:{type:"preprocess",transform:n},typeName:xe.ZodEffects,...Ue(t)});class ei extends $e{_parse(e){return this._getType(e)===ge.undefined?Mn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ei.create=(n,e)=>new ei({innerType:n,typeName:xe.ZodOptional,...Ue(e)});class Rs extends $e{_parse(e){return this._getType(e)===ge.null?Mn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Rs.create=(n,e)=>new Rs({innerType:n,typeName:xe.ZodNullable,...Ue(e)});class il extends $e{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===ge.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}il.create=(n,e)=>new il({innerType:n,typeName:xe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ue(e)});class sl extends $e{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Ku(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ir(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ir(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}sl.create=(n,e)=>new sl({innerType:n,typeName:xe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ue(e)});class $h extends $e{_parse(e){if(this._getType(e)!==ge.nan){const r=this._getOrReturnCtx(e);return fe(r,{code:ie.invalid_type,expected:ge.nan,received:r.parsedType}),Oe}return{status:"valid",value:e.data}}}$h.create=n=>new $h({typeName:xe.ZodNaN,...Ue(n)});const x4=Symbol("zod_brand");class Wg extends $e{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class bl extends $e{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Oe:o.status==="dirty"?(t.dirty(),na(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Oe:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new bl({in:e,out:t,typeName:xe.ZodPipeline})}}class ol extends $e{_parse(e){const t=this._def.innerType._parse(e),r=i=>(po(i)&&(i.value=Object.freeze(i.value)),i);return Ku(t)?t.then(i=>r(i)):r(t)}unwrap(){return this._def.innerType}}ol.create=(n,e)=>new ol({innerType:n,typeName:xe.ZodReadonly,...Ue(e)});function Xy(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function WE(n,e={},t){return n?Ia.create().superRefine((r,i)=>{var o,u;const c=n(r);if(c instanceof Promise)return c.then(d=>{var f,m;if(!d){const y=Xy(e,r),T=(m=(f=y.fatal)!==null&&f!==void 0?f:t)!==null&&m!==void 0?m:!0;i.addIssue({code:"custom",...y,fatal:T})}});if(!c){const d=Xy(e,r),f=(u=(o=d.fatal)!==null&&o!==void 0?o:t)!==null&&u!==void 0?u:!0;i.addIssue({code:"custom",...d,fatal:f})}}):Ia.create()}const O4={object:Pt.lazycreate};var xe;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(xe||(xe={}));const k4=(n,e={message:`Input not instance of ${n.name}`})=>WE(t=>t instanceof n,e),qE=xr.create,GE=As.create,V4=$h.create,D4=Ss.create,KE=Qu.create,M4=go.create,N4=Uh.create,L4=Zu.create,F4=Yu.create,U4=Ia.create,B4=so.create,j4=Ni.create,$4=Bh.create,z4=Or.create,H4=Pt.create,W4=Pt.strictCreate,q4=Ju.create,G4=_d.create,K4=Xu.create,Q4=ii.create,Z4=el.create,Y4=jh.create,J4=mo.create,X4=ua.create,e9=tl.create,t9=nl.create,n9=Cs.create,r9=rl.create,i9=Aa.create,e0=Vr.create,s9=ei.create,o9=Rs.create,a9=Vr.createWithPreprocess,u9=bl.create,l9=()=>qE().optional(),c9=()=>GE().optional(),h9=()=>KE().optional(),d9={string:n=>xr.create({...n,coerce:!0}),number:n=>As.create({...n,coerce:!0}),boolean:n=>Qu.create({...n,coerce:!0}),bigint:n=>Ss.create({...n,coerce:!0}),date:n=>go.create({...n,coerce:!0})},f9=Oe;var Ko=Object.freeze({__proto__:null,defaultErrorMap:Ta,setErrorMap:a4,getErrorMap:Nh,makeIssue:Lh,EMPTY_PATH:u4,addIssueToContext:fe,ParseStatus:Sn,INVALID:Oe,DIRTY:na,OK:Mn,isAborted:jp,isDirty:$p,isValid:po,isAsync:Ku,get util(){return nt},get objectUtil(){return Bp},ZodParsedType:ge,getParsedType:Ti,ZodType:$e,datetimeRegex:zE,ZodString:xr,ZodNumber:As,ZodBigInt:Ss,ZodBoolean:Qu,ZodDate:go,ZodSymbol:Uh,ZodUndefined:Zu,ZodNull:Yu,ZodAny:Ia,ZodUnknown:so,ZodNever:Ni,ZodVoid:Bh,ZodArray:Or,ZodObject:Pt,ZodUnion:Ju,ZodDiscriminatedUnion:_d,ZodIntersection:Xu,ZodTuple:ii,ZodRecord:el,ZodMap:jh,ZodSet:mo,ZodFunction:ua,ZodLazy:tl,ZodLiteral:nl,ZodEnum:Cs,ZodNativeEnum:rl,ZodPromise:Aa,ZodEffects:Vr,ZodTransformer:Vr,ZodOptional:ei,ZodNullable:Rs,ZodDefault:il,ZodCatch:sl,ZodNaN:$h,BRAND:x4,ZodBranded:Wg,ZodPipeline:bl,ZodReadonly:ol,custom:WE,Schema:$e,ZodSchema:$e,late:O4,get ZodFirstPartyTypeKind(){return xe},coerce:d9,any:U4,array:z4,bigint:D4,boolean:KE,date:M4,discriminatedUnion:G4,effect:e0,enum:n9,function:X4,instanceof:k4,intersection:K4,lazy:e9,literal:t9,map:Y4,nan:V4,nativeEnum:r9,never:j4,null:F4,nullable:o9,number:GE,object:H4,oboolean:h9,onumber:c9,optional:s9,ostring:l9,pipeline:u9,preprocess:a9,promise:i9,record:Z4,set:J4,strictObject:W4,string:qE,symbol:N4,transformer:e0,tuple:Q4,undefined:L4,union:q4,unknown:B4,void:$4,NEVER:f9,ZodIssueCode:ie,quotelessJson:o4,ZodError:ir}),wl=n=>n.type==="checkbox",eo=n=>n instanceof Date,Dn=n=>n==null;const QE=n=>typeof n=="object";var $t=n=>!Dn(n)&&!Array.isArray(n)&&QE(n)&&!eo(n),ZE=n=>$t(n)&&n.target?wl(n.target)?n.target.checked:n.target.value:n,p9=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,YE=(n,e)=>n.has(p9(e)),g9=n=>{const e=n.constructor&&n.constructor.prototype;return $t(e)&&e.hasOwnProperty("isPrototypeOf")},qg=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function hn(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(qg&&(n instanceof Blob||r))&&(t||$t(n)))if(e=t?[]:{},!t&&!g9(n))e=n;else for(const i in n)n.hasOwnProperty(i)&&(e[i]=hn(n[i]));else return n;return e}var yd=n=>Array.isArray(n)?n.filter(Boolean):[],jt=n=>n===void 0,he=(n,e,t)=>{if(!e||!$t(n))return t;const r=yd(e.split(/[,[\].]+?/)).reduce((i,o)=>Dn(i)?i:i[o],n);return jt(r)||r===n?jt(n[e])?t:n[e]:r},tr=n=>typeof n=="boolean",Gg=n=>/^\w*$/.test(n),JE=n=>yd(n.replace(/["|']|\]/g,"").split(/\.|\[/)),gt=(n,e,t)=>{let r=-1;const i=Gg(e)?[e]:JE(e),o=i.length,u=o-1;for(;++r<o;){const c=i[r];let d=t;if(r!==u){const f=n[c];d=$t(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;n[c]=d,n=n[c]}};const zh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Sr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},wi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},m9=wt.createContext(null),Kg=()=>wt.useContext(m9);var XE=(n,e,t,r=!0)=>{const i={defaultValues:e._defaultValues};for(const o in n)Object.defineProperty(i,o,{get:()=>{const u=o;return e._proxyFormState[u]!==Sr.all&&(e._proxyFormState[u]=!r||Sr.all),t&&(t[u]=!0),n[u]}});return i};const Qg=typeof window<"u"?X.useLayoutEffect:X.useEffect;function v9(n){const e=Kg(),{control:t=e.control,disabled:r,name:i,exact:o}=n||{},[u,c]=wt.useState(t._formState),d=wt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Qg(()=>t._subscribe({name:i,formState:d.current,exact:o,callback:f=>{!r&&c({...t._formState,...f})}}),[i,r,o]),wt.useEffect(()=>{d.current.isValid&&t._setValid(!0)},[t]),wt.useMemo(()=>XE(u,t,d.current,!1),[u,t])}var Kr=n=>typeof n=="string",eT=(n,e,t,r,i)=>Kr(n)?(r&&e.watch.add(n),he(t,n,i)):Array.isArray(n)?n.map(o=>(r&&e.watch.add(o),he(t,o))):(r&&(e.watchAll=!0),t);function _9(n){const e=Kg(),{control:t=e.control,name:r,defaultValue:i,disabled:o,exact:u}=n||{},c=wt.useRef(i),[d,f]=wt.useState(t._getWatch(r,c.current));return Qg(()=>t._subscribe({name:r,formState:{values:!0},exact:u,callback:m=>!o&&f(eT(r,t._names,m.values||t._formValues,!1,c.current))}),[r,t,o,u]),wt.useEffect(()=>t._removeUnmounted()),d}function y9(n){const e=Kg(),{name:t,disabled:r,control:i=e.control,shouldUnregister:o}=n,u=YE(i._names.array,t),c=_9({control:i,name:t,defaultValue:he(i._formValues,t,he(i._defaultValues,t,n.defaultValue)),exact:!0}),d=v9({control:i,name:t,exact:!0}),f=wt.useRef(n),m=wt.useRef(i.register(t,{...n.rules,value:c,...tr(n.disabled)?{disabled:n.disabled}:{}})),y=wt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!he(d.errors,t)},isDirty:{enumerable:!0,get:()=>!!he(d.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!he(d.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!he(d.validatingFields,t)},error:{enumerable:!0,get:()=>he(d.errors,t)}}),[d,t]),T=wt.useCallback(O=>m.current.onChange({target:{value:ZE(O),name:t},type:zh.CHANGE}),[t]),P=wt.useCallback(()=>m.current.onBlur({target:{value:he(i._formValues,t),name:t},type:zh.BLUR}),[t,i._formValues]),N=wt.useCallback(O=>{const z=he(i._fields,t);z&&O&&(z._f.ref={focus:()=>O.focus(),select:()=>O.select(),setCustomValidity:H=>O.setCustomValidity(H),reportValidity:()=>O.reportValidity()})},[i._fields,t]),L=wt.useMemo(()=>({name:t,value:c,...tr(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:T,onBlur:P,ref:N}),[t,r,d.disabled,T,P,N,c]);return wt.useEffect(()=>{const O=i._options.shouldUnregister||o;i.register(t,{...f.current.rules,...tr(f.current.disabled)?{disabled:f.current.disabled}:{}});const z=(H,G)=>{const re=he(i._fields,H);re&&re._f&&(re._f.mount=G)};if(z(t,!0),O){const H=hn(he(i._options.defaultValues,t));gt(i._defaultValues,t,H),jt(he(i._formValues,t))&&gt(i._formValues,t,H)}return!u&&i.register(t),()=>{(u?O&&!i._state.action:O)?i.unregister(t):z(t,!1)}},[t,i,u,o]),wt.useEffect(()=>{i._setDisabledField({disabled:r,name:t})},[r,t,i]),wt.useMemo(()=>({field:L,formState:d,fieldState:y}),[L,d,y])}const t0=n=>n.render(y9(n));var tT=(n,e,t,r,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:i||!0}}:{},Mu=n=>Array.isArray(n)?n:[n],n0=()=>{let n=[];return{get observers(){return n},next:i=>{for(const o of n)o.next&&o.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(o=>o!==i)}}),unsubscribe:()=>{n=[]}}},Hp=n=>Dn(n)||!QE(n);function as(n,e){if(Hp(n)||Hp(e))return n===e;if(eo(n)&&eo(e))return n.getTime()===e.getTime();const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const i of t){const o=n[i];if(!r.includes(i))return!1;if(i!=="ref"){const u=e[i];if(eo(o)&&eo(u)||$t(o)&&$t(u)||Array.isArray(o)&&Array.isArray(u)?!as(o,u):o!==u)return!1}}return!0}var Vn=n=>$t(n)&&!Object.keys(n).length,Zg=n=>n.type==="file",Cr=n=>typeof n=="function",Hh=n=>{if(!qg)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},nT=n=>n.type==="select-multiple",Yg=n=>n.type==="radio",b9=n=>Yg(n)||wl(n),Jf=n=>Hh(n)&&n.isConnected;function w9(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=jt(n)?r++:n[e[r++]];return n}function E9(n){for(const e in n)if(n.hasOwnProperty(e)&&!jt(n[e]))return!1;return!0}function en(n,e){const t=Array.isArray(e)?e:Gg(e)?[e]:JE(e),r=t.length===1?n:w9(n,t),i=t.length-1,o=t[i];return r&&delete r[o],i!==0&&($t(r)&&Vn(r)||Array.isArray(r)&&E9(r))&&en(n,t.slice(0,-1)),n}var rT=n=>{for(const e in n)if(Cr(n[e]))return!0;return!1};function Wh(n,e={}){const t=Array.isArray(n);if($t(n)||t)for(const r in n)Array.isArray(n[r])||$t(n[r])&&!rT(n[r])?(e[r]=Array.isArray(n[r])?[]:{},Wh(n[r],e[r])):Dn(n[r])||(e[r]=!0);return e}function iT(n,e,t){const r=Array.isArray(n);if($t(n)||r)for(const i in n)Array.isArray(n[i])||$t(n[i])&&!rT(n[i])?jt(e)||Hp(t[i])?t[i]=Array.isArray(n[i])?Wh(n[i],[]):{...Wh(n[i])}:iT(n[i],Dn(e)?{}:e[i],t[i]):t[i]=!as(n[i],e[i]);return t}var mu=(n,e)=>iT(n,e,Wh(e));const r0={value:!1,isValid:!1},i0={value:!0,isValid:!0};var sT=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!jt(n[0].attributes.value)?jt(n[0].value)||n[0].value===""?i0:{value:n[0].value,isValid:!0}:i0:r0}return r0},oT=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>jt(n)?n:e?n===""?NaN:n&&+n:t&&Kr(n)?new Date(n):r?r(n):n;const s0={isValid:!1,value:null};var aT=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,s0):s0;function o0(n){const e=n.ref;return Zg(e)?e.files:Yg(e)?aT(n.refs).value:nT(e)?[...e.selectedOptions].map(({value:t})=>t):wl(e)?sT(n.refs).value:oT(jt(e.value)?n.ref.value:e.value,n)}var T9=(n,e,t,r)=>{const i={};for(const o of n){const u=he(e,o);u&&gt(i,o,u._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:r}},qh=n=>n instanceof RegExp,vu=n=>jt(n)?n:qh(n)?n.source:$t(n)?qh(n.value)?n.value.source:n.value:n,a0=n=>({isOnSubmit:!n||n===Sr.onSubmit,isOnBlur:n===Sr.onBlur,isOnChange:n===Sr.onChange,isOnAll:n===Sr.all,isOnTouch:n===Sr.onTouched});const u0="AsyncFunction";var I9=n=>!!n&&!!n.validate&&!!(Cr(n.validate)&&n.validate.constructor.name===u0||$t(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===u0)),A9=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),l0=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const Nu=(n,e,t,r)=>{for(const i of t||Object.keys(n)){const o=he(n,i);if(o){const{_f:u,...c}=o;if(u){if(u.refs&&u.refs[0]&&e(u.refs[0],i)&&!r)return!0;if(u.ref&&e(u.ref,u.name)&&!r)return!0;if(Nu(c,e))break}else if($t(c)&&Nu(c,e))break}}};function c0(n,e,t){const r=he(n,t);if(r||Gg(t))return{error:r,name:t};const i=t.split(".");for(;i.length;){const o=i.join("."),u=he(e,o),c=he(n,o);if(u&&!Array.isArray(u)&&t!==o)return{name:t};if(c&&c.type)return{name:o,error:c};i.pop()}return{name:t}}var S9=(n,e,t,r)=>{t(n);const{name:i,...o}=n;return Vn(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(u=>e[u]===(!r||Sr.all))},C9=(n,e,t)=>!n||!e||n===e||Mu(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),R9=(n,e,t,r,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?r.isOnBlur:i.isOnBlur)?!n:(t?r.isOnChange:i.isOnChange)?n:!0,P9=(n,e)=>!yd(he(n,e)).length&&en(n,e),x9=(n,e,t)=>{const r=Mu(he(n,t));return gt(r,"root",e[t]),gt(n,t,r),n},uh=n=>Kr(n);function h0(n,e,t="validate"){if(uh(n)||Array.isArray(n)&&n.every(uh)||tr(n)&&!n)return{type:t,message:uh(n)?n:"",ref:e}}var Qo=n=>$t(n)&&!qh(n)?n:{value:n,message:""},d0=async(n,e,t,r,i,o)=>{const{ref:u,refs:c,required:d,maxLength:f,minLength:m,min:y,max:T,pattern:P,validate:N,name:L,valueAsNumber:O,mount:z}=n._f,H=he(t,L);if(!z||e.has(L))return{};const G=c?c[0]:u,re=V=>{i&&G.reportValidity&&(G.setCustomValidity(tr(V)?"":V||""),G.reportValidity())},$={},oe=Yg(u),C=wl(u),I=oe||C,S=(O||Zg(u))&&jt(u.value)&&jt(H)||Hh(u)&&u.value===""||H===""||Array.isArray(H)&&!H.length,x=tT.bind(null,L,r,$),M=(V,A,De,Fe=wi.maxLength,We=wi.minLength)=>{const rt=V?A:De;$[L]={type:V?Fe:We,message:rt,ref:u,...x(V?Fe:We,rt)}};if(o?!Array.isArray(H)||!H.length:d&&(!I&&(S||Dn(H))||tr(H)&&!H||C&&!sT(c).isValid||oe&&!aT(c).isValid)){const{value:V,message:A}=uh(d)?{value:!!d,message:d}:Qo(d);if(V&&($[L]={type:wi.required,message:A,ref:G,...x(wi.required,A)},!r))return re(A),$}if(!S&&(!Dn(y)||!Dn(T))){let V,A;const De=Qo(T),Fe=Qo(y);if(!Dn(H)&&!isNaN(H)){const We=u.valueAsNumber||H&&+H;Dn(De.value)||(V=We>De.value),Dn(Fe.value)||(A=We<Fe.value)}else{const We=u.valueAsDate||new Date(H),rt=Nt=>new Date(new Date().toDateString()+" "+Nt),ot=u.type=="time",Mt=u.type=="week";Kr(De.value)&&H&&(V=ot?rt(H)>rt(De.value):Mt?H>De.value:We>new Date(De.value)),Kr(Fe.value)&&H&&(A=ot?rt(H)<rt(Fe.value):Mt?H<Fe.value:We<new Date(Fe.value))}if((V||A)&&(M(!!V,De.message,Fe.message,wi.max,wi.min),!r))return re($[L].message),$}if((f||m)&&!S&&(Kr(H)||o&&Array.isArray(H))){const V=Qo(f),A=Qo(m),De=!Dn(V.value)&&H.length>+V.value,Fe=!Dn(A.value)&&H.length<+A.value;if((De||Fe)&&(M(De,V.message,A.message),!r))return re($[L].message),$}if(P&&!S&&Kr(H)){const{value:V,message:A}=Qo(P);if(qh(V)&&!H.match(V)&&($[L]={type:wi.pattern,message:A,ref:u,...x(wi.pattern,A)},!r))return re(A),$}if(N){if(Cr(N)){const V=await N(H,t),A=h0(V,G);if(A&&($[L]={...A,...x(wi.validate,A.message)},!r))return re(A.message),$}else if($t(N)){let V={};for(const A in N){if(!Vn(V)&&!r)break;const De=h0(await N[A](H,t),G,A);De&&(V={...De,...x(A,De.message)},re(De.message),r&&($[L]=V))}if(!Vn(V)&&($[L]={ref:G,...V},!r))return $}}return re(!0),$};const O9={mode:Sr.onSubmit,reValidateMode:Sr.onChange,shouldFocusError:!0};function k9(n={}){let e={...O9,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Cr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let i=$t(e.defaultValues)||$t(e.values)?hn(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:hn(i),u={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,f=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...m};const T={array:n0(),state:n0()},P=e.criteriaMode===Sr.all,N=k=>j=>{clearTimeout(f),f=setTimeout(k,j)},L=async k=>{if(!e.disabled&&(m.isValid||y.isValid||k)){const j=e.resolver?Vn((await C()).errors):await S(r,!0);j!==t.isValid&&T.state.next({isValid:j})}},O=(k,j)=>{!e.disabled&&(m.isValidating||m.validatingFields||y.isValidating||y.validatingFields)&&((k||Array.from(c.mount)).forEach(K=>{K&&(j?gt(t.validatingFields,K,j):en(t.validatingFields,K))}),T.state.next({validatingFields:t.validatingFields,isValidating:!Vn(t.validatingFields)}))},z=(k,j=[],K,le,ue=!0,se=!0)=>{if(le&&K&&!e.disabled){if(u.action=!0,se&&Array.isArray(he(r,k))){const pe=K(he(r,k),le.argA,le.argB);ue&&gt(r,k,pe)}if(se&&Array.isArray(he(t.errors,k))){const pe=K(he(t.errors,k),le.argA,le.argB);ue&&gt(t.errors,k,pe),P9(t.errors,k)}if((m.touchedFields||y.touchedFields)&&se&&Array.isArray(he(t.touchedFields,k))){const pe=K(he(t.touchedFields,k),le.argA,le.argB);ue&&gt(t.touchedFields,k,pe)}(m.dirtyFields||y.dirtyFields)&&(t.dirtyFields=mu(i,o)),T.state.next({name:k,isDirty:M(k,j),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else gt(o,k,j)},H=(k,j)=>{gt(t.errors,k,j),T.state.next({errors:t.errors})},G=k=>{t.errors=k,T.state.next({errors:t.errors,isValid:!1})},re=(k,j,K,le)=>{const ue=he(r,k);if(ue){const se=he(o,k,jt(K)?he(i,k):K);jt(se)||le&&le.defaultChecked||j?gt(o,k,j?se:o0(ue._f)):De(k,se),u.mount&&L()}},$=(k,j,K,le,ue)=>{let se=!1,pe=!1;const Ie={name:k};if(!e.disabled){if(!K||le){(m.isDirty||y.isDirty)&&(pe=t.isDirty,t.isDirty=Ie.isDirty=M(),se=pe!==Ie.isDirty);const qe=as(he(i,k),j);pe=!!he(t.dirtyFields,k),qe?en(t.dirtyFields,k):gt(t.dirtyFields,k,!0),Ie.dirtyFields=t.dirtyFields,se=se||(m.dirtyFields||y.dirtyFields)&&pe!==!qe}if(K){const qe=he(t.touchedFields,k);qe||(gt(t.touchedFields,k,K),Ie.touchedFields=t.touchedFields,se=se||(m.touchedFields||y.touchedFields)&&qe!==K)}se&&ue&&T.state.next(Ie)}return se?Ie:{}},oe=(k,j,K,le)=>{const ue=he(t.errors,k),se=(m.isValid||y.isValid)&&tr(j)&&t.isValid!==j;if(e.delayError&&K?(d=N(()=>H(k,K)),d(e.delayError)):(clearTimeout(f),d=null,K?gt(t.errors,k,K):en(t.errors,k)),(K?!as(ue,K):ue)||!Vn(le)||se){const pe={...le,...se&&tr(j)?{isValid:j}:{},errors:t.errors,name:k};t={...t,...pe},T.state.next(pe)}},C=async k=>{O(k,!0);const j=await e.resolver(o,e.context,T9(k||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return O(k),j},I=async k=>{const{errors:j}=await C(k);if(k)for(const K of k){const le=he(j,K);le?gt(t.errors,K,le):en(t.errors,K)}else t.errors=j;return j},S=async(k,j,K={valid:!0})=>{for(const le in k){const ue=k[le];if(ue){const{_f:se,...pe}=ue;if(se){const Ie=c.array.has(se.name),qe=ue._f&&I9(ue._f);qe&&m.validatingFields&&O([le],!0);const Zt=await d0(ue,c.disabled,o,P,e.shouldUseNativeValidation&&!j,Ie);if(qe&&m.validatingFields&&O([le]),Zt[se.name]&&(K.valid=!1,j))break;!j&&(he(Zt,se.name)?Ie?x9(t.errors,Zt,se.name):gt(t.errors,se.name,Zt[se.name]):en(t.errors,se.name))}!Vn(pe)&&await S(pe,j,K)}}return K.valid},x=()=>{for(const k of c.unMount){const j=he(r,k);j&&(j._f.refs?j._f.refs.every(K=>!Jf(K)):!Jf(j._f.ref))&&Qt(k)}c.unMount=new Set},M=(k,j)=>!e.disabled&&(k&&j&&gt(o,k,j),!as(Nt(),i)),V=(k,j,K)=>eT(k,c,{...u.mount?o:jt(j)?i:Kr(k)?{[k]:j}:j},K,j),A=k=>yd(he(u.mount?o:i,k,e.shouldUnregister?he(i,k,[]):[])),De=(k,j,K={})=>{const le=he(r,k);let ue=j;if(le){const se=le._f;se&&(!se.disabled&&gt(o,k,oT(j,se)),ue=Hh(se.ref)&&Dn(j)?"":j,nT(se.ref)?[...se.ref.options].forEach(pe=>pe.selected=ue.includes(pe.value)):se.refs?wl(se.ref)?se.refs.forEach(pe=>{(!pe.defaultChecked||!pe.disabled)&&(Array.isArray(ue)?pe.checked=!!ue.find(Ie=>Ie===pe.value):pe.checked=ue===pe.value||!!ue)}):se.refs.forEach(pe=>pe.checked=pe.value===ue):Zg(se.ref)?se.ref.value="":(se.ref.value=ue,se.ref.type||T.state.next({name:k,values:hn(o)})))}(K.shouldDirty||K.shouldTouch)&&$(k,ue,K.shouldTouch,K.shouldDirty,!0),K.shouldValidate&&Mt(k)},Fe=(k,j,K)=>{for(const le in j){if(!j.hasOwnProperty(le))return;const ue=j[le],se=`${k}.${le}`,pe=he(r,se);(c.array.has(k)||$t(ue)||pe&&!pe._f)&&!eo(ue)?Fe(se,ue,K):De(se,ue,K)}},We=(k,j,K={})=>{const le=he(r,k),ue=c.array.has(k),se=hn(j);gt(o,k,se),ue?(T.array.next({name:k,values:hn(o)}),(m.isDirty||m.dirtyFields||y.isDirty||y.dirtyFields)&&K.shouldDirty&&T.state.next({name:k,dirtyFields:mu(i,o),isDirty:M(k,se)})):le&&!le._f&&!Dn(se)?Fe(k,se,K):De(k,se,K),l0(k,c)&&T.state.next({...t}),T.state.next({name:u.mount?k:void 0,values:hn(o)})},rt=async k=>{u.mount=!0;const j=k.target;let K=j.name,le=!0;const ue=he(r,K),se=qe=>{le=Number.isNaN(qe)||eo(qe)&&isNaN(qe.getTime())||as(qe,he(o,K,qe))},pe=a0(e.mode),Ie=a0(e.reValidateMode);if(ue){let qe,Zt;const _r=j.type?o0(ue._f):ZE(k),Un=k.type===zh.BLUR||k.type===zh.FOCUS_OUT,yr=!A9(ue._f)&&!e.resolver&&!he(t.errors,K)&&!ue._f.deps||R9(Un,he(t.touchedFields,K),t.isSubmitted,Ie,pe),Mr=l0(K,c,Un);gt(o,K,_r),Un?(ue._f.onBlur&&ue._f.onBlur(k),d&&d(0)):ue._f.onChange&&ue._f.onChange(k);const Nr=$(K,_r,Un),si=!Vn(Nr)||Mr;if(!Un&&T.state.next({name:K,type:k.type,values:hn(o)}),yr)return(m.isValid||y.isValid)&&(e.mode==="onBlur"?Un&&L():Un||L()),si&&T.state.next({name:K,...Mr?{}:Nr});if(!Un&&Mr&&T.state.next({...t}),e.resolver){const{errors:Ui}=await C([K]);if(se(_r),le){const xs=c0(t.errors,r,K),Bi=c0(Ui,r,xs.name||K);qe=Bi.error,K=Bi.name,Zt=Vn(Ui)}}else O([K],!0),qe=(await d0(ue,c.disabled,o,P,e.shouldUseNativeValidation))[K],O([K]),se(_r),le&&(qe?Zt=!1:(m.isValid||y.isValid)&&(Zt=await S(r,!0)));le&&(ue._f.deps&&Mt(ue._f.deps),oe(K,Zt,qe,Nr))}},ot=(k,j)=>{if(he(t.errors,j)&&k.focus)return k.focus(),1},Mt=async(k,j={})=>{let K,le;const ue=Mu(k);if(e.resolver){const se=await I(jt(k)?k:ue);K=Vn(se),le=k?!ue.some(pe=>he(se,pe)):K}else k?(le=(await Promise.all(ue.map(async se=>{const pe=he(r,se);return await S(pe&&pe._f?{[se]:pe}:pe)}))).every(Boolean),!(!le&&!t.isValid)&&L()):le=K=await S(r);return T.state.next({...!Kr(k)||(m.isValid||y.isValid)&&K!==t.isValid?{}:{name:k},...e.resolver||!k?{isValid:K}:{},errors:t.errors}),j.shouldFocus&&!le&&Nu(r,ot,k?ue:c.mount),le},Nt=k=>{const j={...u.mount?o:i};return jt(k)?j:Kr(k)?he(j,k):k.map(K=>he(j,K))},zt=(k,j)=>({invalid:!!he((j||t).errors,k),isDirty:!!he((j||t).dirtyFields,k),error:he((j||t).errors,k),isValidating:!!he(t.validatingFields,k),isTouched:!!he((j||t).touchedFields,k)}),it=k=>{k&&Mu(k).forEach(j=>en(t.errors,j)),T.state.next({errors:k?t.errors:{}})},Ye=(k,j,K)=>{const le=(he(r,k,{_f:{}})._f||{}).ref,ue=he(t.errors,k)||{},{ref:se,message:pe,type:Ie,...qe}=ue;gt(t.errors,k,{...qe,...j,ref:le}),T.state.next({name:k,errors:t.errors,isValid:!1}),K&&K.shouldFocus&&le&&le.focus&&le.focus()},Cn=(k,j)=>Cr(k)?T.state.subscribe({next:K=>k(V(void 0,j),K)}):V(k,j,!0),At=k=>T.state.subscribe({next:j=>{C9(k.name,j.name,k.exact)&&S9(j,k.formState||m,Zn,k.reRenderRoot)&&k.callback({values:{...o},...t,...j})}}).unsubscribe,Ht=k=>(u.mount=!0,y={...y,...k.formState},At({...k,formState:y})),Qt=(k,j={})=>{for(const K of k?Mu(k):c.mount)c.mount.delete(K),c.array.delete(K),j.keepValue||(en(r,K),en(o,K)),!j.keepError&&en(t.errors,K),!j.keepDirty&&en(t.dirtyFields,K),!j.keepTouched&&en(t.touchedFields,K),!j.keepIsValidating&&en(t.validatingFields,K),!e.shouldUnregister&&!j.keepDefaultValue&&en(i,K);T.state.next({values:hn(o)}),T.state.next({...t,...j.keepDirty?{isDirty:M()}:{}}),!j.keepIsValid&&L()},Wt=({disabled:k,name:j})=>{(tr(k)&&u.mount||k||c.disabled.has(j))&&(k?c.disabled.add(j):c.disabled.delete(j))},mn=(k,j={})=>{let K=he(r,k);const le=tr(j.disabled)||tr(e.disabled);return gt(r,k,{...K||{},_f:{...K&&K._f?K._f:{ref:{name:k}},name:k,mount:!0,...j}}),c.mount.add(k),K?Wt({disabled:tr(j.disabled)?j.disabled:e.disabled,name:k}):re(k,!0,j.value),{...le?{disabled:j.disabled||e.disabled}:{},...e.progressive?{required:!!j.required,min:vu(j.min),max:vu(j.max),minLength:vu(j.minLength),maxLength:vu(j.maxLength),pattern:vu(j.pattern)}:{},name:k,onChange:rt,onBlur:rt,ref:ue=>{if(ue){mn(k,j),K=he(r,k);const se=jt(ue.value)&&ue.querySelectorAll&&ue.querySelectorAll("input,select,textarea")[0]||ue,pe=b9(se),Ie=K._f.refs||[];if(pe?Ie.find(qe=>qe===se):se===K._f.ref)return;gt(r,k,{_f:{...K._f,...pe?{refs:[...Ie.filter(Jf),se,...Array.isArray(he(i,k))?[{}]:[]],ref:{type:se.type,name:k}}:{ref:se}}}),re(k,!1,void 0,se)}else K=he(r,k,{}),K._f&&(K._f.mount=!1),(e.shouldUnregister||j.shouldUnregister)&&!(YE(c.array,k)&&u.action)&&c.unMount.add(k)}}},vr=()=>e.shouldFocusError&&Nu(r,ot,c.mount),Nn=k=>{tr(k)&&(T.state.next({disabled:k}),Nu(r,(j,K)=>{const le=he(r,K);le&&(j.disabled=le._f.disabled||k,Array.isArray(le._f.refs)&&le._f.refs.forEach(ue=>{ue.disabled=le._f.disabled||k}))},0,!1))},Ln=(k,j)=>async K=>{let le;K&&(K.preventDefault&&K.preventDefault(),K.persist&&K.persist());let ue=hn(o);if(T.state.next({isSubmitting:!0}),e.resolver){const{errors:se,values:pe}=await C();t.errors=se,ue=pe}else await S(r);if(c.disabled.size)for(const se of c.disabled)gt(ue,se,void 0);if(en(t.errors,"root"),Vn(t.errors)){T.state.next({errors:{}});try{await k(ue,K)}catch(se){le=se}}else j&&await j({...t.errors},K),vr(),setTimeout(vr);if(T.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Vn(t.errors)&&!le,submitCount:t.submitCount+1,errors:t.errors}),le)throw le},Dr=(k,j={})=>{he(r,k)&&(jt(j.defaultValue)?We(k,hn(he(i,k))):(We(k,j.defaultValue),gt(i,k,hn(j.defaultValue))),j.keepTouched||en(t.touchedFields,k),j.keepDirty||(en(t.dirtyFields,k),t.isDirty=j.defaultValue?M(k,hn(he(i,k))):M()),j.keepError||(en(t.errors,k),m.isValid&&L()),T.state.next({...t}))},Lt=(k,j={})=>{const K=k?hn(k):i,le=hn(K),ue=Vn(k),se=ue?i:le;if(j.keepDefaultValues||(i=K),!j.keepValues){if(j.keepDirtyValues){const pe=new Set([...c.mount,...Object.keys(mu(i,o))]);for(const Ie of Array.from(pe))he(t.dirtyFields,Ie)?gt(se,Ie,he(o,Ie)):We(Ie,he(se,Ie))}else{if(qg&&jt(k))for(const pe of c.mount){const Ie=he(r,pe);if(Ie&&Ie._f){const qe=Array.isArray(Ie._f.refs)?Ie._f.refs[0]:Ie._f.ref;if(Hh(qe)){const Zt=qe.closest("form");if(Zt){Zt.reset();break}}}}for(const pe of c.mount)We(pe,he(se,pe))}o=hn(se),T.array.next({values:{...se}}),T.state.next({values:{...se}})}c={mount:j.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!m.isValid||!!j.keepIsValid||!!j.keepDirtyValues,u.watch=!!e.shouldUnregister,T.state.next({submitCount:j.keepSubmitCount?t.submitCount:0,isDirty:ue?!1:j.keepDirty?t.isDirty:!!(j.keepDefaultValues&&!as(k,i)),isSubmitted:j.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:ue?{}:j.keepDirtyValues?j.keepDefaultValues&&o?mu(i,o):t.dirtyFields:j.keepDefaultValues&&k?mu(i,k):j.keepDirty?t.dirtyFields:{},touchedFields:j.keepTouched?t.touchedFields:{},errors:j.keepErrors?t.errors:{},isSubmitSuccessful:j.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Fn=(k,j)=>Lt(Cr(k)?k(o):k,j),wo=(k,j={})=>{const K=he(r,k),le=K&&K._f;if(le){const ue=le.refs?le.refs[0]:le.ref;ue.focus&&(ue.focus(),j.shouldSelect&&Cr(ue.select)&&ue.select())}},Zn=k=>{t={...t,...k}},Ps={control:{register:mn,unregister:Qt,getFieldState:zt,handleSubmit:Ln,setError:Ye,_subscribe:At,_runSchema:C,_getWatch:V,_getDirty:M,_setValid:L,_setFieldArray:z,_setDisabledField:Wt,_setErrors:G,_getFieldArray:A,_reset:Lt,_resetDefaultValues:()=>Cr(e.defaultValues)&&e.defaultValues().then(k=>{Fn(k,e.resetOptions),T.state.next({isLoading:!1})}),_removeUnmounted:x,_disableForm:Nn,_subjects:T,_proxyFormState:m,get _fields(){return r},get _formValues(){return o},get _state(){return u},set _state(k){u=k},get _defaultValues(){return i},get _names(){return c},set _names(k){c=k},get _formState(){return t},get _options(){return e},set _options(k){e={...e,...k}}},subscribe:Ht,trigger:Mt,register:mn,handleSubmit:Ln,watch:Cn,setValue:We,getValues:Nt,reset:Fn,resetField:Dr,clearErrors:it,unregister:Qt,setError:Ye,setFocus:wo,getFieldState:zt};return{...Ps,formControl:Ps}}function V9(n={}){const e=wt.useRef(void 0),t=wt.useRef(void 0),[r,i]=wt.useState({isDirty:!1,isValidating:!1,isLoading:Cr(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:Cr(n.defaultValues)?void 0:n.defaultValues});e.current||(e.current={...n.formControl?n.formControl:k9(n),formState:r},n.formControl&&n.defaultValues&&!Cr(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions));const o=e.current.control;return o._options=n,Qg(()=>{const u=o._subscribe({formState:o._proxyFormState,callback:()=>i({...o._formState}),reRenderRoot:!0});return i(c=>({...c,isReady:!0})),o._formState.isReady=!0,u},[o]),wt.useEffect(()=>o._disableForm(n.disabled),[o,n.disabled]),wt.useEffect(()=>{n.mode&&(o._options.mode=n.mode),n.reValidateMode&&(o._options.reValidateMode=n.reValidateMode),n.errors&&!Vn(n.errors)&&o._setErrors(n.errors)},[o,n.errors,n.mode,n.reValidateMode]),wt.useEffect(()=>{n.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,n.shouldUnregister]),wt.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==r.isDirty&&o._subjects.state.next({isDirty:u})}},[o,r.isDirty]),wt.useEffect(()=>{n.values&&!as(n.values,t.current)?(o._reset(n.values,o._options.resetOptions),t.current=n.values,i(u=>({...u}))):o._resetDefaultValues()},[o,n.values]),wt.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=XE(r,o),e.current}const f0=(n,e,t)=>{if(n&&"reportValidity"in n){const r=he(t,e);n.setCustomValidity(r&&r.message||""),n.reportValidity()}},uT=(n,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?f0(r.ref,t,n):r&&r.refs&&r.refs.forEach(i=>f0(i,t,n))}},D9=(n,e)=>{e.shouldUseNativeValidation&&uT(n,e);const t={};for(const r in n){const i=he(e.fields,r),o=Object.assign(n[r]||{},{ref:i&&i.ref});if(M9(e.names||Object.keys(n),r)){const u=Object.assign({},he(t,r));gt(u,"root",o),gt(t,r,u)}else gt(t,r,o)}return t},M9=(n,e)=>{const t=p0(e);return n.some(r=>p0(r).match(`^${t}\\.\\d+`))};function p0(n){return n.replace(/\]|\[/g,"")}function N9(n,e){for(var t={};n.length;){var r=n[0],i=r.code,o=r.message,u=r.path.join(".");if(!t[u])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];t[u]={message:c.message,type:c.code}}else t[u]={message:o,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(m){return m.errors.forEach(function(y){return n.push(y)})}),e){var d=t[u].types,f=d&&d[r.code];t[u]=tT(u,e,t,i,f?[].concat(f,r.message):r.message)}n.shift()}return t}function L9(n,e,t){return t===void 0&&(t={}),function(r,i,o){try{return Promise.resolve(function(u,c){try{var d=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(f){return o.shouldUseNativeValidation&&uT({},o),{errors:{},values:t.raw?Object.assign({},r):f}})}catch(f){return c(f)}return d&&d.then?d.then(void 0,c):d}(0,function(u){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(u))return{values:{},errors:D9(N9(u.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw u}))}catch(u){return Promise.reject(u)}}}function F9(n){return Kp({queryKey:["characters",n],queryFn:()=>yM(n)})}function U9(){const n=Wp();return _P({mutationFn:async e=>{await bM(e)},onSuccess:()=>{n.invalidateQueries({queryKey:["characters"]})}})}var Ru={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var B9=Ru.exports,g0;function j9(){return g0||(g0=1,function(n,e){(function(){var t,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",f=500,m="__lodash_placeholder__",y=1,T=2,P=4,N=1,L=2,O=1,z=2,H=4,G=8,re=16,$=32,oe=64,C=128,I=256,S=512,x=30,M="...",V=800,A=16,De=1,Fe=2,We=3,rt=1/0,ot=9007199254740991,Mt=17976931348623157e292,Nt=NaN,zt=4294967295,it=zt-1,Ye=zt>>>1,Cn=[["ary",C],["bind",O],["bindKey",z],["curry",G],["curryRight",re],["flip",S],["partial",$],["partialRight",oe],["rearg",I]],At="[object Arguments]",Ht="[object Array]",Qt="[object AsyncFunction]",Wt="[object Boolean]",mn="[object Date]",vr="[object DOMException]",Nn="[object Error]",Ln="[object Function]",Dr="[object GeneratorFunction]",Lt="[object Map]",Fn="[object Number]",wo="[object Null]",Zn="[object Object]",Va="[object Promise]",Ps="[object Proxy]",k="[object RegExp]",j="[object Set]",K="[object String]",le="[object Symbol]",ue="[object Undefined]",se="[object WeakMap]",pe="[object WeakSet]",Ie="[object ArrayBuffer]",qe="[object DataView]",Zt="[object Float32Array]",_r="[object Float64Array]",Un="[object Int8Array]",yr="[object Int16Array]",Mr="[object Int32Array]",Nr="[object Uint8Array]",si="[object Uint8ClampedArray]",Ui="[object Uint16Array]",xs="[object Uint32Array]",Bi=/\b__p \+= '';/g,El=/\b(__p \+=) '' \+/g,Tl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ji=/&(?:amp|lt|gt|quot|#39);/g,Eo=/[&<>"']/g,Da=RegExp(ji.source),oi=RegExp(Eo.source),Il=/<%-([\s\S]+?)%>/g,To=/<%([\s\S]+?)%>/g,Ma=/<%=([\s\S]+?)%>/g,Os=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Al=/^\w*$/,un=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Io=/[\\^$.*+?()[\]{}|]/g,ks=RegExp(Io.source),ai=/^\s+/,bd=/\s/,wd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$i=/\{\n\/\* \[wrapped with (.+)\] \*/,Ed=/,? & /,Td=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ao=/[()=,{}\[\]\/\s]/,Sl=/\\(\\)?/g,Na=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vs=/\w*$/,Lr=/^[-+]0x[0-9a-f]+$/i,Cl=/^0b[01]+$/i,Rl=/^\[object .+?Constructor\]$/,La=/^0o[0-7]+$/i,Fa=/^(?:0|[1-9]\d*)$/,Pl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ds=/($^)/,Id=/['\n\r\u2028\u2029\\]/g,ui="\\ud800-\\udfff",xl="\\u0300-\\u036f",Ua="\\ufe20-\\ufe2f",Ms="\\u20d0-\\u20ff",Fr=xl+Ua+Ms,So="\\u2700-\\u27bf",Ol="a-z\\xdf-\\xf6\\xf8-\\xff",kl="\\xac\\xb1\\xd7\\xf7",Vl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Dl="\\u2000-\\u206f",Ba=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Co="A-Z\\xc0-\\xd6\\xd8-\\xde",ja="\\ufe0e\\ufe0f",$a=kl+Vl+Dl+Ba,za="[']",Ad="["+ui+"]",Ha="["+$a+"]",Ns="["+Fr+"]",Ml="\\d+",li="["+So+"]",sr="["+Ol+"]",Ls="[^"+ui+$a+Ml+So+Ol+Co+"]",zi="\\ud83c[\\udffb-\\udfff]",Nl="(?:"+Ns+"|"+zi+")",yt="[^"+ui+"]",Hi="(?:\\ud83c[\\udde6-\\uddff]){2}",ci="[\\ud800-\\udbff][\\udc00-\\udfff]",or="["+Co+"]",Ll="\\u200d",Wa="(?:"+sr+"|"+Ls+")",Sd="(?:"+or+"|"+Ls+")",Fl="(?:"+za+"(?:d|ll|m|re|s|t|ve))?",Ul="(?:"+za+"(?:D|LL|M|RE|S|T|VE))?",Bl=Nl+"?",Wi="["+ja+"]?",Ur="(?:"+Ll+"(?:"+[yt,Hi,ci].join("|")+")"+Wi+Bl+")*",jl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$l="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",qa=Wi+Bl+Ur,qi="(?:"+[li,Hi,ci].join("|")+")"+qa,Cd="(?:"+[yt+Ns+"?",Ns,Hi,ci,Ad].join("|")+")",Rd=RegExp(za,"g"),Pd=RegExp(Ns,"g"),ar=RegExp(zi+"(?="+zi+")|"+Cd+qa,"g"),xd=RegExp([or+"?"+sr+"+"+Fl+"(?="+[Ha,or,"$"].join("|")+")",Sd+"+"+Ul+"(?="+[Ha,or+Wa,"$"].join("|")+")",or+"?"+Wa+"+"+Fl,or+"+"+Ul,$l,jl,Ml,qi].join("|"),"g"),Od=RegExp("["+Ll+ui+Fr+ja+"]"),Ro=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Po=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zl=-1,at={};at[Zt]=at[_r]=at[Un]=at[yr]=at[Mr]=at[Nr]=at[si]=at[Ui]=at[xs]=!0,at[At]=at[Ht]=at[Ie]=at[Wt]=at[qe]=at[mn]=at[Nn]=at[Ln]=at[Lt]=at[Fn]=at[Zn]=at[k]=at[j]=at[K]=at[se]=!1;var st={};st[At]=st[Ht]=st[Ie]=st[qe]=st[Wt]=st[mn]=st[Zt]=st[_r]=st[Un]=st[yr]=st[Mr]=st[Lt]=st[Fn]=st[Zn]=st[k]=st[j]=st[K]=st[le]=st[Nr]=st[si]=st[Ui]=st[xs]=!0,st[Nn]=st[Ln]=st[se]=!1;var Hl={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ga={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},St={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},kd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vd=parseFloat,Wl=parseInt,Ka=typeof Mc=="object"&&Mc&&Mc.Object===Object&&Mc,ql=typeof self=="object"&&self&&self.Object===Object&&self,Ot=Ka||ql||Function("return this")(),xo=e&&!e.nodeType&&e,ln=xo&&!0&&n&&!n.nodeType&&n,Qa=ln&&ln.exports===xo,Za=Qa&&Ka.process,sn=function(){try{var F=ln&&ln.require&&ln.require("util").types;return F||Za&&Za.binding&&Za.binding("util")}catch{}}(),Ya=sn&&sn.isArrayBuffer,Oo=sn&&sn.isDate,Fs=sn&&sn.isMap,Ja=sn&&sn.isRegExp,Us=sn&&sn.isSet,Gl=sn&&sn.isTypedArray;function vn(F,Q,W){switch(W.length){case 0:return F.call(Q);case 1:return F.call(Q,W[0]);case 2:return F.call(Q,W[0],W[1]);case 3:return F.call(Q,W[0],W[1],W[2])}return F.apply(Q,W)}function Bs(F,Q,W,ve){for(var Me=-1,lt=F==null?0:F.length;++Me<lt;){var Jt=F[Me];Q(ve,Jt,W(Jt),F)}return ve}function Rn(F,Q){for(var W=-1,ve=F==null?0:F.length;++W<ve&&Q(F[W],W,F)!==!1;);return F}function Kl(F,Q){for(var W=F==null?0:F.length;W--&&Q(F[W],W,F)!==!1;);return F}function ko(F,Q){for(var W=-1,ve=F==null?0:F.length;++W<ve;)if(!Q(F[W],W,F))return!1;return!0}function ur(F,Q){for(var W=-1,ve=F==null?0:F.length,Me=0,lt=[];++W<ve;){var Jt=F[W];Q(Jt,W,F)&&(lt[Me++]=Jt)}return lt}function js(F,Q){var W=F==null?0:F.length;return!!W&&hi(F,Q,0)>-1}function Gi(F,Q,W){for(var ve=-1,Me=F==null?0:F.length;++ve<Me;)if(W(Q,F[ve]))return!0;return!1}function Et(F,Q){for(var W=-1,ve=F==null?0:F.length,Me=Array(ve);++W<ve;)Me[W]=Q(F[W],W,F);return Me}function br(F,Q){for(var W=-1,ve=Q.length,Me=F.length;++W<ve;)F[Me+W]=Q[W];return F}function wr(F,Q,W,ve){var Me=-1,lt=F==null?0:F.length;for(ve&&lt&&(W=F[++Me]);++Me<lt;)W=Q(W,F[Me],Me,F);return W}function Ql(F,Q,W,ve){var Me=F==null?0:F.length;for(ve&&Me&&(W=F[--Me]);Me--;)W=Q(W,F[Me],Me,F);return W}function Vo(F,Q){for(var W=-1,ve=F==null?0:F.length;++W<ve;)if(Q(F[W],W,F))return!0;return!1}var Zl=v("length");function Yl(F){return F.split("")}function Do(F){return F.match(Td)||[]}function _n(F,Q,W){var ve;return W(F,function(Me,lt,Jt){if(Q(Me,lt,Jt))return ve=lt,!1}),ve}function $s(F,Q,W,ve){for(var Me=F.length,lt=W+(ve?1:-1);ve?lt--:++lt<Me;)if(Q(F[lt],lt,F))return lt;return-1}function hi(F,Q,W){return Q===Q?vT(F,Q,W):$s(F,l,W)}function Ki(F,Q,W,ve){for(var Me=W-1,lt=F.length;++Me<lt;)if(ve(F[Me],Q))return Me;return-1}function l(F){return F!==F}function p(F,Q){var W=F==null?0:F.length;return W?ae(F,Q)/W:Nt}function v(F){return function(Q){return Q==null?t:Q[F]}}function w(F){return function(Q){return F==null?t:F[Q]}}function B(F,Q,W,ve,Me){return Me(F,function(lt,Jt,Tt){W=ve?(ve=!1,lt):Q(W,lt,Jt,Tt)}),W}function q(F,Q){var W=F.length;for(F.sort(Q);W--;)F[W]=F[W].value;return F}function ae(F,Q){for(var W,ve=-1,Me=F.length;++ve<Me;){var lt=Q(F[ve]);lt!==t&&(W=W===t?lt:W+lt)}return W}function ut(F,Q){for(var W=-1,ve=Array(F);++W<F;)ve[W]=Q(W);return ve}function Yt(F,Q){return Et(Q,function(W){return[W,F[W]]})}function Je(F){return F&&F.slice(0,Xg(F)+1).replace(ai,"")}function dt(F){return function(Q){return F(Q)}}function qt(F,Q){return Et(Q,function(W){return F[W]})}function lr(F,Q){return F.has(Q)}function Bn(F,Q){for(var W=-1,ve=F.length;++W<ve&&hi(Q,F[W],0)>-1;);return W}function zs(F,Q){for(var W=F.length;W--&&hi(Q,F[W],0)>-1;);return W}function Xa(F,Q){for(var W=F.length,ve=0;W--;)F[W]===Q&&++ve;return ve}var cT=w(Hl),hT=w(Ga);function dT(F){return"\\"+kd[F]}function fT(F,Q){return F==null?t:F[Q]}function Mo(F){return Od.test(F)}function pT(F){return Ro.test(F)}function gT(F){for(var Q,W=[];!(Q=F.next()).done;)W.push(Q.value);return W}function Dd(F){var Q=-1,W=Array(F.size);return F.forEach(function(ve,Me){W[++Q]=[Me,ve]}),W}function Jg(F,Q){return function(W){return F(Q(W))}}function Qi(F,Q){for(var W=-1,ve=F.length,Me=0,lt=[];++W<ve;){var Jt=F[W];(Jt===Q||Jt===m)&&(F[W]=m,lt[Me++]=W)}return lt}function Jl(F){var Q=-1,W=Array(F.size);return F.forEach(function(ve){W[++Q]=ve}),W}function mT(F){var Q=-1,W=Array(F.size);return F.forEach(function(ve){W[++Q]=[ve,ve]}),W}function vT(F,Q,W){for(var ve=W-1,Me=F.length;++ve<Me;)if(F[ve]===Q)return ve;return-1}function _T(F,Q,W){for(var ve=W+1;ve--;)if(F[ve]===Q)return ve;return ve}function No(F){return Mo(F)?bT(F):Zl(F)}function Er(F){return Mo(F)?wT(F):Yl(F)}function Xg(F){for(var Q=F.length;Q--&&bd.test(F.charAt(Q)););return Q}var yT=w(St);function bT(F){for(var Q=ar.lastIndex=0;ar.test(F);)++Q;return Q}function wT(F){return F.match(ar)||[]}function ET(F){return F.match(xd)||[]}var TT=function F(Q){Q=Q==null?Ot:Lo.defaults(Ot.Object(),Q,Lo.pick(Ot,Po));var W=Q.Array,ve=Q.Date,Me=Q.Error,lt=Q.Function,Jt=Q.Math,Tt=Q.Object,Md=Q.RegExp,IT=Q.String,cr=Q.TypeError,Xl=W.prototype,AT=lt.prototype,Fo=Tt.prototype,ec=Q["__core-js_shared__"],tc=AT.toString,_t=Fo.hasOwnProperty,ST=0,em=function(){var s=/[^.]+$/.exec(ec&&ec.keys&&ec.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),nc=Fo.toString,CT=tc.call(Tt),RT=Ot._,PT=Md("^"+tc.call(_t).replace(Io,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rc=Qa?Q.Buffer:t,Zi=Q.Symbol,ic=Q.Uint8Array,tm=rc?rc.allocUnsafe:t,sc=Jg(Tt.getPrototypeOf,Tt),nm=Tt.create,rm=Fo.propertyIsEnumerable,oc=Xl.splice,im=Zi?Zi.isConcatSpreadable:t,eu=Zi?Zi.iterator:t,Hs=Zi?Zi.toStringTag:t,ac=function(){try{var s=Qs(Tt,"defineProperty");return s({},"",{}),s}catch{}}(),xT=Q.clearTimeout!==Ot.clearTimeout&&Q.clearTimeout,OT=ve&&ve.now!==Ot.Date.now&&ve.now,kT=Q.setTimeout!==Ot.setTimeout&&Q.setTimeout,uc=Jt.ceil,lc=Jt.floor,Nd=Tt.getOwnPropertySymbols,VT=rc?rc.isBuffer:t,sm=Q.isFinite,DT=Xl.join,MT=Jg(Tt.keys,Tt),Xt=Jt.max,yn=Jt.min,NT=ve.now,LT=Q.parseInt,om=Jt.random,FT=Xl.reverse,Ld=Qs(Q,"DataView"),tu=Qs(Q,"Map"),Fd=Qs(Q,"Promise"),Uo=Qs(Q,"Set"),nu=Qs(Q,"WeakMap"),ru=Qs(Tt,"create"),cc=nu&&new nu,Bo={},UT=Zs(Ld),BT=Zs(tu),jT=Zs(Fd),$T=Zs(Uo),zT=Zs(nu),hc=Zi?Zi.prototype:t,iu=hc?hc.valueOf:t,am=hc?hc.toString:t;function b(s){if(kt(s)&&!Le(s)&&!(s instanceof Ke)){if(s instanceof hr)return s;if(_t.call(s,"__wrapped__"))return uv(s)}return new hr(s)}var jo=function(){function s(){}return function(a){if(!Rt(a))return{};if(nm)return nm(a);s.prototype=a;var h=new s;return s.prototype=t,h}}();function dc(){}function hr(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=t}b.templateSettings={escape:Il,evaluate:To,interpolate:Ma,variable:"",imports:{_:b}},b.prototype=dc.prototype,b.prototype.constructor=b,hr.prototype=jo(dc.prototype),hr.prototype.constructor=hr;function Ke(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=zt,this.__views__=[]}function HT(){var s=new Ke(this.__wrapped__);return s.__actions__=jn(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=jn(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=jn(this.__views__),s}function WT(){if(this.__filtered__){var s=new Ke(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function qT(){var s=this.__wrapped__.value(),a=this.__dir__,h=Le(s),g=a<0,_=h?s.length:0,E=iA(0,_,this.__views__),R=E.start,D=E.end,U=D-R,Z=g?D:R-1,Y=this.__iteratees__,ee=Y.length,de=0,_e=yn(U,this.__takeCount__);if(!h||!g&&_==U&&_e==U)return Om(s,this.__actions__);var Se=[];e:for(;U--&&de<_e;){Z+=a;for(var je=-1,Ce=s[Z];++je<ee;){var Ge=Y[je],Xe=Ge.iteratee,Xn=Ge.type,On=Xe(Ce);if(Xn==Fe)Ce=On;else if(!On){if(Xn==De)continue e;break e}}Se[de++]=Ce}return Se}Ke.prototype=jo(dc.prototype),Ke.prototype.constructor=Ke;function Ws(s){var a=-1,h=s==null?0:s.length;for(this.clear();++a<h;){var g=s[a];this.set(g[0],g[1])}}function GT(){this.__data__=ru?ru(null):{},this.size=0}function KT(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function QT(s){var a=this.__data__;if(ru){var h=a[s];return h===d?t:h}return _t.call(a,s)?a[s]:t}function ZT(s){var a=this.__data__;return ru?a[s]!==t:_t.call(a,s)}function YT(s,a){var h=this.__data__;return this.size+=this.has(s)?0:1,h[s]=ru&&a===t?d:a,this}Ws.prototype.clear=GT,Ws.prototype.delete=KT,Ws.prototype.get=QT,Ws.prototype.has=ZT,Ws.prototype.set=YT;function di(s){var a=-1,h=s==null?0:s.length;for(this.clear();++a<h;){var g=s[a];this.set(g[0],g[1])}}function JT(){this.__data__=[],this.size=0}function XT(s){var a=this.__data__,h=fc(a,s);if(h<0)return!1;var g=a.length-1;return h==g?a.pop():oc.call(a,h,1),--this.size,!0}function eI(s){var a=this.__data__,h=fc(a,s);return h<0?t:a[h][1]}function tI(s){return fc(this.__data__,s)>-1}function nI(s,a){var h=this.__data__,g=fc(h,s);return g<0?(++this.size,h.push([s,a])):h[g][1]=a,this}di.prototype.clear=JT,di.prototype.delete=XT,di.prototype.get=eI,di.prototype.has=tI,di.prototype.set=nI;function fi(s){var a=-1,h=s==null?0:s.length;for(this.clear();++a<h;){var g=s[a];this.set(g[0],g[1])}}function rI(){this.size=0,this.__data__={hash:new Ws,map:new(tu||di),string:new Ws}}function iI(s){var a=Ac(this,s).delete(s);return this.size-=a?1:0,a}function sI(s){return Ac(this,s).get(s)}function oI(s){return Ac(this,s).has(s)}function aI(s,a){var h=Ac(this,s),g=h.size;return h.set(s,a),this.size+=h.size==g?0:1,this}fi.prototype.clear=rI,fi.prototype.delete=iI,fi.prototype.get=sI,fi.prototype.has=oI,fi.prototype.set=aI;function qs(s){var a=-1,h=s==null?0:s.length;for(this.__data__=new fi;++a<h;)this.add(s[a])}function uI(s){return this.__data__.set(s,d),this}function lI(s){return this.__data__.has(s)}qs.prototype.add=qs.prototype.push=uI,qs.prototype.has=lI;function Tr(s){var a=this.__data__=new di(s);this.size=a.size}function cI(){this.__data__=new di,this.size=0}function hI(s){var a=this.__data__,h=a.delete(s);return this.size=a.size,h}function dI(s){return this.__data__.get(s)}function fI(s){return this.__data__.has(s)}function pI(s,a){var h=this.__data__;if(h instanceof di){var g=h.__data__;if(!tu||g.length<i-1)return g.push([s,a]),this.size=++h.size,this;h=this.__data__=new fi(g)}return h.set(s,a),this.size=h.size,this}Tr.prototype.clear=cI,Tr.prototype.delete=hI,Tr.prototype.get=dI,Tr.prototype.has=fI,Tr.prototype.set=pI;function um(s,a){var h=Le(s),g=!h&&Ys(s),_=!h&&!g&&ts(s),E=!h&&!g&&!_&&Wo(s),R=h||g||_||E,D=R?ut(s.length,IT):[],U=D.length;for(var Z in s)(a||_t.call(s,Z))&&!(R&&(Z=="length"||_&&(Z=="offset"||Z=="parent")||E&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||vi(Z,U)))&&D.push(Z);return D}function lm(s){var a=s.length;return a?s[Qd(0,a-1)]:t}function gI(s,a){return Sc(jn(s),Gs(a,0,s.length))}function mI(s){return Sc(jn(s))}function Ud(s,a,h){(h!==t&&!Ir(s[a],h)||h===t&&!(a in s))&&pi(s,a,h)}function su(s,a,h){var g=s[a];(!(_t.call(s,a)&&Ir(g,h))||h===t&&!(a in s))&&pi(s,a,h)}function fc(s,a){for(var h=s.length;h--;)if(Ir(s[h][0],a))return h;return-1}function vI(s,a,h,g){return Yi(s,function(_,E,R){a(g,_,h(_),R)}),g}function cm(s,a){return s&&jr(a,on(a),s)}function _I(s,a){return s&&jr(a,zn(a),s)}function pi(s,a,h){a=="__proto__"&&ac?ac(s,a,{configurable:!0,enumerable:!0,value:h,writable:!0}):s[a]=h}function Bd(s,a){for(var h=-1,g=a.length,_=W(g),E=s==null;++h<g;)_[h]=E?t:wf(s,a[h]);return _}function Gs(s,a,h){return s===s&&(h!==t&&(s=s<=h?s:h),a!==t&&(s=s>=a?s:a)),s}function dr(s,a,h,g,_,E){var R,D=a&y,U=a&T,Z=a&P;if(h&&(R=_?h(s,g,_,E):h(s)),R!==t)return R;if(!Rt(s))return s;var Y=Le(s);if(Y){if(R=oA(s),!D)return jn(s,R)}else{var ee=bn(s),de=ee==Ln||ee==Dr;if(ts(s))return Dm(s,D);if(ee==Zn||ee==At||de&&!_){if(R=U||de?{}:Xm(s),!D)return U?QI(s,_I(R,s)):KI(s,cm(R,s))}else{if(!st[ee])return _?s:{};R=aA(s,ee,D)}}E||(E=new Tr);var _e=E.get(s);if(_e)return _e;E.set(s,R),Rv(s)?s.forEach(function(Ce){R.add(dr(Ce,a,h,Ce,s,E))}):Sv(s)&&s.forEach(function(Ce,Ge){R.set(Ge,dr(Ce,a,h,Ge,s,E))});var Se=Z?U?af:of:U?zn:on,je=Y?t:Se(s);return Rn(je||s,function(Ce,Ge){je&&(Ge=Ce,Ce=s[Ge]),su(R,Ge,dr(Ce,a,h,Ge,s,E))}),R}function yI(s){var a=on(s);return function(h){return hm(h,s,a)}}function hm(s,a,h){var g=h.length;if(s==null)return!g;for(s=Tt(s);g--;){var _=h[g],E=a[_],R=s[_];if(R===t&&!(_ in s)||!E(R))return!1}return!0}function dm(s,a,h){if(typeof s!="function")throw new cr(u);return du(function(){s.apply(t,h)},a)}function ou(s,a,h,g){var _=-1,E=js,R=!0,D=s.length,U=[],Z=a.length;if(!D)return U;h&&(a=Et(a,dt(h))),g?(E=Gi,R=!1):a.length>=i&&(E=lr,R=!1,a=new qs(a));e:for(;++_<D;){var Y=s[_],ee=h==null?Y:h(Y);if(Y=g||Y!==0?Y:0,R&&ee===ee){for(var de=Z;de--;)if(a[de]===ee)continue e;U.push(Y)}else E(a,ee,g)||U.push(Y)}return U}var Yi=Um(Br),fm=Um($d,!0);function bI(s,a){var h=!0;return Yi(s,function(g,_,E){return h=!!a(g,_,E),h}),h}function pc(s,a,h){for(var g=-1,_=s.length;++g<_;){var E=s[g],R=a(E);if(R!=null&&(D===t?R===R&&!Jn(R):h(R,D)))var D=R,U=E}return U}function wI(s,a,h,g){var _=s.length;for(h=Be(h),h<0&&(h=-h>_?0:_+h),g=g===t||g>_?_:Be(g),g<0&&(g+=_),g=h>g?0:xv(g);h<g;)s[h++]=a;return s}function pm(s,a){var h=[];return Yi(s,function(g,_,E){a(g,_,E)&&h.push(g)}),h}function cn(s,a,h,g,_){var E=-1,R=s.length;for(h||(h=lA),_||(_=[]);++E<R;){var D=s[E];a>0&&h(D)?a>1?cn(D,a-1,h,g,_):br(_,D):g||(_[_.length]=D)}return _}var jd=Bm(),gm=Bm(!0);function Br(s,a){return s&&jd(s,a,on)}function $d(s,a){return s&&gm(s,a,on)}function gc(s,a){return ur(a,function(h){return _i(s[h])})}function Ks(s,a){a=Xi(a,s);for(var h=0,g=a.length;s!=null&&h<g;)s=s[$r(a[h++])];return h&&h==g?s:t}function mm(s,a,h){var g=a(s);return Le(s)?g:br(g,h(s))}function Pn(s){return s==null?s===t?ue:wo:Hs&&Hs in Tt(s)?rA(s):mA(s)}function zd(s,a){return s>a}function EI(s,a){return s!=null&&_t.call(s,a)}function TI(s,a){return s!=null&&a in Tt(s)}function II(s,a,h){return s>=yn(a,h)&&s<Xt(a,h)}function Hd(s,a,h){for(var g=h?Gi:js,_=s[0].length,E=s.length,R=E,D=W(E),U=1/0,Z=[];R--;){var Y=s[R];R&&a&&(Y=Et(Y,dt(a))),U=yn(Y.length,U),D[R]=!h&&(a||_>=120&&Y.length>=120)?new qs(R&&Y):t}Y=s[0];var ee=-1,de=D[0];e:for(;++ee<_&&Z.length<U;){var _e=Y[ee],Se=a?a(_e):_e;if(_e=h||_e!==0?_e:0,!(de?lr(de,Se):g(Z,Se,h))){for(R=E;--R;){var je=D[R];if(!(je?lr(je,Se):g(s[R],Se,h)))continue e}de&&de.push(Se),Z.push(_e)}}return Z}function AI(s,a,h,g){return Br(s,function(_,E,R){a(g,h(_),E,R)}),g}function au(s,a,h){a=Xi(a,s),s=rv(s,a);var g=s==null?s:s[$r(pr(a))];return g==null?t:vn(g,s,h)}function vm(s){return kt(s)&&Pn(s)==At}function SI(s){return kt(s)&&Pn(s)==Ie}function CI(s){return kt(s)&&Pn(s)==mn}function uu(s,a,h,g,_){return s===a?!0:s==null||a==null||!kt(s)&&!kt(a)?s!==s&&a!==a:RI(s,a,h,g,uu,_)}function RI(s,a,h,g,_,E){var R=Le(s),D=Le(a),U=R?Ht:bn(s),Z=D?Ht:bn(a);U=U==At?Zn:U,Z=Z==At?Zn:Z;var Y=U==Zn,ee=Z==Zn,de=U==Z;if(de&&ts(s)){if(!ts(a))return!1;R=!0,Y=!1}if(de&&!Y)return E||(E=new Tr),R||Wo(s)?Zm(s,a,h,g,_,E):tA(s,a,U,h,g,_,E);if(!(h&N)){var _e=Y&&_t.call(s,"__wrapped__"),Se=ee&&_t.call(a,"__wrapped__");if(_e||Se){var je=_e?s.value():s,Ce=Se?a.value():a;return E||(E=new Tr),_(je,Ce,h,g,E)}}return de?(E||(E=new Tr),nA(s,a,h,g,_,E)):!1}function PI(s){return kt(s)&&bn(s)==Lt}function Wd(s,a,h,g){var _=h.length,E=_,R=!g;if(s==null)return!E;for(s=Tt(s);_--;){var D=h[_];if(R&&D[2]?D[1]!==s[D[0]]:!(D[0]in s))return!1}for(;++_<E;){D=h[_];var U=D[0],Z=s[U],Y=D[1];if(R&&D[2]){if(Z===t&&!(U in s))return!1}else{var ee=new Tr;if(g)var de=g(Z,Y,U,s,a,ee);if(!(de===t?uu(Y,Z,N|L,g,ee):de))return!1}}return!0}function _m(s){if(!Rt(s)||hA(s))return!1;var a=_i(s)?PT:Rl;return a.test(Zs(s))}function xI(s){return kt(s)&&Pn(s)==k}function OI(s){return kt(s)&&bn(s)==j}function kI(s){return kt(s)&&kc(s.length)&&!!at[Pn(s)]}function ym(s){return typeof s=="function"?s:s==null?Hn:typeof s=="object"?Le(s)?Em(s[0],s[1]):wm(s):jv(s)}function qd(s){if(!hu(s))return MT(s);var a=[];for(var h in Tt(s))_t.call(s,h)&&h!="constructor"&&a.push(h);return a}function VI(s){if(!Rt(s))return gA(s);var a=hu(s),h=[];for(var g in s)g=="constructor"&&(a||!_t.call(s,g))||h.push(g);return h}function Gd(s,a){return s<a}function bm(s,a){var h=-1,g=$n(s)?W(s.length):[];return Yi(s,function(_,E,R){g[++h]=a(_,E,R)}),g}function wm(s){var a=lf(s);return a.length==1&&a[0][2]?tv(a[0][0],a[0][1]):function(h){return h===s||Wd(h,s,a)}}function Em(s,a){return hf(s)&&ev(a)?tv($r(s),a):function(h){var g=wf(h,s);return g===t&&g===a?Ef(h,s):uu(a,g,N|L)}}function mc(s,a,h,g,_){s!==a&&jd(a,function(E,R){if(_||(_=new Tr),Rt(E))DI(s,a,R,h,mc,g,_);else{var D=g?g(ff(s,R),E,R+"",s,a,_):t;D===t&&(D=E),Ud(s,R,D)}},zn)}function DI(s,a,h,g,_,E,R){var D=ff(s,h),U=ff(a,h),Z=R.get(U);if(Z){Ud(s,h,Z);return}var Y=E?E(D,U,h+"",s,a,R):t,ee=Y===t;if(ee){var de=Le(U),_e=!de&&ts(U),Se=!de&&!_e&&Wo(U);Y=U,de||_e||Se?Le(D)?Y=D:Ft(D)?Y=jn(D):_e?(ee=!1,Y=Dm(U,!0)):Se?(ee=!1,Y=Mm(U,!0)):Y=[]:fu(U)||Ys(U)?(Y=D,Ys(D)?Y=Ov(D):(!Rt(D)||_i(D))&&(Y=Xm(U))):ee=!1}ee&&(R.set(U,Y),_(Y,U,g,E,R),R.delete(U)),Ud(s,h,Y)}function Tm(s,a){var h=s.length;if(h)return a+=a<0?h:0,vi(a,h)?s[a]:t}function Im(s,a,h){a.length?a=Et(a,function(E){return Le(E)?function(R){return Ks(R,E.length===1?E[0]:E)}:E}):a=[Hn];var g=-1;a=Et(a,dt(Ae()));var _=bm(s,function(E,R,D){var U=Et(a,function(Z){return Z(E)});return{criteria:U,index:++g,value:E}});return q(_,function(E,R){return GI(E,R,h)})}function MI(s,a){return Am(s,a,function(h,g){return Ef(s,g)})}function Am(s,a,h){for(var g=-1,_=a.length,E={};++g<_;){var R=a[g],D=Ks(s,R);h(D,R)&&lu(E,Xi(R,s),D)}return E}function NI(s){return function(a){return Ks(a,s)}}function Kd(s,a,h,g){var _=g?Ki:hi,E=-1,R=a.length,D=s;for(s===a&&(a=jn(a)),h&&(D=Et(s,dt(h)));++E<R;)for(var U=0,Z=a[E],Y=h?h(Z):Z;(U=_(D,Y,U,g))>-1;)D!==s&&oc.call(D,U,1),oc.call(s,U,1);return s}function Sm(s,a){for(var h=s?a.length:0,g=h-1;h--;){var _=a[h];if(h==g||_!==E){var E=_;vi(_)?oc.call(s,_,1):Jd(s,_)}}return s}function Qd(s,a){return s+lc(om()*(a-s+1))}function LI(s,a,h,g){for(var _=-1,E=Xt(uc((a-s)/(h||1)),0),R=W(E);E--;)R[g?E:++_]=s,s+=h;return R}function Zd(s,a){var h="";if(!s||a<1||a>ot)return h;do a%2&&(h+=s),a=lc(a/2),a&&(s+=s);while(a);return h}function ze(s,a){return pf(nv(s,a,Hn),s+"")}function FI(s){return lm(qo(s))}function UI(s,a){var h=qo(s);return Sc(h,Gs(a,0,h.length))}function lu(s,a,h,g){if(!Rt(s))return s;a=Xi(a,s);for(var _=-1,E=a.length,R=E-1,D=s;D!=null&&++_<E;){var U=$r(a[_]),Z=h;if(U==="__proto__"||U==="constructor"||U==="prototype")return s;if(_!=R){var Y=D[U];Z=g?g(Y,U,D):t,Z===t&&(Z=Rt(Y)?Y:vi(a[_+1])?[]:{})}su(D,U,Z),D=D[U]}return s}var Cm=cc?function(s,a){return cc.set(s,a),s}:Hn,BI=ac?function(s,a){return ac(s,"toString",{configurable:!0,enumerable:!1,value:If(a),writable:!0})}:Hn;function jI(s){return Sc(qo(s))}function fr(s,a,h){var g=-1,_=s.length;a<0&&(a=-a>_?0:_+a),h=h>_?_:h,h<0&&(h+=_),_=a>h?0:h-a>>>0,a>>>=0;for(var E=W(_);++g<_;)E[g]=s[g+a];return E}function $I(s,a){var h;return Yi(s,function(g,_,E){return h=a(g,_,E),!h}),!!h}function vc(s,a,h){var g=0,_=s==null?g:s.length;if(typeof a=="number"&&a===a&&_<=Ye){for(;g<_;){var E=g+_>>>1,R=s[E];R!==null&&!Jn(R)&&(h?R<=a:R<a)?g=E+1:_=E}return _}return Yd(s,a,Hn,h)}function Yd(s,a,h,g){var _=0,E=s==null?0:s.length;if(E===0)return 0;a=h(a);for(var R=a!==a,D=a===null,U=Jn(a),Z=a===t;_<E;){var Y=lc((_+E)/2),ee=h(s[Y]),de=ee!==t,_e=ee===null,Se=ee===ee,je=Jn(ee);if(R)var Ce=g||Se;else Z?Ce=Se&&(g||de):D?Ce=Se&&de&&(g||!_e):U?Ce=Se&&de&&!_e&&(g||!je):_e||je?Ce=!1:Ce=g?ee<=a:ee<a;Ce?_=Y+1:E=Y}return yn(E,it)}function Rm(s,a){for(var h=-1,g=s.length,_=0,E=[];++h<g;){var R=s[h],D=a?a(R):R;if(!h||!Ir(D,U)){var U=D;E[_++]=R===0?0:R}}return E}function Pm(s){return typeof s=="number"?s:Jn(s)?Nt:+s}function Yn(s){if(typeof s=="string")return s;if(Le(s))return Et(s,Yn)+"";if(Jn(s))return am?am.call(s):"";var a=s+"";return a=="0"&&1/s==-1/0?"-0":a}function Ji(s,a,h){var g=-1,_=js,E=s.length,R=!0,D=[],U=D;if(h)R=!1,_=Gi;else if(E>=i){var Z=a?null:XI(s);if(Z)return Jl(Z);R=!1,_=lr,U=new qs}else U=a?[]:D;e:for(;++g<E;){var Y=s[g],ee=a?a(Y):Y;if(Y=h||Y!==0?Y:0,R&&ee===ee){for(var de=U.length;de--;)if(U[de]===ee)continue e;a&&U.push(ee),D.push(Y)}else _(U,ee,h)||(U!==D&&U.push(ee),D.push(Y))}return D}function Jd(s,a){return a=Xi(a,s),s=rv(s,a),s==null||delete s[$r(pr(a))]}function xm(s,a,h,g){return lu(s,a,h(Ks(s,a)),g)}function _c(s,a,h,g){for(var _=s.length,E=g?_:-1;(g?E--:++E<_)&&a(s[E],E,s););return h?fr(s,g?0:E,g?E+1:_):fr(s,g?E+1:0,g?_:E)}function Om(s,a){var h=s;return h instanceof Ke&&(h=h.value()),wr(a,function(g,_){return _.func.apply(_.thisArg,br([g],_.args))},h)}function Xd(s,a,h){var g=s.length;if(g<2)return g?Ji(s[0]):[];for(var _=-1,E=W(g);++_<g;)for(var R=s[_],D=-1;++D<g;)D!=_&&(E[_]=ou(E[_]||R,s[D],a,h));return Ji(cn(E,1),a,h)}function km(s,a,h){for(var g=-1,_=s.length,E=a.length,R={};++g<_;){var D=g<E?a[g]:t;h(R,s[g],D)}return R}function ef(s){return Ft(s)?s:[]}function tf(s){return typeof s=="function"?s:Hn}function Xi(s,a){return Le(s)?s:hf(s,a)?[s]:av(ft(s))}var zI=ze;function es(s,a,h){var g=s.length;return h=h===t?g:h,!a&&h>=g?s:fr(s,a,h)}var Vm=xT||function(s){return Ot.clearTimeout(s)};function Dm(s,a){if(a)return s.slice();var h=s.length,g=tm?tm(h):new s.constructor(h);return s.copy(g),g}function nf(s){var a=new s.constructor(s.byteLength);return new ic(a).set(new ic(s)),a}function HI(s,a){var h=a?nf(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.byteLength)}function WI(s){var a=new s.constructor(s.source,Vs.exec(s));return a.lastIndex=s.lastIndex,a}function qI(s){return iu?Tt(iu.call(s)):{}}function Mm(s,a){var h=a?nf(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.length)}function Nm(s,a){if(s!==a){var h=s!==t,g=s===null,_=s===s,E=Jn(s),R=a!==t,D=a===null,U=a===a,Z=Jn(a);if(!D&&!Z&&!E&&s>a||E&&R&&U&&!D&&!Z||g&&R&&U||!h&&U||!_)return 1;if(!g&&!E&&!Z&&s<a||Z&&h&&_&&!g&&!E||D&&h&&_||!R&&_||!U)return-1}return 0}function GI(s,a,h){for(var g=-1,_=s.criteria,E=a.criteria,R=_.length,D=h.length;++g<R;){var U=Nm(_[g],E[g]);if(U){if(g>=D)return U;var Z=h[g];return U*(Z=="desc"?-1:1)}}return s.index-a.index}function Lm(s,a,h,g){for(var _=-1,E=s.length,R=h.length,D=-1,U=a.length,Z=Xt(E-R,0),Y=W(U+Z),ee=!g;++D<U;)Y[D]=a[D];for(;++_<R;)(ee||_<E)&&(Y[h[_]]=s[_]);for(;Z--;)Y[D++]=s[_++];return Y}function Fm(s,a,h,g){for(var _=-1,E=s.length,R=-1,D=h.length,U=-1,Z=a.length,Y=Xt(E-D,0),ee=W(Y+Z),de=!g;++_<Y;)ee[_]=s[_];for(var _e=_;++U<Z;)ee[_e+U]=a[U];for(;++R<D;)(de||_<E)&&(ee[_e+h[R]]=s[_++]);return ee}function jn(s,a){var h=-1,g=s.length;for(a||(a=W(g));++h<g;)a[h]=s[h];return a}function jr(s,a,h,g){var _=!h;h||(h={});for(var E=-1,R=a.length;++E<R;){var D=a[E],U=g?g(h[D],s[D],D,h,s):t;U===t&&(U=s[D]),_?pi(h,D,U):su(h,D,U)}return h}function KI(s,a){return jr(s,cf(s),a)}function QI(s,a){return jr(s,Ym(s),a)}function yc(s,a){return function(h,g){var _=Le(h)?Bs:vI,E=a?a():{};return _(h,s,Ae(g,2),E)}}function $o(s){return ze(function(a,h){var g=-1,_=h.length,E=_>1?h[_-1]:t,R=_>2?h[2]:t;for(E=s.length>3&&typeof E=="function"?(_--,E):t,R&&xn(h[0],h[1],R)&&(E=_<3?t:E,_=1),a=Tt(a);++g<_;){var D=h[g];D&&s(a,D,g,E)}return a})}function Um(s,a){return function(h,g){if(h==null)return h;if(!$n(h))return s(h,g);for(var _=h.length,E=a?_:-1,R=Tt(h);(a?E--:++E<_)&&g(R[E],E,R)!==!1;);return h}}function Bm(s){return function(a,h,g){for(var _=-1,E=Tt(a),R=g(a),D=R.length;D--;){var U=R[s?D:++_];if(h(E[U],U,E)===!1)break}return a}}function ZI(s,a,h){var g=a&O,_=cu(s);function E(){var R=this&&this!==Ot&&this instanceof E?_:s;return R.apply(g?h:this,arguments)}return E}function jm(s){return function(a){a=ft(a);var h=Mo(a)?Er(a):t,g=h?h[0]:a.charAt(0),_=h?es(h,1).join(""):a.slice(1);return g[s]()+_}}function zo(s){return function(a){return wr(Uv(Fv(a).replace(Rd,"")),s,"")}}function cu(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var h=jo(s.prototype),g=s.apply(h,a);return Rt(g)?g:h}}function YI(s,a,h){var g=cu(s);function _(){for(var E=arguments.length,R=W(E),D=E,U=Ho(_);D--;)R[D]=arguments[D];var Z=E<3&&R[0]!==U&&R[E-1]!==U?[]:Qi(R,U);if(E-=Z.length,E<h)return qm(s,a,bc,_.placeholder,t,R,Z,t,t,h-E);var Y=this&&this!==Ot&&this instanceof _?g:s;return vn(Y,this,R)}return _}function $m(s){return function(a,h,g){var _=Tt(a);if(!$n(a)){var E=Ae(h,3);a=on(a),h=function(D){return E(_[D],D,_)}}var R=s(a,h,g);return R>-1?_[E?a[R]:R]:t}}function zm(s){return mi(function(a){var h=a.length,g=h,_=hr.prototype.thru;for(s&&a.reverse();g--;){var E=a[g];if(typeof E!="function")throw new cr(u);if(_&&!R&&Ic(E)=="wrapper")var R=new hr([],!0)}for(g=R?g:h;++g<h;){E=a[g];var D=Ic(E),U=D=="wrapper"?uf(E):t;U&&df(U[0])&&U[1]==(C|G|$|I)&&!U[4].length&&U[9]==1?R=R[Ic(U[0])].apply(R,U[3]):R=E.length==1&&df(E)?R[D]():R.thru(E)}return function(){var Z=arguments,Y=Z[0];if(R&&Z.length==1&&Le(Y))return R.plant(Y).value();for(var ee=0,de=h?a[ee].apply(this,Z):Y;++ee<h;)de=a[ee].call(this,de);return de}})}function bc(s,a,h,g,_,E,R,D,U,Z){var Y=a&C,ee=a&O,de=a&z,_e=a&(G|re),Se=a&S,je=de?t:cu(s);function Ce(){for(var Ge=arguments.length,Xe=W(Ge),Xn=Ge;Xn--;)Xe[Xn]=arguments[Xn];if(_e)var On=Ho(Ce),er=Xa(Xe,On);if(g&&(Xe=Lm(Xe,g,_,_e)),E&&(Xe=Fm(Xe,E,R,_e)),Ge-=er,_e&&Ge<Z){var Ut=Qi(Xe,On);return qm(s,a,bc,Ce.placeholder,h,Xe,Ut,D,U,Z-Ge)}var Ar=ee?h:this,bi=de?Ar[s]:s;return Ge=Xe.length,D?Xe=vA(Xe,D):Se&&Ge>1&&Xe.reverse(),Y&&U<Ge&&(Xe.length=U),this&&this!==Ot&&this instanceof Ce&&(bi=je||cu(bi)),bi.apply(Ar,Xe)}return Ce}function Hm(s,a){return function(h,g){return AI(h,s,a(g),{})}}function wc(s,a){return function(h,g){var _;if(h===t&&g===t)return a;if(h!==t&&(_=h),g!==t){if(_===t)return g;typeof h=="string"||typeof g=="string"?(h=Yn(h),g=Yn(g)):(h=Pm(h),g=Pm(g)),_=s(h,g)}return _}}function rf(s){return mi(function(a){return a=Et(a,dt(Ae())),ze(function(h){var g=this;return s(a,function(_){return vn(_,g,h)})})})}function Ec(s,a){a=a===t?" ":Yn(a);var h=a.length;if(h<2)return h?Zd(a,s):a;var g=Zd(a,uc(s/No(a)));return Mo(a)?es(Er(g),0,s).join(""):g.slice(0,s)}function JI(s,a,h,g){var _=a&O,E=cu(s);function R(){for(var D=-1,U=arguments.length,Z=-1,Y=g.length,ee=W(Y+U),de=this&&this!==Ot&&this instanceof R?E:s;++Z<Y;)ee[Z]=g[Z];for(;U--;)ee[Z++]=arguments[++D];return vn(de,_?h:this,ee)}return R}function Wm(s){return function(a,h,g){return g&&typeof g!="number"&&xn(a,h,g)&&(h=g=t),a=yi(a),h===t?(h=a,a=0):h=yi(h),g=g===t?a<h?1:-1:yi(g),LI(a,h,g,s)}}function Tc(s){return function(a,h){return typeof a=="string"&&typeof h=="string"||(a=gr(a),h=gr(h)),s(a,h)}}function qm(s,a,h,g,_,E,R,D,U,Z){var Y=a&G,ee=Y?R:t,de=Y?t:R,_e=Y?E:t,Se=Y?t:E;a|=Y?$:oe,a&=~(Y?oe:$),a&H||(a&=-4);var je=[s,a,_,_e,ee,Se,de,D,U,Z],Ce=h.apply(t,je);return df(s)&&iv(Ce,je),Ce.placeholder=g,sv(Ce,s,a)}function sf(s){var a=Jt[s];return function(h,g){if(h=gr(h),g=g==null?0:yn(Be(g),292),g&&sm(h)){var _=(ft(h)+"e").split("e"),E=a(_[0]+"e"+(+_[1]+g));return _=(ft(E)+"e").split("e"),+(_[0]+"e"+(+_[1]-g))}return a(h)}}var XI=Uo&&1/Jl(new Uo([,-0]))[1]==rt?function(s){return new Uo(s)}:Cf;function Gm(s){return function(a){var h=bn(a);return h==Lt?Dd(a):h==j?mT(a):Yt(a,s(a))}}function gi(s,a,h,g,_,E,R,D){var U=a&z;if(!U&&typeof s!="function")throw new cr(u);var Z=g?g.length:0;if(Z||(a&=-97,g=_=t),R=R===t?R:Xt(Be(R),0),D=D===t?D:Be(D),Z-=_?_.length:0,a&oe){var Y=g,ee=_;g=_=t}var de=U?t:uf(s),_e=[s,a,h,g,_,Y,ee,E,R,D];if(de&&pA(_e,de),s=_e[0],a=_e[1],h=_e[2],g=_e[3],_=_e[4],D=_e[9]=_e[9]===t?U?0:s.length:Xt(_e[9]-Z,0),!D&&a&(G|re)&&(a&=-25),!a||a==O)var Se=ZI(s,a,h);else a==G||a==re?Se=YI(s,a,D):(a==$||a==(O|$))&&!_.length?Se=JI(s,a,h,g):Se=bc.apply(t,_e);var je=de?Cm:iv;return sv(je(Se,_e),s,a)}function Km(s,a,h,g){return s===t||Ir(s,Fo[h])&&!_t.call(g,h)?a:s}function Qm(s,a,h,g,_,E){return Rt(s)&&Rt(a)&&(E.set(a,s),mc(s,a,t,Qm,E),E.delete(a)),s}function eA(s){return fu(s)?t:s}function Zm(s,a,h,g,_,E){var R=h&N,D=s.length,U=a.length;if(D!=U&&!(R&&U>D))return!1;var Z=E.get(s),Y=E.get(a);if(Z&&Y)return Z==a&&Y==s;var ee=-1,de=!0,_e=h&L?new qs:t;for(E.set(s,a),E.set(a,s);++ee<D;){var Se=s[ee],je=a[ee];if(g)var Ce=R?g(je,Se,ee,a,s,E):g(Se,je,ee,s,a,E);if(Ce!==t){if(Ce)continue;de=!1;break}if(_e){if(!Vo(a,function(Ge,Xe){if(!lr(_e,Xe)&&(Se===Ge||_(Se,Ge,h,g,E)))return _e.push(Xe)})){de=!1;break}}else if(!(Se===je||_(Se,je,h,g,E))){de=!1;break}}return E.delete(s),E.delete(a),de}function tA(s,a,h,g,_,E,R){switch(h){case qe:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case Ie:return!(s.byteLength!=a.byteLength||!E(new ic(s),new ic(a)));case Wt:case mn:case Fn:return Ir(+s,+a);case Nn:return s.name==a.name&&s.message==a.message;case k:case K:return s==a+"";case Lt:var D=Dd;case j:var U=g&N;if(D||(D=Jl),s.size!=a.size&&!U)return!1;var Z=R.get(s);if(Z)return Z==a;g|=L,R.set(s,a);var Y=Zm(D(s),D(a),g,_,E,R);return R.delete(s),Y;case le:if(iu)return iu.call(s)==iu.call(a)}return!1}function nA(s,a,h,g,_,E){var R=h&N,D=of(s),U=D.length,Z=of(a),Y=Z.length;if(U!=Y&&!R)return!1;for(var ee=U;ee--;){var de=D[ee];if(!(R?de in a:_t.call(a,de)))return!1}var _e=E.get(s),Se=E.get(a);if(_e&&Se)return _e==a&&Se==s;var je=!0;E.set(s,a),E.set(a,s);for(var Ce=R;++ee<U;){de=D[ee];var Ge=s[de],Xe=a[de];if(g)var Xn=R?g(Xe,Ge,de,a,s,E):g(Ge,Xe,de,s,a,E);if(!(Xn===t?Ge===Xe||_(Ge,Xe,h,g,E):Xn)){je=!1;break}Ce||(Ce=de=="constructor")}if(je&&!Ce){var On=s.constructor,er=a.constructor;On!=er&&"constructor"in s&&"constructor"in a&&!(typeof On=="function"&&On instanceof On&&typeof er=="function"&&er instanceof er)&&(je=!1)}return E.delete(s),E.delete(a),je}function mi(s){return pf(nv(s,t,hv),s+"")}function of(s){return mm(s,on,cf)}function af(s){return mm(s,zn,Ym)}var uf=cc?function(s){return cc.get(s)}:Cf;function Ic(s){for(var a=s.name+"",h=Bo[a],g=_t.call(Bo,a)?h.length:0;g--;){var _=h[g],E=_.func;if(E==null||E==s)return _.name}return a}function Ho(s){var a=_t.call(b,"placeholder")?b:s;return a.placeholder}function Ae(){var s=b.iteratee||Af;return s=s===Af?ym:s,arguments.length?s(arguments[0],arguments[1]):s}function Ac(s,a){var h=s.__data__;return cA(a)?h[typeof a=="string"?"string":"hash"]:h.map}function lf(s){for(var a=on(s),h=a.length;h--;){var g=a[h],_=s[g];a[h]=[g,_,ev(_)]}return a}function Qs(s,a){var h=fT(s,a);return _m(h)?h:t}function rA(s){var a=_t.call(s,Hs),h=s[Hs];try{s[Hs]=t;var g=!0}catch{}var _=nc.call(s);return g&&(a?s[Hs]=h:delete s[Hs]),_}var cf=Nd?function(s){return s==null?[]:(s=Tt(s),ur(Nd(s),function(a){return rm.call(s,a)}))}:Rf,Ym=Nd?function(s){for(var a=[];s;)br(a,cf(s)),s=sc(s);return a}:Rf,bn=Pn;(Ld&&bn(new Ld(new ArrayBuffer(1)))!=qe||tu&&bn(new tu)!=Lt||Fd&&bn(Fd.resolve())!=Va||Uo&&bn(new Uo)!=j||nu&&bn(new nu)!=se)&&(bn=function(s){var a=Pn(s),h=a==Zn?s.constructor:t,g=h?Zs(h):"";if(g)switch(g){case UT:return qe;case BT:return Lt;case jT:return Va;case $T:return j;case zT:return se}return a});function iA(s,a,h){for(var g=-1,_=h.length;++g<_;){var E=h[g],R=E.size;switch(E.type){case"drop":s+=R;break;case"dropRight":a-=R;break;case"take":a=yn(a,s+R);break;case"takeRight":s=Xt(s,a-R);break}}return{start:s,end:a}}function sA(s){var a=s.match($i);return a?a[1].split(Ed):[]}function Jm(s,a,h){a=Xi(a,s);for(var g=-1,_=a.length,E=!1;++g<_;){var R=$r(a[g]);if(!(E=s!=null&&h(s,R)))break;s=s[R]}return E||++g!=_?E:(_=s==null?0:s.length,!!_&&kc(_)&&vi(R,_)&&(Le(s)||Ys(s)))}function oA(s){var a=s.length,h=new s.constructor(a);return a&&typeof s[0]=="string"&&_t.call(s,"index")&&(h.index=s.index,h.input=s.input),h}function Xm(s){return typeof s.constructor=="function"&&!hu(s)?jo(sc(s)):{}}function aA(s,a,h){var g=s.constructor;switch(a){case Ie:return nf(s);case Wt:case mn:return new g(+s);case qe:return HI(s,h);case Zt:case _r:case Un:case yr:case Mr:case Nr:case si:case Ui:case xs:return Mm(s,h);case Lt:return new g;case Fn:case K:return new g(s);case k:return WI(s);case j:return new g;case le:return qI(s)}}function uA(s,a){var h=a.length;if(!h)return s;var g=h-1;return a[g]=(h>1?"& ":"")+a[g],a=a.join(h>2?", ":" "),s.replace(wd,`{
/* [wrapped with `+a+`] */
`)}function lA(s){return Le(s)||Ys(s)||!!(im&&s&&s[im])}function vi(s,a){var h=typeof s;return a=a??ot,!!a&&(h=="number"||h!="symbol"&&Fa.test(s))&&s>-1&&s%1==0&&s<a}function xn(s,a,h){if(!Rt(h))return!1;var g=typeof a;return(g=="number"?$n(h)&&vi(a,h.length):g=="string"&&a in h)?Ir(h[a],s):!1}function hf(s,a){if(Le(s))return!1;var h=typeof s;return h=="number"||h=="symbol"||h=="boolean"||s==null||Jn(s)?!0:Al.test(s)||!Os.test(s)||a!=null&&s in Tt(a)}function cA(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function df(s){var a=Ic(s),h=b[a];if(typeof h!="function"||!(a in Ke.prototype))return!1;if(s===h)return!0;var g=uf(h);return!!g&&s===g[0]}function hA(s){return!!em&&em in s}var dA=ec?_i:Pf;function hu(s){var a=s&&s.constructor,h=typeof a=="function"&&a.prototype||Fo;return s===h}function ev(s){return s===s&&!Rt(s)}function tv(s,a){return function(h){return h==null?!1:h[s]===a&&(a!==t||s in Tt(h))}}function fA(s){var a=xc(s,function(g){return h.size===f&&h.clear(),g}),h=a.cache;return a}function pA(s,a){var h=s[1],g=a[1],_=h|g,E=_<(O|z|C),R=g==C&&h==G||g==C&&h==I&&s[7].length<=a[8]||g==(C|I)&&a[7].length<=a[8]&&h==G;if(!(E||R))return s;g&O&&(s[2]=a[2],_|=h&O?0:H);var D=a[3];if(D){var U=s[3];s[3]=U?Lm(U,D,a[4]):D,s[4]=U?Qi(s[3],m):a[4]}return D=a[5],D&&(U=s[5],s[5]=U?Fm(U,D,a[6]):D,s[6]=U?Qi(s[5],m):a[6]),D=a[7],D&&(s[7]=D),g&C&&(s[8]=s[8]==null?a[8]:yn(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=_,s}function gA(s){var a=[];if(s!=null)for(var h in Tt(s))a.push(h);return a}function mA(s){return nc.call(s)}function nv(s,a,h){return a=Xt(a===t?s.length-1:a,0),function(){for(var g=arguments,_=-1,E=Xt(g.length-a,0),R=W(E);++_<E;)R[_]=g[a+_];_=-1;for(var D=W(a+1);++_<a;)D[_]=g[_];return D[a]=h(R),vn(s,this,D)}}function rv(s,a){return a.length<2?s:Ks(s,fr(a,0,-1))}function vA(s,a){for(var h=s.length,g=yn(a.length,h),_=jn(s);g--;){var E=a[g];s[g]=vi(E,h)?_[E]:t}return s}function ff(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var iv=ov(Cm),du=kT||function(s,a){return Ot.setTimeout(s,a)},pf=ov(BI);function sv(s,a,h){var g=a+"";return pf(s,uA(g,_A(sA(g),h)))}function ov(s){var a=0,h=0;return function(){var g=NT(),_=A-(g-h);if(h=g,_>0){if(++a>=V)return arguments[0]}else a=0;return s.apply(t,arguments)}}function Sc(s,a){var h=-1,g=s.length,_=g-1;for(a=a===t?g:a;++h<a;){var E=Qd(h,_),R=s[E];s[E]=s[h],s[h]=R}return s.length=a,s}var av=fA(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(un,function(h,g,_,E){a.push(_?E.replace(Sl,"$1"):g||h)}),a});function $r(s){if(typeof s=="string"||Jn(s))return s;var a=s+"";return a=="0"&&1/s==-1/0?"-0":a}function Zs(s){if(s!=null){try{return tc.call(s)}catch{}try{return s+""}catch{}}return""}function _A(s,a){return Rn(Cn,function(h){var g="_."+h[0];a&h[1]&&!js(s,g)&&s.push(g)}),s.sort()}function uv(s){if(s instanceof Ke)return s.clone();var a=new hr(s.__wrapped__,s.__chain__);return a.__actions__=jn(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function yA(s,a,h){(h?xn(s,a,h):a===t)?a=1:a=Xt(Be(a),0);var g=s==null?0:s.length;if(!g||a<1)return[];for(var _=0,E=0,R=W(uc(g/a));_<g;)R[E++]=fr(s,_,_+=a);return R}function bA(s){for(var a=-1,h=s==null?0:s.length,g=0,_=[];++a<h;){var E=s[a];E&&(_[g++]=E)}return _}function wA(){var s=arguments.length;if(!s)return[];for(var a=W(s-1),h=arguments[0],g=s;g--;)a[g-1]=arguments[g];return br(Le(h)?jn(h):[h],cn(a,1))}var EA=ze(function(s,a){return Ft(s)?ou(s,cn(a,1,Ft,!0)):[]}),TA=ze(function(s,a){var h=pr(a);return Ft(h)&&(h=t),Ft(s)?ou(s,cn(a,1,Ft,!0),Ae(h,2)):[]}),IA=ze(function(s,a){var h=pr(a);return Ft(h)&&(h=t),Ft(s)?ou(s,cn(a,1,Ft,!0),t,h):[]});function AA(s,a,h){var g=s==null?0:s.length;return g?(a=h||a===t?1:Be(a),fr(s,a<0?0:a,g)):[]}function SA(s,a,h){var g=s==null?0:s.length;return g?(a=h||a===t?1:Be(a),a=g-a,fr(s,0,a<0?0:a)):[]}function CA(s,a){return s&&s.length?_c(s,Ae(a,3),!0,!0):[]}function RA(s,a){return s&&s.length?_c(s,Ae(a,3),!0):[]}function PA(s,a,h,g){var _=s==null?0:s.length;return _?(h&&typeof h!="number"&&xn(s,a,h)&&(h=0,g=_),wI(s,a,h,g)):[]}function lv(s,a,h){var g=s==null?0:s.length;if(!g)return-1;var _=h==null?0:Be(h);return _<0&&(_=Xt(g+_,0)),$s(s,Ae(a,3),_)}function cv(s,a,h){var g=s==null?0:s.length;if(!g)return-1;var _=g-1;return h!==t&&(_=Be(h),_=h<0?Xt(g+_,0):yn(_,g-1)),$s(s,Ae(a,3),_,!0)}function hv(s){var a=s==null?0:s.length;return a?cn(s,1):[]}function xA(s){var a=s==null?0:s.length;return a?cn(s,rt):[]}function OA(s,a){var h=s==null?0:s.length;return h?(a=a===t?1:Be(a),cn(s,a)):[]}function kA(s){for(var a=-1,h=s==null?0:s.length,g={};++a<h;){var _=s[a];g[_[0]]=_[1]}return g}function dv(s){return s&&s.length?s[0]:t}function VA(s,a,h){var g=s==null?0:s.length;if(!g)return-1;var _=h==null?0:Be(h);return _<0&&(_=Xt(g+_,0)),hi(s,a,_)}function DA(s){var a=s==null?0:s.length;return a?fr(s,0,-1):[]}var MA=ze(function(s){var a=Et(s,ef);return a.length&&a[0]===s[0]?Hd(a):[]}),NA=ze(function(s){var a=pr(s),h=Et(s,ef);return a===pr(h)?a=t:h.pop(),h.length&&h[0]===s[0]?Hd(h,Ae(a,2)):[]}),LA=ze(function(s){var a=pr(s),h=Et(s,ef);return a=typeof a=="function"?a:t,a&&h.pop(),h.length&&h[0]===s[0]?Hd(h,t,a):[]});function FA(s,a){return s==null?"":DT.call(s,a)}function pr(s){var a=s==null?0:s.length;return a?s[a-1]:t}function UA(s,a,h){var g=s==null?0:s.length;if(!g)return-1;var _=g;return h!==t&&(_=Be(h),_=_<0?Xt(g+_,0):yn(_,g-1)),a===a?_T(s,a,_):$s(s,l,_,!0)}function BA(s,a){return s&&s.length?Tm(s,Be(a)):t}var jA=ze(fv);function fv(s,a){return s&&s.length&&a&&a.length?Kd(s,a):s}function $A(s,a,h){return s&&s.length&&a&&a.length?Kd(s,a,Ae(h,2)):s}function zA(s,a,h){return s&&s.length&&a&&a.length?Kd(s,a,t,h):s}var HA=mi(function(s,a){var h=s==null?0:s.length,g=Bd(s,a);return Sm(s,Et(a,function(_){return vi(_,h)?+_:_}).sort(Nm)),g});function WA(s,a){var h=[];if(!(s&&s.length))return h;var g=-1,_=[],E=s.length;for(a=Ae(a,3);++g<E;){var R=s[g];a(R,g,s)&&(h.push(R),_.push(g))}return Sm(s,_),h}function gf(s){return s==null?s:FT.call(s)}function qA(s,a,h){var g=s==null?0:s.length;return g?(h&&typeof h!="number"&&xn(s,a,h)?(a=0,h=g):(a=a==null?0:Be(a),h=h===t?g:Be(h)),fr(s,a,h)):[]}function GA(s,a){return vc(s,a)}function KA(s,a,h){return Yd(s,a,Ae(h,2))}function QA(s,a){var h=s==null?0:s.length;if(h){var g=vc(s,a);if(g<h&&Ir(s[g],a))return g}return-1}function ZA(s,a){return vc(s,a,!0)}function YA(s,a,h){return Yd(s,a,Ae(h,2),!0)}function JA(s,a){var h=s==null?0:s.length;if(h){var g=vc(s,a,!0)-1;if(Ir(s[g],a))return g}return-1}function XA(s){return s&&s.length?Rm(s):[]}function eS(s,a){return s&&s.length?Rm(s,Ae(a,2)):[]}function tS(s){var a=s==null?0:s.length;return a?fr(s,1,a):[]}function nS(s,a,h){return s&&s.length?(a=h||a===t?1:Be(a),fr(s,0,a<0?0:a)):[]}function rS(s,a,h){var g=s==null?0:s.length;return g?(a=h||a===t?1:Be(a),a=g-a,fr(s,a<0?0:a,g)):[]}function iS(s,a){return s&&s.length?_c(s,Ae(a,3),!1,!0):[]}function sS(s,a){return s&&s.length?_c(s,Ae(a,3)):[]}var oS=ze(function(s){return Ji(cn(s,1,Ft,!0))}),aS=ze(function(s){var a=pr(s);return Ft(a)&&(a=t),Ji(cn(s,1,Ft,!0),Ae(a,2))}),uS=ze(function(s){var a=pr(s);return a=typeof a=="function"?a:t,Ji(cn(s,1,Ft,!0),t,a)});function lS(s){return s&&s.length?Ji(s):[]}function cS(s,a){return s&&s.length?Ji(s,Ae(a,2)):[]}function hS(s,a){return a=typeof a=="function"?a:t,s&&s.length?Ji(s,t,a):[]}function mf(s){if(!(s&&s.length))return[];var a=0;return s=ur(s,function(h){if(Ft(h))return a=Xt(h.length,a),!0}),ut(a,function(h){return Et(s,v(h))})}function pv(s,a){if(!(s&&s.length))return[];var h=mf(s);return a==null?h:Et(h,function(g){return vn(a,t,g)})}var dS=ze(function(s,a){return Ft(s)?ou(s,a):[]}),fS=ze(function(s){return Xd(ur(s,Ft))}),pS=ze(function(s){var a=pr(s);return Ft(a)&&(a=t),Xd(ur(s,Ft),Ae(a,2))}),gS=ze(function(s){var a=pr(s);return a=typeof a=="function"?a:t,Xd(ur(s,Ft),t,a)}),mS=ze(mf);function vS(s,a){return km(s||[],a||[],su)}function _S(s,a){return km(s||[],a||[],lu)}var yS=ze(function(s){var a=s.length,h=a>1?s[a-1]:t;return h=typeof h=="function"?(s.pop(),h):t,pv(s,h)});function gv(s){var a=b(s);return a.__chain__=!0,a}function bS(s,a){return a(s),s}function Cc(s,a){return a(s)}var wS=mi(function(s){var a=s.length,h=a?s[0]:0,g=this.__wrapped__,_=function(E){return Bd(E,s)};return a>1||this.__actions__.length||!(g instanceof Ke)||!vi(h)?this.thru(_):(g=g.slice(h,+h+(a?1:0)),g.__actions__.push({func:Cc,args:[_],thisArg:t}),new hr(g,this.__chain__).thru(function(E){return a&&!E.length&&E.push(t),E}))});function ES(){return gv(this)}function TS(){return new hr(this.value(),this.__chain__)}function IS(){this.__values__===t&&(this.__values__=Pv(this.value()));var s=this.__index__>=this.__values__.length,a=s?t:this.__values__[this.__index__++];return{done:s,value:a}}function AS(){return this}function SS(s){for(var a,h=this;h instanceof dc;){var g=uv(h);g.__index__=0,g.__values__=t,a?_.__wrapped__=g:a=g;var _=g;h=h.__wrapped__}return _.__wrapped__=s,a}function CS(){var s=this.__wrapped__;if(s instanceof Ke){var a=s;return this.__actions__.length&&(a=new Ke(this)),a=a.reverse(),a.__actions__.push({func:Cc,args:[gf],thisArg:t}),new hr(a,this.__chain__)}return this.thru(gf)}function RS(){return Om(this.__wrapped__,this.__actions__)}var PS=yc(function(s,a,h){_t.call(s,h)?++s[h]:pi(s,h,1)});function xS(s,a,h){var g=Le(s)?ko:bI;return h&&xn(s,a,h)&&(a=t),g(s,Ae(a,3))}function OS(s,a){var h=Le(s)?ur:pm;return h(s,Ae(a,3))}var kS=$m(lv),VS=$m(cv);function DS(s,a){return cn(Rc(s,a),1)}function MS(s,a){return cn(Rc(s,a),rt)}function NS(s,a,h){return h=h===t?1:Be(h),cn(Rc(s,a),h)}function mv(s,a){var h=Le(s)?Rn:Yi;return h(s,Ae(a,3))}function vv(s,a){var h=Le(s)?Kl:fm;return h(s,Ae(a,3))}var LS=yc(function(s,a,h){_t.call(s,h)?s[h].push(a):pi(s,h,[a])});function FS(s,a,h,g){s=$n(s)?s:qo(s),h=h&&!g?Be(h):0;var _=s.length;return h<0&&(h=Xt(_+h,0)),Vc(s)?h<=_&&s.indexOf(a,h)>-1:!!_&&hi(s,a,h)>-1}var US=ze(function(s,a,h){var g=-1,_=typeof a=="function",E=$n(s)?W(s.length):[];return Yi(s,function(R){E[++g]=_?vn(a,R,h):au(R,a,h)}),E}),BS=yc(function(s,a,h){pi(s,h,a)});function Rc(s,a){var h=Le(s)?Et:bm;return h(s,Ae(a,3))}function jS(s,a,h,g){return s==null?[]:(Le(a)||(a=a==null?[]:[a]),h=g?t:h,Le(h)||(h=h==null?[]:[h]),Im(s,a,h))}var $S=yc(function(s,a,h){s[h?0:1].push(a)},function(){return[[],[]]});function zS(s,a,h){var g=Le(s)?wr:B,_=arguments.length<3;return g(s,Ae(a,4),h,_,Yi)}function HS(s,a,h){var g=Le(s)?Ql:B,_=arguments.length<3;return g(s,Ae(a,4),h,_,fm)}function WS(s,a){var h=Le(s)?ur:pm;return h(s,Oc(Ae(a,3)))}function qS(s){var a=Le(s)?lm:FI;return a(s)}function GS(s,a,h){(h?xn(s,a,h):a===t)?a=1:a=Be(a);var g=Le(s)?gI:UI;return g(s,a)}function KS(s){var a=Le(s)?mI:jI;return a(s)}function QS(s){if(s==null)return 0;if($n(s))return Vc(s)?No(s):s.length;var a=bn(s);return a==Lt||a==j?s.size:qd(s).length}function ZS(s,a,h){var g=Le(s)?Vo:$I;return h&&xn(s,a,h)&&(a=t),g(s,Ae(a,3))}var YS=ze(function(s,a){if(s==null)return[];var h=a.length;return h>1&&xn(s,a[0],a[1])?a=[]:h>2&&xn(a[0],a[1],a[2])&&(a=[a[0]]),Im(s,cn(a,1),[])}),Pc=OT||function(){return Ot.Date.now()};function JS(s,a){if(typeof a!="function")throw new cr(u);return s=Be(s),function(){if(--s<1)return a.apply(this,arguments)}}function _v(s,a,h){return a=h?t:a,a=s&&a==null?s.length:a,gi(s,C,t,t,t,t,a)}function yv(s,a){var h;if(typeof a!="function")throw new cr(u);return s=Be(s),function(){return--s>0&&(h=a.apply(this,arguments)),s<=1&&(a=t),h}}var vf=ze(function(s,a,h){var g=O;if(h.length){var _=Qi(h,Ho(vf));g|=$}return gi(s,g,a,h,_)}),bv=ze(function(s,a,h){var g=O|z;if(h.length){var _=Qi(h,Ho(bv));g|=$}return gi(a,g,s,h,_)});function wv(s,a,h){a=h?t:a;var g=gi(s,G,t,t,t,t,t,a);return g.placeholder=wv.placeholder,g}function Ev(s,a,h){a=h?t:a;var g=gi(s,re,t,t,t,t,t,a);return g.placeholder=Ev.placeholder,g}function Tv(s,a,h){var g,_,E,R,D,U,Z=0,Y=!1,ee=!1,de=!0;if(typeof s!="function")throw new cr(u);a=gr(a)||0,Rt(h)&&(Y=!!h.leading,ee="maxWait"in h,E=ee?Xt(gr(h.maxWait)||0,a):E,de="trailing"in h?!!h.trailing:de);function _e(Ut){var Ar=g,bi=_;return g=_=t,Z=Ut,R=s.apply(bi,Ar),R}function Se(Ut){return Z=Ut,D=du(Ge,a),Y?_e(Ut):R}function je(Ut){var Ar=Ut-U,bi=Ut-Z,$v=a-Ar;return ee?yn($v,E-bi):$v}function Ce(Ut){var Ar=Ut-U,bi=Ut-Z;return U===t||Ar>=a||Ar<0||ee&&bi>=E}function Ge(){var Ut=Pc();if(Ce(Ut))return Xe(Ut);D=du(Ge,je(Ut))}function Xe(Ut){return D=t,de&&g?_e(Ut):(g=_=t,R)}function Xn(){D!==t&&Vm(D),Z=0,g=U=_=D=t}function On(){return D===t?R:Xe(Pc())}function er(){var Ut=Pc(),Ar=Ce(Ut);if(g=arguments,_=this,U=Ut,Ar){if(D===t)return Se(U);if(ee)return Vm(D),D=du(Ge,a),_e(U)}return D===t&&(D=du(Ge,a)),R}return er.cancel=Xn,er.flush=On,er}var XS=ze(function(s,a){return dm(s,1,a)}),e1=ze(function(s,a,h){return dm(s,gr(a)||0,h)});function t1(s){return gi(s,S)}function xc(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new cr(u);var h=function(){var g=arguments,_=a?a.apply(this,g):g[0],E=h.cache;if(E.has(_))return E.get(_);var R=s.apply(this,g);return h.cache=E.set(_,R)||E,R};return h.cache=new(xc.Cache||fi),h}xc.Cache=fi;function Oc(s){if(typeof s!="function")throw new cr(u);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function n1(s){return yv(2,s)}var r1=zI(function(s,a){a=a.length==1&&Le(a[0])?Et(a[0],dt(Ae())):Et(cn(a,1),dt(Ae()));var h=a.length;return ze(function(g){for(var _=-1,E=yn(g.length,h);++_<E;)g[_]=a[_].call(this,g[_]);return vn(s,this,g)})}),_f=ze(function(s,a){var h=Qi(a,Ho(_f));return gi(s,$,t,a,h)}),Iv=ze(function(s,a){var h=Qi(a,Ho(Iv));return gi(s,oe,t,a,h)}),i1=mi(function(s,a){return gi(s,I,t,t,t,a)});function s1(s,a){if(typeof s!="function")throw new cr(u);return a=a===t?a:Be(a),ze(s,a)}function o1(s,a){if(typeof s!="function")throw new cr(u);return a=a==null?0:Xt(Be(a),0),ze(function(h){var g=h[a],_=es(h,0,a);return g&&br(_,g),vn(s,this,_)})}function a1(s,a,h){var g=!0,_=!0;if(typeof s!="function")throw new cr(u);return Rt(h)&&(g="leading"in h?!!h.leading:g,_="trailing"in h?!!h.trailing:_),Tv(s,a,{leading:g,maxWait:a,trailing:_})}function u1(s){return _v(s,1)}function l1(s,a){return _f(tf(a),s)}function c1(){if(!arguments.length)return[];var s=arguments[0];return Le(s)?s:[s]}function h1(s){return dr(s,P)}function d1(s,a){return a=typeof a=="function"?a:t,dr(s,P,a)}function f1(s){return dr(s,y|P)}function p1(s,a){return a=typeof a=="function"?a:t,dr(s,y|P,a)}function g1(s,a){return a==null||hm(s,a,on(a))}function Ir(s,a){return s===a||s!==s&&a!==a}var m1=Tc(zd),v1=Tc(function(s,a){return s>=a}),Ys=vm(function(){return arguments}())?vm:function(s){return kt(s)&&_t.call(s,"callee")&&!rm.call(s,"callee")},Le=W.isArray,_1=Ya?dt(Ya):SI;function $n(s){return s!=null&&kc(s.length)&&!_i(s)}function Ft(s){return kt(s)&&$n(s)}function y1(s){return s===!0||s===!1||kt(s)&&Pn(s)==Wt}var ts=VT||Pf,b1=Oo?dt(Oo):CI;function w1(s){return kt(s)&&s.nodeType===1&&!fu(s)}function E1(s){if(s==null)return!0;if($n(s)&&(Le(s)||typeof s=="string"||typeof s.splice=="function"||ts(s)||Wo(s)||Ys(s)))return!s.length;var a=bn(s);if(a==Lt||a==j)return!s.size;if(hu(s))return!qd(s).length;for(var h in s)if(_t.call(s,h))return!1;return!0}function T1(s,a){return uu(s,a)}function I1(s,a,h){h=typeof h=="function"?h:t;var g=h?h(s,a):t;return g===t?uu(s,a,t,h):!!g}function yf(s){if(!kt(s))return!1;var a=Pn(s);return a==Nn||a==vr||typeof s.message=="string"&&typeof s.name=="string"&&!fu(s)}function A1(s){return typeof s=="number"&&sm(s)}function _i(s){if(!Rt(s))return!1;var a=Pn(s);return a==Ln||a==Dr||a==Qt||a==Ps}function Av(s){return typeof s=="number"&&s==Be(s)}function kc(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=ot}function Rt(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function kt(s){return s!=null&&typeof s=="object"}var Sv=Fs?dt(Fs):PI;function S1(s,a){return s===a||Wd(s,a,lf(a))}function C1(s,a,h){return h=typeof h=="function"?h:t,Wd(s,a,lf(a),h)}function R1(s){return Cv(s)&&s!=+s}function P1(s){if(dA(s))throw new Me(o);return _m(s)}function x1(s){return s===null}function O1(s){return s==null}function Cv(s){return typeof s=="number"||kt(s)&&Pn(s)==Fn}function fu(s){if(!kt(s)||Pn(s)!=Zn)return!1;var a=sc(s);if(a===null)return!0;var h=_t.call(a,"constructor")&&a.constructor;return typeof h=="function"&&h instanceof h&&tc.call(h)==CT}var bf=Ja?dt(Ja):xI;function k1(s){return Av(s)&&s>=-9007199254740991&&s<=ot}var Rv=Us?dt(Us):OI;function Vc(s){return typeof s=="string"||!Le(s)&&kt(s)&&Pn(s)==K}function Jn(s){return typeof s=="symbol"||kt(s)&&Pn(s)==le}var Wo=Gl?dt(Gl):kI;function V1(s){return s===t}function D1(s){return kt(s)&&bn(s)==se}function M1(s){return kt(s)&&Pn(s)==pe}var N1=Tc(Gd),L1=Tc(function(s,a){return s<=a});function Pv(s){if(!s)return[];if($n(s))return Vc(s)?Er(s):jn(s);if(eu&&s[eu])return gT(s[eu]());var a=bn(s),h=a==Lt?Dd:a==j?Jl:qo;return h(s)}function yi(s){if(!s)return s===0?s:0;if(s=gr(s),s===rt||s===-1/0){var a=s<0?-1:1;return a*Mt}return s===s?s:0}function Be(s){var a=yi(s),h=a%1;return a===a?h?a-h:a:0}function xv(s){return s?Gs(Be(s),0,zt):0}function gr(s){if(typeof s=="number")return s;if(Jn(s))return Nt;if(Rt(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=Rt(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=Je(s);var h=Cl.test(s);return h||La.test(s)?Wl(s.slice(2),h?2:8):Lr.test(s)?Nt:+s}function Ov(s){return jr(s,zn(s))}function F1(s){return s?Gs(Be(s),-9007199254740991,ot):s===0?s:0}function ft(s){return s==null?"":Yn(s)}var U1=$o(function(s,a){if(hu(a)||$n(a)){jr(a,on(a),s);return}for(var h in a)_t.call(a,h)&&su(s,h,a[h])}),kv=$o(function(s,a){jr(a,zn(a),s)}),Dc=$o(function(s,a,h,g){jr(a,zn(a),s,g)}),B1=$o(function(s,a,h,g){jr(a,on(a),s,g)}),j1=mi(Bd);function $1(s,a){var h=jo(s);return a==null?h:cm(h,a)}var z1=ze(function(s,a){s=Tt(s);var h=-1,g=a.length,_=g>2?a[2]:t;for(_&&xn(a[0],a[1],_)&&(g=1);++h<g;)for(var E=a[h],R=zn(E),D=-1,U=R.length;++D<U;){var Z=R[D],Y=s[Z];(Y===t||Ir(Y,Fo[Z])&&!_t.call(s,Z))&&(s[Z]=E[Z])}return s}),H1=ze(function(s){return s.push(t,Qm),vn(Vv,t,s)});function W1(s,a){return _n(s,Ae(a,3),Br)}function q1(s,a){return _n(s,Ae(a,3),$d)}function G1(s,a){return s==null?s:jd(s,Ae(a,3),zn)}function K1(s,a){return s==null?s:gm(s,Ae(a,3),zn)}function Q1(s,a){return s&&Br(s,Ae(a,3))}function Z1(s,a){return s&&$d(s,Ae(a,3))}function Y1(s){return s==null?[]:gc(s,on(s))}function J1(s){return s==null?[]:gc(s,zn(s))}function wf(s,a,h){var g=s==null?t:Ks(s,a);return g===t?h:g}function X1(s,a){return s!=null&&Jm(s,a,EI)}function Ef(s,a){return s!=null&&Jm(s,a,TI)}var eC=Hm(function(s,a,h){a!=null&&typeof a.toString!="function"&&(a=nc.call(a)),s[a]=h},If(Hn)),tC=Hm(function(s,a,h){a!=null&&typeof a.toString!="function"&&(a=nc.call(a)),_t.call(s,a)?s[a].push(h):s[a]=[h]},Ae),nC=ze(au);function on(s){return $n(s)?um(s):qd(s)}function zn(s){return $n(s)?um(s,!0):VI(s)}function rC(s,a){var h={};return a=Ae(a,3),Br(s,function(g,_,E){pi(h,a(g,_,E),g)}),h}function iC(s,a){var h={};return a=Ae(a,3),Br(s,function(g,_,E){pi(h,_,a(g,_,E))}),h}var sC=$o(function(s,a,h){mc(s,a,h)}),Vv=$o(function(s,a,h,g){mc(s,a,h,g)}),oC=mi(function(s,a){var h={};if(s==null)return h;var g=!1;a=Et(a,function(E){return E=Xi(E,s),g||(g=E.length>1),E}),jr(s,af(s),h),g&&(h=dr(h,y|T|P,eA));for(var _=a.length;_--;)Jd(h,a[_]);return h});function aC(s,a){return Dv(s,Oc(Ae(a)))}var uC=mi(function(s,a){return s==null?{}:MI(s,a)});function Dv(s,a){if(s==null)return{};var h=Et(af(s),function(g){return[g]});return a=Ae(a),Am(s,h,function(g,_){return a(g,_[0])})}function lC(s,a,h){a=Xi(a,s);var g=-1,_=a.length;for(_||(_=1,s=t);++g<_;){var E=s==null?t:s[$r(a[g])];E===t&&(g=_,E=h),s=_i(E)?E.call(s):E}return s}function cC(s,a,h){return s==null?s:lu(s,a,h)}function hC(s,a,h,g){return g=typeof g=="function"?g:t,s==null?s:lu(s,a,h,g)}var Mv=Gm(on),Nv=Gm(zn);function dC(s,a,h){var g=Le(s),_=g||ts(s)||Wo(s);if(a=Ae(a,4),h==null){var E=s&&s.constructor;_?h=g?new E:[]:Rt(s)?h=_i(E)?jo(sc(s)):{}:h={}}return(_?Rn:Br)(s,function(R,D,U){return a(h,R,D,U)}),h}function fC(s,a){return s==null?!0:Jd(s,a)}function pC(s,a,h){return s==null?s:xm(s,a,tf(h))}function gC(s,a,h,g){return g=typeof g=="function"?g:t,s==null?s:xm(s,a,tf(h),g)}function qo(s){return s==null?[]:qt(s,on(s))}function mC(s){return s==null?[]:qt(s,zn(s))}function vC(s,a,h){return h===t&&(h=a,a=t),h!==t&&(h=gr(h),h=h===h?h:0),a!==t&&(a=gr(a),a=a===a?a:0),Gs(gr(s),a,h)}function _C(s,a,h){return a=yi(a),h===t?(h=a,a=0):h=yi(h),s=gr(s),II(s,a,h)}function yC(s,a,h){if(h&&typeof h!="boolean"&&xn(s,a,h)&&(a=h=t),h===t&&(typeof a=="boolean"?(h=a,a=t):typeof s=="boolean"&&(h=s,s=t)),s===t&&a===t?(s=0,a=1):(s=yi(s),a===t?(a=s,s=0):a=yi(a)),s>a){var g=s;s=a,a=g}if(h||s%1||a%1){var _=om();return yn(s+_*(a-s+Vd("1e-"+((_+"").length-1))),a)}return Qd(s,a)}var bC=zo(function(s,a,h){return a=a.toLowerCase(),s+(h?Lv(a):a)});function Lv(s){return Tf(ft(s).toLowerCase())}function Fv(s){return s=ft(s),s&&s.replace(Pl,cT).replace(Pd,"")}function wC(s,a,h){s=ft(s),a=Yn(a);var g=s.length;h=h===t?g:Gs(Be(h),0,g);var _=h;return h-=a.length,h>=0&&s.slice(h,_)==a}function EC(s){return s=ft(s),s&&oi.test(s)?s.replace(Eo,hT):s}function TC(s){return s=ft(s),s&&ks.test(s)?s.replace(Io,"\\$&"):s}var IC=zo(function(s,a,h){return s+(h?"-":"")+a.toLowerCase()}),AC=zo(function(s,a,h){return s+(h?" ":"")+a.toLowerCase()}),SC=jm("toLowerCase");function CC(s,a,h){s=ft(s),a=Be(a);var g=a?No(s):0;if(!a||g>=a)return s;var _=(a-g)/2;return Ec(lc(_),h)+s+Ec(uc(_),h)}function RC(s,a,h){s=ft(s),a=Be(a);var g=a?No(s):0;return a&&g<a?s+Ec(a-g,h):s}function PC(s,a,h){s=ft(s),a=Be(a);var g=a?No(s):0;return a&&g<a?Ec(a-g,h)+s:s}function xC(s,a,h){return h||a==null?a=0:a&&(a=+a),LT(ft(s).replace(ai,""),a||0)}function OC(s,a,h){return(h?xn(s,a,h):a===t)?a=1:a=Be(a),Zd(ft(s),a)}function kC(){var s=arguments,a=ft(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var VC=zo(function(s,a,h){return s+(h?"_":"")+a.toLowerCase()});function DC(s,a,h){return h&&typeof h!="number"&&xn(s,a,h)&&(a=h=t),h=h===t?zt:h>>>0,h?(s=ft(s),s&&(typeof a=="string"||a!=null&&!bf(a))&&(a=Yn(a),!a&&Mo(s))?es(Er(s),0,h):s.split(a,h)):[]}var MC=zo(function(s,a,h){return s+(h?" ":"")+Tf(a)});function NC(s,a,h){return s=ft(s),h=h==null?0:Gs(Be(h),0,s.length),a=Yn(a),s.slice(h,h+a.length)==a}function LC(s,a,h){var g=b.templateSettings;h&&xn(s,a,h)&&(a=t),s=ft(s),a=Dc({},a,g,Km);var _=Dc({},a.imports,g.imports,Km),E=on(_),R=qt(_,E),D,U,Z=0,Y=a.interpolate||Ds,ee="__p += '",de=Md((a.escape||Ds).source+"|"+Y.source+"|"+(Y===Ma?Na:Ds).source+"|"+(a.evaluate||Ds).source+"|$","g"),_e="//# sourceURL="+(_t.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zl+"]")+`
`;s.replace(de,function(Ce,Ge,Xe,Xn,On,er){return Xe||(Xe=Xn),ee+=s.slice(Z,er).replace(Id,dT),Ge&&(D=!0,ee+=`' +
__e(`+Ge+`) +
'`),On&&(U=!0,ee+=`';
`+On+`;
__p += '`),Xe&&(ee+=`' +
((__t = (`+Xe+`)) == null ? '' : __t) +
'`),Z=er+Ce.length,Ce}),ee+=`';
`;var Se=_t.call(a,"variable")&&a.variable;if(!Se)ee=`with (obj) {
`+ee+`
}
`;else if(Ao.test(Se))throw new Me(c);ee=(U?ee.replace(Bi,""):ee).replace(El,"$1").replace(Tl,"$1;"),ee="function("+(Se||"obj")+`) {
`+(Se?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(D?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ee+`return __p
}`;var je=Bv(function(){return lt(E,_e+"return "+ee).apply(t,R)});if(je.source=ee,yf(je))throw je;return je}function FC(s){return ft(s).toLowerCase()}function UC(s){return ft(s).toUpperCase()}function BC(s,a,h){if(s=ft(s),s&&(h||a===t))return Je(s);if(!s||!(a=Yn(a)))return s;var g=Er(s),_=Er(a),E=Bn(g,_),R=zs(g,_)+1;return es(g,E,R).join("")}function jC(s,a,h){if(s=ft(s),s&&(h||a===t))return s.slice(0,Xg(s)+1);if(!s||!(a=Yn(a)))return s;var g=Er(s),_=zs(g,Er(a))+1;return es(g,0,_).join("")}function $C(s,a,h){if(s=ft(s),s&&(h||a===t))return s.replace(ai,"");if(!s||!(a=Yn(a)))return s;var g=Er(s),_=Bn(g,Er(a));return es(g,_).join("")}function zC(s,a){var h=x,g=M;if(Rt(a)){var _="separator"in a?a.separator:_;h="length"in a?Be(a.length):h,g="omission"in a?Yn(a.omission):g}s=ft(s);var E=s.length;if(Mo(s)){var R=Er(s);E=R.length}if(h>=E)return s;var D=h-No(g);if(D<1)return g;var U=R?es(R,0,D).join(""):s.slice(0,D);if(_===t)return U+g;if(R&&(D+=U.length-D),bf(_)){if(s.slice(D).search(_)){var Z,Y=U;for(_.global||(_=Md(_.source,ft(Vs.exec(_))+"g")),_.lastIndex=0;Z=_.exec(Y);)var ee=Z.index;U=U.slice(0,ee===t?D:ee)}}else if(s.indexOf(Yn(_),D)!=D){var de=U.lastIndexOf(_);de>-1&&(U=U.slice(0,de))}return U+g}function HC(s){return s=ft(s),s&&Da.test(s)?s.replace(ji,yT):s}var WC=zo(function(s,a,h){return s+(h?" ":"")+a.toUpperCase()}),Tf=jm("toUpperCase");function Uv(s,a,h){return s=ft(s),a=h?t:a,a===t?pT(s)?ET(s):Do(s):s.match(a)||[]}var Bv=ze(function(s,a){try{return vn(s,t,a)}catch(h){return yf(h)?h:new Me(h)}}),qC=mi(function(s,a){return Rn(a,function(h){h=$r(h),pi(s,h,vf(s[h],s))}),s});function GC(s){var a=s==null?0:s.length,h=Ae();return s=a?Et(s,function(g){if(typeof g[1]!="function")throw new cr(u);return[h(g[0]),g[1]]}):[],ze(function(g){for(var _=-1;++_<a;){var E=s[_];if(vn(E[0],this,g))return vn(E[1],this,g)}})}function KC(s){return yI(dr(s,y))}function If(s){return function(){return s}}function QC(s,a){return s==null||s!==s?a:s}var ZC=zm(),YC=zm(!0);function Hn(s){return s}function Af(s){return ym(typeof s=="function"?s:dr(s,y))}function JC(s){return wm(dr(s,y))}function XC(s,a){return Em(s,dr(a,y))}var eR=ze(function(s,a){return function(h){return au(h,s,a)}}),tR=ze(function(s,a){return function(h){return au(s,h,a)}});function Sf(s,a,h){var g=on(a),_=gc(a,g);h==null&&!(Rt(a)&&(_.length||!g.length))&&(h=a,a=s,s=this,_=gc(a,on(a)));var E=!(Rt(h)&&"chain"in h)||!!h.chain,R=_i(s);return Rn(_,function(D){var U=a[D];s[D]=U,R&&(s.prototype[D]=function(){var Z=this.__chain__;if(E||Z){var Y=s(this.__wrapped__),ee=Y.__actions__=jn(this.__actions__);return ee.push({func:U,args:arguments,thisArg:s}),Y.__chain__=Z,Y}return U.apply(s,br([this.value()],arguments))})}),s}function nR(){return Ot._===this&&(Ot._=RT),this}function Cf(){}function rR(s){return s=Be(s),ze(function(a){return Tm(a,s)})}var iR=rf(Et),sR=rf(ko),oR=rf(Vo);function jv(s){return hf(s)?v($r(s)):NI(s)}function aR(s){return function(a){return s==null?t:Ks(s,a)}}var uR=Wm(),lR=Wm(!0);function Rf(){return[]}function Pf(){return!1}function cR(){return{}}function hR(){return""}function dR(){return!0}function fR(s,a){if(s=Be(s),s<1||s>ot)return[];var h=zt,g=yn(s,zt);a=Ae(a),s-=zt;for(var _=ut(g,a);++h<s;)a(h);return _}function pR(s){return Le(s)?Et(s,$r):Jn(s)?[s]:jn(av(ft(s)))}function gR(s){var a=++ST;return ft(s)+a}var mR=wc(function(s,a){return s+a},0),vR=sf("ceil"),_R=wc(function(s,a){return s/a},1),yR=sf("floor");function bR(s){return s&&s.length?pc(s,Hn,zd):t}function wR(s,a){return s&&s.length?pc(s,Ae(a,2),zd):t}function ER(s){return p(s,Hn)}function TR(s,a){return p(s,Ae(a,2))}function IR(s){return s&&s.length?pc(s,Hn,Gd):t}function AR(s,a){return s&&s.length?pc(s,Ae(a,2),Gd):t}var SR=wc(function(s,a){return s*a},1),CR=sf("round"),RR=wc(function(s,a){return s-a},0);function PR(s){return s&&s.length?ae(s,Hn):0}function xR(s,a){return s&&s.length?ae(s,Ae(a,2)):0}return b.after=JS,b.ary=_v,b.assign=U1,b.assignIn=kv,b.assignInWith=Dc,b.assignWith=B1,b.at=j1,b.before=yv,b.bind=vf,b.bindAll=qC,b.bindKey=bv,b.castArray=c1,b.chain=gv,b.chunk=yA,b.compact=bA,b.concat=wA,b.cond=GC,b.conforms=KC,b.constant=If,b.countBy=PS,b.create=$1,b.curry=wv,b.curryRight=Ev,b.debounce=Tv,b.defaults=z1,b.defaultsDeep=H1,b.defer=XS,b.delay=e1,b.difference=EA,b.differenceBy=TA,b.differenceWith=IA,b.drop=AA,b.dropRight=SA,b.dropRightWhile=CA,b.dropWhile=RA,b.fill=PA,b.filter=OS,b.flatMap=DS,b.flatMapDeep=MS,b.flatMapDepth=NS,b.flatten=hv,b.flattenDeep=xA,b.flattenDepth=OA,b.flip=t1,b.flow=ZC,b.flowRight=YC,b.fromPairs=kA,b.functions=Y1,b.functionsIn=J1,b.groupBy=LS,b.initial=DA,b.intersection=MA,b.intersectionBy=NA,b.intersectionWith=LA,b.invert=eC,b.invertBy=tC,b.invokeMap=US,b.iteratee=Af,b.keyBy=BS,b.keys=on,b.keysIn=zn,b.map=Rc,b.mapKeys=rC,b.mapValues=iC,b.matches=JC,b.matchesProperty=XC,b.memoize=xc,b.merge=sC,b.mergeWith=Vv,b.method=eR,b.methodOf=tR,b.mixin=Sf,b.negate=Oc,b.nthArg=rR,b.omit=oC,b.omitBy=aC,b.once=n1,b.orderBy=jS,b.over=iR,b.overArgs=r1,b.overEvery=sR,b.overSome=oR,b.partial=_f,b.partialRight=Iv,b.partition=$S,b.pick=uC,b.pickBy=Dv,b.property=jv,b.propertyOf=aR,b.pull=jA,b.pullAll=fv,b.pullAllBy=$A,b.pullAllWith=zA,b.pullAt=HA,b.range=uR,b.rangeRight=lR,b.rearg=i1,b.reject=WS,b.remove=WA,b.rest=s1,b.reverse=gf,b.sampleSize=GS,b.set=cC,b.setWith=hC,b.shuffle=KS,b.slice=qA,b.sortBy=YS,b.sortedUniq=XA,b.sortedUniqBy=eS,b.split=DC,b.spread=o1,b.tail=tS,b.take=nS,b.takeRight=rS,b.takeRightWhile=iS,b.takeWhile=sS,b.tap=bS,b.throttle=a1,b.thru=Cc,b.toArray=Pv,b.toPairs=Mv,b.toPairsIn=Nv,b.toPath=pR,b.toPlainObject=Ov,b.transform=dC,b.unary=u1,b.union=oS,b.unionBy=aS,b.unionWith=uS,b.uniq=lS,b.uniqBy=cS,b.uniqWith=hS,b.unset=fC,b.unzip=mf,b.unzipWith=pv,b.update=pC,b.updateWith=gC,b.values=qo,b.valuesIn=mC,b.without=dS,b.words=Uv,b.wrap=l1,b.xor=fS,b.xorBy=pS,b.xorWith=gS,b.zip=mS,b.zipObject=vS,b.zipObjectDeep=_S,b.zipWith=yS,b.entries=Mv,b.entriesIn=Nv,b.extend=kv,b.extendWith=Dc,Sf(b,b),b.add=mR,b.attempt=Bv,b.camelCase=bC,b.capitalize=Lv,b.ceil=vR,b.clamp=vC,b.clone=h1,b.cloneDeep=f1,b.cloneDeepWith=p1,b.cloneWith=d1,b.conformsTo=g1,b.deburr=Fv,b.defaultTo=QC,b.divide=_R,b.endsWith=wC,b.eq=Ir,b.escape=EC,b.escapeRegExp=TC,b.every=xS,b.find=kS,b.findIndex=lv,b.findKey=W1,b.findLast=VS,b.findLastIndex=cv,b.findLastKey=q1,b.floor=yR,b.forEach=mv,b.forEachRight=vv,b.forIn=G1,b.forInRight=K1,b.forOwn=Q1,b.forOwnRight=Z1,b.get=wf,b.gt=m1,b.gte=v1,b.has=X1,b.hasIn=Ef,b.head=dv,b.identity=Hn,b.includes=FS,b.indexOf=VA,b.inRange=_C,b.invoke=nC,b.isArguments=Ys,b.isArray=Le,b.isArrayBuffer=_1,b.isArrayLike=$n,b.isArrayLikeObject=Ft,b.isBoolean=y1,b.isBuffer=ts,b.isDate=b1,b.isElement=w1,b.isEmpty=E1,b.isEqual=T1,b.isEqualWith=I1,b.isError=yf,b.isFinite=A1,b.isFunction=_i,b.isInteger=Av,b.isLength=kc,b.isMap=Sv,b.isMatch=S1,b.isMatchWith=C1,b.isNaN=R1,b.isNative=P1,b.isNil=O1,b.isNull=x1,b.isNumber=Cv,b.isObject=Rt,b.isObjectLike=kt,b.isPlainObject=fu,b.isRegExp=bf,b.isSafeInteger=k1,b.isSet=Rv,b.isString=Vc,b.isSymbol=Jn,b.isTypedArray=Wo,b.isUndefined=V1,b.isWeakMap=D1,b.isWeakSet=M1,b.join=FA,b.kebabCase=IC,b.last=pr,b.lastIndexOf=UA,b.lowerCase=AC,b.lowerFirst=SC,b.lt=N1,b.lte=L1,b.max=bR,b.maxBy=wR,b.mean=ER,b.meanBy=TR,b.min=IR,b.minBy=AR,b.stubArray=Rf,b.stubFalse=Pf,b.stubObject=cR,b.stubString=hR,b.stubTrue=dR,b.multiply=SR,b.nth=BA,b.noConflict=nR,b.noop=Cf,b.now=Pc,b.pad=CC,b.padEnd=RC,b.padStart=PC,b.parseInt=xC,b.random=yC,b.reduce=zS,b.reduceRight=HS,b.repeat=OC,b.replace=kC,b.result=lC,b.round=CR,b.runInContext=F,b.sample=qS,b.size=QS,b.snakeCase=VC,b.some=ZS,b.sortedIndex=GA,b.sortedIndexBy=KA,b.sortedIndexOf=QA,b.sortedLastIndex=ZA,b.sortedLastIndexBy=YA,b.sortedLastIndexOf=JA,b.startCase=MC,b.startsWith=NC,b.subtract=RR,b.sum=PR,b.sumBy=xR,b.template=LC,b.times=fR,b.toFinite=yi,b.toInteger=Be,b.toLength=xv,b.toLower=FC,b.toNumber=gr,b.toSafeInteger=F1,b.toString=ft,b.toUpper=UC,b.trim=BC,b.trimEnd=jC,b.trimStart=$C,b.truncate=zC,b.unescape=HC,b.uniqueId=gR,b.upperCase=WC,b.upperFirst=Tf,b.each=mv,b.eachRight=vv,b.first=dv,Sf(b,function(){var s={};return Br(b,function(a,h){_t.call(b.prototype,h)||(s[h]=a)}),s}(),{chain:!1}),b.VERSION=r,Rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){b[s].placeholder=b}),Rn(["drop","take"],function(s,a){Ke.prototype[s]=function(h){h=h===t?1:Xt(Be(h),0);var g=this.__filtered__&&!a?new Ke(this):this.clone();return g.__filtered__?g.__takeCount__=yn(h,g.__takeCount__):g.__views__.push({size:yn(h,zt),type:s+(g.__dir__<0?"Right":"")}),g},Ke.prototype[s+"Right"]=function(h){return this.reverse()[s](h).reverse()}}),Rn(["filter","map","takeWhile"],function(s,a){var h=a+1,g=h==De||h==We;Ke.prototype[s]=function(_){var E=this.clone();return E.__iteratees__.push({iteratee:Ae(_,3),type:h}),E.__filtered__=E.__filtered__||g,E}}),Rn(["head","last"],function(s,a){var h="take"+(a?"Right":"");Ke.prototype[s]=function(){return this[h](1).value()[0]}}),Rn(["initial","tail"],function(s,a){var h="drop"+(a?"":"Right");Ke.prototype[s]=function(){return this.__filtered__?new Ke(this):this[h](1)}}),Ke.prototype.compact=function(){return this.filter(Hn)},Ke.prototype.find=function(s){return this.filter(s).head()},Ke.prototype.findLast=function(s){return this.reverse().find(s)},Ke.prototype.invokeMap=ze(function(s,a){return typeof s=="function"?new Ke(this):this.map(function(h){return au(h,s,a)})}),Ke.prototype.reject=function(s){return this.filter(Oc(Ae(s)))},Ke.prototype.slice=function(s,a){s=Be(s);var h=this;return h.__filtered__&&(s>0||a<0)?new Ke(h):(s<0?h=h.takeRight(-s):s&&(h=h.drop(s)),a!==t&&(a=Be(a),h=a<0?h.dropRight(-a):h.take(a-s)),h)},Ke.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ke.prototype.toArray=function(){return this.take(zt)},Br(Ke.prototype,function(s,a){var h=/^(?:filter|find|map|reject)|While$/.test(a),g=/^(?:head|last)$/.test(a),_=b[g?"take"+(a=="last"?"Right":""):a],E=g||/^find/.test(a);_&&(b.prototype[a]=function(){var R=this.__wrapped__,D=g?[1]:arguments,U=R instanceof Ke,Z=D[0],Y=U||Le(R),ee=function(Ge){var Xe=_.apply(b,br([Ge],D));return g&&de?Xe[0]:Xe};Y&&h&&typeof Z=="function"&&Z.length!=1&&(U=Y=!1);var de=this.__chain__,_e=!!this.__actions__.length,Se=E&&!de,je=U&&!_e;if(!E&&Y){R=je?R:new Ke(this);var Ce=s.apply(R,D);return Ce.__actions__.push({func:Cc,args:[ee],thisArg:t}),new hr(Ce,de)}return Se&&je?s.apply(this,D):(Ce=this.thru(ee),Se?g?Ce.value()[0]:Ce.value():Ce)})}),Rn(["pop","push","shift","sort","splice","unshift"],function(s){var a=Xl[s],h=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",g=/^(?:pop|shift)$/.test(s);b.prototype[s]=function(){var _=arguments;if(g&&!this.__chain__){var E=this.value();return a.apply(Le(E)?E:[],_)}return this[h](function(R){return a.apply(Le(R)?R:[],_)})}}),Br(Ke.prototype,function(s,a){var h=b[a];if(h){var g=h.name+"";_t.call(Bo,g)||(Bo[g]=[]),Bo[g].push({name:a,func:h})}}),Bo[bc(t,z).name]=[{name:"wrapper",func:t}],Ke.prototype.clone=HT,Ke.prototype.reverse=WT,Ke.prototype.value=qT,b.prototype.at=wS,b.prototype.chain=ES,b.prototype.commit=TS,b.prototype.next=IS,b.prototype.plant=SS,b.prototype.reverse=CS,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=RS,b.prototype.first=b.prototype.head,eu&&(b.prototype[eu]=AS),b},Lo=TT();ln?((ln.exports=Lo)._=Lo,xo._=Lo):Ot._=Lo}).call(B9)}(Ru,Ru.exports)),Ru.exports}var lT=j9();const $9=Ko.object({class:Ko.string().min(1,"Class is required"),key:Ko.string().min(1,"Key is required"),ilvl:Ko.number().min(1,"iLvl is required"),role:Ko.array(Ko.enum(["tank","healer","dps"])).nonempty("Role is required")}),m0=[{label:"Tank",value:"tank"},{label:"DPS",value:"dps"},{label:"Healer",value:"healer"}],v0=s4.map(n=>({label:lT.capitalize(n),value:n})).sort((n,e)=>n.label.localeCompare(e.label));function z9({characterId:n}){const{data:e}=F9(n),{mutate:t,isPending:r}=U9();console.log(e);const i=V9({resolver:L9($9),defaultValues:{class:e==null?void 0:e.class,key:e==null?void 0:e.key,ilvl:e==null?void 0:e.ilvl,role:e==null?void 0:e.role}});X.useEffect(()=>{e&&i.reset({class:e.class,key:e.key,ilvl:e.ilvl,role:e.role})},[e,i]);const o=u=>{e&&t({id:n,playerId:e==null?void 0:e.playerId,class:u.class,key:u.key,ilvl:u.ilvl,role:u.role})};return console.log("form",i.getValues()),console.log("state",i.formState.errors),ce.jsxs("form",{onSubmit:i.handleSubmit(o),children:[ce.jsx(t0,{control:i.control,name:"class",render:({field:u})=>ce.jsx(Yy,{...u,label:"Class",options:v0,placeholder:"Select a class",onChange:c=>{u.onChange(c==null?void 0:c.value)},value:v0.find(c=>c.value==u.value)})}),ce.jsx(t0,{control:i.control,name:"role",render:({field:u})=>{const c=m0.filter(d=>{var f;return(f=u.value)==null?void 0:f.includes(d.value)});return ce.jsx(Yy,{...u,label:"Roles",options:m0,isMulti:!0,value:c,onChange:d=>{const f=(d??[]).map(m=>m.value);u.onChange(f)}})}}),ce.jsx(IM,{type:"submit",loading:r,children:"Save"})]})}function H9({...n}){return ce.jsx(BR,{"data-slot":"dialog",...n})}function W9({...n}){return ce.jsx(jR,{"data-slot":"dialog-trigger",...n})}function q9({...n}){return ce.jsx(GR,{"data-slot":"dialog-portal",...n})}function G9({className:n,...e}){return ce.jsx(KR,{"data-slot":"dialog-overlay",className:Qn("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function K9({className:n,children:e,...t}){return ce.jsxs(q9,{"data-slot":"dialog-portal",children:[ce.jsx(G9,{}),ce.jsxs($R,{"data-slot":"dialog-content",className:Qn("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...t,children:[e,ce.jsxs(zR,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[ce.jsx(HR,{}),ce.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Q9({className:n,...e}){return ce.jsx("div",{"data-slot":"dialog-header",className:Qn("flex flex-col gap-2 text-center sm:text-left",n),...e})}function Z9({className:n,...e}){return ce.jsx(WR,{"data-slot":"dialog-title",className:Qn("text-lg leading-none font-semibold",n),...e})}function Y9({className:n,...e}){return ce.jsx(qR,{"data-slot":"dialog-description",className:Qn("text-muted-foreground text-sm",n),...e})}function J9({title:n,description:e,trigger:t,open:r,onOpenChange:i,children:o}){const[u,c]=X.useState(r),d=f=>{c(f),i&&i(f)};return ce.jsxs(H9,{open:u,onOpenChange:d,children:[ce.jsx(W9,{children:t}),ce.jsxs(K9,{children:[ce.jsxs(Q9,{children:[ce.jsx(Z9,{children:n}),e&&ce.jsx(Y9,{children:e})]}),u&&o]})]})}function X9({characterId:n}){return ce.jsx(J9,{title:"Edit Characters",trigger:ce.jsx(nP,{className:"cursor-pointer",size:16}),children:ce.jsx(z9,{characterId:n})})}function eU({className:n,...e}){return ce.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:ce.jsx("table",{"data-slot":"table",className:Qn("w-full caption-bottom text-sm",n),...e})})}function tU({className:n,...e}){return ce.jsx("thead",{"data-slot":"table-header",className:Qn("[&_tr]:border-b",n),...e})}function nU({className:n,...e}){return ce.jsx("tbody",{"data-slot":"table-body",className:Qn("[&_tr:last-child]:border-0",n),...e})}function _0({className:n,...e}){return ce.jsx("tr",{"data-slot":"table-row",className:Qn("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n),...e})}function _u({className:n,...e}){return ce.jsx("th",{"data-slot":"table-head",className:Qn("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e})}function yu({className:n,...e}){return ce.jsx("td",{"data-slot":"table-cell",className:Qn("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e})}const rU="data:image/png;base64,UklGRiwEAABXRUJQVlA4TCAEAAAvE8AEEPVA0rbt2PJl/bbt9/uybdu2bdtNW4lt28Zm/v+vPbyzVtIyWkaNOtpA0xYA6ba2Y8tz47mf5zOqX92wYauhbdu27T7bemFJkm3aWkdv/hN4X7Zt29bhtbEP9l5rw21s23HCDrEaI9zkSG4IFfPrILRDteH1CAiKTPAC6jPROklZ906sIhjsFoZmygJ7CgKn2ZMdNDE9oiDBNyEKThKA7KfMGE6Cj9T4WZ+f61uo60uc+1mp/ZGsMz4EI0Ob/PkKouChQqv6gV5dpUphfBxooLQYUhkRaxwX6zxclxqDY4pMLInMastU//XkCNUDOaUuISsGXwCMmCH8lOQvSPJOWBENn7dZ1jV3+2DINyeHJIXWFULIBuhcUO0qXWJZl5hRTfmC7C4576Oc337O9yDnfFbQPCD+j2RRdnmaZw2BBSlo7VTRHUQUJBuwBxepIDa5H/AgeO3moleZqc8jB/EN+4k91Qc1vhsFp7OC5IOYVzw+7gsF9osbwvBBdqziSBkhV5DTQPWMvPZyieNMSW/PdmTRS2nKY33N8FIsdYAJWcnY3HDsiIJvoBj/oXBUSKKKSDnhJBXUBsP/URzOuYj5XHH3QEdn1/bfttvKpovWufHhsqqunsSxlMd+Qf6GCDkLZj/FSJOCTSgUNBtTQslLiicUejww835p/enC1sODs/Kpi+alE3yzmQwtfVVMZxoqrrvArcCMGlysiTa/nMhqSqUmIAFqRlI9oOjjrpv8ssfaqqvGobPmrWP8tIf/9mxkLxDbaX/X8lpieyEIvhV6q8/V+MQEkwrUBExAK/qk47q47QHOXdODI/iyrwO7rti227cReLLWsa7265vNJRF8S5RWxk5iVDKTGFSzc/2jFIjsFflcMLWRWMN/U9dPzSoEdtyRTZ9vLBMrjYUK8y/Cn6qwa8SIaQyny00qOAyNo6xwcf1iNAf439Kv70YhvW+ovqtjthxaDXyaDZ7pnw4V9DBR0wXnY0H2jshpg491dszQ2QTesYsNt2H2Cyljkb8i98NC9GyqcLBnAj6sduyYax/Vsv0ufiznu51D7zlORMKVjHclSVaGyoeSzBDiuUdvDTBihvpJcDzjQjYyJWVfJd4q0VtiLkKeOxx6Lwh+CK5gYWGbPbdxCQZEIEGisjs/zPdQ7xl8E9ESQPaG0DsB3CLsGmHXEnqLZO+I90dIGUByMmqpUKDecFq9IITs1kgN5bYo3yGB04LPW/5En0T0Rb64fxI1qeGKBlN1APFxiZC1rK8eMRyvOtNgjXE9c3Y/4UEDtcIRi9I3pVZgQpdCIkDX0EiveJE/xAuP1y9xjpsBWKOjbvOwvxzsN2ASailDpUzDTVLkOAR/vNATvg1hSATRPZt08Fg0gVYTE2BiADQKm7AyKiMK7hBCCAE=",iU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAD/AP8A/6C9p5MAAAAHdElNRQfpAhAQKAZ/Xkz6AAAFKklEQVQ4yyXMzW8UZRwH8O/veWa7szu7s9vtdrdbaKEvFIFqjMEEovguxkSDVkQU1IPx4IFED14wnrx4MfHlqBdfY0w1McboQSUYEQJWpAVaKAJ9Y7vb7b50ZnZm5+X5efDzB3yovzeNoOMCJLBl7Hbxz7kpFZMwt2wdPpjN5SbMTPcuTdNK+d4+rFbWyrVq9dLK4vx3lXpjEsDGo/v3i79P/arCKEI6bYK6TQN+EOLwU0/QJ19N8m3Dg4c3DY68YxjaqN9eUDEZkIoCMlJxGAlwsTjAK7WMWFmxrl2fv/D2zZlLXz//4lH6+eRJ1mMSZMaB0xXGriyJHWPb3u/r7z8G/wavVRa51gS3XVDog6QA0mnwjhHwIw+WqGLdSbdWDVpauPHR6amp15lZxYkgjx9/i1KUwdkzJz4oFLPHGpXz4eUr67RchbBdIgRCxBVRQkmK2oIWViSd+NMSXfIaH3gsFrl8x1727dyzDz380749Y0RbBobguvYLo6NDX7abM9HFeVeEEVGcmHUi0knAIEJCEBJSgsIAdhjxImu0717m++/ZpM5f2yNPnfjhCFPXV7K10UxvG93+hdFVzU/PriMISBgCnCBBBkl0C4GclMhLiaTXgd7bh8HdeylZL/Pp+YCkbGJ0KEtWsGnX5fmrn8mMmTtSKnS9slq+EVXrECki6CTIFAI5KdArJQqahmTHw/CTT2PsyKsQkUL57Cnq0jSeLUc02NdQiI0UmtXyvMjlchOasLFWZ+gQ0IWglCDkpURBSmzWNPQEPnYefQmPv/Em7to5hs70WSBSEJLI9yRm5mwk4xbyfQMTWkyT437HRccFJYnIIEJBCPSzQlHGYEQB6vc8gPbOPfhjaga1n75FdeocZCKBKAwgAVqrg8ZgIdOdH9eIuNQJXJACJSQhJwRMIeH39iPRWsPijt1Yzo/g8pm/UJr/G91zF6DiOuwwQJsBBYbjgsrlVayu2iVNSgVJQIyAJBEyQiDJwHKXgfSDu3F+1UXScrDj1ixK/15CTU+iGfhwmOEqhRAMpQCvE8LeaELzPa+czcW26prLOohiRBiIaTDXb2L/I6+guLKBhU8/xk6rhqVYHBXfR1MpWEohYEYIQNPASSNNiaQqC6etLnZ1aTBSYChiyQo3HQdqaxGXf/8et86dQmZoGMtCQy0I/s+Y4SqGD4YC2EiCnXYMHc+9KMMAejabOpA1bG5WmPJmBvsPHaKabKFychpibh7TkQZSHtY9Dw0AG4rhguEzGABGtujseKZora++KzzfmnTc1FzfYK+UZsTNdkCNtQa7V+ogy0MipWOweh11y8I6gFak0GGFiJgVQP294HiyKB3bm2u40aRMG3m/3mg0CsWRZ7aPNtTVazZdmpsjsm12NEnVMEKTBFrM2FAKLiv4YPaZyDTAA/0mW64pmmsrr8U18Y989eWXaO++N2d++W2yJ1cY3jN+RyNqWBGWGkJsRMwuM20oBUcxbMXcARAAVOxGNDSQjKqNlGa36h/1jN/3XiKVIAKAK+ea2H53VmSzpffHt/ccG93c5qWlBV5cjLjVIvJ8pgiAjIGTBriQ00iLZ2i5rCjsuB8WbO+NxuZhDmvXmVK6RBgxBjaPkzTe5RtXnzs8MjL0TnfaGTXilnIcjxyPCczQpORQaXA8nZw2TwfO+nFpZH4UKqTAsVhKAUolYgj8AEIAPcVBsby8qACYhm4czGazE1KGu4SQpU4nRBSpcscPZqPA+9z2Ot8AiDKmQXEOGQCYCP8Bo7ejSxgkXicAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjUtMDItMTZUMTY6NDA6MDYrMDA6MDAJdU13AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDI1LTAyLTE2VDE2OjQwOjA2KzAwOjAweCj1ywAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyNS0wMi0xNlQxNjo0MDowNiswMDowMC891BQAAAAgdEVYdHNvZnR3YXJlAGh0dHBzOi8vaW1hZ2VtYWdpY2sub3JnvM8dnQAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7LwAAABd0RVh0VGh1bWI6OkltYWdlOjpIZWlnaHQANDJntW4zAAAAFnRFWHRUaHVtYjo6SW1hZ2U6OldpZHRoADQynxquvgAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNzM5NzI0MDA2D6d4qgAAABF0RVh0VGh1bWI6OlNpemUAMzQ1MUJ0tvtdAAAANXRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vdG1wL3RodW1ibHIvaW1nMTY0NjQ1ODMxODUyMzAzNjQ5MZKqa58AAAAASUVORK5CYII=",sU="data:image/png;base64,UklGRhgEAABXRUJQVlA4TAsEAAAvE8AEEPVIDgCAjKSsN3ayY9tY27Zt237Z9m/fW4Rxeqmime3Bv2vjWrjfNXJt3BXgQLLdtJG+ZDtc7v1vR2HmBJJt26adc5++bdu23cxU3YmkaNvJj22/9+51G9t2nLBDrMYINzmSG0LF/DoI7VBteD1CAoKqefHkUaAkhTLTxyoVOQqtWMSpDdRUIHRLZya0hvQBHp+eHgkQnBxAOZ3RmCkfou1QlH8kyt8WH27Ij+Z1hAuazKNCkFHncP7jBUDwcADVBPyvTndBZq9QxEMWJXgygCYD4kDM9lT7dUpzsKle/9cUMPW/BwujGq1fVOYCvMtAgxfWRFFFGlVkUUUGUSVBQ4jfbmeyQ/PXEa34FiZ0fXp6UjLqovG7a+wFcLYgywRxlmLMU+LasIrJIbf3cJVJijSLKmMC1iCbuTRyHVUtZJca3D0BBMnFMITac/AqJ64CWg+ZM0YuIPrAtC+HwteT9YOwGwKnh1zKYOd7+Lj8LU3BukShh18cUcUlXyTyAu6DjI3fhP2wt8ZsbVXLW9vs1jY01Iz1dQd9yvkpVbma4XVU8K6Wk0zLBY93YlETHaH2Gr5ziCpGXwWVs1z3OnAcmZz5amuG1c+UOpJInp1qF4uM2YrJssDRy+CdyHdXjEqHjlCz2UvIpEUVEcospR4KXVww95BZjVWWWaqVaNlChK06RZtGVOfBpjlo6yOQd5neiVBhmp7JZLAXwMmEzsME35KWU6JHMkafcpMPhalEpg5IIoBxV0shGVMTxP1zsMaDJCzUnRILmnSMJ5MbgkYjOg9h05qSVWVMvVqfBr1vpe6XSkUoFcGIZlWIOjmyfwGbpqCtG3ECtxtiBU1yCM3tHYBWFaLy+G0pQ2aEVupbVN1Y1XeV4qeB2eiZdynroiX4VPyDBgeGf0WaWwJBjWcqQr0TDP7AvRuTRfG/mqKDUScyicrL8TnJsYHOaEQASLMk7p+D1x6Bi4XE3rPJF9oIAQIXq3li93cELlZE5cX986RlXLH5FascJzN0p1q4EMbBjP9V0XkE0jkEHioWd0ILDPKEAhAkJfCQHmwKwRdwdKGKoJ/K3ibJfjKCFqdE6KLC/4rYNAGv3d4F+sqpz0KUDEAACSA4BAO6KPnfc6JZNGHQ4PPCpnmSwShW/0RsclyWxGQJeO0TNFvQ+GUwt5SMNtjxr6enJ5qomiDfiuMZelwDRwesCfrLlj5kFURUUUjnAS1aAnmht0MCYJgVq9cjHHS1QljzvGPx4TKV3OI2GjGpkbMCe2ASvDC7UwZ9QQGtiBF+AS/+4f0yiCErQY0W8yXSnXN4x6zeOZO7ZLYXtPpGCgEj8Ecc/3x6LMCQQMU9pThYEZsQMNGgJgKooYIj2IoZILh72icA";function oU(){const{data:n}=wM(),{data:e,isPending:t}=TM(),{selectedPlayers:r,setSelectedPlayers:i}=QR(),o=c=>{r.some(d=>d.id===c.id)?i(r.filter(d=>d.id!==c.id)):i([...r,c])},u=c=>{switch(c){case"tank":return ce.jsx("img",{src:sU,alt:"Tank",className:"w-4 h-4"},c);case"healer":return ce.jsx("img",{src:rU,alt:"Healer",className:"w-4 h-4"},c);case"dps":return ce.jsx("img",{src:iU,alt:"DPS",className:"w-4 h-4"},c);default:return""}};return t?ce.jsxs("div",{className:"flex flex-col gap-2 h-full grow justify-center items-center",children:[ce.jsx(I0,{className:"animate-spin",size:50}),ce.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]}):ce.jsx("div",{className:"flex flex-row gap-4",children:e==null?void 0:e.map(c=>{var d;return ce.jsxs(ZR,{className:Qn("cursor-pointer",{"bg-green-100":r.some(f=>f.id===c.id)}),onClick:()=>o(c),children:[ce.jsx(YR,{children:ce.jsx("h2",{className:"text-lg font-bold",children:c.name})}),ce.jsxs(JR,{children:[ce.jsxs("p",{children:["Rio Score: ",c.rioScore]}),ce.jsxs("p",{children:["Discord ID: ",c.discordId]})]}),ce.jsx(XR,{className:"text-sm cursor-default",children:((d=c.characterIds)==null?void 0:d.length)===0?ce.jsx("div",{className:"text-slate-400",children:"No characters"}):ce.jsxs(ce.Fragment,{children:[ce.jsx("h3",{className:"font-bold",children:"Characters"}),ce.jsxs(eU,{children:[ce.jsx(tU,{children:ce.jsxs(_0,{children:[ce.jsx(_u,{className:"text-left",children:"Class"}),ce.jsx(_u,{className:"text-left",children:"Roles"}),ce.jsx(_u,{className:"text-left",children:"iLvl"}),ce.jsx(_u,{className:"text-left",children:"Key"}),ce.jsx(_u,{className:"text-left",children:"Actions"})]})}),ce.jsx(nU,{children:n==null?void 0:n.filter(f=>f.playerId===c.id).map(f=>ce.jsxs(_0,{onClick:m=>m.stopPropagation(),children:[ce.jsx(yu,{children:lT.capitalize(f.class)}),ce.jsx(yu,{children:ce.jsx("div",{className:"flex flex-row gap-1",children:f.role.map(m=>u(m))})}),ce.jsx(yu,{children:f.ilvl}),ce.jsx(yu,{children:f.key}),ce.jsx(yu,{className:"text-right",children:ce.jsx(X9,{characterId:f.id})})]},f.id))})]})]})})]},c.id)})})}const cU=oU;export{cU as component};
